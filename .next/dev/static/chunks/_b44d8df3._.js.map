{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/src/components/Login/client.page.tsx"],"sourcesContent":["'use client'\nimport type { FormEvent } from 'react'\n\nimport { useRouter, useSearchParams } from 'next/navigation'\nimport React from 'react'\n\nimport './index.scss'\n\nconst baseClass = 'loginPage'\n\n// go to /tenant1/home\n// redirects to /tenant1/login?redirect=%2Ftenant1%2Fhome\n// login, uses slug to set payload-tenant cookie\n\ntype Props = {\n  tenantSlug?: string\n  tenantDomain?: string\n}\nexport const Login = ({ tenantSlug, tenantDomain }: Props) => {\n  const usernameRef = React.useRef<HTMLInputElement>(null)\n  const passwordRef = React.useRef<HTMLInputElement>(null)\n  const router = useRouter()\n  const searchParams = useSearchParams()\n\n  const handleSubmit = async (e: FormEvent) => {\n    e.preventDefault()\n    if (!usernameRef?.current?.value || !passwordRef?.current?.value) {\n      return\n    }\n    const actionRes = await fetch('/api/users/external-users/login', {\n      body: JSON.stringify({\n        password: passwordRef.current.value,\n        tenantSlug,\n        tenantDomain,\n        username: usernameRef.current.value,\n      }),\n      headers: {\n        'content-type': 'application/json',\n      },\n      method: 'post',\n    })\n    const json = await actionRes.json()\n\n    if (actionRes.status === 200 && json.user) {\n      const redirectTo = searchParams.get('redirect')\n      if (redirectTo) {\n        router.push(redirectTo)\n        return\n      } else {\n        if (tenantDomain) {\n          router.push('/tenant-domains')\n        } else {\n          router.push(`/tenant-slugs/${tenantSlug}`)\n        }\n      }\n    } else if (actionRes.status === 400 && json?.errors?.[0]?.message) {\n      window.alert(json.errors[0].message)\n    } else {\n      window.alert('Something went wrong, please try again.')\n    }\n  }\n\n  return (\n    <div className={baseClass}>\n      <form onSubmit={handleSubmit}>\n        <div>\n          <label>\n            Username\n            <input name=\"username\" ref={usernameRef} type=\"text\" />\n          </label>\n        </div>\n        <div>\n          <label>\n            Password\n            <input name=\"password\" ref={passwordRef} type=\"password\" />\n          </label>\n        </div>\n\n        <button type=\"submit\">Login</button>\n      </form>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAGA;AACA;;;AAJA;;;;AAQA,MAAM,YAAY;AAUX,MAAM,QAAQ,CAAC,EAAE,UAAU,EAAE,YAAY,EAAS;;IACvD,MAAM,cAAc,2UAAK,CAAC,MAAM,CAAmB;IACnD,MAAM,cAAc,2UAAK,CAAC,MAAM,CAAmB;IACnD,MAAM,SAAS,IAAA,qTAAS;IACxB,MAAM,eAAe,IAAA,2TAAe;IAEpC,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,IAAI,CAAC,aAAa,SAAS,SAAS,CAAC,aAAa,SAAS,OAAO;YAChE;QACF;QACA,MAAM,YAAY,MAAM,MAAM,mCAAmC;YAC/D,MAAM,KAAK,SAAS,CAAC;gBACnB,UAAU,YAAY,OAAO,CAAC,KAAK;gBACnC;gBACA;gBACA,UAAU,YAAY,OAAO,CAAC,KAAK;YACrC;YACA,SAAS;gBACP,gBAAgB;YAClB;YACA,QAAQ;QACV;QACA,MAAM,OAAO,MAAM,UAAU,IAAI;QAEjC,IAAI,UAAU,MAAM,KAAK,OAAO,KAAK,IAAI,EAAE;YACzC,MAAM,aAAa,aAAa,GAAG,CAAC;YACpC,IAAI,YAAY;gBACd,OAAO,IAAI,CAAC;gBACZ;YACF,OAAO;gBACL,IAAI,cAAc;oBAChB,OAAO,IAAI,CAAC;gBACd,OAAO;oBACL,OAAO,IAAI,CAAC,CAAC,cAAc,EAAE,YAAY;gBAC3C;YACF;QACF,OAAO,IAAI,UAAU,MAAM,KAAK,OAAO,MAAM,QAAQ,CAAC,EAAE,EAAE,SAAS;YACjE,OAAO,KAAK,CAAC,KAAK,MAAM,CAAC,EAAE,CAAC,OAAO;QACrC,OAAO;YACL,OAAO,KAAK,CAAC;QACf;IACF;IAEA,qBACE,gWAAC;QAAI,WAAW;kBACd,cAAA,gWAAC;YAAK,UAAU;;8BACd,gWAAC;8BACC,cAAA,gWAAC;;4BAAM;0CAEL,gWAAC;gCAAM,MAAK;gCAAW,KAAK;gCAAa,MAAK;;;;;;;;;;;;;;;;;8BAGlD,gWAAC;8BACC,cAAA,gWAAC;;4BAAM;0CAEL,gWAAC;gCAAM,MAAK;gCAAW,KAAK;gCAAa,MAAK;;;;;;;;;;;;;;;;;8BAIlD,gWAAC;oBAAO,MAAK;8BAAS;;;;;;;;;;;;;;;;;AAI9B;GAhEa;;QAGI,qTAAS;QACH,2TAAe;;;KAJzB"}},
    {"offset": {"line": 148, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/next%4016.1.0-canary.0_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0_sass%401.77.4/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0]}}]
}