module.exports = [
"[externals]/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-route-turbo.runtime.dev.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js"));

module.exports = mod;
}),
"[externals]/next/dist/compiled/@opentelemetry/api [external] (next/dist/compiled/@opentelemetry/api, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/compiled/@opentelemetry/api", () => require("next/dist/compiled/@opentelemetry/api"));

module.exports = mod;
}),
"[externals]/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-page-turbo.runtime.dev.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/work-unit-async-storage.external.js [external] (next/dist/server/app-render/work-unit-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/work-unit-async-storage.external.js", () => require("next/dist/server/app-render/work-unit-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/work-async-storage.external.js [external] (next/dist/server/app-render/work-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/work-async-storage.external.js", () => require("next/dist/server/app-render/work-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/shared/lib/no-fallback-error.external.js [external] (next/dist/shared/lib/no-fallback-error.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/shared/lib/no-fallback-error.external.js", () => require("next/dist/shared/lib/no-fallback-error.external.js"));

module.exports = mod;
}),
"[externals]/@payloadcms/db-postgres [external] (@payloadcms/db-postgres, esm_import)", ((__turbopack_context__) => {
"use strict";

return __turbopack_context__.a(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {

const mod = await __turbopack_context__.y("@payloadcms/db-postgres");

__turbopack_context__.n(mod);
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, true);}),
"[externals]/path [external] (path, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("path", () => require("path"));

module.exports = mod;
}),
"[externals]/url [external] (url, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("url", () => require("url"));

module.exports = mod;
}),
"[externals]/fs [external] (fs, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("fs", () => require("fs"));

module.exports = mod;
}),
"[externals]/module [external] (module, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("module", () => require("module"));

module.exports = mod;
}),
"[externals]/node:crypto [external] (node:crypto, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:crypto", () => require("node:crypto"));

module.exports = mod;
}),
"[externals]/stream [external] (stream, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("stream", () => require("stream"));

module.exports = mod;
}),
"[externals]/crypto [external] (crypto, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("crypto", () => require("crypto"));

module.exports = mod;
}),
"[externals]/child_process [external] (child_process, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("child_process", () => require("child_process"));

module.exports = mod;
}),
"[externals]/node:assert [external] (node:assert, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:assert", () => require("node:assert"));

module.exports = mod;
}),
"[externals]/node:fs [external] (node:fs, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:fs", () => require("node:fs"));

module.exports = mod;
}),
"[externals]/node:path [external] (node:path, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:path", () => require("node:path"));

module.exports = mod;
}),
"[externals]/node:os [external] (node:os, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:os", () => require("node:os"));

module.exports = mod;
}),
"[externals]/node:process [external] (node:process, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:process", () => require("node:process"));

module.exports = mod;
}),
"[externals]/node:buffer [external] (node:buffer, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:buffer", () => require("node:buffer"));

module.exports = mod;
}),
"[externals]/node:util [external] (node:util, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:util", () => require("node:util"));

module.exports = mod;
}),
"[externals]/node:stream/web [external] (node:stream/web, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:stream/web", () => require("node:stream/web"));

module.exports = mod;
}),
"[externals]/node:fs/promises [external] (node:fs/promises, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:fs/promises", () => require("node:fs/promises"));

module.exports = mod;
}),
"[externals]/fs/promises [external] (fs/promises, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("fs/promises", () => require("fs/promises"));

module.exports = mod;
}),
"[externals]/dns [external] (dns, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("dns", () => require("dns"));

module.exports = mod;
}),
"[externals]/node:http [external] (node:http, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:http", () => require("node:http"));

module.exports = mod;
}),
"[externals]/node:stream [external] (node:stream, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:stream", () => require("node:stream"));

module.exports = mod;
}),
"[externals]/node:net [external] (node:net, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:net", () => require("node:net"));

module.exports = mod;
}),
"[externals]/node:querystring [external] (node:querystring, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:querystring", () => require("node:querystring"));

module.exports = mod;
}),
"[externals]/node:events [external] (node:events, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:events", () => require("node:events"));

module.exports = mod;
}),
"[externals]/node:zlib [external] (node:zlib, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:zlib", () => require("node:zlib"));

module.exports = mod;
}),
"[externals]/node:perf_hooks [external] (node:perf_hooks, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:perf_hooks", () => require("node:perf_hooks"));

module.exports = mod;
}),
"[externals]/node:util/types [external] (node:util/types, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:util/types", () => require("node:util/types"));

module.exports = mod;
}),
"[externals]/node:worker_threads [external] (node:worker_threads, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:worker_threads", () => require("node:worker_threads"));

module.exports = mod;
}),
"[externals]/node:diagnostics_channel [external] (node:diagnostics_channel, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:diagnostics_channel", () => require("node:diagnostics_channel"));

module.exports = mod;
}),
"[externals]/node:tls [external] (node:tls, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:tls", () => require("node:tls"));

module.exports = mod;
}),
"[externals]/node:http2 [external] (node:http2, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:http2", () => require("node:http2"));

module.exports = mod;
}),
"[externals]/node:url [external] (node:url, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:url", () => require("node:url"));

module.exports = mod;
}),
"[externals]/node:async_hooks [external] (node:async_hooks, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:async_hooks", () => require("node:async_hooks"));

module.exports = mod;
}),
"[externals]/node:console [external] (node:console, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:console", () => require("node:console"));

module.exports = mod;
}),
"[externals]/node:dns [external] (node:dns, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:dns", () => require("node:dns"));

module.exports = mod;
}),
"[project]/src/utilities/extractID.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "extractID",
    ()=>extractID
]);
const extractID = (objectOrID)=>{
    if (objectOrID && typeof objectOrID === 'object') return objectOrID.id;
    return objectOrID;
};
}),
"[project]/src/utilities/getUserTenantIDs.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "getUserTenantIDs",
    ()=>getUserTenantIDs
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$utilities$2f$extractID$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/utilities/extractID.ts [app-route] (ecmascript)");
;
const getUserTenantIDs = (user, role)=>{
    if (!user) {
        return [];
    }
    return user?.tenants?.reduce((acc, { roles, tenant })=>{
        if (role && !roles.includes(role)) {
            return acc;
        }
        if (tenant) {
            acc.push((0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$utilities$2f$extractID$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["extractID"])(tenant));
        }
        return acc;
    }, []) || [];
};
}),
"[project]/src/collections/Pages/hooks/ensureUniqueSlug.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "ensureUniqueSlug",
    ()=>ensureUniqueSlug
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$payload$40$3$2e$64$2e$0_graphql$40$16$2e$12$2e$0_typescript$40$5$2e$5$2e$2$2f$node_modules$2f$payload$2f$dist$2f$errors$2f$ValidationError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/payload@3.64.0_graphql@16.12.0_typescript@5.5.2/node_modules/payload/dist/errors/ValidationError.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$utilities$2f$getUserTenantIDs$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/utilities/getUserTenantIDs.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$utilities$2f$extractID$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/utilities/extractID.ts [app-route] (ecmascript)");
;
;
;
const ensureUniqueSlug = async ({ data, originalDoc, req, value })=>{
    // if value is unchanged, skip validation
    if (originalDoc.slug === value) {
        return value;
    }
    const constraints = [
        {
            slug: {
                equals: value
            }
        }
    ];
    const incomingTenantID = (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$utilities$2f$extractID$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["extractID"])(data?.tenant);
    const currentTenantID = (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$utilities$2f$extractID$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["extractID"])(originalDoc?.tenant);
    const tenantIDToMatch = incomingTenantID || currentTenantID;
    if (tenantIDToMatch) {
        constraints.push({
            tenant: {
                equals: tenantIDToMatch
            }
        });
    }
    const findDuplicatePages = await req.payload.find({
        collection: 'pages',
        where: {
            and: constraints
        }
    });
    if (findDuplicatePages.docs.length > 0 && req.user) {
        const tenantIDs = (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$utilities$2f$getUserTenantIDs$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getUserTenantIDs"])(req.user);
        // if the user is an admin or has access to more than 1 tenant
        // provide a more specific error message
        if (req.user.roles?.includes('super-admin') || tenantIDs.length > 1) {
            const attemptedTenantChange = await req.payload.findByID({
                id: tenantIDToMatch,
                collection: 'tenants'
            });
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$payload$40$3$2e$64$2e$0_graphql$40$16$2e$12$2e$0_typescript$40$5$2e$5$2e$2$2f$node_modules$2f$payload$2f$dist$2f$errors$2f$ValidationError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["ValidationError"]({
                errors: [
                    {
                        message: `The "${attemptedTenantChange.name}" tenant already has a page with the slug "${value}". Slugs must be unique per tenant.`,
                        path: 'slug'
                    }
                ]
            });
        }
        throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$payload$40$3$2e$64$2e$0_graphql$40$16$2e$12$2e$0_typescript$40$5$2e$5$2e$2$2f$node_modules$2f$payload$2f$dist$2f$errors$2f$ValidationError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["ValidationError"]({
            errors: [
                {
                    message: `A page with the slug ${value} already exists. Slug must be unique per tenant.`,
                    path: 'slug'
                }
            ]
        });
    }
    return value;
};
}),
"[project]/src/access/isSuperAdmin.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "hasSuperAdminAccess",
    ()=>hasSuperAdminAccess,
    "isSuperAdmin",
    ()=>isSuperAdmin
]);
const hasSuperAdminAccess = ({ req })=>{
    return isSuperAdmin(req.user);
};
const isSuperAdmin = (user)=>{
    return Boolean(user?.roles?.includes('super-admin'));
};
}),
"[project]/src/access/superAdminOrTenantAdmin.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "hasSuperAdminOrAdminAccess",
    ()=>hasSuperAdminOrAdminAccess
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$utilities$2f$getUserTenantIDs$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/utilities/getUserTenantIDs.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$access$2f$isSuperAdmin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/access/isSuperAdmin.ts [app-route] (ecmascript)");
;
;
const hasSuperAdminOrAdminAccess = ({ req })=>{
    if (!req.user) {
        return false;
    }
    if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$access$2f$isSuperAdmin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["isSuperAdmin"])(req.user)) {
        return true;
    }
    const adminTenantAccessIDs = (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$utilities$2f$getUserTenantIDs$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getUserTenantIDs"])(req.user, 'tenant-admin');
    const requestedTenant = req?.data?.tenant;
    if (requestedTenant && adminTenantAccessIDs.includes(requestedTenant)) {
        return true;
    }
    return false;
};
}),
"[project]/src/collections/Pages/index.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "Pages",
    ()=>Pages
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$collections$2f$Pages$2f$hooks$2f$ensureUniqueSlug$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/collections/Pages/hooks/ensureUniqueSlug.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$access$2f$superAdminOrTenantAdmin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/access/superAdminOrTenantAdmin.ts [app-route] (ecmascript)");
;
;
const Pages = {
    slug: 'pages',
    access: {
        create: __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$access$2f$superAdminOrTenantAdmin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["hasSuperAdminOrAdminAccess"],
        delete: __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$access$2f$superAdminOrTenantAdmin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["hasSuperAdminOrAdminAccess"],
        read: ()=>true,
        update: __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$access$2f$superAdminOrTenantAdmin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["hasSuperAdminOrAdminAccess"]
    },
    admin: {
        useAsTitle: 'title'
    },
    fields: [
        {
            name: 'title',
            type: 'text'
        },
        {
            name: 'slug',
            type: 'text',
            defaultValue: 'home',
            hooks: {
                beforeValidate: [
                    __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$collections$2f$Pages$2f$hooks$2f$ensureUniqueSlug$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["ensureUniqueSlug"]
                ]
            },
            index: true
        }
    ]
};
}),
"[project]/src/collections/Tenants/access/updateAndDelete.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "updateAndDeleteAccess",
    ()=>updateAndDeleteAccess
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$access$2f$isSuperAdmin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/access/isSuperAdmin.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$utilities$2f$getUserTenantIDs$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/utilities/getUserTenantIDs.ts [app-route] (ecmascript)");
;
;
const updateAndDeleteAccess = ({ req })=>{
    if (!req.user) {
        return false;
    }
    if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$access$2f$isSuperAdmin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["isSuperAdmin"])(req.user)) {
        return true;
    }
    return {
        id: {
            in: (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$utilities$2f$getUserTenantIDs$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getUserTenantIDs"])(req.user, 'tenant-admin')
        }
    };
};
}),
"[project]/src/collections/Tenants/index.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "Tenants",
    ()=>Tenants
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$access$2f$isSuperAdmin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/access/isSuperAdmin.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$collections$2f$Tenants$2f$access$2f$updateAndDelete$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/collections/Tenants/access/updateAndDelete.ts [app-route] (ecmascript)");
;
;
const Tenants = {
    slug: 'tenants',
    access: {
        create: __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$access$2f$isSuperAdmin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["hasSuperAdminAccess"],
        delete: __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$collections$2f$Tenants$2f$access$2f$updateAndDelete$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["updateAndDeleteAccess"],
        read: ({ req })=>Boolean(req.user),
        update: __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$collections$2f$Tenants$2f$access$2f$updateAndDelete$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["updateAndDeleteAccess"]
    },
    admin: {
        useAsTitle: 'name'
    },
    fields: [
        {
            name: 'name',
            type: 'text',
            required: true
        },
        {
            name: 'domain',
            type: 'text',
            admin: {
                description: 'Used for domain-based tenant handling'
            }
        },
        {
            name: 'slug',
            type: 'text',
            admin: {
                description: 'Used for url paths, example: /tenant-slug/page-slug'
            },
            index: true,
            required: true
        },
        {
            name: 'allowPublicRead',
            type: 'checkbox',
            admin: {
                description: 'If checked, logging in is not required to read. Useful for building public pages.',
                position: 'sidebar'
            },
            defaultValue: false,
            index: true
        }
    ]
};
}),
"[project]/src/collections/Users/access/create.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "createAccess",
    ()=>createAccess
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$access$2f$isSuperAdmin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/access/isSuperAdmin.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$utilities$2f$getUserTenantIDs$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/utilities/getUserTenantIDs.ts [app-route] (ecmascript)");
;
;
const createAccess = ({ req })=>{
    if (!req.user) {
        return false;
    }
    if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$access$2f$isSuperAdmin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["isSuperAdmin"])(req.user)) {
        return true;
    }
    if (!(0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$access$2f$isSuperAdmin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["isSuperAdmin"])(req.user) && req.data?.roles?.includes('super-admin')) {
        return false;
    }
    const adminTenantAccessIDs = (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$utilities$2f$getUserTenantIDs$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getUserTenantIDs"])(req.user, 'tenant-admin');
    const requestedTenants = req.data?.tenants?.map((t)=>t.tenant) ?? [];
    const hasAccessToAllRequestedTenants = requestedTenants.every((tenantID)=>adminTenantAccessIDs.includes(tenantID));
    if (hasAccessToAllRequestedTenants) {
        return true;
    }
    return false;
};
}),
"[project]/src/collections/Users/access/isAccessingSelf.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "isAccessingSelf",
    ()=>isAccessingSelf
]);
const isAccessingSelf = ({ id, user })=>{
    return user ? Boolean(user.id === id) : false;
};
}),
"[project]/src/utilities/getCollectionIDType.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "getCollectionIDType",
    ()=>getCollectionIDType
]);
const getCollectionIDType = ({ collectionSlug, payload })=>{
    return payload.collections[collectionSlug]?.customIDType ?? payload.db.defaultIDType;
};
}),
"[project]/src/collections/Users/access/read.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "readAccess",
    ()=>readAccess
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$payloadcms$2b$plugin$2d$multi$2d$tenant$40$3$2e$64$2e$0_$40$payloadcms$2b$ui$40$3$2e$64$2e$0_$40$types$2b$react$40$19$2e$0$2e$1_monaco_0db2168b1601ae0f38a41a11a8f43018$2f$node_modules$2f40$payloadcms$2f$plugin$2d$multi$2d$tenant$2f$dist$2f$utilities$2f$getTenantFromCookie$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/@payloadcms+plugin-multi-tenant@3.64.0_@payloadcms+ui@3.64.0_@types+react@19.0.1_monaco_0db2168b1601ae0f38a41a11a8f43018/node_modules/@payloadcms/plugin-multi-tenant/dist/utilities/getTenantFromCookie.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$access$2f$isSuperAdmin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/access/isSuperAdmin.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$utilities$2f$getUserTenantIDs$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/utilities/getUserTenantIDs.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$collections$2f$Users$2f$access$2f$isAccessingSelf$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/collections/Users/access/isAccessingSelf.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$utilities$2f$getCollectionIDType$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/utilities/getCollectionIDType.ts [app-route] (ecmascript)");
;
;
;
;
;
const readAccess = ({ req, id })=>{
    if (!req?.user) {
        return false;
    }
    if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$collections$2f$Users$2f$access$2f$isAccessingSelf$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["isAccessingSelf"])({
        id,
        user: req.user
    })) {
        return true;
    }
    const superAdmin = (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$access$2f$isSuperAdmin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["isSuperAdmin"])(req.user);
    const selectedTenant = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$payloadcms$2b$plugin$2d$multi$2d$tenant$40$3$2e$64$2e$0_$40$payloadcms$2b$ui$40$3$2e$64$2e$0_$40$types$2b$react$40$19$2e$0$2e$1_monaco_0db2168b1601ae0f38a41a11a8f43018$2f$node_modules$2f40$payloadcms$2f$plugin$2d$multi$2d$tenant$2f$dist$2f$utilities$2f$getTenantFromCookie$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getTenantFromCookie"])(req.headers, (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$utilities$2f$getCollectionIDType$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getCollectionIDType"])({
        payload: req.payload,
        collectionSlug: 'tenants'
    }));
    const adminTenantAccessIDs = (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$utilities$2f$getUserTenantIDs$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getUserTenantIDs"])(req.user, 'tenant-admin');
    if (selectedTenant) {
        // If it's a super admin, or they have access to the tenant ID set in cookie
        const hasTenantAccess = adminTenantAccessIDs.some((id)=>id === selectedTenant);
        if (superAdmin || hasTenantAccess) {
            return {
                'tenants.tenant': {
                    equals: selectedTenant
                }
            };
        }
    }
    if (superAdmin) {
        return true;
    }
    return {
        or: [
            {
                id: {
                    equals: req.user.id
                }
            },
            {
                'tenants.tenant': {
                    in: adminTenantAccessIDs
                }
            }
        ]
    };
};
}),
"[project]/src/collections/Users/access/updateAndDelete.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "updateAndDeleteAccess",
    ()=>updateAndDeleteAccess
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$utilities$2f$getUserTenantIDs$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/utilities/getUserTenantIDs.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$access$2f$isSuperAdmin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/access/isSuperAdmin.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$collections$2f$Users$2f$access$2f$isAccessingSelf$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/collections/Users/access/isAccessingSelf.ts [app-route] (ecmascript)");
;
;
;
const updateAndDeleteAccess = ({ req, id })=>{
    const { user } = req;
    if (!user) {
        return false;
    }
    if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$access$2f$isSuperAdmin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["isSuperAdmin"])(user) || (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$collections$2f$Users$2f$access$2f$isAccessingSelf$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["isAccessingSelf"])({
        user,
        id
    })) {
        return true;
    }
    /**
   * Constrains update and delete access to users that belong
   * to the same tenant as the tenant-admin making the request
   *
   * You may want to take this a step further with a beforeChange
   * hook to ensure that the a tenant-admin can only remove users
   * from their own tenant in the tenants array.
   */ return {
        'tenants.tenant': {
            in: (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$utilities$2f$getUserTenantIDs$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getUserTenantIDs"])(user, 'tenant-admin')
        }
    };
};
}),
"[externals]/events [external] (events, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("events", () => require("events"));

module.exports = mod;
}),
"[externals]/https [external] (https, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("https", () => require("https"));

module.exports = mod;
}),
"[externals]/http [external] (http, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("http", () => require("http"));

module.exports = mod;
}),
"[externals]/net [external] (net, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("net", () => require("net"));

module.exports = mod;
}),
"[externals]/tls [external] (tls, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("tls", () => require("tls"));

module.exports = mod;
}),
"[externals]/zlib [external] (zlib, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("zlib", () => require("zlib"));

module.exports = mod;
}),
"[externals]/buffer [external] (buffer, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("buffer", () => require("buffer"));

module.exports = mod;
}),
"[externals]/worker_threads [external] (worker_threads, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("worker_threads", () => require("worker_threads"));

module.exports = mod;
}),
"[externals]/assert [external] (assert, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("assert", () => require("assert"));

module.exports = mod;
}),
"[externals]/util [external] (util, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("util", () => require("util"));

module.exports = mod;
}),
"[externals]/tty [external] (tty, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("tty", () => require("tty"));

module.exports = mod;
}),
"[externals]/string_decoder [external] (string_decoder, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("string_decoder", () => require("string_decoder"));

module.exports = mod;
}),
"[project]/src/collections/Users/endpoints/externalUsersLogin.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "externalUsersLogin",
    ()=>externalUsersLogin
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$payloadcms$2b$next$40$3$2e$64$2e$0_$40$types$2b$react$40$19$2e$0$2e$1_graphql$40$16$2e$12$2e$0_monaco$2d$editor$40$0$2e$55$2e$1_next$40$1_e7a6815e9254f7c7cc1d038994d043b1$2f$node_modules$2f40$payloadcms$2f$next$2f$dist$2f$exports$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/@payloadcms+next@3.64.0_@types+react@19.0.1_graphql@16.12.0_monaco-editor@0.55.1_next@1_e7a6815e9254f7c7cc1d038994d043b1/node_modules/@payloadcms/next/dist/exports/utilities.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$payload$40$3$2e$64$2e$0_graphql$40$16$2e$12$2e$0_typescript$40$5$2e$5$2e$2$2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/payload@3.64.0_graphql@16.12.0_typescript@5.5.2/node_modules/payload/dist/errors/APIError.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$payload$40$3$2e$64$2e$0_graphql$40$16$2e$12$2e$0_typescript$40$5$2e$5$2e$2$2f$node_modules$2f$payload$2f$dist$2f$auth$2f$cookies$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/payload@3.64.0_graphql@16.12.0_typescript@5.5.2/node_modules/payload/dist/auth/cookies.js [app-route] (ecmascript)");
;
;
const externalUsersLogin = {
    handler: async (req)=>{
        let data = {};
        try {
            if (typeof req.json === 'function') {
                data = await req.json();
            }
        } catch (error) {
        // swallow error, data is already empty object
        }
        const { password, tenantSlug, tenantDomain, username } = data;
        if (!username || !password) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$payload$40$3$2e$64$2e$0_graphql$40$16$2e$12$2e$0_typescript$40$5$2e$5$2e$2$2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["APIError"]('Username and Password are required for login.', 400, null, true);
        }
        const fullTenant = (await req.payload.find({
            collection: 'tenants',
            where: tenantDomain ? {
                domain: {
                    equals: tenantDomain
                }
            } : {
                slug: {
                    equals: tenantSlug
                }
            }
        })).docs[0];
        const foundUser = await req.payload.find({
            collection: 'users',
            where: {
                or: [
                    {
                        and: [
                            {
                                email: {
                                    equals: username
                                }
                            },
                            {
                                'tenants.tenant': {
                                    equals: fullTenant.id
                                }
                            }
                        ]
                    },
                    {
                        and: [
                            {
                                username: {
                                    equals: username
                                }
                            },
                            {
                                'tenants.tenant': {
                                    equals: fullTenant.id
                                }
                            }
                        ]
                    }
                ]
            }
        });
        if (foundUser.totalDocs > 0) {
            try {
                const loginAttempt = await req.payload.login({
                    collection: 'users',
                    data: {
                        email: foundUser.docs[0].email,
                        password
                    },
                    req
                });
                if (loginAttempt?.token) {
                    const collection = req.payload.collections['users'];
                    const cookie = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$payload$40$3$2e$64$2e$0_graphql$40$16$2e$12$2e$0_typescript$40$5$2e$5$2e$2$2f$node_modules$2f$payload$2f$dist$2f$auth$2f$cookies$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["generatePayloadCookie"])({
                        collectionAuthConfig: collection.config.auth,
                        cookiePrefix: req.payload.config.cookiePrefix,
                        token: loginAttempt.token
                    });
                    return Response.json(loginAttempt, {
                        headers: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$payloadcms$2b$next$40$3$2e$64$2e$0_$40$types$2b$react$40$19$2e$0$2e$1_graphql$40$16$2e$12$2e$0_monaco$2d$editor$40$0$2e$55$2e$1_next$40$1_e7a6815e9254f7c7cc1d038994d043b1$2f$node_modules$2f40$payloadcms$2f$next$2f$dist$2f$exports$2f$utilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__["headersWithCors"])({
                            headers: new Headers({
                                'Set-Cookie': cookie
                            }),
                            req
                        }),
                        status: 200
                    });
                }
                throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$payload$40$3$2e$64$2e$0_graphql$40$16$2e$12$2e$0_typescript$40$5$2e$5$2e$2$2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["APIError"]('Unable to login with the provided username and password.', 400, null, true);
            } catch (e) {
                throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$payload$40$3$2e$64$2e$0_graphql$40$16$2e$12$2e$0_typescript$40$5$2e$5$2e$2$2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["APIError"]('Unable to login with the provided username and password.', 400, null, true);
            }
        }
        throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$payload$40$3$2e$64$2e$0_graphql$40$16$2e$12$2e$0_typescript$40$5$2e$5$2e$2$2f$node_modules$2f$payload$2f$dist$2f$errors$2f$APIError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["APIError"]('Unable to login with the provided username and password.', 400, null, true);
    },
    method: 'post',
    path: '/external-users/login'
};
}),
"[project]/src/collections/Users/hooks/ensureUniqueUsername.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "ensureUniqueUsername",
    ()=>ensureUniqueUsername
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$payload$40$3$2e$64$2e$0_graphql$40$16$2e$12$2e$0_typescript$40$5$2e$5$2e$2$2f$node_modules$2f$payload$2f$dist$2f$errors$2f$ValidationError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/payload@3.64.0_graphql@16.12.0_typescript@5.5.2/node_modules/payload/dist/errors/ValidationError.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$utilities$2f$getUserTenantIDs$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/utilities/getUserTenantIDs.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$payloadcms$2b$plugin$2d$multi$2d$tenant$40$3$2e$64$2e$0_$40$payloadcms$2b$ui$40$3$2e$64$2e$0_$40$types$2b$react$40$19$2e$0$2e$1_monaco_0db2168b1601ae0f38a41a11a8f43018$2f$node_modules$2f40$payloadcms$2f$plugin$2d$multi$2d$tenant$2f$dist$2f$utilities$2f$getTenantFromCookie$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/@payloadcms+plugin-multi-tenant@3.64.0_@payloadcms+ui@3.64.0_@types+react@19.0.1_monaco_0db2168b1601ae0f38a41a11a8f43018/node_modules/@payloadcms/plugin-multi-tenant/dist/utilities/getTenantFromCookie.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$utilities$2f$getCollectionIDType$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/utilities/getCollectionIDType.ts [app-route] (ecmascript)");
;
;
;
;
const ensureUniqueUsername = async ({ data, originalDoc, req, value })=>{
    // if value is unchanged, skip validation
    if (originalDoc.username === value) {
        return value;
    }
    const constraints = [
        {
            username: {
                equals: value
            }
        }
    ];
    const selectedTenant = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$payloadcms$2b$plugin$2d$multi$2d$tenant$40$3$2e$64$2e$0_$40$payloadcms$2b$ui$40$3$2e$64$2e$0_$40$types$2b$react$40$19$2e$0$2e$1_monaco_0db2168b1601ae0f38a41a11a8f43018$2f$node_modules$2f40$payloadcms$2f$plugin$2d$multi$2d$tenant$2f$dist$2f$utilities$2f$getTenantFromCookie$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getTenantFromCookie"])(req.headers, (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$utilities$2f$getCollectionIDType$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getCollectionIDType"])({
        payload: req.payload,
        collectionSlug: 'tenants'
    }));
    if (selectedTenant) {
        constraints.push({
            'tenants.tenant': {
                equals: selectedTenant
            }
        });
    }
    const findDuplicateUsers = await req.payload.find({
        collection: 'users',
        where: {
            and: constraints
        }
    });
    if (findDuplicateUsers.docs.length > 0 && req.user) {
        const tenantIDs = (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$utilities$2f$getUserTenantIDs$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getUserTenantIDs"])(req.user);
        // if the user is an admin or has access to more than 1 tenant
        // provide a more specific error message
        if (req.user.roles?.includes('super-admin') || tenantIDs.length > 1) {
            const attemptedTenantChange = await req.payload.findByID({
                // @ts-ignore - selectedTenant will match DB ID type
                id: selectedTenant,
                collection: 'tenants'
            });
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$payload$40$3$2e$64$2e$0_graphql$40$16$2e$12$2e$0_typescript$40$5$2e$5$2e$2$2f$node_modules$2f$payload$2f$dist$2f$errors$2f$ValidationError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["ValidationError"]({
                errors: [
                    {
                        message: `The "${attemptedTenantChange.name}" tenant already has a user with the username "${value}". Usernames must be unique per tenant.`,
                        path: 'username'
                    }
                ]
            });
        }
        throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$payload$40$3$2e$64$2e$0_graphql$40$16$2e$12$2e$0_typescript$40$5$2e$5$2e$2$2f$node_modules$2f$payload$2f$dist$2f$errors$2f$ValidationError$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["ValidationError"]({
            errors: [
                {
                    message: `A user with the username ${value} already exists. Usernames must be unique per tenant.`,
                    path: 'username'
                }
            ]
        });
    }
    return value;
};
}),
"[project]/src/collections/Users/hooks/setCookieBasedOnDomain.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "setCookieBasedOnDomain",
    ()=>setCookieBasedOnDomain
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$payload$40$3$2e$64$2e$0_graphql$40$16$2e$12$2e$0_typescript$40$5$2e$5$2e$2$2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$mergeHeaders$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/payload@3.64.0_graphql@16.12.0_typescript@5.5.2/node_modules/payload/dist/utilities/mergeHeaders.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$payload$40$3$2e$64$2e$0_graphql$40$16$2e$12$2e$0_typescript$40$5$2e$5$2e$2$2f$node_modules$2f$payload$2f$dist$2f$auth$2f$cookies$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/payload@3.64.0_graphql@16.12.0_typescript@5.5.2/node_modules/payload/dist/auth/cookies.js [app-route] (ecmascript)");
;
const setCookieBasedOnDomain = async ({ req, user })=>{
    const relatedOrg = await req.payload.find({
        collection: 'tenants',
        depth: 0,
        limit: 1,
        where: {
            domain: {
                equals: req.headers.get('host')
            }
        }
    });
    // If a matching tenant is found, set the 'payload-tenant' cookie
    if (relatedOrg && relatedOrg.docs.length > 0) {
        const tenantCookie = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$payload$40$3$2e$64$2e$0_graphql$40$16$2e$12$2e$0_typescript$40$5$2e$5$2e$2$2f$node_modules$2f$payload$2f$dist$2f$auth$2f$cookies$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["generateCookie"])({
            name: 'payload-tenant',
            expires: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$payload$40$3$2e$64$2e$0_graphql$40$16$2e$12$2e$0_typescript$40$5$2e$5$2e$2$2f$node_modules$2f$payload$2f$dist$2f$auth$2f$cookies$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getCookieExpiration"])({
                seconds: 7200
            }),
            path: '/',
            returnCookieAsObject: false,
            value: String(relatedOrg.docs[0].id)
        });
        // Merge existing responseHeaders with the new Set-Cookie header
        const newHeaders = new Headers({
            'Set-Cookie': tenantCookie
        });
        // Ensure you merge existing response headers if they already exist
        req.responseHeaders = req.responseHeaders ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$payload$40$3$2e$64$2e$0_graphql$40$16$2e$12$2e$0_typescript$40$5$2e$5$2e$2$2f$node_modules$2f$payload$2f$dist$2f$utilities$2f$mergeHeaders$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["mergeHeaders"])(req.responseHeaders, newHeaders) : newHeaders;
    }
    return user;
};
}),
"[project]/src/collections/Users/index.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "default",
    ()=>__TURBOPACK__default__export__
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$collections$2f$Users$2f$access$2f$create$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/collections/Users/access/create.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$collections$2f$Users$2f$access$2f$read$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/collections/Users/access/read.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$collections$2f$Users$2f$access$2f$updateAndDelete$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/collections/Users/access/updateAndDelete.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$collections$2f$Users$2f$endpoints$2f$externalUsersLogin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/collections/Users/endpoints/externalUsersLogin.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$collections$2f$Users$2f$hooks$2f$ensureUniqueUsername$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/collections/Users/hooks/ensureUniqueUsername.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$access$2f$isSuperAdmin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/access/isSuperAdmin.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$collections$2f$Users$2f$hooks$2f$setCookieBasedOnDomain$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/collections/Users/hooks/setCookieBasedOnDomain.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$payloadcms$2b$plugin$2d$multi$2d$tenant$40$3$2e$64$2e$0_$40$payloadcms$2b$ui$40$3$2e$64$2e$0_$40$types$2b$react$40$19$2e$0$2e$1_monaco_0db2168b1601ae0f38a41a11a8f43018$2f$node_modules$2f40$payloadcms$2f$plugin$2d$multi$2d$tenant$2f$dist$2f$fields$2f$tenantsArrayField$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/@payloadcms+plugin-multi-tenant@3.64.0_@payloadcms+ui@3.64.0_@types+react@19.0.1_monaco_0db2168b1601ae0f38a41a11a8f43018/node_modules/@payloadcms/plugin-multi-tenant/dist/fields/tenantsArrayField/index.js [app-route] (ecmascript)");
;
;
;
;
;
;
;
;
const defaultTenantArrayField = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$payloadcms$2b$plugin$2d$multi$2d$tenant$40$3$2e$64$2e$0_$40$payloadcms$2b$ui$40$3$2e$64$2e$0_$40$types$2b$react$40$19$2e$0$2e$1_monaco_0db2168b1601ae0f38a41a11a8f43018$2f$node_modules$2f40$payloadcms$2f$plugin$2d$multi$2d$tenant$2f$dist$2f$fields$2f$tenantsArrayField$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["tenantsArrayField"])({
    tenantsArrayFieldName: 'tenants',
    tenantsArrayTenantFieldName: 'tenant',
    tenantsCollectionSlug: 'tenants',
    arrayFieldAccess: {},
    tenantFieldAccess: {},
    rowFields: [
        {
            name: 'roles',
            type: 'select',
            defaultValue: [
                'tenant-viewer'
            ],
            hasMany: true,
            options: [
                'tenant-admin',
                'tenant-viewer'
            ],
            required: true,
            access: {
                update: ({ req })=>{
                    const { user } = req;
                    if (!user) {
                        return false;
                    }
                    if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$access$2f$isSuperAdmin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["isSuperAdmin"])(user)) {
                        return true;
                    }
                    return true;
                }
            }
        }
    ]
});
const Users = {
    slug: 'users',
    access: {
        create: __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$collections$2f$Users$2f$access$2f$create$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createAccess"],
        delete: __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$collections$2f$Users$2f$access$2f$updateAndDelete$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["updateAndDeleteAccess"],
        read: __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$collections$2f$Users$2f$access$2f$read$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["readAccess"],
        update: __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$collections$2f$Users$2f$access$2f$updateAndDelete$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["updateAndDeleteAccess"]
    },
    admin: {
        useAsTitle: 'email'
    },
    auth: true,
    endpoints: [
        __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$collections$2f$Users$2f$endpoints$2f$externalUsersLogin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["externalUsersLogin"]
    ],
    fields: [
        {
            type: 'text',
            name: 'password',
            hidden: true,
            access: {
                read: ()=>false,
                update: ({ req, id })=>{
                    const { user } = req;
                    if (!user) {
                        return false;
                    }
                    if (id === user.id) {
                        // Allow user to update their own password
                        return true;
                    }
                    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$access$2f$isSuperAdmin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["isSuperAdmin"])(user);
                }
            }
        },
        {
            admin: {
                position: 'sidebar'
            },
            name: 'roles',
            type: 'select',
            defaultValue: [
                'user'
            ],
            hasMany: true,
            options: [
                'super-admin',
                'user'
            ],
            access: {
                update: ({ req })=>{
                    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$access$2f$isSuperAdmin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["isSuperAdmin"])(req.user);
                }
            }
        },
        {
            name: 'username',
            type: 'text',
            hooks: {
                beforeValidate: [
                    __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$collections$2f$Users$2f$hooks$2f$ensureUniqueUsername$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["ensureUniqueUsername"]
                ]
            },
            index: true
        },
        {
            ...defaultTenantArrayField,
            admin: {
                ...defaultTenantArrayField?.admin || {},
                position: 'sidebar'
            }
        }
    ],
    // The following hook sets a cookie based on the domain a user logs in from.
    // It checks the domain and matches it to a tenant in the system, then sets
    // a 'payload-tenant' cookie for that tenant.
    hooks: {
        afterLogin: [
            __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$collections$2f$Users$2f$hooks$2f$setCookieBasedOnDomain$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["setCookieBasedOnDomain"]
        ]
    }
};
const __TURBOPACK__default__export__ = Users;
}),
"[project]/src/utilities/deepMerge.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

// eslint-disable-next-line @typescript-eslint/ban-ts-comment
// @ts-nocheck
/**
 * Simple object check.
 * @param item
 * @returns {boolean}
 */ __turbopack_context__.s([
    "default",
    ()=>deepMerge,
    "isObject",
    ()=>isObject
]);
function isObject(item) {
    return typeof item === 'object' && !Array.isArray(item);
}
function deepMerge(target, source) {
    const output = {
        ...target
    };
    if (isObject(target) && isObject(source)) {
        Object.keys(source).forEach((key)=>{
            if (isObject(source[key])) {
                if (!(key in target)) {
                    Object.assign(output, {
                        [key]: source[key]
                    });
                } else {
                    output[key] = deepMerge(target[key], source[key]);
                }
            } else {
                Object.assign(output, {
                    [key]: source[key]
                });
            }
        });
    }
    return output;
}
}),
"[project]/src/fields/link.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "appearanceOptions",
    ()=>appearanceOptions,
    "link",
    ()=>link
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$utilities$2f$deepMerge$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/utilities/deepMerge.ts [app-route] (ecmascript)");
;
const appearanceOptions = {
    default: {
        label: 'Default',
        value: 'default'
    },
    outline: {
        label: 'Outline',
        value: 'outline'
    }
};
const link = ({ appearances, disableLabel = false, overrides = {} } = {})=>{
    const linkResult = {
        name: 'link',
        type: 'group',
        admin: {
            hideGutter: true
        },
        fields: [
            {
                type: 'row',
                fields: [
                    {
                        name: 'type',
                        type: 'radio',
                        admin: {
                            layout: 'horizontal',
                            width: '50%'
                        },
                        defaultValue: 'reference',
                        options: [
                            {
                                label: 'Internal link',
                                value: 'reference'
                            },
                            {
                                label: 'Custom URL',
                                value: 'custom'
                            }
                        ]
                    },
                    {
                        name: 'newTab',
                        type: 'checkbox',
                        admin: {
                            style: {
                                alignSelf: 'flex-end'
                            },
                            width: '50%'
                        },
                        label: 'Open in new tab'
                    }
                ]
            }
        ]
    };
    const linkTypes = [
        {
            name: 'reference',
            type: 'relationship',
            admin: {
                condition: (_, siblingData)=>siblingData?.type === 'reference'
            },
            label: 'Document to link to',
            relationTo: [
                'pages'
            ],
            required: true
        },
        {
            name: 'url',
            type: 'text',
            admin: {
                condition: (_, siblingData)=>siblingData?.type === 'custom'
            },
            label: 'Custom URL',
            required: true
        }
    ];
    if (!disableLabel) {
        linkTypes.map((linkType)=>({
                ...linkType,
                admin: {
                    ...linkType.admin,
                    width: '50%'
                }
            }));
        linkResult.fields.push({
            type: 'row',
            fields: [
                ...linkTypes,
                {
                    name: 'label',
                    type: 'text',
                    admin: {
                        width: '50%'
                    },
                    label: 'Label',
                    required: true
                }
            ]
        });
    } else {
        linkResult.fields = [
            ...linkResult.fields,
            ...linkTypes
        ];
    }
    if (appearances !== false) {
        let appearanceOptionsToUse = [
            appearanceOptions.default,
            appearanceOptions.outline
        ];
        if (appearances) {
            appearanceOptionsToUse = appearances.map((appearance)=>appearanceOptions[appearance]);
        }
        linkResult.fields.push({
            name: 'appearance',
            type: 'select',
            admin: {
                description: 'Choose how the link should be rendered.'
            },
            defaultValue: 'default',
            options: appearanceOptionsToUse
        });
    }
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$utilities$2f$deepMerge$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"])(linkResult, overrides);
};
}),
"[project]/src/Footer/hooks/revalidateFooter.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "revalidateFooter",
    ()=>revalidateFooter
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$16$2e$1$2e$0$2d$canary$2e$0_react$2d$dom$40$19$2e$0$2e$0_react$40$19$2e$0$2e$0_$5f$react$40$19$2e$0$2e$0_sass$40$1$2e$77$2e$4$2f$node_modules$2f$next$2f$cache$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/next@16.1.0-canary.0_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/cache.js [app-route] (ecmascript)");
;
const revalidateFooter = ({ doc, req: { payload, context } })=>{
    if (!context.disableRevalidate) {
        payload.logger.info(`Revalidating footer`);
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$16$2e$1$2e$0$2d$canary$2e$0_react$2d$dom$40$19$2e$0$2e$0_react$40$19$2e$0$2e$0_$5f$react$40$19$2e$0$2e$0_sass$40$1$2e$77$2e$4$2f$node_modules$2f$next$2f$cache$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["revalidateTag"])('global_footer');
    }
    return doc;
};
}),
"[project]/src/Footer/config.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "Footer",
    ()=>Footer
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$fields$2f$link$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/fields/link.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$Footer$2f$hooks$2f$revalidateFooter$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/Footer/hooks/revalidateFooter.ts [app-route] (ecmascript)");
;
;
const Footer = {
    slug: 'footer',
    access: {
        read: ()=>true
    },
    fields: [
        {
            name: 'navItems',
            type: 'array',
            fields: [
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$fields$2f$link$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["link"])({
                    appearances: false
                })
            ],
            maxRows: 6,
            admin: {
                initCollapsed: true,
                components: {
                    RowLabel: '@/Footer/RowLabel#RowLabel'
                }
            }
        }
    ],
    hooks: {
        afterChange: [
            __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$Footer$2f$hooks$2f$revalidateFooter$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["revalidateFooter"]
        ]
    }
};
}),
"[project]/src/Header/hooks/revalidateHeader.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "revalidateHeader",
    ()=>revalidateHeader
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$16$2e$1$2e$0$2d$canary$2e$0_react$2d$dom$40$19$2e$0$2e$0_react$40$19$2e$0$2e$0_$5f$react$40$19$2e$0$2e$0_sass$40$1$2e$77$2e$4$2f$node_modules$2f$next$2f$cache$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/next@16.1.0-canary.0_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/cache.js [app-route] (ecmascript)");
;
const revalidateHeader = ({ doc, req: { payload, context } })=>{
    if (!context.disableRevalidate) {
        payload.logger.info(`Revalidating header`);
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$16$2e$1$2e$0$2d$canary$2e$0_react$2d$dom$40$19$2e$0$2e$0_react$40$19$2e$0$2e$0_$5f$react$40$19$2e$0$2e$0_sass$40$1$2e$77$2e$4$2f$node_modules$2f$next$2f$cache$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["revalidateTag"])('global_header');
    }
    return doc;
};
}),
"[project]/src/Header/config.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "Header",
    ()=>Header
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$fields$2f$link$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/fields/link.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$Header$2f$hooks$2f$revalidateHeader$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/Header/hooks/revalidateHeader.ts [app-route] (ecmascript)");
;
;
const Header = {
    slug: 'header',
    access: {
        read: ()=>true
    },
    fields: [
        {
            name: 'navItems',
            type: 'array',
            fields: [
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$fields$2f$link$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["link"])({
                    appearances: false
                })
            ],
            maxRows: 6,
            admin: {
                initCollapsed: true,
                components: {
                    RowLabel: '@/Header/RowLabel#RowLabel'
                }
            }
        }
    ],
    hooks: {
        afterChange: [
            __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$Header$2f$hooks$2f$revalidateHeader$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["revalidateHeader"]
        ]
    }
};
}),
"[project]/src/payload.config.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

return __turbopack_context__.a(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {

__turbopack_context__.s([
    "default",
    ()=>__TURBOPACK__default__export__
]);
var __TURBOPACK__imported__module__$5b$externals$5d2f40$payloadcms$2f$db$2d$postgres__$5b$external$5d$__$2840$payloadcms$2f$db$2d$postgres$2c$__esm_import$29$__ = __turbopack_context__.i("[externals]/@payloadcms/db-postgres [external] (@payloadcms/db-postgres, esm_import)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$payloadcms$2b$richtext$2d$lexical$40$3$2e$64$2e$0_$40$faceless$2d$ui$2b$modal$40$3$2e$0$2e$0_react$2d$dom$40$19$2e$0$2e$0_react$40$19$2e$_bd7baf48251713852e8e278ca79c7dae$2f$node_modules$2f40$payloadcms$2f$richtext$2d$lexical$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/@payloadcms+richtext-lexical@3.64.0_@faceless-ui+modal@3.0.0_react-dom@19.0.0_react@19._bd7baf48251713852e8e278ca79c7dae/node_modules/@payloadcms/richtext-lexical/dist/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__ = __turbopack_context__.i("[externals]/path [external] (path, cjs)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$payload$40$3$2e$64$2e$0_graphql$40$16$2e$12$2e$0_typescript$40$5$2e$5$2e$2$2f$node_modules$2f$payload$2f$dist$2f$config$2f$build$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/payload@3.64.0_graphql@16.12.0_typescript@5.5.2/node_modules/payload/dist/config/build.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$url__$5b$external$5d$__$28$url$2c$__cjs$29$__ = __turbopack_context__.i("[externals]/url [external] (url, cjs)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$collections$2f$Pages$2f$index$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/collections/Pages/index.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$collections$2f$Tenants$2f$index$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/collections/Tenants/index.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$collections$2f$Users$2f$index$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/collections/Users/index.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$Footer$2f$config$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/Footer/config.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$Header$2f$config$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/Header/config.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$payloadcms$2b$plugin$2d$multi$2d$tenant$40$3$2e$64$2e$0_$40$payloadcms$2b$ui$40$3$2e$64$2e$0_$40$types$2b$react$40$19$2e$0$2e$1_monaco_0db2168b1601ae0f38a41a11a8f43018$2f$node_modules$2f40$payloadcms$2f$plugin$2d$multi$2d$tenant$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/@payloadcms+plugin-multi-tenant@3.64.0_@payloadcms+ui@3.64.0_@types+react@19.0.1_monaco_0db2168b1601ae0f38a41a11a8f43018/node_modules/@payloadcms/plugin-multi-tenant/dist/index.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$access$2f$isSuperAdmin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/access/isSuperAdmin.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$utilities$2f$getUserTenantIDs$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/utilities/getUserTenantIDs.ts [app-route] (ecmascript)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$externals$5d2f40$payloadcms$2f$db$2d$postgres__$5b$external$5d$__$2840$payloadcms$2f$db$2d$postgres$2c$__esm_import$29$__
]);
[__TURBOPACK__imported__module__$5b$externals$5d2f40$payloadcms$2f$db$2d$postgres__$5b$external$5d$__$2840$payloadcms$2f$db$2d$postgres$2c$__esm_import$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__;
const __TURBOPACK__import$2e$meta__ = {
    get url () {
        return `file://${__turbopack_context__.P("src/payload.config.ts")}`;
    }
};
;
;
;
;
;
;
;
;
;
;
;
;
;
const filename = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$url__$5b$external$5d$__$28$url$2c$__cjs$29$__["fileURLToPath"])(__TURBOPACK__import$2e$meta__.url);
const dirname = __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__["default"].dirname(filename);
const __TURBOPACK__default__export__ = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$payload$40$3$2e$64$2e$0_graphql$40$16$2e$12$2e$0_typescript$40$5$2e$5$2e$2$2f$node_modules$2f$payload$2f$dist$2f$config$2f$build$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["buildConfig"])({
    admin: {
        user: 'users'
    },
    globals: [
        __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$Header$2f$config$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Header"],
        __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$Footer$2f$config$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Footer"]
    ],
    collections: [
        __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$collections$2f$Pages$2f$index$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Pages"],
        __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$collections$2f$Users$2f$index$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"],
        __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$collections$2f$Tenants$2f$index$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Tenants"]
    ],
    // db: mongooseAdapter({
    //   url: process.env.DATABASE_URI as string,
    // }),
    db: (0, __TURBOPACK__imported__module__$5b$externals$5d2f40$payloadcms$2f$db$2d$postgres__$5b$external$5d$__$2840$payloadcms$2f$db$2d$postgres$2c$__esm_import$29$__["postgresAdapter"])({
        pool: {
            connectionString: process.env.POSTGRES_URL
        }
    }),
    // onInit: async (args) => {
    //   if (process.env.SEED_DB) {
    //     await seed(args)
    //   }
    // },
    editor: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$payloadcms$2b$richtext$2d$lexical$40$3$2e$64$2e$0_$40$faceless$2d$ui$2b$modal$40$3$2e$0$2e$0_react$2d$dom$40$19$2e$0$2e$0_react$40$19$2e$_bd7baf48251713852e8e278ca79c7dae$2f$node_modules$2f40$payloadcms$2f$richtext$2d$lexical$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__["lexicalEditor"])({}),
    graphQL: {
        schemaOutputFile: __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__["default"].resolve(dirname, 'generated-schema.graphql')
    },
    secret: process.env.PAYLOAD_SECRET,
    typescript: {
        outputFile: __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__["default"].resolve(dirname, 'payload-types.ts')
    },
    plugins: [
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$payloadcms$2b$plugin$2d$multi$2d$tenant$40$3$2e$64$2e$0_$40$payloadcms$2b$ui$40$3$2e$64$2e$0_$40$types$2b$react$40$19$2e$0$2e$1_monaco_0db2168b1601ae0f38a41a11a8f43018$2f$node_modules$2f40$payloadcms$2f$plugin$2d$multi$2d$tenant$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["multiTenantPlugin"])({
            cleanupAfterTenantDelete: false,
            collections: {
                pages: {},
                media: {}
            },
            tenantField: {
                access: {
                    read: ()=>true,
                    update: ({ req })=>{
                        if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$access$2f$isSuperAdmin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["isSuperAdmin"])(req.user)) {
                            return true;
                        }
                        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$utilities$2f$getUserTenantIDs$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getUserTenantIDs"])(req.user).length > 0;
                    }
                }
            },
            tenantsArrayField: {
                includeDefaultField: false
            },
            userHasAccessToAllTenants: (user)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$access$2f$isSuperAdmin$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["isSuperAdmin"])(user)
        })
    ]
});
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[project]/src/app/(payload)/api/[...slug]/route.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

return __turbopack_context__.a(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {

__turbopack_context__.s([
    "DELETE",
    ()=>DELETE,
    "GET",
    ()=>GET,
    "OPTIONS",
    ()=>OPTIONS,
    "PATCH",
    ()=>PATCH,
    "POST",
    ()=>POST
]);
/* THIS FILE WAS GENERATED AUTOMATICALLY BY PAYLOAD. */ /* DO NOT MODIFY IT BECAUSE IT COULD BE REWRITTEN AT ANY TIME. */ var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$payload$2e$config$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/payload.config.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$payloadcms$2b$next$40$3$2e$64$2e$0_$40$types$2b$react$40$19$2e$0$2e$1_graphql$40$16$2e$12$2e$0_monaco$2d$editor$40$0$2e$55$2e$1_next$40$1_e7a6815e9254f7c7cc1d038994d043b1$2f$node_modules$2f40$payloadcms$2f$next$2f$dist$2f$routes$2f$rest$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__DELETE__as__REST_DELETE$3e$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/@payloadcms+next@3.64.0_@types+react@19.0.1_graphql@16.12.0_monaco-editor@0.55.1_next@1_e7a6815e9254f7c7cc1d038994d043b1/node_modules/@payloadcms/next/dist/routes/rest/index.js [app-route] (ecmascript) <export DELETE as REST_DELETE>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$payloadcms$2b$next$40$3$2e$64$2e$0_$40$types$2b$react$40$19$2e$0$2e$1_graphql$40$16$2e$12$2e$0_monaco$2d$editor$40$0$2e$55$2e$1_next$40$1_e7a6815e9254f7c7cc1d038994d043b1$2f$node_modules$2f40$payloadcms$2f$next$2f$dist$2f$routes$2f$rest$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__GET__as__REST_GET$3e$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/@payloadcms+next@3.64.0_@types+react@19.0.1_graphql@16.12.0_monaco-editor@0.55.1_next@1_e7a6815e9254f7c7cc1d038994d043b1/node_modules/@payloadcms/next/dist/routes/rest/index.js [app-route] (ecmascript) <export GET as REST_GET>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$payloadcms$2b$next$40$3$2e$64$2e$0_$40$types$2b$react$40$19$2e$0$2e$1_graphql$40$16$2e$12$2e$0_monaco$2d$editor$40$0$2e$55$2e$1_next$40$1_e7a6815e9254f7c7cc1d038994d043b1$2f$node_modules$2f40$payloadcms$2f$next$2f$dist$2f$routes$2f$rest$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__OPTIONS__as__REST_OPTIONS$3e$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/@payloadcms+next@3.64.0_@types+react@19.0.1_graphql@16.12.0_monaco-editor@0.55.1_next@1_e7a6815e9254f7c7cc1d038994d043b1/node_modules/@payloadcms/next/dist/routes/rest/index.js [app-route] (ecmascript) <export OPTIONS as REST_OPTIONS>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$payloadcms$2b$next$40$3$2e$64$2e$0_$40$types$2b$react$40$19$2e$0$2e$1_graphql$40$16$2e$12$2e$0_monaco$2d$editor$40$0$2e$55$2e$1_next$40$1_e7a6815e9254f7c7cc1d038994d043b1$2f$node_modules$2f40$payloadcms$2f$next$2f$dist$2f$routes$2f$rest$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__PATCH__as__REST_PATCH$3e$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/@payloadcms+next@3.64.0_@types+react@19.0.1_graphql@16.12.0_monaco-editor@0.55.1_next@1_e7a6815e9254f7c7cc1d038994d043b1/node_modules/@payloadcms/next/dist/routes/rest/index.js [app-route] (ecmascript) <export PATCH as REST_PATCH>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$payloadcms$2b$next$40$3$2e$64$2e$0_$40$types$2b$react$40$19$2e$0$2e$1_graphql$40$16$2e$12$2e$0_monaco$2d$editor$40$0$2e$55$2e$1_next$40$1_e7a6815e9254f7c7cc1d038994d043b1$2f$node_modules$2f40$payloadcms$2f$next$2f$dist$2f$routes$2f$rest$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__POST__as__REST_POST$3e$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/@payloadcms+next@3.64.0_@types+react@19.0.1_graphql@16.12.0_monaco-editor@0.55.1_next@1_e7a6815e9254f7c7cc1d038994d043b1/node_modules/@payloadcms/next/dist/routes/rest/index.js [app-route] (ecmascript) <export POST as REST_POST>");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$payload$2e$config$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__
]);
[__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$payload$2e$config$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__;
;
;
const GET = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$payloadcms$2b$next$40$3$2e$64$2e$0_$40$types$2b$react$40$19$2e$0$2e$1_graphql$40$16$2e$12$2e$0_monaco$2d$editor$40$0$2e$55$2e$1_next$40$1_e7a6815e9254f7c7cc1d038994d043b1$2f$node_modules$2f40$payloadcms$2f$next$2f$dist$2f$routes$2f$rest$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__GET__as__REST_GET$3e$__["REST_GET"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$payload$2e$config$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"]);
const POST = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$payloadcms$2b$next$40$3$2e$64$2e$0_$40$types$2b$react$40$19$2e$0$2e$1_graphql$40$16$2e$12$2e$0_monaco$2d$editor$40$0$2e$55$2e$1_next$40$1_e7a6815e9254f7c7cc1d038994d043b1$2f$node_modules$2f40$payloadcms$2f$next$2f$dist$2f$routes$2f$rest$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__POST__as__REST_POST$3e$__["REST_POST"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$payload$2e$config$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"]);
const DELETE = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$payloadcms$2b$next$40$3$2e$64$2e$0_$40$types$2b$react$40$19$2e$0$2e$1_graphql$40$16$2e$12$2e$0_monaco$2d$editor$40$0$2e$55$2e$1_next$40$1_e7a6815e9254f7c7cc1d038994d043b1$2f$node_modules$2f40$payloadcms$2f$next$2f$dist$2f$routes$2f$rest$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__DELETE__as__REST_DELETE$3e$__["REST_DELETE"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$payload$2e$config$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"]);
const PATCH = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$payloadcms$2b$next$40$3$2e$64$2e$0_$40$types$2b$react$40$19$2e$0$2e$1_graphql$40$16$2e$12$2e$0_monaco$2d$editor$40$0$2e$55$2e$1_next$40$1_e7a6815e9254f7c7cc1d038994d043b1$2f$node_modules$2f40$payloadcms$2f$next$2f$dist$2f$routes$2f$rest$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__PATCH__as__REST_PATCH$3e$__["REST_PATCH"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$payload$2e$config$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"]);
const OPTIONS = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$payloadcms$2b$next$40$3$2e$64$2e$0_$40$types$2b$react$40$19$2e$0$2e$1_graphql$40$16$2e$12$2e$0_monaco$2d$editor$40$0$2e$55$2e$1_next$40$1_e7a6815e9254f7c7cc1d038994d043b1$2f$node_modules$2f40$payloadcms$2f$next$2f$dist$2f$routes$2f$rest$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__OPTIONS__as__REST_OPTIONS$3e$__["REST_OPTIONS"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$payload$2e$config$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"]);
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
];

//# sourceMappingURL=%5Broot-of-the-server%5D__13afc650._.js.map