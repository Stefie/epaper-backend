{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/utilities/fieldsDrawer/useLexicalDrawer.tsx"],"sourcesContent":["'use client'\nimport type { BaseSelection } from 'lexical'\n\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext'\nimport { useModal } from '@payloadcms/ui'\nimport { $getPreviousSelection, $getSelection, $setSelection } from 'lexical'\nimport { useCallback, useEffect, useState } from 'react'\n\n/**\n *\n * Wrapper around useModal that restores and saves selection state (cursor position) when opening and closing the drawer.\n * By default, the lexical cursor position may be lost when opening a drawer and clicking somewhere on that drawer.\n */\nexport const useLexicalDrawer = (slug: string, restoreLate?: boolean) => {\n  const [editor] = useLexicalComposerContext()\n  const [selectionState, setSelectionState] = useState<BaseSelection | null>(null)\n  const [wasOpen, setWasOpen] = useState<boolean>(false)\n\n  const { closeModal: closeBaseModal, modalState, toggleModal: toggleBaseModal } = useModal()\n\n  const storeSelection = useCallback(() => {\n    editor.read(() => {\n      const selection = $getSelection() ?? $getPreviousSelection()\n      setSelectionState(selection)\n    })\n  }, [editor])\n\n  const restoreSelection = useCallback(() => {\n    if (selectionState) {\n      editor.update(\n        () => {\n          $setSelection(selectionState.clone())\n        },\n        { discrete: true, skipTransforms: true },\n      )\n    }\n  }, [editor, selectionState])\n\n  const closeDrawer = useCallback(() => {\n    //restoreSelection() // Should already be stored by the useEffect below\n    closeBaseModal(slug)\n  }, [closeBaseModal, slug])\n  const isModalOpen = modalState?.[slug]?.isOpen\n\n  const toggleDrawer = useCallback(() => {\n    if (!isModalOpen) {\n      storeSelection()\n    } else {\n      restoreSelection()\n    }\n    setWasOpen(true)\n    toggleBaseModal(slug)\n  }, [slug, storeSelection, toggleBaseModal, restoreSelection, isModalOpen])\n\n  // We need to handle drawer closing via a useEffect, as toggleDrawer / closeDrawer will not be triggered if the drawer\n  // is closed by clicking outside of the drawer. This useEffect will handle everything.\n  useEffect(() => {\n    if (!wasOpen) {\n      return\n    }\n\n    const thisModalState = modalState[slug]\n    // Exists in modalState (thus has opened at least once before) and is closed\n    if (thisModalState && !thisModalState?.isOpen) {\n      setWasOpen(false)\n\n      if (restoreLate) {\n        // restoreLate is used for upload extra field drawers. For some reason, the selection is not restored if we call restoreSelection immediately.\n        setTimeout(() => {\n          restoreSelection()\n        }, 0)\n      } else {\n        restoreSelection()\n      }\n    }\n  }, [modalState, slug, restoreSelection, wasOpen, restoreLate])\n\n  return {\n    closeDrawer,\n    toggleDrawer,\n  }\n}\n"],"names":["c", "_c", "useLexicalComposerContext", "useModal", "$getPreviousSelection", "$getSelection", "$setSelection", "useEffect", "useState", "useLexicalDrawer", "slug", "restoreLate", "$", "editor", "selectionState", "setSelectionState", "wasOpen", "setWasOpen", "closeModal", "closeBaseModal", "modalState", "toggleModal", "toggleBaseModal", "t0", "read", "selection", "storeSelection", "t1", "update", "clone", "discrete", "skipTransforms", "restoreSelection", "t2", "closeDrawer", "isModalOpen", "isOpen", "t3", "toggleDrawer", "t4", "t5", "thisModalState", "setTimeout", "t6"],"mappings":"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"}},
    {"offset": {"line": 69, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/config/client/EditorConfigProvider.tsx"],"sourcesContent":["'use client'\n\nimport type { LexicalEditor } from 'lexical'\nimport type { MarkRequired } from 'ts-essentials'\n\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext.js'\nimport { useEditDepth } from '@payloadcms/ui'\nimport * as React from 'react'\nimport { createContext, use, useMemo, useRef, useState } from 'react'\n\nimport type { InlineBlockNode } from '../../../features/blocks/client/nodes/InlineBlocksNode.js'\nimport type { LexicalRichTextFieldProps } from '../../../types.js'\nimport type { SanitizedClientEditorConfig } from '../types.js'\n\n// Should always produce a 20 character pseudo-random string\nfunction generateQuickGuid(): string {\n  return Math.random().toString(36).substring(2, 12) + Math.random().toString(36).substring(2, 12)\n}\n\nexport interface EditorConfigContextType {\n  // Editor focus handling\n  blurEditor: (editorContext: EditorConfigContextType) => void\n  childrenEditors: React.RefObject<Map<string, EditorConfigContextType>>\n  createdInlineBlock?: InlineBlockNode\n  editDepth: number\n  editor: LexicalEditor\n  editorConfig: SanitizedClientEditorConfig\n  editorContainerRef: React.RefObject<HTMLDivElement>\n  fieldProps: MarkRequired<LexicalRichTextFieldProps, 'path' | 'schemaPath'>\n  focusedEditor: EditorConfigContextType | null\n  // Editor focus handling\n  focusEditor: (editorContext: EditorConfigContextType) => void\n  parentEditor: EditorConfigContextType\n  registerChild: (uuid: string, editorContext: EditorConfigContextType) => void\n  setCreatedInlineBlock?: React.Dispatch<React.SetStateAction<InlineBlockNode | undefined>>\n  unregisterChild?: (uuid: string) => void\n  uuid: string\n}\n\n// @ts-expect-error: TODO: Fix this\nconst Context: React.Context<EditorConfigContextType> = createContext({\n  editorConfig: null,\n  fieldProps: null,\n  uuid: null,\n})\n\nexport const EditorConfigProvider = ({\n  children,\n  editorConfig,\n  editorContainerRef,\n  fieldProps,\n  parentContext,\n}: {\n  children: React.ReactNode\n  editorConfig: SanitizedClientEditorConfig\n  editorContainerRef: React.RefObject<HTMLDivElement | null>\n\n  fieldProps: LexicalRichTextFieldProps\n  parentContext?: EditorConfigContextType\n}): React.ReactNode => {\n  const [editor] = useLexicalComposerContext()\n  // State to store the UUID\n  const [uuid] = useState(() => generateQuickGuid())\n\n  const childrenEditors = useRef<Map<string, EditorConfigContextType>>(new Map())\n  const [focusedEditor, setFocusedEditor] = useState<EditorConfigContextType | null>(null)\n  const focusHistory = useRef<Set<string>>(new Set())\n  const [createdInlineBlock, setCreatedInlineBlock] = useState<InlineBlockNode>()\n\n  const editDepth = useEditDepth()\n\n  const editorContext = useMemo(\n    () =>\n      ({\n        blurEditor: (editorContext: EditorConfigContextType) => {\n          //setFocusedEditor(null) // Clear focused editor\n          focusHistory.current.clear() // Reset focus history when focus is lost\n        },\n        childrenEditors,\n        createdInlineBlock,\n        editDepth,\n        editor,\n        editorConfig,\n        editorContainerRef,\n        fieldProps,\n        focusedEditor,\n        focusEditor: (editorContext: EditorConfigContextType) => {\n          const editorUUID = editorContext.uuid\n\n          // Avoid recursion by checking if this editor is already focused in this cycle\n          if (focusHistory.current.has(editorUUID)) {\n            return\n          }\n\n          // Add this editor to the history to prevent future recursions in this cycle\n          focusHistory.current.add(editorUUID)\n          setFocusedEditor(editorContext)\n\n          // Propagate focus event to parent and children, ensuring they do not refocus this editor\n          if (parentContext?.uuid) {\n            parentContext.focusEditor(editorContext)\n          }\n          childrenEditors.current.forEach((childEditor) => {\n            childEditor.focusEditor(editorContext)\n          })\n\n          focusHistory.current.clear()\n        },\n        parentEditor: parentContext,\n        registerChild: (childUUID, childEditorContext) => {\n          if (!childrenEditors.current.has(childUUID)) {\n            const newMap = new Map(childrenEditors.current)\n            newMap.set(childUUID, childEditorContext)\n            childrenEditors.current = newMap\n          }\n        },\n        setCreatedInlineBlock,\n        unregisterChild: (childUUID) => {\n          if (childrenEditors.current.has(childUUID)) {\n            const newMap = new Map(childrenEditors.current)\n            newMap.delete(childUUID)\n            childrenEditors.current = newMap\n          }\n        },\n\n        uuid,\n      }) as EditorConfigContextType,\n    [\n      createdInlineBlock,\n      setCreatedInlineBlock,\n      editor,\n      childrenEditors,\n      editorConfig,\n      editorContainerRef,\n      editDepth,\n      fieldProps,\n      focusedEditor,\n      parentContext,\n      uuid,\n    ],\n  )\n\n  return <Context value={editorContext}>{children}</Context>\n}\n\nexport const useEditorConfigContext = (): EditorConfigContextType => {\n  const context = use(Context)\n  if (context === undefined) {\n    throw new Error('useEditorConfigContext must be used within an EditorConfigProvider')\n  }\n  return context\n}\n"],"names":["useLexicalComposerContext", "useEditDepth", "createContext", "use", "useMemo", "useRef", "useState", "generateQuickGuid", "Math", "random", "toString", "substring", "Context", "editorConfig", "fieldProps", "uuid", "EditorConfigProvider", "children", "editorContainerRef", "parentContext", "editor", "childrenEditors", "Map", "focusedEditor", "setFocusedEditor", "focusHistory", "Set", "createdInlineBlock", "setCreatedInlineBlock", "editDepth", "editorContext", "blurEditor", "current", "clear", "focusEditor", "editorUUID", "has", "add", "forEach", "childEditor", "parentEditor", "registerChild", "childUUID", "childEditorContext", "newMap", "set", "unregisterChild", "delete", "_jsx", "value", "useEditorConfigContext", "context", "undefined", "Error"],"mappings":"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"}},
    {"offset": {"line": 153, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/blocks/client/componentInline/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/blocks/client/nodes/InlineBlocksNode.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/blocks/server/nodes/InlineBlocksNode.tsx"],"sourcesContent":["'use client'\n\nimport type { BlocksFieldClient, ClientBlock, Data, FormState } from 'payload'\n\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext'\nimport { useLexicalEditable } from '@lexical/react/useLexicalEditable'\nimport { getTranslation } from '@payloadcms/translations'\nimport {\n  Button,\n  Drawer,\n  EditDepthProvider,\n  Form,\n  formatDrawerSlug,\n  FormSubmit,\n  RenderFields,\n  ShimmerEffect,\n  useConfig,\n  useDocumentForm,\n  useDocumentInfo,\n  useEditDepth,\n  useServerFunctions,\n  useTranslation,\n} from '@payloadcms/ui'\nimport { abortAndIgnore } from '@payloadcms/ui/shared'\nimport { $getNodeByKey } from 'lexical'\n\nimport './index.scss'\n\nimport { deepCopyObjectSimpleWithoutReactComponents, reduceFieldsToValues } from 'payload/shared'\nimport React, { createContext, useCallback, useEffect, useMemo, useRef } from 'react'\nimport { v4 as uuid } from 'uuid'\n\nimport type { InlineBlockFields } from '../../server/nodes/InlineBlocksNode.js'\n\nimport { useEditorConfigContext } from '../../../../lexical/config/client/EditorConfigProvider.js'\nimport { useLexicalDrawer } from '../../../../utilities/fieldsDrawer/useLexicalDrawer.js'\nimport { $isInlineBlockNode } from '../nodes/InlineBlocksNode.js'\n\ntype Props = {\n  /**\n   * Can be modified by the node in order to trigger the re-fetch of the initial state based on the\n   * formData. This is useful when node.setFields() is explicitly called from outside of the form - in\n   * this case, the new field state is likely not reflected in the form state, so we need to re-fetch\n   */\n  readonly cacheBuster: number\n  readonly className: string\n  readonly formData: InlineBlockFields\n  readonly nodeKey: string\n}\n\ntype InlineBlockComponentContextType = {\n  EditButton?: React.FC\n  initialState: false | FormState | undefined\n  InlineBlockContainer?: React.FC<{ children: React.ReactNode }>\n  Label?: React.FC\n  nodeKey?: string\n  RemoveButton?: React.FC\n}\n\nconst InlineBlockComponentContext = createContext<InlineBlockComponentContextType>({\n  initialState: false,\n})\n\nexport const useInlineBlockComponentContext = () => React.use(InlineBlockComponentContext)\n\nexport const InlineBlockComponent: React.FC<Props> = (props) => {\n  const { cacheBuster, className: baseClass, formData, nodeKey } = props\n\n  const [editor] = useLexicalComposerContext()\n  const isEditable = useLexicalEditable()\n  const { i18n, t } = useTranslation<object, string>()\n  const {\n    createdInlineBlock,\n    fieldProps: { featureClientSchemaMap, initialLexicalFormState, schemaPath },\n    setCreatedInlineBlock,\n    uuid: uuidFromContext,\n  } = useEditorConfigContext()\n  const { fields: parentDocumentFields } = useDocumentForm()\n\n  const { getFormState } = useServerFunctions()\n  const editDepth = useEditDepth()\n  const firstTimeDrawer = useRef(false)\n\n  const [initialState, setInitialState] = React.useState<false | FormState | undefined>(() => {\n    // Initial form state that was calculated server-side. May have stale values\n    const cachedFormState = initialLexicalFormState?.[formData.id]?.formState\n    if (!cachedFormState) {\n      return false\n    }\n\n    // Merge current formData values into the cached form state\n    // This ensures that when the component remounts (e.g., due to view changes), we don't lose user edits\n    return Object.fromEntries(\n      Object.entries(cachedFormState).map(([fieldName, fieldState]) => [\n        fieldName,\n        fieldName in formData\n          ? {\n              ...fieldState,\n              initialValue: formData[fieldName],\n              value: formData[fieldName],\n            }\n          : fieldState,\n      ]),\n    )\n  })\n\n  const hasMounted = useRef(false)\n  const prevCacheBuster = useRef(cacheBuster)\n  useEffect(() => {\n    if (hasMounted.current) {\n      if (prevCacheBuster.current !== cacheBuster) {\n        setInitialState(false)\n      }\n      prevCacheBuster.current = cacheBuster\n    } else {\n      hasMounted.current = true\n    }\n  }, [cacheBuster])\n\n  const [CustomLabel, setCustomLabel] = React.useState<React.ReactNode | undefined>(\n    // @ts-expect-error - vestiges of when tsconfig was not strict. Feel free to improve\n    initialState?.['_components']?.customComponents?.BlockLabel,\n  )\n\n  const [CustomBlock, setCustomBlock] = React.useState<React.ReactNode | undefined>(\n    // @ts-expect-error - vestiges of when tsconfig was not strict. Feel free to improve\n    initialState?.['_components']?.customComponents?.Block,\n  )\n\n  const drawerSlug = formatDrawerSlug({\n    slug: `lexical-inlineBlocks-create-${uuidFromContext}-${formData.id}`,\n    depth: editDepth,\n  })\n  const { toggleDrawer } = useLexicalDrawer(drawerSlug, true)\n\n  const inlineBlockElemElemRef = useRef<HTMLDivElement | null>(null)\n  const { id, collectionSlug, getDocPreferences, globalSlug } = useDocumentInfo()\n  const { config } = useConfig()\n\n  const componentMapRenderedBlockPath = `${schemaPath}.lexical_internal_feature.blocks.lexical_inline_blocks.${formData.blockType}`\n\n  const clientSchemaMap = featureClientSchemaMap['blocks']\n\n  const blocksField: BlocksFieldClient = clientSchemaMap?.[\n    componentMapRenderedBlockPath\n  ]?.[0] as BlocksFieldClient\n\n  const clientBlock: ClientBlock | undefined = blocksField.blockReferences\n    ? typeof blocksField?.blockReferences?.[0] === 'string'\n      ? config.blocksMap[blocksField?.blockReferences?.[0]]\n      : blocksField?.blockReferences?.[0]\n    : blocksField?.blocks?.[0]\n\n  const clientBlockFields = clientBlock?.fields ?? []\n\n  // Open drawer on \"mount\"\n  useEffect(() => {\n    if (!firstTimeDrawer.current && createdInlineBlock?.getKey() === nodeKey) {\n      // > 2 because they always have \"id\" and \"blockName\" fields\n      if (clientBlockFields.length > 2) {\n        toggleDrawer()\n      }\n      setCreatedInlineBlock?.(undefined)\n      firstTimeDrawer.current = true\n    }\n  }, [clientBlockFields.length, createdInlineBlock, nodeKey, setCreatedInlineBlock, toggleDrawer])\n\n  const removeInlineBlock = useCallback(() => {\n    editor.update(() => {\n      $getNodeByKey(nodeKey)?.remove()\n    })\n  }, [editor, nodeKey])\n\n  const blockDisplayName = clientBlock?.labels?.singular\n    ? getTranslation(clientBlock?.labels.singular, i18n)\n    : clientBlock?.slug\n\n  const onChangeAbortControllerRef = useRef(new AbortController())\n  const schemaFieldsPath = `${schemaPath}.lexical_internal_feature.blocks.lexical_inline_blocks.${clientBlock?.slug}.fields`\n\n  // Initial state for newly created blocks\n  useEffect(() => {\n    const abortController = new AbortController()\n\n    const awaitInitialState = async () => {\n      /*\n       * This will only run if a new block is created. For all existing blocks that are loaded when the document is loaded, or when the form is saved,\n       * this is not run, as the lexical field RSC will fetch the state server-side and pass it to the client. That way, we avoid unnecessary client-side\n       * requests. Though for newly created blocks, we need to fetch the state client-side, as the server doesn't know about the block yet.\n       */\n      const { state } = await getFormState({\n        id,\n        collectionSlug,\n        data: formData,\n        docPermissions: { fields: true },\n        docPreferences: await getDocPreferences(),\n        documentFormState: deepCopyObjectSimpleWithoutReactComponents(parentDocumentFields),\n        globalSlug,\n        initialBlockData: formData,\n        initialBlockFormState: formData,\n        operation: 'update',\n        readOnly: !isEditable,\n        renderAllFields: true,\n        schemaPath: schemaFieldsPath,\n        signal: abortController.signal,\n      })\n\n      if (state) {\n        const newFormStateData: InlineBlockFields = reduceFieldsToValues(\n          deepCopyObjectSimpleWithoutReactComponents(state),\n          true,\n        ) as InlineBlockFields\n\n        // Things like default values may come back from the server => update the node with the new data\n        editor.update(() => {\n          const node = $getNodeByKey(nodeKey)\n          if (node && $isInlineBlockNode(node)) {\n            const newData = newFormStateData\n            newData.blockType = formData.blockType\n\n            node.setFields(newData, true)\n          }\n        })\n\n        setInitialState(state)\n        setCustomLabel(state['_components']?.customComponents?.BlockLabel)\n        setCustomBlock(state['_components']?.customComponents?.Block)\n      }\n    }\n\n    if (formData && !initialState) {\n      void awaitInitialState()\n    }\n\n    return () => {\n      abortAndIgnore(abortController)\n    }\n  }, [\n    getFormState,\n    editor,\n    nodeKey,\n    isEditable,\n    schemaFieldsPath,\n    id,\n    formData,\n    initialState,\n    collectionSlug,\n    globalSlug,\n    getDocPreferences,\n    parentDocumentFields,\n  ])\n\n  /**\n   * HANDLE ONCHANGE\n   */\n  const onChange = useCallback(\n    async ({ formState: prevFormState, submit }: { formState: FormState; submit?: boolean }) => {\n      abortAndIgnore(onChangeAbortControllerRef.current)\n\n      const controller = new AbortController()\n      onChangeAbortControllerRef.current = controller\n\n      const { state } = await getFormState({\n        id,\n        collectionSlug,\n        docPermissions: {\n          fields: true,\n        },\n        docPreferences: await getDocPreferences(),\n        documentFormState: deepCopyObjectSimpleWithoutReactComponents(parentDocumentFields),\n        formState: prevFormState,\n        globalSlug,\n        initialBlockFormState: prevFormState,\n        operation: 'update',\n        readOnly: !isEditable,\n        renderAllFields: submit ? true : false,\n        schemaPath: schemaFieldsPath,\n        signal: controller.signal,\n      })\n\n      if (!state) {\n        return prevFormState\n      }\n\n      if (submit) {\n        setCustomLabel(state['_components']?.customComponents?.BlockLabel)\n        setCustomBlock(state['_components']?.customComponents?.Block)\n      }\n\n      return state\n    },\n    [\n      getFormState,\n      id,\n      collectionSlug,\n      getDocPreferences,\n      parentDocumentFields,\n      globalSlug,\n      isEditable,\n      schemaFieldsPath,\n    ],\n  )\n  // cleanup effect\n  useEffect(() => {\n    const isStateOutOfSync = (formData: InlineBlockFields, initialState: FormState) => {\n      return Object.keys(initialState).some(\n        (key) => initialState[key] && formData[key] !== initialState[key].value,\n      )\n    }\n\n    return () => {\n      // If the component is unmounted (either via removeInlineBlock or via lexical itself) and the form state got changed before,\n      // we need to reset the initial state to force a re-fetch of the initial state when it gets mounted again (e.g. via lexical history undo).\n      // Otherwise it would use an outdated initial state.\n      if (initialState && isStateOutOfSync(formData, initialState)) {\n        setInitialState(false)\n      }\n      abortAndIgnore(onChangeAbortControllerRef.current)\n    }\n  }, [formData, initialState])\n\n  /**\n   * HANDLE FORM SUBMIT\n   */\n  const onFormSubmit = useCallback(\n    (formState: FormState, newData: Data) => {\n      newData.blockType = formData.blockType\n\n      editor.update(() => {\n        const node = $getNodeByKey(nodeKey)\n        if (node && $isInlineBlockNode(node)) {\n          node.setFields(newData as InlineBlockFields, true)\n        }\n      })\n    },\n    [editor, nodeKey, formData],\n  )\n\n  const RemoveButton = useMemo(\n    () => () => (\n      <Button\n        buttonStyle=\"icon-label\"\n        className={`${baseClass}__removeButton`}\n        disabled={!isEditable}\n        icon=\"x\"\n        onClick={(e) => {\n          e.preventDefault()\n          removeInlineBlock()\n        }}\n        round\n        size=\"small\"\n        tooltip={t('lexical:blocks:inlineBlocks:remove', { label: blockDisplayName })}\n      />\n    ),\n    [baseClass, blockDisplayName, isEditable, removeInlineBlock, t],\n  )\n\n  const EditButton = useMemo(\n    () => () => (\n      <Button\n        buttonStyle=\"icon-label\"\n        className={`${baseClass}__editButton`}\n        disabled={!isEditable}\n        el=\"button\"\n        icon=\"edit\"\n        onClick={() => {\n          toggleDrawer()\n        }}\n        round\n        size=\"small\"\n        tooltip={t('lexical:blocks:inlineBlocks:edit', { label: blockDisplayName })}\n      />\n    ),\n    [baseClass, blockDisplayName, isEditable, t, toggleDrawer],\n  )\n\n  const InlineBlockContainer = useMemo(\n    () =>\n      ({ children, className }: { children: React.ReactNode; className?: string }) => (\n        <div\n          className={[`${baseClass}__container`, baseClass + '-' + formData.blockType, className]\n            .filter(Boolean)\n            .join(' ')}\n          ref={inlineBlockElemElemRef}\n        >\n          {children}\n        </div>\n      ),\n    [baseClass, formData.blockType],\n  )\n\n  const Label = useMemo(() => {\n    if (CustomLabel) {\n      return () => CustomLabel\n    } else {\n      return () => (\n        <div>{clientBlock?.labels ? getTranslation(clientBlock?.labels.singular, i18n) : ''}</div>\n      )\n    }\n  }, [CustomLabel, clientBlock?.labels, i18n])\n\n  if (!clientBlock) {\n    return (\n      <InlineBlockContainer className={`${baseClass}-not-found`}>\n        <span>Error: Block '{formData.blockType}' not found</span>\n        {isEditable ? (\n          <div className={`${baseClass}__actions`}>\n            <RemoveButton />\n          </div>\n        ) : null}\n      </InlineBlockContainer>\n    )\n  }\n\n  return (\n    <Form\n      beforeSubmit={[\n        async ({ formState }) => {\n          // This is only called when form is submitted from drawer\n          return await onChange({ formState, submit: true })\n        },\n      ]}\n      disableValidationOnSubmit\n      el=\"div\"\n      fields={clientBlock?.fields}\n      initialState={initialState || {}}\n      onChange={[onChange]}\n      onSubmit={(formState, data) => {\n        onFormSubmit(formState, data)\n        toggleDrawer()\n      }}\n      uuid={uuid()}\n    >\n      <EditDepthProvider>\n        <Drawer\n          className={''}\n          slug={drawerSlug}\n          title={t(`lexical:blocks:inlineBlocks:${formData?.id ? 'edit' : 'create'}`, {\n            label: blockDisplayName ?? t('lexical:blocks:inlineBlocks:label'),\n          })}\n        >\n          {initialState ? (\n            <>\n              <RenderFields\n                fields={clientBlock?.fields}\n                forceRender\n                parentIndexPath=\"\"\n                parentPath=\"\" // See Blocks feature path for details as for why this is empty\n                parentSchemaPath={schemaFieldsPath}\n                permissions={true}\n                readOnly={!isEditable}\n              />\n              <FormSubmit programmaticSubmit={true}>{t('fields:saveChanges')}</FormSubmit>\n            </>\n          ) : null}\n        </Drawer>\n      </EditDepthProvider>\n      {CustomBlock ? (\n        <InlineBlockComponentContext\n          value={{\n            EditButton,\n            initialState,\n            InlineBlockContainer,\n            Label,\n            nodeKey,\n            RemoveButton,\n          }}\n        >\n          {CustomBlock}\n        </InlineBlockComponentContext>\n      ) : (\n        <InlineBlockContainer>\n          {initialState ? <Label /> : <ShimmerEffect height=\"15px\" width=\"40px\" />}\n          {isEditable ? (\n            <div className={`${baseClass}__actions`}>\n              <EditButton />\n              <RemoveButton />\n            </div>\n          ) : null}\n        </InlineBlockContainer>\n      )}\n    </Form>\n  )\n}\n","'use client'\nimport ObjectID from 'bson-objectid'\nimport {\n  $applyNodeReplacement,\n  type EditorConfig,\n  type LexicalEditor,\n  type LexicalNode,\n} from 'lexical'\nimport React, { type JSX } from 'react'\n\nimport type {\n  InlineBlockFields,\n  SerializedInlineBlockNode,\n} from '../../server/nodes/InlineBlocksNode.js'\n\nimport { ServerInlineBlockNode } from '../../server/nodes/InlineBlocksNode.js'\n\nconst InlineBlockComponent = React.lazy(() =>\n  import('../componentInline/index.js').then((module) => ({\n    default: module.InlineBlockComponent,\n  })),\n)\n\nexport class InlineBlockNode extends ServerInlineBlockNode {\n  static override clone(node: ServerInlineBlockNode): ServerInlineBlockNode {\n    return super.clone(node)\n  }\n\n  static override getType(): string {\n    return super.getType()\n  }\n\n  static override importJSON(serializedNode: SerializedInlineBlockNode): InlineBlockNode {\n    const node = $createInlineBlockNode(serializedNode.fields)\n    return node\n  }\n\n  override decorate(_editor: LexicalEditor, config: EditorConfig): JSX.Element {\n    return (\n      <InlineBlockComponent\n        cacheBuster={this.getCacheBuster()}\n        className={config.theme.inlineBlock ?? 'LexicalEditorTheme__inlineBlock'}\n        formData={this.getFields()}\n        nodeKey={this.getKey()}\n      />\n    )\n  }\n\n  override exportJSON(): SerializedInlineBlockNode {\n    return super.exportJSON()\n  }\n}\n\nexport function $createInlineBlockNode(fields: Exclude<InlineBlockFields, 'id'>): InlineBlockNode {\n  return $applyNodeReplacement(\n    new InlineBlockNode({\n      fields: {\n        ...fields,\n        id: fields?.id || new ObjectID.default().toHexString(),\n      },\n    }),\n  )\n}\n\nexport function $isInlineBlockNode(\n  node: InlineBlockNode | LexicalNode | null | undefined,\n): node is InlineBlockNode {\n  return node instanceof InlineBlockNode\n}\n","import type {\n  DOMConversionMap,\n  DOMExportOutput,\n  EditorConfig,\n  LexicalEditor,\n  LexicalNode,\n  NodeKey,\n  SerializedLexicalNode,\n} from 'lexical'\nimport type { JsonObject } from 'payload'\nimport type React from 'react'\nimport type { JSX } from 'react'\n\nimport { addClassNamesToElement } from '@lexical/utils'\nimport ObjectID from 'bson-objectid'\nimport { $applyNodeReplacement, DecoratorNode } from 'lexical'\n\nimport type { StronglyTypedLeafNode } from '../../../../nodeTypes.js'\n\nexport type InlineBlockFields<TInlineBlockFields extends JsonObject = JsonObject> = {\n  blockType: string\n  id: string\n} & TInlineBlockFields\n\nexport type SerializedInlineBlockNode<TBlockFields extends JsonObject = JsonObject> = {\n  fields: InlineBlockFields<TBlockFields>\n} & StronglyTypedLeafNode<SerializedLexicalNode, 'inlineBlock'>\n\nexport class ServerInlineBlockNode extends DecoratorNode<null | React.ReactElement> {\n  __cacheBuster: number\n  __fields: InlineBlockFields\n\n  constructor({\n    cacheBuster,\n    fields,\n    key,\n  }: {\n    cacheBuster?: number\n    fields: InlineBlockFields\n    key?: NodeKey\n  }) {\n    super(key)\n    this.__fields = fields\n    this.__cacheBuster = cacheBuster || 0\n  }\n\n  static override clone(node: ServerInlineBlockNode): ServerInlineBlockNode {\n    return new this({\n      cacheBuster: node.__cacheBuster,\n      fields: node.__fields,\n      key: node.__key,\n    })\n  }\n\n  static override getType(): string {\n    return 'inlineBlock'\n  }\n\n  static override importDOM(): DOMConversionMap<HTMLDivElement> | null {\n    return {}\n  }\n\n  static override importJSON(serializedNode: SerializedInlineBlockNode): ServerInlineBlockNode {\n    const node = $createServerInlineBlockNode(serializedNode.fields)\n    return node\n  }\n\n  static isInline(): false {\n    return false\n  }\n\n  canIndent() {\n    return true\n  }\n\n  override createDOM(config?: EditorConfig): HTMLElement {\n    const element = document.createElement('span')\n    addClassNamesToElement(element, config?.theme?.inlineBlock)\n    return element\n  }\n\n  override decorate(editor: LexicalEditor, config: EditorConfig): JSX.Element | null {\n    return null\n  }\n\n  override exportDOM(): DOMExportOutput {\n    const element = document.createElement('span')\n    element.classList.add('inline-block-container')\n\n    const text = document.createTextNode(this.getTextContent())\n    element.append(text)\n    return { element }\n  }\n\n  override exportJSON(): SerializedInlineBlockNode {\n    return {\n      type: 'inlineBlock',\n      fields: this.getFields(),\n      version: 1,\n    }\n  }\n\n  getCacheBuster(): number {\n    return this.getLatest().__cacheBuster\n  }\n\n  getFields(): InlineBlockFields {\n    return this.getLatest().__fields\n  }\n\n  override getTextContent(): string {\n    return `Block Field`\n  }\n\n  override isInline() {\n    return true\n  }\n\n  setFields(fields: InlineBlockFields, preventFormStateUpdate?: boolean): void {\n    const writable = this.getWritable()\n    writable.__fields = fields\n    if (!preventFormStateUpdate) {\n      writable.__cacheBuster++\n    }\n  }\n\n  override updateDOM(): boolean {\n    return false\n  }\n}\n\nexport function $createServerInlineBlockNode(\n  fields: Exclude<InlineBlockFields, 'id'>,\n): ServerInlineBlockNode {\n  return $applyNodeReplacement(\n    new ServerInlineBlockNode({\n      fields: {\n        ...fields,\n        id: fields?.id || new ObjectID.default().toHexString(),\n      },\n    }),\n  )\n}\n\nexport function $isServerInlineBlockNode(\n  node: LexicalNode | null | ServerInlineBlockNode | undefined,\n): node is ServerInlineBlockNode {\n  return node instanceof ServerInlineBlockNode\n}\n"],"names":["useLexicalComposerContext", "useLexicalEditable", "getTranslation", "Button", "Drawer", "EditDepthProvider", "Form", "formatDrawerSlug", "FormSubmit", "RenderFields", "ShimmerEffect", "useConfig", "useDocumentForm", "useDocumentInfo", "useEditDepth", "useServerFunctions", "useTranslation", "abortAndIgnore", "$getNodeByKey", "deepCopyObjectSimpleWithoutReactComponents", "reduceFieldsToValues", "React", "createContext", "useCallback", "useEffect", "useMemo", "useRef", "v4", "uuid", "ObjectID", "$applyNodeReplacement", "React", "addClassNamesToElement", "ObjectID", "$applyNodeReplacement", "DecoratorNode", "ServerInlineBlockNode", "__cacheBuster", "__fields", "constructor", "cacheBuster", "fields", "key", "clone", "node", "__key", "getType", "importDOM", "importJSON", "serializedNode", "$createServerInlineBlockNode", "isInline", "canIndent", "createDOM", "config", "element", "document", "createElement", "theme", "inlineBlock", "decorate", "editor", "exportDOM", "classList", "add", "text", "createTextNode", "getTextContent", "append", "exportJSON", "type", "getFields", "version", "getCacheBuster", "getLatest", "setFields", "preventFormStateUpdate", "writable", "getWritable", "updateDOM", "id", "default", "toHexString", "InlineBlockComponent", "React", "lazy", "then", "module", "default", "InlineBlockNode", "ServerInlineBlockNode", "clone", "node", "getType", "importJSON", "serializedNode", "$createInlineBlockNode", "fields", "decorate", "_editor", "config", "_jsx", "cacheBuster", "getCacheBuster", "className", "theme", "inlineBlock", "formData", "getFields", "nodeKey", "getKey", "exportJSON", "$applyNodeReplacement", "id", "ObjectID", "toHexString", "$isInlineBlockNode", "InlineBlockComponentContext", "createContext", "initialState", "useInlineBlockComponentContext", "React", "use", "InlineBlockComponent", "props", "cacheBuster", "className", "baseClass", "formData", "nodeKey", "editor", "useLexicalComposerContext", "isEditable", "useLexicalEditable", "i18n", "t", "useTranslation", "createdInlineBlock", "fieldProps", "featureClientSchemaMap", "initialLexicalFormState", "schemaPath", "setCreatedInlineBlock", "uuid", "uuidFromContext", "useEditorConfigContext", "fields", "parentDocumentFields", "useDocumentForm", "getFormState", "useServerFunctions", "editDepth", "useEditDepth", "firstTimeDrawer", "useRef", "setInitialState", "useState", "cachedFormState", "id", "formState", "Object", "fromEntries", "entries", "map", "fieldName", "fieldState", "initialValue", "value", "hasMounted", "prevCacheBuster", "useEffect", "current", "CustomLabel", "setCustomLabel", "customComponents", "BlockLabel", "CustomBlock", "setCustomBlock", "Block", "drawerSlug", "formatDrawerSlug", "slug", "depth", "toggleDrawer", "useLexicalDrawer", "inlineBlockElemElemRef", "collectionSlug", "getDocPreferences", "globalSlug", "useDocumentInfo", "config", "useConfig", "componentMapRenderedBlockPath", "blockType", "blocksField", "clientBlock", "blockReferences", "blocksMap", "blocks", "clientBlockFields", "getKey", "length", "undefined", "removeInlineBlock", "useCallback", "update", "$getNodeByKey", "remove", "blockDisplayName", "labels", "singular", "getTranslation", "onChangeAbortControllerRef", "AbortController", "schemaFieldsPath", "abortController", "state", "data", "docPermissions", "docPreferences", "documentFormState", "deepCopyObjectSimpleWithoutReactComponents", "initialBlockData", "initialBlockFormState", "operation", "readOnly", "renderAllFields", "signal", "newFormStateData", "reduceFieldsToValues", "node", "$isInlineBlockNode", "newData", "setFields", "abortAndIgnore", "onChange", "prevFormState", "submit", "controller", "isStateOutOfSync", "keys", "some", "key", "onFormSubmit", "RemoveButton", "useMemo", "_jsx", "Button", "buttonStyle", "disabled", "icon", "onClick", "e", "preventDefault", "round", "size", "tooltip", "label", "EditButton", "el", "InlineBlockContainer", "children", "filter", "Boolean", "join", "ref", "Label", "_jsxs", "Form", "beforeSubmit", "disableValidationOnSubmit", "onSubmit", "EditDepthProvider", "Drawer", "title", "_Fragment", "RenderFields", "forceRender", "parentIndexPath", "parentPath", "parentSchemaPath", "permissions", "FormSubmit", "programmaticSubmit", "ShimmerEffect", "height", "width"],"mappings":"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"}},
    {"offset": {"line": 604, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/relationship/client/drawer/commands.ts"],"sourcesContent":["import type { LexicalCommand } from 'lexical'\n\nimport { createCommand } from 'lexical'\n\nexport const INSERT_RELATIONSHIP_WITH_DRAWER_COMMAND: LexicalCommand<{\n  replace: { nodeKey: string } | false\n}> = createCommand('INSERT_RELATIONSHIP_WITH_DRAWER_COMMAND')\n"],"names":["createCommand", "INSERT_RELATIONSHIP_WITH_DRAWER_COMMAND"],"mappings":";;;;AAEA,OAASA,iBAAAA,MAAqB;;AAEvB,IAAMC,QAERD,gNAAAA,EAAc,yCAAA"}},
    {"offset": {"line": 617, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/utilities/fieldsDrawer/Drawer.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/utilities/fieldsDrawer/DrawerContent.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/upload/client/drawer/commands.ts"],"sourcesContent":["'use client'\nimport type { ClientField, Data, FormState, JsonObject } from 'payload'\n\nimport { Drawer, EditDepthProvider, useModal } from '@payloadcms/ui'\nimport React from 'react'\n\nimport { DrawerContent } from './DrawerContent.js'\n\nexport type FieldsDrawerProps = {\n  readonly className?: string\n  readonly data?: Data\n  readonly drawerSlug: string\n  readonly drawerTitle?: string\n  readonly featureKey: string\n  readonly fieldMapOverride?: ClientField[]\n  readonly handleDrawerSubmit: (fields: FormState, data: JsonObject) => void\n  readonly schemaFieldsPathOverride?: string\n  readonly schemaPath: string\n  readonly schemaPathSuffix?: string\n}\n\n/**\n * This FieldsDrawer component can be used to easily create a Drawer that contains a form with fields within your feature.\n * The fields are taken directly from the schema map based on your `featureKey` and `schemaPathSuffix`. Thus, this can only\n * be used if you provide your field schema inside the `generateSchemaMap` prop of your feature.server.ts.\n */\nexport const FieldsDrawer: React.FC<FieldsDrawerProps> = ({\n  className,\n  data,\n  drawerSlug,\n  drawerTitle,\n  featureKey,\n  fieldMapOverride,\n  handleDrawerSubmit,\n  schemaFieldsPathOverride,\n  schemaPath,\n  schemaPathSuffix,\n}) => {\n  const { closeModal } = useModal()\n  // The Drawer only renders its children (and itself) if it's open. Thus, by extracting the main content\n  // to DrawerContent, this should be faster\n  return (\n    <EditDepthProvider>\n      <Drawer className={className} slug={drawerSlug} title={drawerTitle ?? ''}>\n        <DrawerContent\n          data={data}\n          featureKey={featureKey}\n          fieldMapOverride={fieldMapOverride}\n          handleDrawerSubmit={(args, args2) => {\n            // Simply close drawer - no need for useLexicalDrawer here as at this point,\n            // we don't need to restore the cursor position. This is handled by the useEffect in useLexicalDrawer.\n            closeModal(drawerSlug)\n\n            // Actual drawer submit logic needs to be triggered after the drawer is closed.\n            // That's because the lexical selection / cursor restore logic that is striggerer by\n            // `useLexicalDrawer` neeeds to be triggered before any editor.update calls that may happen\n            // in the `handleDrawerSubmit` function.\n            setTimeout(() => {\n              handleDrawerSubmit(args, args2)\n            }, 1)\n          }}\n          schemaFieldsPathOverride={schemaFieldsPathOverride}\n          schemaPath={schemaPath}\n          schemaPathSuffix={schemaPathSuffix}\n        />\n      </Drawer>\n    </EditDepthProvider>\n  )\n}\n","'use client'\nimport type { FormState } from 'payload'\n\nimport { useLexicalEditable } from '@lexical/react/useLexicalEditable'\nimport {\n  Form,\n  FormSubmit,\n  RenderFields,\n  useDocumentForm,\n  useDocumentInfo,\n  useServerFunctions,\n  useTranslation,\n} from '@payloadcms/ui'\nimport { abortAndIgnore } from '@payloadcms/ui/shared'\nimport { deepCopyObjectSimpleWithoutReactComponents } from 'payload/shared'\nimport React, { useCallback, useEffect, useRef, useState } from 'react'\nimport { v4 as uuid } from 'uuid'\n\nimport type { FieldsDrawerProps } from './Drawer.js'\n\nimport { useEditorConfigContext } from '../../lexical/config/client/EditorConfigProvider.js'\n\nexport const DrawerContent: React.FC<Omit<FieldsDrawerProps, 'drawerSlug' | 'drawerTitle'>> = ({\n  data,\n  featureKey,\n  fieldMapOverride,\n  handleDrawerSubmit,\n  schemaFieldsPathOverride,\n  schemaPath,\n  schemaPathSuffix,\n}) => {\n  const { t } = useTranslation()\n  const { id, collectionSlug, getDocPreferences, globalSlug } = useDocumentInfo()\n  const { fields: parentDocumentFields } = useDocumentForm()\n  const isEditable = useLexicalEditable()\n\n  const onChangeAbortControllerRef = useRef(new AbortController())\n\n  const [initialState, setInitialState] = useState<false | FormState | undefined>(false)\n\n  const {\n    fieldProps: { featureClientSchemaMap },\n  } = useEditorConfigContext()\n\n  const { getFormState } = useServerFunctions()\n\n  const schemaFieldsPath =\n    schemaFieldsPathOverride ??\n    `${schemaPath}.lexical_internal_feature.${featureKey}${schemaPathSuffix ? `.${schemaPathSuffix}` : ''}`\n\n  const fields: any = fieldMapOverride ?? featureClientSchemaMap[featureKey]?.[schemaFieldsPath] // Field Schema\n\n  useEffect(() => {\n    const controller = new AbortController()\n\n    const awaitInitialState = async () => {\n      const { state } = await getFormState({\n        id,\n        collectionSlug,\n        data: data ?? {},\n        docPermissions: {\n          fields: true,\n        },\n        docPreferences: await getDocPreferences(),\n        documentFormState: deepCopyObjectSimpleWithoutReactComponents(parentDocumentFields),\n        globalSlug,\n        initialBlockData: data,\n        operation: 'update',\n        readOnly: !isEditable,\n        renderAllFields: true,\n        schemaPath: schemaFieldsPath,\n        signal: controller.signal,\n      })\n\n      setInitialState(state)\n    }\n\n    void awaitInitialState()\n\n    return () => {\n      abortAndIgnore(controller)\n    }\n  }, [\n    schemaFieldsPath,\n    id,\n    data,\n    getFormState,\n    collectionSlug,\n    isEditable,\n    globalSlug,\n    getDocPreferences,\n    parentDocumentFields,\n  ])\n\n  const onChange = useCallback(\n    async ({ formState: prevFormState }: { formState: FormState }) => {\n      abortAndIgnore(onChangeAbortControllerRef.current)\n\n      const controller = new AbortController()\n      onChangeAbortControllerRef.current = controller\n\n      const { state } = await getFormState({\n        id,\n        collectionSlug,\n        docPermissions: {\n          fields: true,\n        },\n        docPreferences: await getDocPreferences(),\n        documentFormState: deepCopyObjectSimpleWithoutReactComponents(parentDocumentFields),\n        formState: prevFormState,\n        globalSlug,\n        initialBlockFormState: prevFormState,\n        operation: 'update',\n        readOnly: !isEditable,\n        schemaPath: schemaFieldsPath,\n        signal: controller.signal,\n      })\n\n      if (!state) {\n        return prevFormState\n      }\n\n      return state\n    },\n    [\n      getFormState,\n      id,\n      isEditable,\n      collectionSlug,\n      getDocPreferences,\n      parentDocumentFields,\n      globalSlug,\n      schemaFieldsPath,\n    ],\n  )\n\n  // cleanup effect\n  useEffect(() => {\n    return () => {\n      abortAndIgnore(onChangeAbortControllerRef.current)\n    }\n  }, [])\n\n  if (initialState === false) {\n    return null\n  }\n\n  return (\n    <Form\n      beforeSubmit={[onChange]}\n      disableValidationOnSubmit\n      fields={Array.isArray(fields) ? fields : []}\n      initialState={initialState}\n      onChange={[onChange]}\n      onSubmit={handleDrawerSubmit}\n      uuid={uuid()}\n    >\n      <RenderFields\n        fields={Array.isArray(fields) ? fields : []}\n        forceRender\n        parentIndexPath=\"\"\n        parentPath=\"\" // See Blocks feature path for details as for why this is empty\n        parentSchemaPath={schemaFieldsPath}\n        permissions={true}\n        readOnly={!isEditable}\n      />\n      <FormSubmit>{t('fields:saveChanges')}</FormSubmit>\n    </Form>\n  )\n}\n","'use client'\nimport type { LexicalCommand } from 'lexical'\n\nimport { createCommand } from 'lexical'\n\nexport const INSERT_UPLOAD_WITH_DRAWER_COMMAND: LexicalCommand<{\n  replace: { nodeKey: string } | false\n}> = createCommand('INSERT_UPLOAD_WITH_DRAWER_COMMAND')\n"],"names":["c", "_c", "Drawer", "EditDepthProvider", "useModal", "useLexicalEditable", "Form", "FormSubmit", "RenderFields", "useDocumentForm", "useDocumentInfo", "useServerFunctions", "useTranslation", "abortAndIgnore", "deepCopyObjectSimpleWithoutReactComponents", "useCallback", "useEffect", "useRef", "useState", "v4", "uuid", "DrawerContent", "data", "featureKey", "fieldMapOverride", "handleDrawerSubmit", "schemaFieldsPathOverride", "schemaPath", "schemaPathSuffix", "t", "useTranslation", "id", "collectionSlug", "getDocPreferences", "globalSlug", "useDocumentInfo", "fields", "parentDocumentFields", "useDocumentForm", "isEditable", "useLexicalEditable", "onChangeAbortControllerRef", "useRef", "AbortController", "initialState", "setInitialState", "useState", "fieldProps", "featureClientSchemaMap", "useEditorConfigContext", "getFormState", "useServerFunctions", "schemaFieldsPath", "useEffect", "controller", "state", "docPermissions", "docPreferences", "documentFormState", "deepCopyObjectSimpleWithoutReactComponents", "initialBlockData", "operation", "readOnly", "renderAllFields", "signal", "abortAndIgnore", "onChange", "useCallback", "formState", "prevFormState", "current", "initialBlockFormState", "_jsxs", "Form", "beforeSubmit", "disableValidationOnSubmit", "Array", "isArray", "onSubmit", "uuid", "_jsx", "RenderFields", "forceRender", "parentIndexPath", "parentPath", "parentSchemaPath", "permissions", "FormSubmit", "FieldsDrawer", "t0", "$", "_c", "className", "data", "drawerSlug", "drawerTitle", "featureKey", "fieldMapOverride", "handleDrawerSubmit", "schemaFieldsPathOverride", "schemaPath", "schemaPathSuffix", "closeModal", "useModal", "t1", "t2", "args", "args2", "setTimeout", "t3", "_jsx", "EditDepthProvider", "children", "Drawer", "slug", "title", "DrawerContent", "createCommand", "INSERT_UPLOAD_WITH_DRAWER_COMMAND"],"mappings":"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"}},
    {"offset": {"line": 777, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/utilities/fieldsDrawer/useLexicalDocumentDrawer.tsx"],"sourcesContent":["'use client'\nimport type { UseDocumentDrawer } from '@payloadcms/ui'\nimport type { BaseSelection } from 'lexical'\n\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext'\nimport { useDocumentDrawer, useModal } from '@payloadcms/ui'\nimport { $getPreviousSelection, $getSelection, $setSelection } from 'lexical'\nimport { useCallback, useEffect, useState } from 'react'\n\n/**\n *\n * Wrapper around useDocumentDrawer that restores and saves selection state (cursor position) when opening and closing the drawer.\n * By default, the lexical cursor position may be lost when opening a drawer and clicking somewhere on that drawer.\n */\nexport const useLexicalDocumentDrawer = (\n  args: Parameters<UseDocumentDrawer>[0],\n): {\n  closeDocumentDrawer: () => void\n  DocumentDrawer: ReturnType<UseDocumentDrawer>[0]\n  documentDrawerSlug: string\n  DocumentDrawerToggler: ReturnType<UseDocumentDrawer>[1]\n} => {\n  const [editor] = useLexicalComposerContext()\n  const [selectionState, setSelectionState] = useState<BaseSelection | null>(null)\n  const [wasOpen, setWasOpen] = useState<boolean>(false)\n\n  const [\n    DocumentDrawer,\n    DocumentDrawerToggler,\n    { closeDrawer: closeDrawer, drawerSlug: documentDrawerSlug },\n  ] = useDocumentDrawer(args)\n  const { modalState } = useModal()\n\n  const storeSelection = useCallback(() => {\n    editor.read(() => {\n      const selection = $getSelection() ?? $getPreviousSelection()\n      setSelectionState(selection)\n    })\n    setWasOpen(true)\n  }, [editor])\n\n  const restoreSelection = useCallback(() => {\n    if (selectionState) {\n      editor.update(\n        () => {\n          $setSelection(selectionState.clone())\n        },\n        { discrete: true, skipTransforms: true },\n      )\n    }\n  }, [editor, selectionState])\n\n  const closeDocumentDrawer = () => {\n    //restoreSelection() // Should already be stored by the useEffect below\n    closeDrawer()\n  }\n\n  // We need to handle drawer closing via a useEffect, as toggleDrawer / closeDrawer will not be triggered if the drawer\n  // is closed by clicking outside of the drawer. This useEffect will handle everything.\n  useEffect(() => {\n    if (!wasOpen) {\n      return\n    }\n\n    const thisModalState = modalState[documentDrawerSlug]\n    // Exists in modalState (thus has opened at least once before) and is closed\n    if (thisModalState && !thisModalState?.isOpen) {\n      setWasOpen(false)\n      setTimeout(() => {\n        restoreSelection()\n      }, 1)\n    }\n  }, [modalState, documentDrawerSlug, restoreSelection, wasOpen])\n\n  return {\n    closeDocumentDrawer,\n    DocumentDrawer,\n    documentDrawerSlug,\n    DocumentDrawerToggler: (props) => <DocumentDrawerToggler {...props} onClick={storeSelection} />,\n  }\n}\n"],"names":["c", "_c", "useLexicalComposerContext", "useDocumentDrawer", "useModal", "$getPreviousSelection", "$getSelection", "$setSelection", "useEffect", "useState", "useLexicalDocumentDrawer", "args", "$", "editor", "selectionState", "setSelectionState", "wasOpen", "setWasOpen", "DocumentDrawer", "DocumentDrawerToggler", "t0", "closeDrawer", "drawerSlug", "documentDrawerSlug", "modalState", "t1", "read", "selection", "storeSelection", "t2", "update", "clone", "discrete", "skipTransforms", "restoreSelection", "t3", "closeDocumentDrawer", "t4", "t5", "thisModalState", "isOpen", "setTimeout", "t6", "props", "_jsx", "onClick", "t7"],"mappings":"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"}},
    {"offset": {"line": 846, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/utils/canUseDOM.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/utilities/useRunDeprioritized.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/utils/point.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/plugins/SlashMenu/LexicalTypeaheadMenuPlugin/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/plugins/SlashMenu/LexicalTypeaheadMenuPlugin/LexicalMenu.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/utils/rect.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/nodes/index.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/packages/%40lexical/markdown/MarkdownExport.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/packages/%40lexical/markdown/utils.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/packages/%40lexical/markdown/MarkdownImport.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/packages/%40lexical/markdown/importTextTransformers.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/packages/%40lexical/markdown/importTextFormatTransformer.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/packages/%40lexical/markdown/importTextMatchTransformer.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/packages/%40lexical/markdown/MarkdownShortcuts.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/packages/%40lexical/markdown/MarkdownTransformers.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/packages/%40lexical/markdown/index.ts"],"sourcesContent":["'use client'\nexport const CAN_USE_DOM: boolean =\n  typeof window !== 'undefined' &&\n  typeof window.document !== 'undefined' &&\n  typeof window.document.createElement !== 'undefined'\n","'use client'\nimport { useCallback, useRef } from 'react'\n\n/**\n * Simple hook that lets you run any callback once the main thread is idle\n * (via `requestIdleCallback`) or when that API is missing (Safari) - after the\n * next animation frame (`interactionResponse`).\n *\n * This will help you to avoid blocking the main thread with heavy work.\n *\n * The latest invocation wins: if a new run is queued before the previous one\n * executes, the previous task is cancelled.\n *\n * Usage:\n * ```ts\n * const runDeprioritized = useRunDeprioritized();\n *\n * const onEditorChange = (state: EditorState) => {\n *   runDeprioritized(() => {\n *     // heavy work here \n *   });\n * };\n * ```\n *\n * @param timeout  Optional timeout (ms) for `requestIdleCallback`; defaults to 500 ms.\n * @returns        A `runDeprioritized(fn)` helper.\n */\n\nexport function useRunDeprioritized(timeout = 500) {\n  const idleHandleRef = useRef<number>(undefined)\n\n  /**\n   * Schedule `fn` and resolve when it has executed.\n   */\n  const runDeprioritized = useCallback(\n    (fn: () => void): Promise<void> => {\n      return new Promise<void>((resolve) => {\n        const exec = () => {\n          fn()\n          resolve()\n        }\n\n        if ('requestIdleCallback' in window) {\n          // Cancel any previously queued task so only the latest runs.\n          if ('cancelIdleCallback' in window && idleHandleRef.current !== undefined) {\n            // Cancel earlier scheduled value updates,\n            // so that a CPU-limited event loop isn't flooded with n callbacks for n keystrokes into the rich text field,\n            // but that there's only ever the latest one state update\n            // dispatch task, to be executed with the next idle time,\n            // or the deadline of 500ms.\n            cancelIdleCallback(idleHandleRef.current)\n          }\n          // Schedule the state update to happen the next time the browser has sufficient resources,\n          // or the latest after 500ms.\n          idleHandleRef.current = requestIdleCallback(exec, { timeout })\n        } else {\n          // Safari fallback: rAF + setTimeout shim.\n          void interactionResponse().then(exec)\n        }\n      })\n    },\n    [timeout],\n  )\n\n  return runDeprioritized\n}\n\nfunction interactionResponse(): Promise<unknown> {\n  // Taken from https://github.com/vercel-labs/await-interaction-response/tree/main/packages/await-interaction-response/src\n\n  return new Promise((resolve) => {\n    setTimeout(resolve, 100) // Fallback for the case where the animation frame never fires.\n    requestAnimationFrame(() => {\n      setTimeout(resolve, 0)\n    })\n  })\n}\n","'use client'\nexport class Point {\n  private readonly _x: number\n\n  private readonly _y: number\n\n  constructor(x: number, y: number) {\n    this._x = x\n    this._y = y\n  }\n\n  public calcDeltaXTo({ x }: Point): number {\n    return this.x - x\n  }\n\n  public calcDeltaYTo({ y }: Point): number {\n    return this.y - y\n  }\n\n  public calcDistanceTo(point: Point): number {\n    return Math.sqrt(Math.pow(this.calcDeltaXTo(point), 2) + Math.pow(this.calcDeltaYTo(point), 2))\n  }\n\n  public calcHorizontalDistanceTo(point: Point): number {\n    return Math.abs(this.calcDeltaXTo(point))\n  }\n\n  public calcVerticalDistance(point: Point): number {\n    return Math.abs(this.calcDeltaYTo(point))\n  }\n\n  public equals({ x, y }: Point): boolean {\n    return this.x === x && this.y === y\n  }\n\n  get x(): number {\n    return this._x\n  }\n\n  get y(): number {\n    return this._y\n  }\n}\n\nexport function isPoint(x: unknown): x is Point {\n  return x instanceof Point\n}\n","'use client'\nimport type { LexicalCommand, LexicalEditor, ParagraphNode, RangeSelection } from 'lexical'\n\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext.js'\nimport { mergeRegister } from '@lexical/utils'\nimport {\n  $getSelection,\n  $isRangeSelection,\n  $isTextNode,\n  COMMAND_PRIORITY_LOW,\n  createCommand,\n  getDOMSelection,\n} from 'lexical'\nimport { type JSX, useCallback, useEffect, useState } from 'react'\nimport * as React from 'react'\n\nimport type { MenuTextMatch, TriggerFn } from '../useMenuTriggerMatch.js'\nimport type { MenuRenderFn, MenuResolution } from './LexicalMenu.js'\nimport type { SlashMenuGroupInternal } from './types.js'\n\nimport { LexicalMenu, useMenuAnchorRef } from './LexicalMenu.js'\n\nexport const PUNCTUATION = '\\\\.,\\\\+\\\\*\\\\?\\\\$\\\\@\\\\|#{}\\\\(\\\\)\\\\^\\\\-\\\\[\\\\]\\\\\\\\/!%\\'\"~=<>_:;'\n\nfunction getTextUpToAnchor(selection: RangeSelection): null | string {\n  const anchor = selection.anchor\n  if (anchor.type !== 'text') {\n    return null\n  }\n  const anchorNode = anchor.getNode()\n  if (!anchorNode.isSimpleText()) {\n    return null\n  }\n  const anchorOffset = anchor.offset\n  return anchorNode.getTextContent().slice(0, anchorOffset)\n}\n\nfunction tryToPositionRange(leadOffset: number, range: Range, editorWindow: Window): boolean {\n  const domSelection = getDOMSelection(editorWindow)\n  if (domSelection === null || !domSelection.isCollapsed) {\n    return false\n  }\n\n  const anchorNode = domSelection.anchorNode\n  const startOffset = leadOffset\n  const endOffset = domSelection.anchorOffset\n\n  if (anchorNode == null || endOffset == null) {\n    return false\n  }\n\n  try {\n    range.setStart(anchorNode, startOffset)\n    // if endOffset is 0, positioning the range for when you click the plus button to open the slash menu will fial\n    range.setEnd(anchorNode, endOffset > 1 ? endOffset : 1)\n  } catch (error) {\n    return false\n  }\n\n  return true\n}\n\nfunction getQueryTextForSearch(editor: LexicalEditor): string | undefined {\n  let text\n  editor.getEditorState().read(() => {\n    const selection = $getSelection()\n    if (!$isRangeSelection(selection)) {\n      return\n    }\n    text = getTextUpToAnchor(selection)\n  })\n  return text\n}\n\nfunction isSelectionOnEntityBoundary(editor: LexicalEditor, offset: number): boolean {\n  if (offset !== 0) {\n    return false\n  }\n  return editor.getEditorState().read(() => {\n    const selection = $getSelection()\n    if ($isRangeSelection(selection)) {\n      const anchor = selection.anchor\n      const anchorNode = anchor.getNode()\n      const prevSibling = anchorNode.getPreviousSibling()\n      return $isTextNode(prevSibling) && prevSibling.isTextEntity()\n    }\n    return false\n  })\n}\n\nfunction startTransition(callback: () => void) {\n  if (React.startTransition) {\n    React.startTransition(callback)\n  } else {\n    callback()\n  }\n}\n\nexport { useDynamicPositioning } from './LexicalMenu.js'\n\nexport type TypeaheadMenuPluginProps = {\n  anchorClassName?: string\n  anchorElem: HTMLElement\n  groups: Array<SlashMenuGroupInternal>\n  menuRenderFn: MenuRenderFn\n  onClose?: () => void\n  onOpen?: (resolution: MenuResolution) => void\n  onQueryChange: (matchingString: null | string) => void\n  triggerFn: TriggerFn\n}\n\nexport const ENABLE_SLASH_MENU_COMMAND: LexicalCommand<{\n  node: ParagraphNode\n}> = createCommand('ENABLE_SLASH_MENU_COMMAND')\n\nexport function LexicalTypeaheadMenuPlugin({\n  anchorClassName,\n  anchorElem,\n  groups,\n  menuRenderFn,\n  onClose,\n  onOpen,\n  onQueryChange,\n  triggerFn,\n}: TypeaheadMenuPluginProps): JSX.Element | null {\n  const [editor] = useLexicalComposerContext()\n  const [resolution, setResolution] = useState<MenuResolution | null>(null)\n  const anchorElementRef = useMenuAnchorRef(anchorElem, resolution, setResolution, anchorClassName)\n\n  const closeTypeahead = useCallback(() => {\n    setResolution(null)\n    if (onClose != null && resolution !== null) {\n      onClose()\n    }\n  }, [onClose, resolution])\n\n  const openTypeahead = useCallback(\n    (res: MenuResolution) => {\n      setResolution(res)\n      if (onOpen != null && resolution === null) {\n        onOpen(res)\n      }\n    },\n    [onOpen, resolution],\n  )\n\n  // This is mainly used for the AddBlockHandlePlugin, so that the slash menu can be opened from there\n  useEffect(() => {\n    return mergeRegister(\n      editor.registerCommand(\n        ENABLE_SLASH_MENU_COMMAND,\n        ({ node }) => {\n          editor.getEditorState().read(() => {\n            const match: MenuTextMatch = {\n              leadOffset: 0,\n              matchingString: '',\n              replaceableString: '',\n            }\n            if (!isSelectionOnEntityBoundary(editor, match.leadOffset)) {\n              if (node !== null) {\n                const editorWindow = editor._window ?? window\n                const range = editorWindow.document.createRange()\n\n                const isRangePositioned = tryToPositionRange(match.leadOffset, range, editorWindow)\n                if (isRangePositioned !== null) {\n                  startTransition(() =>\n                    openTypeahead({\n                      getRect: () => {\n                        return range.getBoundingClientRect()\n                      },\n                      match,\n                    }),\n                  )\n                }\n\n                return\n              }\n            }\n          })\n\n          return true\n        },\n        COMMAND_PRIORITY_LOW,\n      ),\n    )\n  }, [editor, openTypeahead])\n\n  useEffect(() => {\n    const updateListener = () => {\n      editor.getEditorState().read(() => {\n        const editorWindow = editor._window ?? window\n        const range = editorWindow.document.createRange()\n        const selection = $getSelection()\n        const text = getQueryTextForSearch(editor)\n\n        if (\n          !$isRangeSelection(selection) ||\n          !selection.isCollapsed() ||\n          text === undefined ||\n          range === null\n        ) {\n          closeTypeahead()\n          return\n        }\n\n        const match = triggerFn({ editor, query: text })\n        onQueryChange(match ? match.matchingString : null)\n\n        if (match !== null && !isSelectionOnEntityBoundary(editor, match.leadOffset)) {\n          const isRangePositioned = tryToPositionRange(match.leadOffset, range, editorWindow)\n          if (isRangePositioned !== null) {\n            startTransition(() =>\n              openTypeahead({\n                getRect: () => {\n                  return range.getBoundingClientRect()\n                },\n                match,\n              }),\n            )\n            return\n          }\n        }\n        closeTypeahead()\n      })\n    }\n\n    const removeUpdateListener = editor.registerUpdateListener(updateListener)\n\n    return () => {\n      removeUpdateListener()\n    }\n  }, [editor, triggerFn, onQueryChange, resolution, closeTypeahead, openTypeahead])\n\n  return anchorElementRef.current === null || resolution === null || editor === null ? null : (\n    <LexicalMenu\n      anchorElementRef={anchorElementRef}\n      close={closeTypeahead}\n      editor={editor}\n      groups={groups}\n      menuRenderFn={menuRenderFn}\n      resolution={resolution}\n      shouldSplitNodeWithQuery\n    />\n  )\n}\n\nexport type { MenuRenderFn, MenuResolution, MenuTextMatch, TriggerFn }\n","'use client'\nimport type { BaseSelection, LexicalCommand, LexicalEditor, TextNode } from 'lexical'\nimport type { JSX, ReactPortal, RefObject } from 'react'\n\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext.js'\nimport { mergeRegister } from '@lexical/utils'\nimport {\n  $getSelection,\n  $isRangeSelection,\n  $setSelection,\n  COMMAND_PRIORITY_LOW,\n  COMMAND_PRIORITY_NORMAL,\n  createCommand,\n  KEY_ARROW_DOWN_COMMAND,\n  KEY_ARROW_UP_COMMAND,\n  KEY_ENTER_COMMAND,\n  KEY_ESCAPE_COMMAND,\n  KEY_TAB_COMMAND,\n} from 'lexical'\nimport { useCallback, useEffect, useLayoutEffect, useMemo, useRef, useState } from 'react'\n\nimport type { MenuTextMatch } from '../useMenuTriggerMatch.js'\nimport type { SlashMenuGroupInternal, SlashMenuItem, SlashMenuItemInternal } from './types.js'\n\nimport { CAN_USE_DOM } from '../../../utils/canUseDOM.js'\n\nexport type MenuResolution = {\n  getRect: () => DOMRect\n  match?: MenuTextMatch\n}\n\nconst baseClass = 'slash-menu-popup'\n\nexport type MenuRenderFn = (\n  anchorElementRef: RefObject<HTMLElement | null>,\n  itemProps: {\n    groups: Array<SlashMenuGroupInternal>\n    selectedItemKey: null | string\n    selectItemAndCleanUp: (selectedItem: SlashMenuItem) => void\n    setSelectedItemKey: (itemKey: string) => void\n  },\n  matchingString: null | string,\n) => JSX.Element | null | ReactPortal\n\nconst scrollIntoViewIfNeeded = (target: HTMLElement) => {\n  const typeaheadContainerNode = document.getElementById('slash-menu')\n  if (!typeaheadContainerNode) {\n    return\n  }\n\n  const typeaheadRect = typeaheadContainerNode.getBoundingClientRect()\n\n  if (typeaheadRect.top + typeaheadRect.height > window.innerHeight) {\n    typeaheadContainerNode.scrollIntoView({\n      block: 'center',\n    })\n  }\n\n  if (typeaheadRect.top < 0) {\n    typeaheadContainerNode.scrollIntoView({\n      block: 'center',\n    })\n  }\n\n  target.scrollIntoView({ block: 'nearest' })\n}\n\n/**\n * Walk backwards along user input and forward through entity title to try\n * and replace more of the user's text with entity.\n */\nfunction getFullMatchOffset(documentText: string, entryText: string, offset: number) {\n  let triggerOffset = offset\n  for (let i = triggerOffset; i <= entryText.length; i++) {\n    if (documentText.substring(documentText.length - i) === entryText.substring(0, i)) {\n      triggerOffset = i\n    }\n  }\n  return triggerOffset\n}\n\n/**\n * Split Lexical TextNode and return a new TextNode only containing matched text.\n * Common use cases include: removing the node, replacing with a new node.\n */\nfunction $splitNodeContainingQuery(match: MenuTextMatch): TextNode | undefined {\n  const selection = $getSelection()\n  if (!$isRangeSelection(selection) || !selection.isCollapsed()) {\n    return\n  }\n  const anchor = selection.anchor\n  if (anchor.type !== 'text') {\n    return\n  }\n  const anchorNode = anchor.getNode()\n  if (!anchorNode.isSimpleText()) {\n    return\n  }\n  const selectionOffset = anchor.offset\n  const textContent = anchorNode.getTextContent().slice(0, selectionOffset)\n  const characterOffset = match.replaceableString.length\n  const queryOffset = getFullMatchOffset(textContent, match.matchingString, characterOffset)\n  const startOffset = selectionOffset - queryOffset\n  if (startOffset < 0) {\n    return\n  }\n  let newNode\n  if (startOffset === 0) {\n    ;[newNode] = anchorNode.splitText(selectionOffset)\n  } else {\n    ;[, newNode] = anchorNode.splitText(startOffset, selectionOffset)\n  }\n\n  return newNode\n}\n\n// Got from https://stackoverflow.com/a/42543908/2013580\nexport function getScrollParent(\n  element: HTMLElement,\n  includeHidden: boolean,\n): HTMLBodyElement | HTMLElement {\n  let style = getComputedStyle(element)\n  const excludeStaticParent = style.position === 'absolute'\n  const overflowRegex = includeHidden ? /(auto|scroll|hidden)/ : /(auto|scroll)/\n  if (style.position === 'fixed') {\n    return document.body\n  }\n  for (let parent: HTMLElement | null = element; (parent = parent.parentElement); ) {\n    style = getComputedStyle(parent)\n    if (excludeStaticParent && style.position === 'static') {\n      continue\n    }\n    if (overflowRegex.test(style.overflow + style.overflowY + style.overflowX)) {\n      return parent\n    }\n  }\n  return document.body\n}\n\nfunction isTriggerVisibleInNearestScrollContainer(\n  targetElement: HTMLElement,\n  containerElement: HTMLElement,\n): boolean {\n  const tRect = targetElement.getBoundingClientRect()\n  const cRect = containerElement.getBoundingClientRect()\n  return tRect.top > cRect.top && tRect.top < cRect.bottom\n}\n\n// Reposition the menu on scroll, window resize, and element resize.\nexport function useDynamicPositioning(\n  resolution: MenuResolution | null,\n  targetElementRef: RefObject<HTMLElement | null>,\n  onReposition: () => void,\n  onVisibilityChange?: (isInView: boolean) => void,\n) {\n  const [editor] = useLexicalComposerContext()\n  useEffect(() => {\n    const targetElement = targetElementRef.current\n    if (targetElement != null && resolution != null) {\n      const rootElement = editor.getRootElement()\n      const rootScrollParent =\n        rootElement != null ? getScrollParent(rootElement, false) : document.body\n      let ticking = false\n      let previousIsInView = isTriggerVisibleInNearestScrollContainer(\n        targetElement,\n        rootScrollParent,\n      )\n      const handleScroll = function () {\n        if (!ticking) {\n          window.requestAnimationFrame(function () {\n            onReposition()\n            ticking = false\n          })\n          ticking = true\n        }\n        const isInView = isTriggerVisibleInNearestScrollContainer(targetElement, rootScrollParent)\n        if (isInView !== previousIsInView) {\n          previousIsInView = isInView\n          if (onVisibilityChange != null) {\n            onVisibilityChange(isInView)\n          }\n        }\n      }\n      const resizeObserver = new ResizeObserver(onReposition)\n      window.addEventListener('resize', onReposition)\n      document.addEventListener('scroll', handleScroll, {\n        capture: true,\n        passive: true,\n      })\n      resizeObserver.observe(targetElement)\n      return () => {\n        resizeObserver.disconnect()\n        window.removeEventListener('resize', onReposition)\n        document.removeEventListener('scroll', handleScroll, true)\n      }\n    }\n  }, [editor, onVisibilityChange, onReposition, resolution, targetElementRef])\n}\n\nexport const SCROLL_TYPEAHEAD_OPTION_INTO_VIEW_COMMAND: LexicalCommand<{\n  index: number\n  item: SlashMenuItemInternal\n}> = createCommand('SCROLL_TYPEAHEAD_OPTION_INTO_VIEW_COMMAND')\n\nexport function LexicalMenu({\n  anchorElementRef,\n  close,\n  editor,\n  // groups filtering is already handled in SlashMenu/index.tsx. Thus, groups always contains the matching items.\n  groups,\n  menuRenderFn,\n  resolution,\n  shouldSplitNodeWithQuery = false,\n}: {\n  anchorElementRef: RefObject<HTMLElement | null>\n  close: () => void\n  editor: LexicalEditor\n  groups: Array<SlashMenuGroupInternal>\n  menuRenderFn: MenuRenderFn\n  resolution: MenuResolution\n  shouldSplitNodeWithQuery?: boolean\n}): JSX.Element | null {\n  const [selectedItemKey, setSelectedItemKey] = useState<null | string>(null)\n\n  const matchingString = (resolution.match && resolution.match.matchingString) || ''\n\n  const updateSelectedItem = useCallback(\n    (item: SlashMenuItem) => {\n      const rootElem = editor.getRootElement()\n      if (rootElem !== null) {\n        rootElem.setAttribute('aria-activedescendant', `${baseClass}__item-${item.key}`)\n        setSelectedItemKey(item.key)\n      }\n    },\n    [editor],\n  )\n\n  const setSelectedItemKeyToFirstMatchingItem = useCallback(() => {\n    // set selected item to the first of the matching ones\n    if (groups !== null && matchingString != null) {\n      // groups filtering is already handled in SlashMenu/index.tsx. Thus, groups always contains the matching items.\n      const allItems = groups.flatMap((group) => group.items)\n\n      if (allItems.length) {\n        const firstMatchingItem = allItems[0]!\n        updateSelectedItem(firstMatchingItem)\n      }\n    }\n  }, [groups, updateSelectedItem, matchingString])\n\n  useEffect(() => {\n    setSelectedItemKeyToFirstMatchingItem()\n  }, [matchingString, setSelectedItemKeyToFirstMatchingItem])\n\n  const selectItemAndCleanUp = useCallback(\n    (selectedItem: SlashMenuItem) => {\n      close()\n\n      editor.update(() => {\n        const textNodeContainingQuery =\n          resolution.match != null && shouldSplitNodeWithQuery\n            ? $splitNodeContainingQuery(resolution.match)\n            : null\n\n        if (textNodeContainingQuery) {\n          textNodeContainingQuery.remove()\n        }\n      })\n\n      setTimeout(() => {\n        // Needed in Firefox. See https://github.com/payloadcms/payload/issues/10724\n        let selection: BaseSelection | undefined\n        editor.read(() => {\n          selection = $getSelection()?.clone()\n        })\n        editor.update(() => {\n          if (selection) {\n            $setSelection(selection)\n          }\n        })\n\n        selectedItem.onSelect({\n          editor,\n          queryString: resolution.match ? resolution.match.matchingString : '',\n        })\n      }, 0)\n    },\n    [editor, shouldSplitNodeWithQuery, resolution.match, close],\n  )\n\n  useEffect(() => {\n    return () => {\n      const rootElem = editor.getRootElement()\n      if (rootElem !== null) {\n        rootElem.removeAttribute('aria-activedescendant')\n      }\n    }\n  }, [editor])\n\n  useLayoutEffect(() => {\n    if (groups === null) {\n      setSelectedItemKey(null)\n    } else if (selectedItemKey === null) {\n      setSelectedItemKeyToFirstMatchingItem()\n    }\n  }, [groups, selectedItemKey, updateSelectedItem, setSelectedItemKeyToFirstMatchingItem])\n\n  useEffect(() => {\n    return mergeRegister(\n      editor.registerCommand(\n        SCROLL_TYPEAHEAD_OPTION_INTO_VIEW_COMMAND,\n        ({ item }) => {\n          if (item.ref && item.ref.current != null) {\n            scrollIntoViewIfNeeded(item.ref.current)\n            return true\n          }\n\n          return false\n        },\n        COMMAND_PRIORITY_LOW,\n      ),\n    )\n  }, [editor, updateSelectedItem])\n\n  useEffect(() => {\n    return mergeRegister(\n      editor.registerCommand<KeyboardEvent>(\n        KEY_ARROW_DOWN_COMMAND,\n        (payload) => {\n          const event = payload\n          if (groups !== null && groups.length && selectedItemKey !== null) {\n            const allItems = groups.flatMap((group) => group.items)\n            const selectedIndex = allItems.findIndex((item) => item.key === selectedItemKey)\n\n            const newSelectedIndex = selectedIndex !== allItems.length - 1 ? selectedIndex + 1 : 0\n\n            const newSelectedItem = allItems[newSelectedIndex]\n            if (!newSelectedItem) {\n              return false\n            }\n\n            updateSelectedItem(newSelectedItem)\n            if (newSelectedItem.ref != null && newSelectedItem.ref.current) {\n              editor.dispatchCommand(SCROLL_TYPEAHEAD_OPTION_INTO_VIEW_COMMAND, {\n                index: newSelectedIndex,\n                item: newSelectedItem,\n              })\n            }\n            event.preventDefault()\n            event.stopImmediatePropagation()\n          }\n          return true\n        },\n        COMMAND_PRIORITY_NORMAL,\n      ),\n      editor.registerCommand<KeyboardEvent>(\n        KEY_ARROW_UP_COMMAND,\n        (payload) => {\n          const event = payload\n          if (groups !== null && groups.length && selectedItemKey !== null) {\n            const allItems = groups.flatMap((group) => group.items)\n            const selectedIndex = allItems.findIndex((item) => item.key === selectedItemKey)\n\n            const newSelectedIndex = selectedIndex !== 0 ? selectedIndex - 1 : allItems.length - 1\n\n            const newSelectedItem = allItems[newSelectedIndex]\n            if (!newSelectedItem) {\n              return false\n            }\n\n            updateSelectedItem(newSelectedItem)\n            if (newSelectedItem.ref != null && newSelectedItem.ref.current) {\n              scrollIntoViewIfNeeded(newSelectedItem.ref.current)\n            }\n            event.preventDefault()\n            event.stopImmediatePropagation()\n          }\n          return true\n        },\n        COMMAND_PRIORITY_NORMAL,\n      ),\n      editor.registerCommand<KeyboardEvent>(\n        KEY_ESCAPE_COMMAND,\n        (payload) => {\n          const event = payload\n          event.preventDefault()\n          event.stopImmediatePropagation()\n          close()\n          return true\n        },\n        COMMAND_PRIORITY_LOW,\n      ),\n      editor.registerCommand<KeyboardEvent>(\n        KEY_TAB_COMMAND,\n        (payload) => {\n          const event = payload\n\n          if (groups === null || selectedItemKey === null) {\n            return false\n          }\n          const allItems = groups.flatMap((group) => group.items)\n          const selectedItem = allItems.find((item) => item.key === selectedItemKey)\n          if (!selectedItem) {\n            return false\n          }\n\n          event.preventDefault()\n          event.stopImmediatePropagation()\n          selectItemAndCleanUp(selectedItem)\n          return true\n        },\n        COMMAND_PRIORITY_NORMAL,\n      ),\n      editor.registerCommand(\n        KEY_ENTER_COMMAND,\n        (event: KeyboardEvent | null) => {\n          if (groups === null || selectedItemKey === null) {\n            return false\n          }\n          const allItems = groups.flatMap((group) => group.items)\n          const selectedItem = allItems.find((item) => item.key === selectedItemKey)\n          if (!selectedItem) {\n            return false\n          }\n\n          if (event !== null) {\n            event.preventDefault()\n            event.stopImmediatePropagation()\n          }\n          selectItemAndCleanUp(selectedItem)\n          return true\n        },\n        COMMAND_PRIORITY_NORMAL,\n      ),\n    )\n  }, [selectItemAndCleanUp, close, editor, groups, selectedItemKey, updateSelectedItem])\n\n  const listItemProps = useMemo(\n    () => ({\n      groups,\n      selectedItemKey,\n      selectItemAndCleanUp,\n      setSelectedItemKey,\n    }),\n    [selectItemAndCleanUp, selectedItemKey, groups],\n  )\n\n  return menuRenderFn(\n    anchorElementRef,\n    listItemProps,\n    resolution.match ? resolution.match.matchingString : '',\n  )\n}\n\nfunction setContainerDivAttributes(containerDiv: HTMLElement, className?: string) {\n  if (className != null) {\n    containerDiv.className = className\n  }\n  containerDiv.setAttribute('aria-label', 'Slash menu')\n  containerDiv.setAttribute('role', 'listbox')\n  containerDiv.style.display = 'block'\n  containerDiv.style.position = 'absolute'\n}\n\nexport function useMenuAnchorRef(\n  anchorElem: HTMLElement,\n  resolution: MenuResolution | null,\n  setResolution: (r: MenuResolution | null) => void,\n  className?: string,\n): RefObject<HTMLElement | null> {\n  const [editor] = useLexicalComposerContext()\n  const anchorElementRef = useRef<HTMLElement | null>(\n    CAN_USE_DOM ? document.createElement('div') : null,\n  )\n  const positionMenu = useCallback(() => {\n    if (anchorElementRef.current === null || parent === undefined) {\n      return\n    }\n    const rootElement = editor.getRootElement()\n    const containerDiv = anchorElementRef.current\n\n    const VERTICAL_OFFSET = 32\n\n    const menuEle = containerDiv.firstChild as Element\n    if (rootElement !== null && resolution !== null) {\n      const { height, width } = resolution.getRect()\n      let { left, top } = resolution.getRect()\n\n      const rawTop = top\n      top -= anchorElem.getBoundingClientRect().top + window.scrollY\n      left -= anchorElem.getBoundingClientRect().left + window.scrollX\n      containerDiv.style.left = `${left + window.scrollX}px`\n      containerDiv.style.height = `${height}px`\n      containerDiv.style.width = `${width}px`\n      if (menuEle !== null) {\n        const menuRect = menuEle.getBoundingClientRect()\n        const menuHeight = menuRect.height\n        const menuWidth = menuRect.width\n\n        const rootElementRect = rootElement.getBoundingClientRect()\n\n        const isRTL = document.dir === 'rtl' || document.documentElement.dir === 'rtl'\n        const anchorRect = anchorElem.getBoundingClientRect()\n        const leftBoundary = Math.max(0, rootElementRect.left)\n\n        if (!isRTL && left + menuWidth > rootElementRect.right) {\n          containerDiv.style.left = `${rootElementRect.right - menuWidth + window.scrollX}px`\n        } else if (isRTL && menuRect.left < leftBoundary) {\n          const newLeft = leftBoundary + menuWidth - anchorRect.left\n          containerDiv.style.left = `${newLeft + window.scrollX}px`\n        }\n\n        const wouldGoOffBottomOfScreen = rawTop + menuHeight + VERTICAL_OFFSET > window.innerHeight\n        //const wouldGoOffBottomOfContainer = top + menuHeight > rootElementRect.bottom\n        const wouldGoOffTopOfScreen = rawTop < 0\n\n        // Position slash menu above the cursor instead of below (default) if it would otherwise go off the bottom of the screen.\n        if (wouldGoOffBottomOfScreen && !wouldGoOffTopOfScreen) {\n          const margin = 24\n          containerDiv.style.top = `${\n            top + VERTICAL_OFFSET - menuHeight + window.scrollY - (height + margin)\n          }px`\n        } else {\n          containerDiv.style.top = `${top + window.scrollY + VERTICAL_OFFSET}px`\n        }\n      }\n\n      if (!containerDiv.isConnected) {\n        setContainerDivAttributes(containerDiv, className)\n        anchorElem.append(containerDiv)\n      }\n      containerDiv.setAttribute('id', 'slash-menu')\n      anchorElementRef.current = containerDiv\n      rootElement.setAttribute('aria-controls', 'slash-menu')\n    }\n  }, [editor, resolution, className, anchorElem])\n\n  useEffect(() => {\n    const rootElement = editor.getRootElement()\n    if (resolution !== null) {\n      positionMenu()\n      return () => {\n        if (rootElement !== null) {\n          rootElement.removeAttribute('aria-controls')\n        }\n\n        const containerDiv = anchorElementRef.current\n        if (containerDiv !== null && containerDiv.isConnected) {\n          containerDiv.remove()\n          containerDiv.removeAttribute('id')\n        }\n      }\n    }\n  }, [editor, positionMenu, resolution])\n\n  const onVisibilityChange = useCallback(\n    (isInView: boolean) => {\n      if (resolution !== null) {\n        if (!isInView) {\n          setResolution(null)\n        }\n      }\n    },\n    [resolution, setResolution],\n  )\n\n  useDynamicPositioning(resolution, anchorElementRef, positionMenu, onVisibilityChange)\n\n  return anchorElementRef\n}\n","'use client'\nimport { isPoint, type Point } from './point.js'\n\ninterface ContainsPointReturn {\n  reason: {\n    isOnBottomSide: boolean\n    isOnLeftSide: boolean\n    isOnRightSide: boolean\n    isOnTopSide: boolean\n  }\n  result: boolean\n}\n\nexport class Rect {\n  private readonly _bottom: number\n\n  private readonly _left: number\n\n  private readonly _right: number\n\n  private readonly _top: number\n\n  constructor(left: number, top: number, right: number, bottom: number) {\n    const [physicTop, physicBottom] = top <= bottom ? [top, bottom] : [bottom, top]\n\n    const [physicLeft, physicRight] = left <= right ? [left, right] : [right, left]\n\n    this._top = physicTop\n    this._right = physicRight\n    this._left = physicLeft\n    this._bottom = physicBottom\n  }\n\n  static fromDOM(dom: HTMLElement): Rect {\n    const { height, left, top, width } = dom.getBoundingClientRect()\n    return Rect.fromLWTH(left, width, top, height)\n  }\n\n  static fromDOMRect(domRect: DOMRect): Rect {\n    const { height, left, top, width } = domRect\n    return Rect.fromLWTH(left, width, top, height)\n  }\n\n  static fromLTRB(left: number, top: number, right: number, bottom: number): Rect {\n    return new Rect(left, top, right, bottom)\n  }\n\n  static fromLWTH(left: number, width: number, top: number, height: number): Rect {\n    return new Rect(left, top, left + width, top + height)\n  }\n\n  static fromPoints(startPoint: Point, endPoint: Point): Rect {\n    const { x: left, y: top } = startPoint\n    const { x: right, y: bottom } = endPoint\n    return Rect.fromLTRB(left, top, right, bottom)\n  }\n\n  public contains({ x, y }: Point): ContainsPointReturn\n\n  public contains({ bottom, left, right, top }: Rect): boolean\n\n  public contains(target: Point | Rect): boolean | ContainsPointReturn {\n    if (isPoint(target)) {\n      const { x, y } = target\n\n      const isOnTopSide = y < this._top\n      const isOnBottomSide = y > this._bottom\n      const isOnLeftSide = x < this._left\n      const isOnRightSide = x > this._right\n\n      const result = !isOnTopSide && !isOnBottomSide && !isOnLeftSide && !isOnRightSide\n\n      return {\n        reason: {\n          isOnBottomSide,\n          isOnLeftSide,\n          isOnRightSide,\n          isOnTopSide,\n        },\n        result,\n      }\n    }\n    const { bottom, left, right, top } = target\n\n    return (\n      top >= this._top &&\n      top <= this._bottom &&\n      bottom >= this._top &&\n      bottom <= this._bottom &&\n      left >= this._left &&\n      left <= this._right &&\n      right >= this._left &&\n      right <= this._right\n    )\n  }\n\n  public distanceFromPoint(point: Point): {\n    distance: number\n    isOnBottomSide: boolean\n    isOnLeftSide: boolean\n    isOnRightSide: boolean\n    isOnTopSide: boolean\n  } {\n    const containsResult = this.contains(point)\n    if (containsResult.result) {\n      return {\n        distance: 0,\n        isOnBottomSide: containsResult.reason.isOnBottomSide,\n        isOnLeftSide: containsResult.reason.isOnLeftSide,\n        isOnRightSide: containsResult.reason.isOnRightSide,\n        isOnTopSide: containsResult.reason.isOnTopSide,\n      }\n    }\n\n    let dx = 0 // Horizontal distance to the closest edge\n    let dy = 0 // Vertical distance to the closest edge\n\n    // If the point is to the left of the rectangle\n    if (point.x < this._left) {\n      dx = this._left - point.x\n    }\n    // If the point is to the right of the rectangle\n    else if (point.x > this._right) {\n      dx = point.x - this._right\n    }\n\n    // If the point is above the rectangle\n    if (point.y < this._top) {\n      dy = this._top - point.y\n    }\n    // If the point is below the rectangle\n    else if (point.y > this._bottom) {\n      dy = point.y - this._bottom\n    }\n\n    // Use the Pythagorean theorem to calculate the distance\n    return {\n      distance: Math.sqrt(dx * dx + dy * dy),\n      isOnBottomSide: point.y > this._bottom,\n      isOnLeftSide: point.x < this._left,\n      isOnRightSide: point.x > this._right,\n      isOnTopSide: point.y < this._top,\n    }\n  }\n\n  public equals({ bottom, left, right, top }: Rect): boolean {\n    return (\n      top === this._top && bottom === this._bottom && left === this._left && right === this._right\n    )\n  }\n\n  public generateNewRect({\n    bottom = this.bottom,\n    left = this.left,\n    right = this.right,\n    top = this.top,\n  }): Rect {\n    return new Rect(left, top, right, bottom)\n  }\n\n  public intersectsWith(rect: Rect): boolean {\n    const { height: h1, left: x1, top: y1, width: w1 } = rect\n    const { height: h2, left: x2, top: y2, width: w2 } = this\n    const maxX = x1 + w1 >= x2 + w2 ? x1 + w1 : x2 + w2\n    const maxY = y1 + h1 >= y2 + h2 ? y1 + h1 : y2 + h2\n    const minX = x1 <= x2 ? x1 : x2\n    const minY = y1 <= y2 ? y1 : y2\n    return maxX - minX <= w1 + w2 && maxY - minY <= h1 + h2\n  }\n\n  get bottom(): number {\n    return this._bottom\n  }\n\n  get height(): number {\n    return Math.abs(this._bottom - this._top)\n  }\n\n  get left(): number {\n    return this._left\n  }\n\n  get right(): number {\n    return this._right\n  }\n\n  get top(): number {\n    return this._top\n  }\n\n  get width(): number {\n    return Math.abs(this._left - this._right)\n  }\n}\n","import type { Klass, LexicalNode, LexicalNodeReplacement } from 'lexical'\n\nimport type { NodeWithHooks } from '../../features/typesServer.js'\nimport type { SanitizedClientEditorConfig, SanitizedServerEditorConfig } from '../config/types.js'\n\nexport function getEnabledNodes({\n  editorConfig,\n}: {\n  editorConfig: SanitizedClientEditorConfig | SanitizedServerEditorConfig\n}): Array<Klass<LexicalNode> | LexicalNodeReplacement> {\n  return getEnabledNodesFromServerNodes({\n    nodes: editorConfig.features.nodes,\n  })\n}\n\nexport function getEnabledNodesFromServerNodes({\n  nodes,\n}: {\n  nodes: Array<Klass<LexicalNode> | LexicalNodeReplacement> | Array<NodeWithHooks>\n}): Array<Klass<LexicalNode> | LexicalNodeReplacement> {\n  return nodes.map((node) => {\n    if ('node' in node) {\n      return node.node\n    }\n    return node\n  })\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport type { ElementNode, LexicalNode, TextFormatType, TextNode } from 'lexical'\n\nimport { $getRoot, $isDecoratorNode, $isElementNode, $isLineBreakNode, $isTextNode } from 'lexical'\n\nimport type {\n  ElementTransformer,\n  MultilineElementTransformer,\n  TextFormatTransformer,\n  TextMatchTransformer,\n  Transformer,\n} from './MarkdownTransformers.js'\n\nimport { isEmptyParagraph, transformersByType } from './utils.js'\n\n/**\n * Renders string from markdown. The selection is moved to the start after the operation.\n */\nexport function createMarkdownExport(\n  transformers: Array<Transformer>,\n  shouldPreserveNewLines: boolean = false,\n): (node?: ElementNode) => string {\n  const byType = transformersByType(transformers)\n  const elementTransformers = [...byType.multilineElement, ...byType.element]\n  const isNewlineDelimited = !shouldPreserveNewLines\n\n  // Export only uses text formats that are responsible for single format\n  // e.g. it will filter out *** (bold, italic) and instead use separate ** and *\n  const textFormatTransformers = byType.textFormat\n    .filter((transformer) => transformer.format.length === 1)\n    // Make sure all text transformers that contain 'code' in their format are at the end of the array. Otherwise, formatted code like\n    // <strong><code>code</code></strong> will be exported as `**Bold Code**`, as the code format will be applied first, and the bold format\n    // will be applied second and thus skipped entirely, as the code format will prevent any further formatting.\n    .sort((a, b) => {\n      if (a.format.includes('code') && !b.format.includes('code')) {\n        return 1\n      } else if (!a.format.includes('code') && b.format.includes('code')) {\n        return -1\n      } else {\n        return 0\n      }\n    })\n\n  return (node) => {\n    const output: string[] = []\n    const children = (node || $getRoot()).getChildren()\n\n    children.forEach((child, i) => {\n      const result = exportTopLevelElements(\n        child,\n        elementTransformers,\n        textFormatTransformers,\n        byType.textMatch,\n      )\n\n      if (result != null) {\n        output.push(\n          // separate consecutive group of texts with a line break: eg. [\"hello\", \"world\"] -> [\"hello\", \"/nworld\"]\n          isNewlineDelimited &&\n            i > 0 &&\n            !isEmptyParagraph(child) &&\n            !isEmptyParagraph(children[i - 1]!)\n            ? '\\n'.concat(result)\n            : result,\n        )\n      }\n    })\n    // Ensure consecutive groups of texts are at least \\n\\n apart while each empty paragraph render as a newline.\n    // Eg. [\"hello\", \"\", \"\", \"hi\", \"\\nworld\"] -> \"hello\\n\\n\\nhi\\n\\nworld\"\n    return output.join('\\n')\n  }\n}\n\nfunction exportTopLevelElements(\n  node: LexicalNode,\n  elementTransformers: Array<ElementTransformer | MultilineElementTransformer>,\n  textTransformersIndex: Array<TextFormatTransformer>,\n  textMatchTransformers: Array<TextMatchTransformer>,\n): null | string {\n  for (const transformer of elementTransformers) {\n    if (!transformer.export) {\n      continue\n    }\n    const result = transformer.export(node, (_node) =>\n      exportChildren(_node, textTransformersIndex, textMatchTransformers),\n    )\n\n    if (result != null) {\n      return result\n    }\n  }\n\n  if ($isElementNode(node)) {\n    return exportChildren(node, textTransformersIndex, textMatchTransformers)\n  } else if ($isDecoratorNode(node)) {\n    return node.getTextContent()\n  } else {\n    return null\n  }\n}\n\nfunction exportChildren(\n  node: ElementNode,\n  textTransformersIndex: Array<TextFormatTransformer>,\n  textMatchTransformers: Array<TextMatchTransformer>,\n  unclosedTags?: Array<{ format: TextFormatType; tag: string }>,\n  unclosableTags?: Array<{ format: TextFormatType; tag: string }>,\n): string {\n  const output = []\n  const children = node.getChildren()\n  // keep track of unclosed tags from the very beginning\n  if (!unclosedTags) {\n    unclosedTags = []\n  }\n  if (!unclosableTags) {\n    unclosableTags = []\n  }\n\n  mainLoop: for (const child of children) {\n    for (const transformer of textMatchTransformers) {\n      if (!transformer.export) {\n        continue\n      }\n\n      const result = transformer.export(\n        child,\n        (parentNode) =>\n          exportChildren(\n            parentNode,\n            textTransformersIndex,\n            textMatchTransformers,\n            unclosedTags,\n            // Add current unclosed tags to the list of unclosable tags - we don't want nested tags from\n            // textmatch transformers to close the outer ones, as that may result in invalid markdown.\n            // E.g. **text [text**](https://lexical.io)\n            // is invalid markdown, as the closing ** is inside the link.\n            //\n            [...unclosableTags, ...unclosedTags],\n          ),\n        (textNode, textContent) =>\n          exportTextFormat(\n            textNode,\n            textContent,\n            textTransformersIndex,\n            unclosedTags,\n            unclosableTags,\n          ),\n      )\n\n      if (result != null) {\n        output.push(result)\n        continue mainLoop\n      }\n    }\n\n    if ($isLineBreakNode(child)) {\n      output.push('\\n')\n    } else if ($isTextNode(child)) {\n      output.push(\n        exportTextFormat(\n          child,\n          child.getTextContent(),\n          textTransformersIndex,\n          unclosedTags,\n          unclosableTags,\n        ),\n      )\n    } else if ($isElementNode(child)) {\n      // empty paragraph returns \"\"\n      output.push(\n        exportChildren(\n          child,\n          textTransformersIndex,\n          textMatchTransformers,\n          unclosedTags,\n          unclosableTags,\n        ),\n      )\n    } else if ($isDecoratorNode(child)) {\n      output.push(child.getTextContent())\n    }\n  }\n\n  return output.join('')\n}\n\nfunction exportTextFormat(\n  node: TextNode,\n  textContent: string,\n  textTransformers: Array<TextFormatTransformer>,\n  // unclosed tags include the markdown tags that haven't been closed yet, and their associated formats\n  unclosedTags: Array<{ format: TextFormatType; tag: string }>,\n  unclosableTags?: Array<{ format: TextFormatType; tag: string }>,\n): string {\n  // This function handles the case of a string looking like this: \"   foo   \"\n  // Where it would be invalid markdown to generate: \"**   foo   **\"\n  // We instead want to trim the whitespace out, apply formatting, and then\n  // bring the whitespace back. So our returned string looks like this: \"   **foo**   \"\n  const frozenString = textContent.trim()\n  let output = frozenString\n\n  if (!node.hasFormat('code')) {\n    // Escape any markdown characters in the text content\n    output = output.replace(/([*_`~\\\\])/g, '\\\\$1')\n  }\n\n  // the opening tags to be added to the result\n  let openingTags = ''\n  // the closing tags to be added to the result\n  let closingTagsBefore = ''\n  let closingTagsAfter = ''\n\n  const prevNode = getTextSibling(node, true)\n  const nextNode = getTextSibling(node, false)\n\n  const applied = new Set()\n\n  for (const transformer of textTransformers) {\n    const format = transformer.format[0]!\n    const tag = transformer.tag\n\n    // dedup applied formats\n    if (hasFormat(node, format) && !applied.has(format)) {\n      // Multiple tags might be used for the same format (*, _)\n      applied.add(format)\n\n      // append the tag to openningTags, if it's not applied to the previous nodes,\n      // or the nodes before that (which would result in an unclosed tag)\n      if (!hasFormat(prevNode, format) || !unclosedTags.find((element) => element.tag === tag)) {\n        unclosedTags.push({ format, tag })\n        openingTags += tag\n      }\n    }\n  }\n\n  // close any tags in the same order they were applied, if necessary\n  for (let i = 0; i < unclosedTags.length; i++) {\n    const unclosedTag = unclosedTags[i]!\n    const nodeHasFormat = hasFormat(node, unclosedTag.format)\n    const nextNodeHasFormat = hasFormat(nextNode, unclosedTag.format)\n\n    // prevent adding closing tag if next sibling will do it\n    if (nodeHasFormat && nextNodeHasFormat) {\n      continue\n    }\n\n    const unhandledUnclosedTags = [...unclosedTags] // Shallow copy to avoid modifying the original array\n\n    while (unhandledUnclosedTags.length > i) {\n      const unclosedTag = unhandledUnclosedTags.pop()\n\n      // If tag is unclosable, don't close it and leave it in the original array,\n      // So that it can be closed when it's no longer unclosable\n      if (\n        unclosableTags &&\n        unclosedTag &&\n        unclosableTags.find((element) => element.tag === unclosedTag.tag)\n      ) {\n        continue\n      }\n\n      if (unclosedTag && typeof unclosedTag.tag === 'string') {\n        if (!nodeHasFormat) {\n          // Handles cases where the tag has not been closed before, e.g. if the previous node\n          // was a text match transformer that did not account for closing tags of the next node (e.g. a link)\n          closingTagsBefore += unclosedTag.tag\n        } else if (!nextNodeHasFormat) {\n          closingTagsAfter += unclosedTag.tag\n        }\n      }\n      // Mutate the original array to remove the closed tag\n      unclosedTags.pop()\n    }\n    break\n  }\n\n  output = openingTags + output + closingTagsAfter\n  // Replace trimmed version of textContent ensuring surrounding whitespace is not modified\n  return closingTagsBefore + textContent.replace(frozenString, () => output)\n}\n\n// Get next or previous text sibling a text node, including cases\n// when it's a child of inline element (e.g. link)\nfunction getTextSibling(node: TextNode, backward: boolean): null | TextNode {\n  let sibling = backward ? node.getPreviousSibling() : node.getNextSibling()\n\n  if (!sibling) {\n    const parent = node.getParentOrThrow()\n\n    if (parent.isInline()) {\n      sibling = backward ? parent.getPreviousSibling() : parent.getNextSibling()\n    }\n  }\n\n  while (sibling) {\n    if ($isElementNode(sibling)) {\n      if (!sibling.isInline()) {\n        break\n      }\n\n      const descendant = backward ? sibling.getLastDescendant() : sibling.getFirstDescendant()\n\n      if ($isTextNode(descendant)) {\n        return descendant\n      } else {\n        sibling = backward ? sibling.getPreviousSibling() : sibling.getNextSibling()\n      }\n    }\n\n    if ($isTextNode(sibling)) {\n      return sibling\n    }\n\n    if (!$isElementNode(sibling)) {\n      return null\n    }\n  }\n\n  return null\n}\n\nfunction hasFormat(node: LexicalNode | null | undefined, format: TextFormatType): boolean {\n  return $isTextNode(node) && node.hasFormat(format)\n}\n","/* eslint-disable regexp/no-obscure-range */\n/* eslint-disable regexp/no-empty-group */\n/* eslint-disable regexp/no-empty-capturing-group */\n/* eslint-disable regexp/optimal-quantifier-concatenation */\n/* eslint-disable regexp/no-misleading-capturing-group */\n/* eslint-disable regexp/no-contradiction-with-assertion */\n/* eslint-disable regexp/no-super-linear-backtracking */\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport type { ListNode } from '@lexical/list'\n\nimport { $isListItemNode, $isListNode } from '@lexical/list'\nimport { $isHeadingNode, $isQuoteNode } from '@lexical/rich-text'\nimport {\n  $isParagraphNode,\n  $isTextNode,\n  type ElementNode,\n  type LexicalNode,\n  type TextFormatType,\n} from 'lexical'\n\nimport type {\n  ElementTransformer,\n  MultilineElementTransformer,\n  TextFormatTransformer,\n  TextMatchTransformer,\n  Transformer,\n} from './MarkdownTransformers.js'\n\ntype MarkdownFormatKind =\n  | 'bold'\n  | 'code'\n  | 'horizontalRule'\n  | 'italic'\n  | 'italic_bold'\n  | 'link'\n  | 'noTransformation'\n  | 'paragraphBlockQuote'\n  | 'paragraphCodeBlock'\n  | 'paragraphH1'\n  | 'paragraphH2'\n  | 'paragraphH3'\n  | 'paragraphH4'\n  | 'paragraphH5'\n  | 'paragraphH6'\n  | 'paragraphOrderedList'\n  | 'paragraphUnorderedList'\n  | 'strikethrough'\n  | 'strikethrough_bold'\n  | 'strikethrough_italic'\n  | 'strikethrough_italic_bold'\n  | 'underline'\n\ntype MarkdownCriteria = Readonly<{\n  export?: (\n    node: LexicalNode,\n    traverseChildren: (elementNode: ElementNode) => string,\n  ) => null | string\n  exportFormat?: TextFormatType\n  exportTag?: string\n  exportTagClose?: string\n  markdownFormatKind: MarkdownFormatKind | null | undefined\n  regEx: RegExp\n  regExForAutoFormatting: RegExp\n  requiresParagraphStart: boolean | null | undefined\n}>\n\ntype MarkdownCriteriaArray = Array<MarkdownCriteria>\n\nconst autoFormatBase: MarkdownCriteria = {\n  markdownFormatKind: null,\n  regEx: /(?:)/,\n  regExForAutoFormatting: /(?:)/,\n  requiresParagraphStart: false,\n}\n\nconst paragraphStartBase: MarkdownCriteria = {\n  ...autoFormatBase,\n  requiresParagraphStart: true,\n}\n\nconst markdownHeader1: MarkdownCriteria = {\n  ...paragraphStartBase,\n  export: createHeadingExport(1),\n  markdownFormatKind: 'paragraphH1',\n  regEx: /^# /,\n  regExForAutoFormatting: /^# /,\n}\n\nconst markdownHeader2: MarkdownCriteria = {\n  ...paragraphStartBase,\n  export: createHeadingExport(2),\n  markdownFormatKind: 'paragraphH2',\n  regEx: /^## /,\n  regExForAutoFormatting: /^## /,\n}\n\nconst markdownHeader3: MarkdownCriteria = {\n  ...paragraphStartBase,\n  export: createHeadingExport(3),\n  markdownFormatKind: 'paragraphH3',\n  regEx: /^### /,\n  regExForAutoFormatting: /^### /,\n}\n\nconst markdownHeader4: MarkdownCriteria = {\n  ...paragraphStartBase,\n  export: createHeadingExport(4),\n  markdownFormatKind: 'paragraphH4',\n  regEx: /^#### /,\n  regExForAutoFormatting: /^#### /,\n}\n\nconst markdownHeader5: MarkdownCriteria = {\n  ...paragraphStartBase,\n  export: createHeadingExport(5),\n  markdownFormatKind: 'paragraphH5',\n  regEx: /^##### /,\n  regExForAutoFormatting: /^##### /,\n}\n\nconst markdownHeader6: MarkdownCriteria = {\n  ...paragraphStartBase,\n  export: createHeadingExport(6),\n  markdownFormatKind: 'paragraphH6',\n  regEx: /^###### /,\n  regExForAutoFormatting: /^###### /,\n}\n\nconst markdownBlockQuote: MarkdownCriteria = {\n  ...paragraphStartBase,\n  export: blockQuoteExport,\n  markdownFormatKind: 'paragraphBlockQuote',\n  regEx: /^> /,\n  regExForAutoFormatting: /^> /,\n}\n\nconst markdownUnorderedListDash: MarkdownCriteria = {\n  ...paragraphStartBase,\n  export: listExport,\n  markdownFormatKind: 'paragraphUnorderedList',\n  regEx: /^(\\s{0,10})- /,\n  regExForAutoFormatting: /^(\\s{0,10})- /,\n}\n\nconst markdownUnorderedListAsterisk: MarkdownCriteria = {\n  ...paragraphStartBase,\n  export: listExport,\n  markdownFormatKind: 'paragraphUnorderedList',\n  regEx: /^(\\s{0,10})\\* /,\n  regExForAutoFormatting: /^(\\s{0,10})\\* /,\n}\n\nconst markdownOrderedList: MarkdownCriteria = {\n  ...paragraphStartBase,\n  export: listExport,\n  markdownFormatKind: 'paragraphOrderedList',\n  regEx: /^(\\s{0,10})(\\d+)\\.\\s/,\n  regExForAutoFormatting: /^(\\s{0,10})(\\d+)\\.\\s/,\n}\n\nconst markdownHorizontalRule: MarkdownCriteria = {\n  ...paragraphStartBase,\n  markdownFormatKind: 'horizontalRule',\n  regEx: /^\\*\\*\\*$/,\n  regExForAutoFormatting: /^\\*\\*\\* /,\n}\n\nconst markdownHorizontalRuleUsingDashes: MarkdownCriteria = {\n  ...paragraphStartBase,\n  markdownFormatKind: 'horizontalRule',\n  regEx: /^---$/,\n  regExForAutoFormatting: /^--- /,\n}\n\nconst markdownInlineCode: MarkdownCriteria = {\n  ...autoFormatBase,\n  exportFormat: 'code',\n  exportTag: '`',\n  markdownFormatKind: 'code',\n  regEx: /(`)(\\s*)([^`]*)(\\s*)(`)()/,\n  regExForAutoFormatting: /(`)(\\s*\\b)([^`]*)(\\b\\s*)(`)(\\s)$/,\n}\n\nconst markdownBold: MarkdownCriteria = {\n  ...autoFormatBase,\n  exportFormat: 'bold',\n  exportTag: '**',\n  markdownFormatKind: 'bold',\n  regEx: /(\\*\\*)(\\s*)([^*]*)(\\s*)(\\*\\*)()/,\n  regExForAutoFormatting: /(\\*\\*)(\\s*\\b)([^*]*)(\\b\\s*)(\\*\\*)(\\s)$/,\n}\n\nconst markdownItalic: MarkdownCriteria = {\n  ...autoFormatBase,\n  exportFormat: 'italic',\n  exportTag: '*',\n  markdownFormatKind: 'italic',\n  regEx: /(\\*)(\\s*)([^*]*)(\\s*)(\\*)()/,\n  regExForAutoFormatting: /(\\*)(\\s*\\b)([^*]*)(\\b\\s*)(\\*)(\\s)$/,\n}\n\nconst markdownBold2: MarkdownCriteria = {\n  ...autoFormatBase,\n  exportFormat: 'bold',\n  exportTag: '_',\n  markdownFormatKind: 'bold',\n  regEx: /(__)(\\s*)([^_]*)(\\s*)(__)()/,\n  regExForAutoFormatting: /(__)(\\s*)([^_]*)(\\s*)(__)(\\s)$/,\n}\n\nconst markdownItalic2: MarkdownCriteria = {\n  ...autoFormatBase,\n  exportFormat: 'italic',\n  exportTag: '_',\n  markdownFormatKind: 'italic',\n  regEx: /(_)()([^_]*)()(_)()/,\n  regExForAutoFormatting: /(_)()([^_]*)()(_)(\\s)$/, // Maintain 7 groups.\n}\n\nconst fakeMarkdownUnderline: MarkdownCriteria = {\n  ...autoFormatBase,\n  exportFormat: 'underline',\n  exportTag: '<u>',\n  exportTagClose: '</u>',\n  markdownFormatKind: 'underline',\n  regEx: /(<u>)(\\s*)([^<]*)(\\s*)(<\\/u>)()/,\n  regExForAutoFormatting: /(<u>)(\\s*\\b)([^<]*)(\\b\\s*)(<\\/u>)(\\s)$/,\n}\n\nconst markdownStrikethrough: MarkdownCriteria = {\n  ...autoFormatBase,\n  exportFormat: 'strikethrough',\n  exportTag: '~~',\n  markdownFormatKind: 'strikethrough',\n  regEx: /(~~)(\\s*)([^~]*)(\\s*)(~~)()/,\n  regExForAutoFormatting: /(~~)(\\s*\\b)([^~]*)(\\b\\s*)(~~)(\\s)$/,\n}\n\nconst markdownStrikethroughItalicBold: MarkdownCriteria = {\n  ...autoFormatBase,\n  markdownFormatKind: 'strikethrough_italic_bold',\n  regEx: /(~~_\\*\\*)(\\s*\\b)([^*_~]+)(\\b\\s*)(\\*\\*_~~)()/,\n  regExForAutoFormatting: /(~~_\\*\\*)(\\s*\\b)([^*_~]+)(\\b\\s*)(\\*\\*_~~)(\\s)$/,\n}\n\nconst markdownItalicbold: MarkdownCriteria = {\n  ...autoFormatBase,\n  markdownFormatKind: 'italic_bold',\n  regEx: /(_\\*\\*)(\\s*\\b)([^*_]+)(\\b\\s*)(\\*\\*_)/,\n  regExForAutoFormatting: /(_\\*\\*)(\\s*\\b)([^*_]+)(\\b\\s*)(\\*\\*_)(\\s)$/,\n}\n\nconst markdownStrikethroughItalic: MarkdownCriteria = {\n  ...autoFormatBase,\n  markdownFormatKind: 'strikethrough_italic',\n  regEx: /(~~_)(\\s*)([^_~]+)(\\s*)(_~~)/,\n  regExForAutoFormatting: /(~~_)(\\s*)([^_~]+)(\\s*)(_~~)(\\s)$/,\n}\n\nconst markdownStrikethroughBold: MarkdownCriteria = {\n  ...autoFormatBase,\n  markdownFormatKind: 'strikethrough_bold',\n  regEx: /(~~\\*\\*)(\\s*\\b)([^*~]+)(\\b\\s*)(\\*\\*~~)/,\n  regExForAutoFormatting: /(~~\\*\\*)(\\s*\\b)([^*~]+)(\\b\\s*)(\\*\\*~~)(\\s)$/,\n}\n\nconst markdownLink: MarkdownCriteria = {\n  ...autoFormatBase,\n  markdownFormatKind: 'link',\n  regEx: /(\\[)([^\\]]*)(\\]\\()([^)]*)(\\)*)()/,\n  regExForAutoFormatting: /(\\[)([^\\]]*)(\\]\\()([^)]*)(\\)*)(\\s)$/,\n}\n\nconst allMarkdownCriteriaForTextNodes: MarkdownCriteriaArray = [\n  // Place the combination formats ahead of the individual formats.\n  // Combos\n  markdownStrikethroughItalicBold,\n  markdownItalicbold,\n  markdownStrikethroughItalic,\n  markdownStrikethroughBold, // Individuals\n  markdownInlineCode,\n  markdownBold,\n  markdownItalic, // Must appear after markdownBold\n  markdownBold2,\n  markdownItalic2, // Must appear after markdownBold2.\n  fakeMarkdownUnderline,\n  markdownStrikethrough,\n  markdownLink,\n]\n\nconst allMarkdownCriteriaForParagraphs: MarkdownCriteriaArray = [\n  markdownHeader1,\n  markdownHeader2,\n  markdownHeader3,\n  markdownHeader4,\n  markdownHeader5,\n  markdownHeader6,\n  markdownBlockQuote,\n  markdownUnorderedListDash,\n  markdownUnorderedListAsterisk,\n  markdownOrderedList,\n  markdownHorizontalRule,\n  markdownHorizontalRuleUsingDashes,\n]\n\nexport function getAllMarkdownCriteriaForParagraphs(): MarkdownCriteriaArray {\n  return allMarkdownCriteriaForParagraphs\n}\n\nexport function getAllMarkdownCriteriaForTextNodes(): MarkdownCriteriaArray {\n  return allMarkdownCriteriaForTextNodes\n}\n\ntype Block = (\n  node: LexicalNode,\n  exportChildren: (elementNode: ElementNode) => string,\n) => null | string\n\nfunction createHeadingExport(level: number): Block {\n  return (node, exportChildren) => {\n    return $isHeadingNode(node) && node.getTag() === 'h' + level\n      ? '#'.repeat(level) + ' ' + exportChildren(node)\n      : null\n  }\n}\n\nfunction listExport(node: LexicalNode, exportChildren: (_node: ElementNode) => string) {\n  return $isListNode(node) ? processNestedLists(node, exportChildren, 0) : null\n}\n\n// TODO: should be param\nconst LIST_INDENT_SIZE = 4\n\nfunction processNestedLists(\n  listNode: ListNode,\n  exportChildren: (node: ElementNode) => string,\n  depth: number,\n): string {\n  const output: string[] = []\n  const children = listNode.getChildren()\n  let index = 0\n\n  for (const listItemNode of children) {\n    if ($isListItemNode(listItemNode)) {\n      if (listItemNode.getChildrenSize() === 1) {\n        const firstChild = listItemNode.getFirstChild()\n\n        if ($isListNode(firstChild)) {\n          output.push(processNestedLists(firstChild, exportChildren, depth + 1))\n          continue\n        }\n      }\n\n      const indent = ' '.repeat(depth * LIST_INDENT_SIZE)\n      const prefix = listNode.getListType() === 'bullet' ? '- ' : `${listNode.getStart() + index}. `\n      output.push(indent + prefix + exportChildren(listItemNode))\n      index++\n    }\n  }\n\n  return output.join('\\n')\n}\n\nfunction blockQuoteExport(node: LexicalNode, exportChildren: (_node: ElementNode) => string) {\n  return $isQuoteNode(node) ? '> ' + exportChildren(node) : null\n}\n\nexport function indexBy<T>(\n  list: Array<T>,\n  callback: (arg0: T) => string | undefined,\n): Readonly<Record<string, Array<T>>> {\n  const index: Record<string, Array<T>> = {}\n\n  for (const item of list) {\n    const key = callback(item)\n\n    if (!key) {\n      continue\n    }\n\n    if (index[key]) {\n      index[key].push(item)\n    } else {\n      index[key] = [item]\n    }\n  }\n\n  return index\n}\n\nexport function transformersByType(transformers: Array<Transformer>): Readonly<{\n  element: Array<ElementTransformer>\n  multilineElement: Array<MultilineElementTransformer>\n  textFormat: Array<TextFormatTransformer>\n  textMatch: Array<TextMatchTransformer>\n}> {\n  const byType = indexBy(transformers, (t) => t.type)\n\n  return {\n    element: (byType.element || []) as Array<ElementTransformer>,\n    multilineElement: (byType['multiline-element'] || []) as Array<MultilineElementTransformer>,\n    textFormat: (byType['text-format'] || []) as Array<TextFormatTransformer>,\n    textMatch: (byType['text-match'] || []) as Array<TextMatchTransformer>,\n  }\n}\n\nexport const PUNCTUATION_OR_SPACE = /[!-/:-@[-`{-~\\s]/\n\nconst MARKDOWN_EMPTY_LINE_REG_EXP = /^\\s{0,3}$/\n\nexport function isEmptyParagraph(node: LexicalNode): boolean {\n  if (!$isParagraphNode(node)) {\n    return false\n  }\n\n  const firstChild = node.getFirstChild()\n  return (\n    firstChild == null ||\n    (node.getChildrenSize() === 1 &&\n      $isTextNode(firstChild) &&\n      MARKDOWN_EMPTY_LINE_REG_EXP.test(firstChild.getTextContent()))\n  )\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport type { ListItemNode } from '@lexical/list'\nimport type { ElementNode } from 'lexical'\n\nimport { $isListItemNode, $isListNode } from '@lexical/list'\nimport { $isQuoteNode } from '@lexical/rich-text'\nimport { $findMatchingParent } from '@lexical/utils'\nimport {\n  $createLineBreakNode,\n  $createParagraphNode,\n  $createTextNode,\n  $getRoot,\n  $getSelection,\n  $isParagraphNode,\n} from 'lexical'\n\nimport type {\n  ElementTransformer,\n  MultilineElementTransformer,\n  TextFormatTransformer,\n  TextMatchTransformer,\n  Transformer,\n} from './MarkdownTransformers.js'\n\nimport { importTextTransformers } from './importTextTransformers.js'\nimport { isEmptyParagraph, transformersByType } from './utils.js'\n\nexport type TextFormatTransformersIndex = Readonly<{\n  fullMatchRegExpByTag: Readonly<Record<string, RegExp>>\n  openTagsRegExp: RegExp\n  transformersByTag: Readonly<Record<string, TextFormatTransformer>>\n}>\n\n/**\n * Renders markdown from a string. The selection is moved to the start after the operation.\n */\nexport function createMarkdownImport(\n  transformers: Array<Transformer>,\n  shouldPreserveNewLines = false,\n): (markdownString: string, node?: ElementNode) => void {\n  const byType = transformersByType(transformers)\n  const textFormatTransformersIndex = createTextFormatTransformersIndex(byType.textFormat)\n\n  return (markdownString, node) => {\n    const lines = markdownString.split('\\n')\n    const linesLength = lines.length\n    const root = node || $getRoot()\n    root.clear()\n\n    for (let i = 0; i < linesLength; i++) {\n      const lineText = lines[i]!\n\n      const [imported, shiftedIndex] = $importMultiline(lines, i, byType.multilineElement, root)\n\n      if (imported) {\n        // If a multiline markdown element was imported, we don't want to process the lines that were part of it anymore.\n        // There could be other sub-markdown elements (both multiline and normal ones) matching within this matched multiline element's children.\n        // However, it would be the responsibility of the matched multiline transformer to decide how it wants to handle them.\n        // We cannot handle those, as there is no way for us to know how to maintain the correct order of generated lexical nodes for possible children.\n        i = shiftedIndex // Next loop will start from the line after the last line of the multiline element\n        continue\n      }\n\n      $importBlocks(lineText, root, byType.element, textFormatTransformersIndex, byType.textMatch)\n    }\n\n    // By default, removing empty paragraphs as md does not really\n    // allow empty lines and uses them as delimiter.\n    // If you need empty lines set shouldPreserveNewLines = true.\n    const children = root.getChildren()\n    for (const child of children) {\n      if (!shouldPreserveNewLines && isEmptyParagraph(child) && root.getChildrenSize() > 1) {\n        child.remove()\n      }\n    }\n\n    if ($getSelection() !== null) {\n      root.selectStart()\n    }\n  }\n}\n\n/**\n *\n * @returns first element of the returned tuple is a boolean indicating if a multiline element was imported. The second element is the index of the last line that was processed.\n */\nfunction $importMultiline(\n  lines: Array<string>,\n  startLineIndex: number,\n  multilineElementTransformers: Array<MultilineElementTransformer>,\n  rootNode: ElementNode,\n): [boolean, number] {\n  for (const transformer of multilineElementTransformers) {\n    const { handleImportAfterStartMatch, regExpEnd, regExpStart, replace } = transformer\n\n    const startMatch = lines[startLineIndex]?.match(regExpStart)\n    if (!startMatch) {\n      continue // Try next transformer\n    }\n\n    if (handleImportAfterStartMatch) {\n      const result = handleImportAfterStartMatch({\n        lines,\n        rootNode,\n        startLineIndex,\n        startMatch,\n        transformer,\n      })\n      if (result === null) {\n        continue\n      } else if (result) {\n        return result\n      }\n    }\n\n    const regexpEndRegex: RegExp | undefined =\n      typeof regExpEnd === 'object' && 'regExp' in regExpEnd ? regExpEnd.regExp : regExpEnd\n\n    const isEndOptional =\n      regExpEnd && typeof regExpEnd === 'object' && 'optional' in regExpEnd\n        ? regExpEnd.optional\n        : !regExpEnd\n\n    let endLineIndex = startLineIndex\n    const linesLength = lines.length\n\n    // check every single line for the closing match. It could also be on the same line as the opening match.\n    while (endLineIndex < linesLength) {\n      const endMatch = regexpEndRegex ? lines[endLineIndex]?.match(regexpEndRegex) : null\n      if (!endMatch) {\n        if (\n          !isEndOptional ||\n          (isEndOptional && endLineIndex < linesLength - 1) // Optional end, but didn't reach the end of the document yet => continue searching for potential closing match\n        ) {\n          endLineIndex++\n          continue // Search next line for closing match\n        }\n      }\n\n      // Now, check if the closing match matched is the same as the opening match.\n      // If it is, we need to continue searching for the actual closing match.\n      if (endMatch && startLineIndex === endLineIndex && endMatch.index === startMatch.index) {\n        endLineIndex++\n        continue // Search next line for closing match\n      }\n\n      // At this point, we have found the closing match. Next: calculate the lines in between open and closing match\n      // This should not include the matches themselves, and be split up by lines\n      const linesInBetween: string[] = []\n\n      if (endMatch && startLineIndex === endLineIndex) {\n        linesInBetween.push(lines[startLineIndex]!.slice(startMatch[0].length, -endMatch[0].length))\n      } else {\n        for (let i = startLineIndex; i <= endLineIndex; i++) {\n          const line = lines[i]!\n          if (i === startLineIndex) {\n            const text = line.slice(startMatch[0].length)\n            linesInBetween.push(text) // Also include empty text\n          } else if (i === endLineIndex && endMatch) {\n            const text = line.slice(0, -endMatch[0].length)\n            linesInBetween.push(text) // Also include empty text\n          } else {\n            linesInBetween.push(line)\n          }\n        }\n      }\n\n      if (replace(rootNode, null, startMatch, endMatch!, linesInBetween, true) !== false) {\n        // Return here. This $importMultiline function is run line by line and should only process a single multiline element at a time.\n        return [true, endLineIndex]\n      }\n\n      // The replace function returned false, despite finding the matching open and close tags => this transformer does not want to handle it.\n      // Thus, we continue letting the remaining transformers handle the passed lines of text from the beginning\n      break\n    }\n  }\n\n  // No multiline transformer handled this line successfully\n  return [false, startLineIndex]\n}\n\nfunction $importBlocks(\n  lineText: string,\n  rootNode: ElementNode,\n  elementTransformers: Array<ElementTransformer>,\n  textFormatTransformersIndex: TextFormatTransformersIndex,\n  textMatchTransformers: Array<TextMatchTransformer>,\n) {\n  const textNode = $createTextNode(lineText)\n  const elementNode = $createParagraphNode()\n  elementNode.append(textNode)\n  rootNode.append(elementNode)\n\n  for (const { regExp, replace } of elementTransformers) {\n    const match = lineText.match(regExp)\n\n    if (match) {\n      textNode.setTextContent(lineText.slice(match[0].length))\n      if (replace(elementNode, [textNode], match, true) !== false) {\n        break\n      }\n    }\n  }\n\n  importTextTransformers(textNode, textFormatTransformersIndex, textMatchTransformers)\n\n  // If no transformer found and we left with original paragraph node\n  // can check if its content can be appended to the previous node\n  // if it's a paragraph, quote or list\n  if (elementNode.isAttached() && lineText.length > 0) {\n    const previousNode = elementNode.getPreviousSibling()\n    if ($isParagraphNode(previousNode) || $isQuoteNode(previousNode) || $isListNode(previousNode)) {\n      let targetNode: ListItemNode | null | typeof previousNode = previousNode\n\n      if ($isListNode(previousNode)) {\n        const lastDescendant = previousNode.getLastDescendant()\n        if (lastDescendant == null) {\n          targetNode = null\n        } else {\n          targetNode = $findMatchingParent(lastDescendant, $isListItemNode)\n        }\n      }\n\n      if (targetNode != null && targetNode.getTextContentSize() > 0) {\n        targetNode.splice(targetNode.getChildrenSize(), 0, [\n          $createLineBreakNode(),\n          ...elementNode.getChildren(),\n        ])\n        elementNode.remove()\n      }\n    }\n  }\n}\n\nfunction createTextFormatTransformersIndex(\n  textTransformers: Array<TextFormatTransformer>,\n): TextFormatTransformersIndex {\n  const transformersByTag: Record<string, TextFormatTransformer> = {}\n  const fullMatchRegExpByTag: Record<string, RegExp> = {}\n  const openTagsRegExp: string[] = []\n  const escapeRegExp = `(?<![\\\\\\\\])`\n\n  for (const transformer of textTransformers) {\n    const { tag } = transformer\n    transformersByTag[tag] = transformer\n    const tagRegExp = tag.replace(/([*^+])/g, '\\\\$1')\n    openTagsRegExp.push(tagRegExp)\n\n    // Single-char tag (e.g. \"*\"),\n    if (tag.length === 1) {\n      fullMatchRegExpByTag[tag] = new RegExp(\n        `(?<![\\\\\\\\${tagRegExp}])(${tagRegExp})((\\\\\\\\${tagRegExp})?.*?[^${tagRegExp}\\\\s](\\\\\\\\${tagRegExp})?)((?<!\\\\\\\\)|(?<=\\\\\\\\\\\\\\\\))(${tagRegExp})(?![\\\\\\\\${tagRegExp}])`,\n      )\n    } else {\n      // Multichar tags (e.g. \"**\")\n      fullMatchRegExpByTag[tag] = new RegExp(\n        `(?<!\\\\\\\\)(${tagRegExp})((\\\\\\\\${tagRegExp})?.*?[^\\\\s](\\\\\\\\${tagRegExp})?)((?<!\\\\\\\\)|(?<=\\\\\\\\\\\\\\\\))(${tagRegExp})(?!\\\\\\\\)`,\n      )\n    }\n  }\n\n  return {\n    // Reg exp to find open tag + content + close tag\n    fullMatchRegExpByTag,\n\n    // Regexp to locate *any* potential opening tag (longest first).\n    // eslint-disable-next-line regexp/no-useless-character-class, regexp/no-empty-capturing-group, regexp/no-empty-group\n    openTagsRegExp: new RegExp(`${escapeRegExp}(${openTagsRegExp.join('|')})`, 'g'),\n    transformersByTag,\n  }\n}\n","import { $isTextNode, type TextNode } from 'lexical'\n\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\nimport type { TextFormatTransformersIndex } from './MarkdownImport.js'\nimport type { TextMatchTransformer } from './MarkdownTransformers.js'\n\nimport {\n  findOutermostTextFormatTransformer,\n  importTextFormatTransformer,\n} from './importTextFormatTransformer.js'\nimport {\n  findOutermostTextMatchTransformer,\n  importFoundTextMatchTransformer,\n} from './importTextMatchTransformer.js'\n\n/**\n * Handles applying both text format and text match transformers.\n * It finds the outermost text format or text match and applies it,\n * then recursively calls itself to apply the next outermost transformer,\n * until there are no more transformers to apply.\n */\nexport function importTextTransformers(\n  textNode: TextNode,\n  textFormatTransformersIndex: TextFormatTransformersIndex,\n  textMatchTransformers: Array<TextMatchTransformer>,\n) {\n  let foundTextFormat = findOutermostTextFormatTransformer(textNode, textFormatTransformersIndex)\n\n  let foundTextMatch = findOutermostTextMatchTransformer(textNode, textMatchTransformers)\n\n  if (foundTextFormat && foundTextMatch) {\n    // Find the outermost transformer\n    if (\n      foundTextFormat.startIndex <= foundTextMatch.startIndex &&\n      foundTextFormat.endIndex >= foundTextMatch.endIndex\n    ) {\n      // foundTextFormat wraps foundTextMatch - apply foundTextFormat by setting foundTextMatch to null\n      foundTextMatch = null\n    } else {\n      // foundTextMatch wraps foundTextFormat - apply foundTextMatch by setting foundTextFormat to null\n      foundTextFormat = null\n    }\n  }\n\n  if (foundTextFormat) {\n    const result = importTextFormatTransformer(\n      textNode,\n      foundTextFormat.startIndex,\n      foundTextFormat.endIndex,\n      foundTextFormat.transformer,\n      foundTextFormat.match,\n    )\n\n    if (result.nodeAfter && $isTextNode(result.nodeAfter) && !result.nodeAfter.hasFormat('code')) {\n      importTextTransformers(result.nodeAfter, textFormatTransformersIndex, textMatchTransformers)\n    }\n    if (\n      result.nodeBefore &&\n      $isTextNode(result.nodeBefore) &&\n      !result.nodeBefore.hasFormat('code')\n    ) {\n      importTextTransformers(result.nodeBefore, textFormatTransformersIndex, textMatchTransformers)\n    }\n    if (\n      result.transformedNode &&\n      $isTextNode(result.transformedNode) &&\n      !result.transformedNode.hasFormat('code')\n    ) {\n      importTextTransformers(\n        result.transformedNode,\n        textFormatTransformersIndex,\n        textMatchTransformers,\n      )\n    }\n  } else if (foundTextMatch) {\n    const result = importFoundTextMatchTransformer(\n      textNode,\n      foundTextMatch.startIndex,\n      foundTextMatch.endIndex,\n      foundTextMatch.transformer,\n      foundTextMatch.match,\n    )\n    if (!result) {\n      return\n    }\n\n    if (result.nodeAfter && $isTextNode(result.nodeAfter) && !result.nodeAfter.hasFormat('code')) {\n      importTextTransformers(result.nodeAfter, textFormatTransformersIndex, textMatchTransformers)\n    }\n    if (\n      result.nodeBefore &&\n      $isTextNode(result.nodeBefore) &&\n      !result.nodeBefore.hasFormat('code')\n    ) {\n      importTextTransformers(result.nodeBefore, textFormatTransformersIndex, textMatchTransformers)\n    }\n    if (\n      result.transformedNode &&\n      $isTextNode(result.transformedNode) &&\n      !result.transformedNode.hasFormat('code')\n    ) {\n      importTextTransformers(\n        result.transformedNode,\n        textFormatTransformersIndex,\n        textMatchTransformers,\n      )\n    }\n  }\n  // Handle escape characters\n  const textContent = textNode.getTextContent()\n  const escapedText = textContent.replace(/\\\\([*_`~])/g, '$1')\n  textNode.setTextContent(escapedText)\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport type { TextNode } from 'lexical'\n\nimport type { TextFormatTransformersIndex } from './MarkdownImport.js'\nimport type { TextFormatTransformer } from './MarkdownTransformers.js'\n\nimport { PUNCTUATION_OR_SPACE } from './utils.js'\n\nexport function findOutermostTextFormatTransformer(\n  textNode: TextNode,\n  textFormatTransformersIndex: TextFormatTransformersIndex,\n): {\n  endIndex: number\n  match: RegExpMatchArray\n  startIndex: number\n  transformer: TextFormatTransformer\n} | null {\n  const textContent = textNode.getTextContent()\n  const match = findOutermostMatch(textContent, textFormatTransformersIndex)\n\n  if (!match) {\n    return null\n  }\n\n  const textFormatMatchStart: number = match.index || 0\n  const textFormatMatchEnd = textFormatMatchStart + match[0].length\n\n  // @ts-expect-error - vestiges of when tsconfig was not strict. Feel free to improve\n  const transformer: TextFormatTransformer = textFormatTransformersIndex.transformersByTag[match[1]]\n\n  return {\n    endIndex: textFormatMatchEnd,\n    match,\n    startIndex: textFormatMatchStart,\n    transformer,\n  }\n}\n\n// Finds first \"<tag>content<tag>\" match that is not nested into another tag\nfunction findOutermostMatch(\n  textContent: string,\n  textTransformersIndex: TextFormatTransformersIndex,\n): null | RegExpMatchArray {\n  const openTagsMatch = textContent.match(textTransformersIndex.openTagsRegExp)\n\n  if (openTagsMatch == null) {\n    return null\n  }\n\n  for (const match of openTagsMatch) {\n    // Open tags reg exp might capture leading space so removing it\n    // before using match to find transformer\n    const tag = match.replace(/^\\s/, '')\n    const fullMatchRegExp = textTransformersIndex.fullMatchRegExpByTag[tag]\n    if (fullMatchRegExp == null) {\n      continue\n    }\n\n    const fullMatch = textContent.match(fullMatchRegExp)\n    const transformer = textTransformersIndex.transformersByTag[tag]\n    if (fullMatch != null && transformer != null) {\n      if (transformer.intraword !== false) {\n        return fullMatch\n      }\n\n      // For non-intraword transformers checking if it's within a word\n      // or surrounded with space/punctuation/newline\n      const { index = 0 } = fullMatch\n      const beforeChar = textContent[index - 1]\n      const afterChar = textContent[index + fullMatch[0].length]\n\n      if (\n        (!beforeChar || PUNCTUATION_OR_SPACE.test(beforeChar)) &&\n        (!afterChar || PUNCTUATION_OR_SPACE.test(afterChar))\n      ) {\n        return fullMatch\n      }\n    }\n  }\n\n  return null\n}\n\nexport function importTextFormatTransformer(\n  textNode: TextNode,\n  startIndex: number,\n  endIndex: number,\n  transformer: TextFormatTransformer,\n  match: RegExpMatchArray,\n): {\n  nodeAfter: TextNode | undefined // If split\n  nodeBefore: TextNode | undefined // If split\n  transformedNode: TextNode\n} {\n  const textContent = textNode.getTextContent()\n\n  // No text matches - we can safely process the text format match\n  let nodeAfter: TextNode | undefined\n  let nodeBefore: TextNode | undefined\n  let transformedNode: TextNode\n\n  // If matching full content there's no need to run splitText and can reuse existing textNode\n  // to update its content and apply format. E.g. for **_Hello_** string after applying bold\n  // format (**) it will reuse the same text node to apply italic (_)\n  if (match[0] === textContent) {\n    transformedNode = textNode\n  } else {\n    if (startIndex === 0) {\n      ;[transformedNode, nodeAfter] = textNode.splitText(endIndex) as [\n        TextNode,\n        TextNode | undefined,\n      ]\n    } else {\n      ;[nodeBefore, transformedNode, nodeAfter] = textNode.splitText(startIndex, endIndex) as [\n        TextNode,\n        TextNode,\n        TextNode | undefined,\n      ]\n    }\n  }\n\n  transformedNode.setTextContent(match[2]!)\n  if (transformer) {\n    for (const format of transformer.format) {\n      if (!transformedNode.hasFormat(format)) {\n        transformedNode.toggleFormat(format)\n      }\n    }\n  }\n\n  return {\n    nodeAfter,\n    nodeBefore,\n    transformedNode,\n  }\n}\n","import { type TextNode } from 'lexical'\n\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\nimport type { TextMatchTransformer } from './MarkdownTransformers.js'\n\nexport function findOutermostTextMatchTransformer(\n  textNode_: TextNode,\n  textMatchTransformers: Array<TextMatchTransformer>,\n): {\n  endIndex: number\n  match: RegExpMatchArray\n  startIndex: number\n  transformer: TextMatchTransformer\n} | null {\n  const textNode = textNode_\n\n  let foundMatchStartIndex: number | undefined = undefined\n  let foundMatchEndIndex: number | undefined = undefined\n  let foundMatchTransformer: TextMatchTransformer | undefined = undefined\n  let foundMatch: RegExpMatchArray | undefined = undefined\n\n  for (const transformer of textMatchTransformers) {\n    if (!transformer.replace || !transformer.importRegExp) {\n      continue\n    }\n    const match = textNode.getTextContent().match(transformer.importRegExp)\n\n    if (!match) {\n      continue\n    }\n\n    const startIndex = match.index || 0\n    const endIndex = transformer.getEndIndex\n      ? transformer.getEndIndex(textNode, match)\n      : startIndex + match[0].length\n\n    if (endIndex === false) {\n      continue\n    }\n\n    if (\n      foundMatchStartIndex === undefined ||\n      foundMatchEndIndex === undefined ||\n      (startIndex < foundMatchStartIndex && endIndex > foundMatchEndIndex)\n    ) {\n      foundMatchStartIndex = startIndex\n      foundMatchEndIndex = endIndex\n      foundMatchTransformer = transformer\n      foundMatch = match\n    }\n  }\n\n  if (\n    foundMatchStartIndex === undefined ||\n    foundMatchEndIndex === undefined ||\n    foundMatchTransformer === undefined ||\n    foundMatch === undefined\n  ) {\n    return null\n  }\n\n  return {\n    endIndex: foundMatchEndIndex,\n    match: foundMatch,\n    startIndex: foundMatchStartIndex,\n    transformer: foundMatchTransformer,\n  }\n}\n\nexport function importFoundTextMatchTransformer(\n  textNode: TextNode,\n  startIndex: number,\n  endIndex: number,\n  transformer: TextMatchTransformer,\n  match: RegExpMatchArray,\n): {\n  nodeAfter: TextNode | undefined // If split\n  nodeBefore: TextNode | undefined // If split\n  transformedNode?: TextNode\n} | null {\n  let nodeAfter, nodeBefore, transformedNode\n\n  if (startIndex === 0) {\n    ;[transformedNode, nodeAfter] = textNode.splitText(endIndex)\n  } else {\n    ;[nodeBefore, transformedNode, nodeAfter] = textNode.splitText(startIndex, endIndex)\n  }\n\n  if (!transformer.replace) {\n    return null\n  }\n  const potentialTransformedNode = transformedNode\n    ? transformer.replace(transformedNode, match)\n    : undefined\n\n  return {\n    nodeAfter,\n    nodeBefore,\n    transformedNode: potentialTransformedNode || undefined,\n  }\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport type { ElementNode, LexicalEditor, TextNode } from 'lexical'\n\nimport {\n  $createRangeSelection,\n  $getSelection,\n  $isLineBreakNode,\n  $isRangeSelection,\n  $isRootOrShadowRoot,\n  $isTextNode,\n  $setSelection,\n} from 'lexical'\n\nimport type {\n  ElementTransformer,\n  MultilineElementTransformer,\n  TextFormatTransformer,\n  TextMatchTransformer,\n  Transformer,\n} from './MarkdownTransformers.js'\n\nimport { TRANSFORMERS } from './index.js'\nimport { indexBy, PUNCTUATION_OR_SPACE, transformersByType } from './utils.js'\n\nfunction runElementTransformers(\n  parentNode: ElementNode,\n  anchorNode: TextNode,\n  anchorOffset: number,\n  elementTransformers: ReadonlyArray<ElementTransformer>,\n): boolean {\n  const grandParentNode = parentNode.getParent()\n\n  if (!$isRootOrShadowRoot(grandParentNode) || parentNode.getFirstChild() !== anchorNode) {\n    return false\n  }\n\n  const textContent = anchorNode.getTextContent()\n\n  // Checking for anchorOffset position to prevent any checks for cases when caret is too far\n  // from a line start to be a part of block-level markdown trigger.\n  //\n  // TODO:\n  // Can have a quick check if caret is close enough to the beginning of the string (e.g. offset less than 10-20)\n  // since otherwise it won't be a markdown shortcut, but tables are exception\n  if (textContent[anchorOffset - 1] !== ' ') {\n    return false\n  }\n\n  for (const { regExp, replace } of elementTransformers) {\n    const match = textContent.match(regExp)\n\n    if (match && match[0].length === (match[0].endsWith(' ') ? anchorOffset : anchorOffset - 1)) {\n      const nextSiblings = anchorNode.getNextSiblings()\n      const [leadingNode, remainderNode] = anchorNode.splitText(anchorOffset)\n      leadingNode?.remove()\n      const siblings = remainderNode ? [remainderNode, ...nextSiblings] : nextSiblings\n      if (replace(parentNode, siblings, match, false) !== false) {\n        return true\n      }\n    }\n  }\n\n  return false\n}\n\nfunction runMultilineElementTransformers(\n  parentNode: ElementNode,\n  anchorNode: TextNode,\n  anchorOffset: number,\n  elementTransformers: ReadonlyArray<MultilineElementTransformer>,\n): boolean {\n  const grandParentNode = parentNode.getParent()\n\n  if (!$isRootOrShadowRoot(grandParentNode) || parentNode.getFirstChild() !== anchorNode) {\n    return false\n  }\n\n  const textContent = anchorNode.getTextContent()\n\n  // Checking for anchorOffset position to prevent any checks for cases when caret is too far\n  // from a line start to be a part of block-level markdown trigger.\n  //\n  // TODO:\n  // Can have a quick check if caret is close enough to the beginning of the string (e.g. offset less than 10-20)\n  // since otherwise it won't be a markdown shortcut, but tables are exception\n  if (textContent[anchorOffset - 1] !== ' ') {\n    return false\n  }\n\n  for (const { regExpEnd, regExpStart, replace } of elementTransformers) {\n    if (\n      (regExpEnd && !('optional' in regExpEnd)) ||\n      (regExpEnd && 'optional' in regExpEnd && !regExpEnd.optional)\n    ) {\n      continue\n    }\n\n    const match = textContent.match(regExpStart)\n\n    if (match && match[0].length === (match[0].endsWith(' ') ? anchorOffset : anchorOffset - 1)) {\n      const nextSiblings = anchorNode.getNextSiblings()\n      const [leadingNode, remainderNode] = anchorNode.splitText(anchorOffset)\n      leadingNode?.remove()\n      const siblings = remainderNode ? [remainderNode, ...nextSiblings] : nextSiblings\n\n      if (replace(parentNode, siblings, match, null, null, false) !== false) {\n        return true\n      }\n    }\n  }\n\n  return false\n}\n\nfunction runTextMatchTransformers(\n  anchorNode: TextNode,\n  anchorOffset: number,\n  transformersByTrigger: Readonly<Record<string, Array<TextMatchTransformer>>>,\n): boolean {\n  let textContent = anchorNode.getTextContent()\n  const lastChar = textContent[anchorOffset - 1]!\n  const transformers = transformersByTrigger[lastChar]\n\n  if (transformers == null) {\n    return false\n  }\n\n  // If typing in the middle of content, remove the tail to do\n  // reg exp match up to a string end (caret position)\n  if (anchorOffset < textContent.length) {\n    textContent = textContent.slice(0, anchorOffset)\n  }\n\n  for (const transformer of transformers) {\n    if (!transformer.replace || !transformer.regExp) {\n      continue\n    }\n    const match = textContent.match(transformer.regExp)\n\n    if (match === null) {\n      continue\n    }\n\n    const startIndex = match.index || 0\n    const endIndex = startIndex + match[0].length\n    let replaceNode\n\n    if (startIndex === 0) {\n      ;[replaceNode] = anchorNode.splitText(endIndex)\n    } else {\n      ;[, replaceNode] = anchorNode.splitText(startIndex, endIndex)\n    }\n    if (replaceNode) {\n      replaceNode.selectNext(0, 0)\n      transformer.replace(replaceNode, match)\n    }\n    return true\n  }\n\n  return false\n}\n\nfunction $runTextFormatTransformers(\n  anchorNode: TextNode,\n  anchorOffset: number,\n  textFormatTransformers: Readonly<Record<string, ReadonlyArray<TextFormatTransformer>>>,\n): boolean {\n  const textContent = anchorNode.getTextContent()\n  const closeTagEndIndex = anchorOffset - 1\n  const closeChar = textContent[closeTagEndIndex]!\n  // Quick check if we're possibly at the end of inline markdown style\n  const matchers = textFormatTransformers[closeChar]\n\n  if (!matchers) {\n    return false\n  }\n\n  for (const matcher of matchers) {\n    const { tag } = matcher\n    const tagLength = tag.length\n    const closeTagStartIndex = closeTagEndIndex - tagLength + 1\n\n    // If tag is not single char check if rest of it matches with text content\n    if (tagLength > 1) {\n      if (!isEqualSubString(textContent, closeTagStartIndex, tag, 0, tagLength)) {\n        continue\n      }\n    }\n\n    // Space before closing tag cancels inline markdown\n    if (textContent[closeTagStartIndex - 1] === ' ') {\n      continue\n    }\n\n    // Some tags can not be used within words, hence should have newline/space/punctuation after it\n    const afterCloseTagChar = textContent[closeTagEndIndex + 1]\n\n    if (\n      matcher.intraword === false &&\n      afterCloseTagChar &&\n      !PUNCTUATION_OR_SPACE.test(afterCloseTagChar)\n    ) {\n      continue\n    }\n\n    const closeNode = anchorNode\n    let openNode = closeNode\n    let openTagStartIndex = getOpenTagStartIndex(textContent, closeTagStartIndex, tag)\n\n    // Go through text node siblings and search for opening tag\n    // if haven't found it within the same text node as closing tag\n    let sibling: null | TextNode = openNode\n\n    while (openTagStartIndex < 0 && (sibling = sibling.getPreviousSibling<TextNode>())) {\n      if ($isLineBreakNode(sibling)) {\n        break\n      }\n\n      if ($isTextNode(sibling)) {\n        const siblingTextContent = sibling.getTextContent()\n        openNode = sibling\n        openTagStartIndex = getOpenTagStartIndex(siblingTextContent, siblingTextContent.length, tag)\n      }\n    }\n\n    // Opening tag is not found\n    if (openTagStartIndex < 0) {\n      continue\n    }\n\n    // No content between opening and closing tag\n    if (openNode === closeNode && openTagStartIndex + tagLength === closeTagStartIndex) {\n      continue\n    }\n\n    // Checking longer tags for repeating chars (e.g. *** vs **)\n    const prevOpenNodeText = openNode.getTextContent()\n\n    if (openTagStartIndex > 0 && prevOpenNodeText[openTagStartIndex - 1] === closeChar) {\n      continue\n    }\n\n    // Some tags can not be used within words, hence should have newline/space/punctuation before it\n    const beforeOpenTagChar = prevOpenNodeText[openTagStartIndex - 1]\n\n    if (\n      matcher.intraword === false &&\n      beforeOpenTagChar &&\n      !PUNCTUATION_OR_SPACE.test(beforeOpenTagChar)\n    ) {\n      continue\n    }\n\n    // Clean text from opening and closing tags (starting from closing tag\n    // to prevent any offset shifts if we start from opening one)\n    const prevCloseNodeText = closeNode.getTextContent()\n    const closeNodeText =\n      prevCloseNodeText.slice(0, closeTagStartIndex) + prevCloseNodeText.slice(closeTagEndIndex + 1)\n    closeNode.setTextContent(closeNodeText)\n    const openNodeText = openNode === closeNode ? closeNodeText : prevOpenNodeText\n    openNode.setTextContent(\n      openNodeText.slice(0, openTagStartIndex) + openNodeText.slice(openTagStartIndex + tagLength),\n    )\n    const selection = $getSelection()\n    const nextSelection = $createRangeSelection()\n    $setSelection(nextSelection)\n    // Adjust offset based on deleted chars\n    const newOffset = closeTagEndIndex - tagLength * (openNode === closeNode ? 2 : 1) + 1\n    nextSelection.anchor.set(openNode.__key, openTagStartIndex, 'text')\n    nextSelection.focus.set(closeNode.__key, newOffset, 'text')\n\n    // Apply formatting to selected text\n    for (const format of matcher.format) {\n      if (!nextSelection.hasFormat(format)) {\n        nextSelection.formatText(format)\n      }\n    }\n\n    // Collapse selection up to the focus point\n    nextSelection.anchor.set(\n      nextSelection.focus.key,\n      nextSelection.focus.offset,\n      nextSelection.focus.type,\n    )\n\n    // Remove formatting from collapsed selection\n    for (const format of matcher.format) {\n      if (nextSelection.hasFormat(format)) {\n        nextSelection.toggleFormat(format)\n      }\n    }\n\n    if ($isRangeSelection(selection)) {\n      nextSelection.format = selection.format\n    }\n\n    return true\n  }\n\n  return false\n}\n\nfunction getOpenTagStartIndex(string: string, maxIndex: number, tag: string): number {\n  const tagLength = tag.length\n\n  for (let i = maxIndex; i >= tagLength; i--) {\n    const startIndex = i - tagLength\n\n    if (\n      isEqualSubString(string, startIndex, tag, 0, tagLength) && // Space after opening tag cancels transformation\n      string[startIndex + tagLength] !== ' '\n    ) {\n      return startIndex\n    }\n  }\n\n  return -1\n}\n\nfunction isEqualSubString(\n  stringA: string,\n  aStart: number,\n  stringB: string,\n  bStart: number,\n  length: number,\n): boolean {\n  for (let i = 0; i < length; i++) {\n    if (stringA[aStart + i] !== stringB[bStart + i]) {\n      return false\n    }\n  }\n\n  return true\n}\n\nexport function registerMarkdownShortcuts(\n  editor: LexicalEditor,\n  transformers: Array<Transformer> = TRANSFORMERS,\n): () => void {\n  const byType = transformersByType(transformers)\n  const textFormatTransformersByTrigger = indexBy(\n    byType.textFormat,\n    ({ tag }) => tag[tag.length - 1],\n  )\n  const textMatchTransformersByTrigger = indexBy(byType.textMatch, ({ trigger }) => trigger)\n\n  for (const transformer of transformers) {\n    const type = transformer.type\n    if (type === 'element' || type === 'text-match' || type === 'multiline-element') {\n      const dependencies = transformer.dependencies\n      for (const node of dependencies) {\n        if (!editor.hasNode(node)) {\n          throw new Error(\n            'MarkdownShortcuts: missing dependency %s for transformer. Ensure node dependency is included in editor initial config.' +\n              node.getType(),\n          )\n        }\n      }\n    }\n  }\n\n  const $transform = (parentNode: ElementNode, anchorNode: TextNode, anchorOffset: number) => {\n    if (runElementTransformers(parentNode, anchorNode, anchorOffset, byType.element)) {\n      return\n    }\n\n    if (\n      runMultilineElementTransformers(parentNode, anchorNode, anchorOffset, byType.multilineElement)\n    ) {\n      return\n    }\n\n    if (runTextMatchTransformers(anchorNode, anchorOffset, textMatchTransformersByTrigger)) {\n      return\n    }\n\n    $runTextFormatTransformers(anchorNode, anchorOffset, textFormatTransformersByTrigger)\n  }\n\n  return editor.registerUpdateListener(({ dirtyLeaves, editorState, prevEditorState, tags }) => {\n    // Ignore updates from collaboration and undo/redo (as changes already calculated)\n    if (tags.has('collaboration') || tags.has('historic')) {\n      return\n    }\n\n    // If editor is still composing (i.e. backticks) we must wait before the user confirms the key\n    if (editor.isComposing()) {\n      return\n    }\n\n    const selection = editorState.read($getSelection)\n    const prevSelection = prevEditorState.read($getSelection)\n\n    // We expect selection to be a collapsed range and not match previous one (as we want\n    // to trigger transforms only as user types)\n    if (\n      !$isRangeSelection(prevSelection) ||\n      !$isRangeSelection(selection) ||\n      !selection.isCollapsed() ||\n      selection.is(prevSelection)\n    ) {\n      return\n    }\n\n    const anchorKey = selection.anchor.key\n    const anchorOffset = selection.anchor.offset\n\n    const anchorNode = editorState._nodeMap.get(anchorKey)\n\n    if (\n      !$isTextNode(anchorNode) ||\n      !dirtyLeaves.has(anchorKey) ||\n      (anchorOffset !== 1 && anchorOffset > prevSelection.anchor.offset + 1)\n    ) {\n      return\n    }\n\n    editor.update(() => {\n      // Markdown is not available inside code\n      if (anchorNode.hasFormat('code')) {\n        return\n      }\n\n      const parentNode = anchorNode.getParent()\n\n      if (parentNode === null) {\n        return\n      }\n\n      $transform(parentNode, anchorNode, selection.anchor.offset)\n    })\n  })\n}\n","/* eslint-disable regexp/no-unused-capturing-group */\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport type { ListType } from '@lexical/list'\nimport type { HeadingTagType } from '@lexical/rich-text'\nimport type { ElementNode, Klass, LexicalNode, TextFormatType, TextNode } from 'lexical'\n\nimport {\n  $createListItemNode,\n  $createListNode,\n  $isListItemNode,\n  $isListNode,\n  ListItemNode,\n  ListNode,\n} from '@lexical/list'\nimport {\n  $createHeadingNode,\n  $createQuoteNode,\n  $isHeadingNode,\n  $isQuoteNode,\n  HeadingNode,\n  QuoteNode,\n} from '@lexical/rich-text'\nimport { $createLineBreakNode } from 'lexical'\n\nexport type Transformer =\n  | ElementTransformer\n  | MultilineElementTransformer\n  | TextFormatTransformer\n  | TextMatchTransformer\n\nexport type ElementTransformer = {\n  dependencies: Array<Klass<LexicalNode>>\n  /**\n   * `export` is called when the `$convertToMarkdownString` is called to convert the editor state into markdown.\n   *\n   * @return return null to cancel the export, even though the regex matched. Lexical will then search for the next transformer.\n   */\n  export: (\n    node: LexicalNode,\n\n    traverseChildren: (node: ElementNode) => string,\n  ) => null | string\n  regExp: RegExp\n  /**\n   * `replace` is called when markdown is imported or typed in the editor\n   *\n   * @return return false to cancel the transform, even though the regex matched. Lexical will then search for the next transformer.\n   */\n  replace: (\n    parentNode: ElementNode,\n    children: Array<LexicalNode>,\n    match: Array<string>,\n    /**\n     * Whether the match is from an import operation (e.g. through `$convertFromMarkdownString`) or not (e.g. through typing in the editor).\n     */\n    isImport: boolean,\n  ) => boolean | void\n  type: 'element'\n}\n\nexport type MultilineElementTransformer = {\n  dependencies: Array<Klass<LexicalNode>>\n  /**\n   * `export` is called when the `$convertToMarkdownString` is called to convert the editor state into markdown.\n   *\n   * @return return null to cancel the export, even though the regex matched. Lexical will then search for the next transformer.\n   */\n  export?: (\n    node: LexicalNode,\n\n    traverseChildren: (node: ElementNode) => string,\n  ) => null | string\n  /**\n   * Use this function to manually handle the import process, once the `regExpStart` has matched successfully.\n   * Without providing this function, the default behavior is to match until `regExpEnd` is found, or until the end of the document if `regExpEnd.optional` is true.\n   *\n   * @returns a tuple or null. The first element of the returned tuple is a boolean indicating if a multiline element was imported. The second element is the index of the last line that was processed. If null is returned, the next multilineElementTransformer will be tried. If undefined is returned, the default behavior will be used.\n   */\n  handleImportAfterStartMatch?: (args: {\n    lines: Array<string>\n    rootNode: ElementNode\n    startLineIndex: number\n    startMatch: RegExpMatchArray\n    transformer: MultilineElementTransformer\n  }) => [boolean, number] | null | undefined\n  /**\n   * This regex determines when to stop matching. Anything in between regExpStart and regExpEnd will be matched\n   */\n  regExpEnd?:\n    | {\n        /**\n         * Whether the end match is optional. If true, the end match is not required to match for the transformer to be triggered.\n         * The entire text from regexpStart to the end of the document will then be matched.\n         */\n        optional?: true\n        regExp: RegExp\n      }\n    | RegExp\n  /**\n   * This regex determines when to start matching\n   */\n  regExpStart: RegExp\n  /**\n   * `replace` is called only when markdown is imported in the editor, not when it's typed\n   *\n   * @return return false to cancel the transform, even though the regex matched. Lexical will then search for the next transformer.\n   */\n  replace: (\n    rootNode: ElementNode,\n    /**\n     * During markdown shortcut transforms, children nodes may be provided to the transformer. If this is the case, no `linesInBetween` will be provided and\n     * the children nodes should be used instead of the `linesInBetween` to create the new node.\n     */\n    children: Array<LexicalNode> | null,\n    startMatch: Array<string>,\n    endMatch: Array<string> | null,\n    /**\n     * linesInBetween includes the text between the start & end matches, split up by lines, not including the matches themselves.\n     * This is null when the transformer is triggered through markdown shortcuts (by typing in the editor)\n     */\n    linesInBetween: Array<string> | null,\n    /**\n     * Whether the match is from an import operation (e.g. through `$convertFromMarkdownString`) or not (e.g. through typing in the editor).\n     */\n    isImport: boolean,\n  ) => boolean | void\n  type: 'multiline-element'\n}\n\nexport type TextFormatTransformer = Readonly<{\n  format: ReadonlyArray<TextFormatType>\n  intraword?: boolean\n  tag: string\n  type: 'text-format'\n}>\n\nexport type TextMatchTransformer = Readonly<{\n  dependencies: Array<Klass<LexicalNode>>\n  /**\n   * Determines how a node should be exported to markdown\n   */\n  export?: (\n    node: LexicalNode,\n\n    exportChildren: (node: ElementNode) => string,\n\n    exportFormat: (node: TextNode, textContent: string) => string,\n  ) => null | string\n  /**\n   * For import operations, this function can be used to determine the end index of the match, after `importRegExp` has matched.\n   * Without this function, the end index will be determined by the length of the match from `importRegExp`. Manually determining the end index can be useful if\n   * the match from `importRegExp` is not the entire text content of the node. That way, `importRegExp` can be used to match only the start of the node, and `getEndIndex`\n   * can be used to match the end of the node.\n   *\n   * @returns The end index of the match, or false if the match was unsuccessful and a different transformer should be tried.\n   */\n  getEndIndex?: (node: TextNode, match: RegExpMatchArray) => false | number\n  /**\n   * This regex determines what text is matched during markdown imports\n   */\n  importRegExp?: RegExp\n  /**\n   * This regex determines what text is matched for markdown shortcuts while typing in the editor\n   */\n  regExp: RegExp\n  /**\n   * Determines how the matched markdown text should be transformed into a node during the markdown import process\n   *\n   * @returns nothing, or a TextNode that may be a child of the new node that is created.\n   * If a TextNode is returned, text format matching will be applied to it (e.g. bold, italic, etc.)\n   */\n  replace?: (node: TextNode, match: RegExpMatchArray) => TextNode | void\n  /**\n   * Single character that allows the transformer to trigger when typed in the editor. This does not affect markdown imports outside of the markdown shortcut plugin.\n   * If the trigger is matched, the `regExp` will be used to match the text in the second step.\n   */\n  trigger?: string\n  type: 'text-match'\n}>\n\nconst EMPTY_OR_WHITESPACE_ONLY = /^[\\t ]*$/\nconst ORDERED_LIST_REGEX = /^(\\s*)(\\d+)\\.\\s/\nconst UNORDERED_LIST_REGEX = /^(\\s*)[-*+]\\s/\nconst CHECK_LIST_REGEX = /^(\\s*)(?:-\\s)?\\s?(\\[(\\s|x)?\\])\\s/i\nconst HEADING_REGEX = /^(#{1,6})\\s/\nconst QUOTE_REGEX = /^>\\s/\nconst CODE_START_REGEX = /^[ \\t]*(\\\\`\\\\`\\\\`|```)(\\w+)?/\nconst CODE_END_REGEX = /[ \\t]*(\\\\`\\\\`\\\\`|```)$/\nconst CODE_SINGLE_LINE_REGEX = /^[ \\t]*```[^`]+(?:(?:`{1,2}|`{4,})[^`]+)*```(?:[^`]|$)/\nconst TABLE_ROW_REG_EXP = /^\\|(.+)\\|\\s?$/\nconst TABLE_ROW_DIVIDER_REG_EXP = /^(\\| ?:?-*:? ?)+\\|\\s?$/\nconst TAG_START_REGEX = /^[ \\t]*<[a-z_][\\w-]*(?:\\s[^<>]*)?\\/?>/i\nconst TAG_END_REGEX = /^[ \\t]*<\\/[a-z_][\\w-]*\\s*>/i\n\nconst createBlockNode = (\n  createNode: (match: Array<string>) => ElementNode,\n): ElementTransformer['replace'] => {\n  return (parentNode, children, match) => {\n    const node = createNode(match)\n    node.append(...children)\n    parentNode.replace(node)\n    node.select(0, 0)\n  }\n}\n\n// Amount of spaces that define indentation level\n// TODO: should be an option\nconst LIST_INDENT_SIZE = 4\n\nfunction getIndent(whitespaces: string): number {\n  const tabs = whitespaces.match(/\\t/g)\n  const spaces = whitespaces.match(/ /g)\n\n  let indent = 0\n\n  if (tabs) {\n    indent += tabs.length\n  }\n\n  if (spaces) {\n    indent += Math.floor(spaces.length / LIST_INDENT_SIZE)\n  }\n\n  return indent\n}\n\nconst listReplace = (listType: ListType): ElementTransformer['replace'] => {\n  return (parentNode, children, match) => {\n    const previousNode = parentNode.getPreviousSibling()\n    const nextNode = parentNode.getNextSibling()\n    const listItem = $createListItemNode(listType === 'check' ? match[3] === 'x' : undefined)\n    if ($isListNode(nextNode) && nextNode.getListType() === listType) {\n      const firstChild = nextNode.getFirstChild()\n      if (firstChild !== null) {\n        firstChild.insertBefore(listItem)\n      } else {\n        // should never happen, but let's handle gracefully, just in case.\n        nextNode.append(listItem)\n      }\n      parentNode.remove()\n    } else if ($isListNode(previousNode) && previousNode.getListType() === listType) {\n      previousNode.append(listItem)\n      parentNode.remove()\n    } else {\n      const list = $createListNode(listType, listType === 'number' ? Number(match[2]) : undefined)\n      list.append(listItem)\n      parentNode.replace(list)\n    }\n    listItem.append(...children)\n    listItem.select(0, 0)\n    const indent = getIndent(match[1]!)\n    if (indent) {\n      listItem.setIndent(indent)\n    }\n  }\n}\n\nconst listExport = (\n  listNode: ListNode,\n  exportChildren: (node: ElementNode) => string,\n  depth: number,\n): string => {\n  const output: string[] = []\n  const children = listNode.getChildren()\n  let index = 0\n  for (const listItemNode of children) {\n    if ($isListItemNode(listItemNode)) {\n      if (listItemNode.getChildrenSize() === 1) {\n        const firstChild = listItemNode.getFirstChild()\n        if ($isListNode(firstChild)) {\n          output.push(listExport(firstChild, exportChildren, depth + 1))\n          continue\n        }\n      }\n      const indent = ' '.repeat(depth * LIST_INDENT_SIZE)\n      const listType = listNode.getListType()\n      const prefix =\n        listType === 'number'\n          ? `${listNode.getStart() + index}. `\n          : listType === 'check'\n            ? `- [${listItemNode.getChecked() ? 'x' : ' '}] `\n            : '- '\n      output.push(indent + prefix + exportChildren(listItemNode))\n      index++\n    }\n  }\n\n  return output.join('\\n')\n}\n\nexport const HEADING: ElementTransformer = {\n  type: 'element',\n  dependencies: [HeadingNode],\n  export: (node, exportChildren) => {\n    if (!$isHeadingNode(node)) {\n      return null\n    }\n    const level = Number(node.getTag().slice(1))\n    return '#'.repeat(level) + ' ' + exportChildren(node)\n  },\n  regExp: HEADING_REGEX,\n  replace: createBlockNode((match) => {\n    const tag = ('h' + match[1]!.length) as HeadingTagType\n    return $createHeadingNode(tag)\n  }),\n}\n\nexport const QUOTE: ElementTransformer = {\n  type: 'element',\n  dependencies: [QuoteNode],\n  export: (node, exportChildren) => {\n    if (!$isQuoteNode(node)) {\n      return null\n    }\n\n    const lines = exportChildren(node).split('\\n')\n    const output: string[] = []\n    for (const line of lines) {\n      output.push('> ' + line)\n    }\n    return output.join('\\n')\n  },\n  regExp: QUOTE_REGEX,\n  replace: (parentNode, children, _match, isImport) => {\n    if (isImport) {\n      const previousNode = parentNode.getPreviousSibling()\n      if ($isQuoteNode(previousNode)) {\n        previousNode.splice(previousNode.getChildrenSize(), 0, [\n          $createLineBreakNode(),\n          ...children,\n        ])\n        previousNode.select(0, 0)\n        parentNode.remove()\n        return\n      }\n    }\n\n    const node = $createQuoteNode()\n    node.append(...children)\n    parentNode.replace(node)\n    node.select(0, 0)\n  },\n}\n\nexport const UNORDERED_LIST: ElementTransformer = {\n  type: 'element',\n  dependencies: [ListNode, ListItemNode],\n  export: (node, exportChildren) => {\n    return $isListNode(node) ? listExport(node, exportChildren, 0) : null\n  },\n  regExp: UNORDERED_LIST_REGEX,\n  replace: listReplace('bullet'),\n}\n\nexport const CHECK_LIST: ElementTransformer = {\n  type: 'element',\n  dependencies: [ListNode, ListItemNode],\n  export: (node, exportChildren) => {\n    return $isListNode(node) ? listExport(node, exportChildren, 0) : null\n  },\n  regExp: CHECK_LIST_REGEX,\n  replace: listReplace('check'),\n}\n\nexport const ORDERED_LIST: ElementTransformer = {\n  type: 'element',\n  dependencies: [ListNode, ListItemNode],\n  export: (node, exportChildren) => {\n    return $isListNode(node) ? listExport(node, exportChildren, 0) : null\n  },\n  regExp: ORDERED_LIST_REGEX,\n  replace: listReplace('number'),\n}\n\nexport const INLINE_CODE: TextFormatTransformer = {\n  type: 'text-format',\n  format: ['code'],\n  tag: '`',\n}\n\nexport const HIGHLIGHT: TextFormatTransformer = {\n  type: 'text-format',\n  format: ['highlight'],\n  tag: '==',\n}\n\nexport const BOLD_ITALIC_STAR: TextFormatTransformer = {\n  type: 'text-format',\n  format: ['bold', 'italic'],\n  tag: '***',\n}\n\nexport const BOLD_ITALIC_UNDERSCORE: TextFormatTransformer = {\n  type: 'text-format',\n  format: ['bold', 'italic'],\n  intraword: false,\n  tag: '___',\n}\n\nexport const BOLD_STAR: TextFormatTransformer = {\n  type: 'text-format',\n  format: ['bold'],\n  tag: '**',\n}\n\nexport const BOLD_UNDERSCORE: TextFormatTransformer = {\n  type: 'text-format',\n  format: ['bold'],\n  intraword: false,\n  tag: '__',\n}\n\nexport const STRIKETHROUGH: TextFormatTransformer = {\n  type: 'text-format',\n  format: ['strikethrough'],\n  tag: '~~',\n}\n\nexport const ITALIC_STAR: TextFormatTransformer = {\n  type: 'text-format',\n  format: ['italic'],\n  tag: '*',\n}\n\nexport const ITALIC_UNDERSCORE: TextFormatTransformer = {\n  type: 'text-format',\n  format: ['italic'],\n  intraword: false,\n  tag: '_',\n}\n\nexport function normalizeMarkdown(input: string, shouldMergeAdjacentLines: boolean): string {\n  const lines = input.split('\\n')\n  let inCodeBlock = false\n  const sanitizedLines: string[] = []\n  let nestedDeepCodeBlock = 0\n\n  for (let i = 0; i < lines.length; i++) {\n    const line = lines[i]!\n    const lastLine = sanitizedLines[sanitizedLines.length - 1]\n\n    // Code blocks of ```single line``` don't toggle the inCodeBlock flag\n    if (CODE_SINGLE_LINE_REGEX.test(line)) {\n      sanitizedLines.push(line)\n      continue\n    }\n\n    if (CODE_END_REGEX.test(line)) {\n      if (nestedDeepCodeBlock === 0) {\n        inCodeBlock = true\n      }\n      if (nestedDeepCodeBlock === 1) {\n        inCodeBlock = false\n      }\n      if (nestedDeepCodeBlock > 0) {\n        nestedDeepCodeBlock--\n      }\n      sanitizedLines.push(line)\n      continue\n    }\n\n    // Toggle inCodeBlock state when encountering start or end of a code block\n    if (CODE_START_REGEX.test(line)) {\n      inCodeBlock = true\n      nestedDeepCodeBlock++\n      sanitizedLines.push(line)\n      continue\n    }\n\n    // If we are inside a code block, keep the line unchanged\n    if (inCodeBlock) {\n      sanitizedLines.push(line)\n      continue\n    }\n\n    // In markdown the concept of \"empty paragraphs\" does not exist.\n    // Blocks must be separated by an empty line. Non-empty adjacent lines must be merged.\n    if (\n      EMPTY_OR_WHITESPACE_ONLY.test(line) ||\n      EMPTY_OR_WHITESPACE_ONLY.test(lastLine!) ||\n      !lastLine ||\n      HEADING_REGEX.test(lastLine) ||\n      HEADING_REGEX.test(line) ||\n      QUOTE_REGEX.test(line) ||\n      ORDERED_LIST_REGEX.test(line) ||\n      UNORDERED_LIST_REGEX.test(line) ||\n      CHECK_LIST_REGEX.test(line) ||\n      TABLE_ROW_REG_EXP.test(line) ||\n      TABLE_ROW_DIVIDER_REG_EXP.test(line) ||\n      !shouldMergeAdjacentLines ||\n      TAG_START_REGEX.test(line) ||\n      TAG_END_REGEX.test(line) ||\n      TAG_START_REGEX.test(lastLine) ||\n      TAG_END_REGEX.test(lastLine) ||\n      CODE_END_REGEX.test(lastLine)\n    ) {\n      sanitizedLines.push(line)\n    } else {\n      sanitizedLines[sanitizedLines.length - 1] = lastLine + ' ' + line.trim()\n    }\n  }\n\n  return sanitizedLines.join('\\n')\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport type { ElementNode } from 'lexical'\n\nimport type {\n  ElementTransformer,\n  MultilineElementTransformer,\n  TextFormatTransformer,\n  TextMatchTransformer,\n  Transformer,\n} from './MarkdownTransformers.js'\n\nimport { createMarkdownExport } from './MarkdownExport.js'\nimport { createMarkdownImport } from './MarkdownImport.js'\nimport { registerMarkdownShortcuts } from './MarkdownShortcuts.js'\nimport {\n  BOLD_ITALIC_STAR,\n  BOLD_ITALIC_UNDERSCORE,\n  BOLD_STAR,\n  BOLD_UNDERSCORE,\n  CHECK_LIST,\n  HEADING,\n  HIGHLIGHT,\n  INLINE_CODE,\n  ITALIC_STAR,\n  ITALIC_UNDERSCORE,\n  normalizeMarkdown,\n  ORDERED_LIST,\n  QUOTE,\n  STRIKETHROUGH,\n  UNORDERED_LIST,\n} from './MarkdownTransformers.js'\n\nconst ELEMENT_TRANSFORMERS: Array<ElementTransformer> = [\n  HEADING,\n  QUOTE,\n  UNORDERED_LIST,\n  ORDERED_LIST,\n]\n\nconst MULTILINE_ELEMENT_TRANSFORMERS: Array<MultilineElementTransformer> = []\n\n// Order of text format transformers matters:\n//\n// - code should go first as it prevents any transformations inside\n// - then longer tags match (e.g. ** or __ should go before * or _)\nconst TEXT_FORMAT_TRANSFORMERS: Array<TextFormatTransformer> = [\n  INLINE_CODE,\n  BOLD_ITALIC_STAR,\n  BOLD_ITALIC_UNDERSCORE,\n  BOLD_STAR,\n  BOLD_UNDERSCORE,\n  HIGHLIGHT,\n  ITALIC_STAR,\n  ITALIC_UNDERSCORE,\n  STRIKETHROUGH,\n]\n\nconst TEXT_MATCH_TRANSFORMERS: Array<TextMatchTransformer> = []\n\nconst TRANSFORMERS: Array<Transformer> = [\n  ...ELEMENT_TRANSFORMERS,\n  ...MULTILINE_ELEMENT_TRANSFORMERS,\n  ...TEXT_FORMAT_TRANSFORMERS,\n  ...TEXT_MATCH_TRANSFORMERS,\n]\n\n/**\n * Renders markdown from a string. The selection is moved to the start after the operation.\n *\n *  @param {boolean} [shouldPreserveNewLines] By setting this to true, new lines will be preserved between conversions\n *  @param {boolean} [shouldMergeAdjacentLines] By setting this to true, adjacent non empty lines will be merged according to commonmark spec: https://spec.commonmark.org/0.24/#example-177. Not applicable if shouldPreserveNewLines = true.\n */\nfunction $convertFromMarkdownString(\n  markdown: string,\n  transformers: Array<Transformer> = TRANSFORMERS,\n  node?: ElementNode,\n  shouldPreserveNewLines = false,\n  shouldMergeAdjacentLines = true,\n): void {\n  const sanitizedMarkdown = shouldPreserveNewLines\n    ? markdown\n    : normalizeMarkdown(markdown, shouldMergeAdjacentLines)\n  const importMarkdown = createMarkdownImport(transformers, shouldPreserveNewLines)\n  return importMarkdown(sanitizedMarkdown, node)\n}\n\n/**\n * Renders string from markdown. The selection is moved to the start after the operation.\n */\nfunction $convertToMarkdownString(\n  transformers: Array<Transformer> = TRANSFORMERS,\n  node?: ElementNode,\n  shouldPreserveNewLines: boolean = false,\n): string {\n  const exportMarkdown = createMarkdownExport(transformers, shouldPreserveNewLines)\n  return exportMarkdown(node)\n}\n\nexport {\n  $convertFromMarkdownString,\n  $convertToMarkdownString,\n  BOLD_ITALIC_STAR,\n  BOLD_ITALIC_UNDERSCORE,\n  BOLD_STAR,\n  BOLD_UNDERSCORE,\n  CHECK_LIST,\n  ELEMENT_TRANSFORMERS,\n  type ElementTransformer,\n  HEADING,\n  HIGHLIGHT,\n  INLINE_CODE,\n  ITALIC_STAR,\n  ITALIC_UNDERSCORE,\n  MULTILINE_ELEMENT_TRANSFORMERS,\n  type MultilineElementTransformer,\n  ORDERED_LIST,\n  QUOTE,\n  registerMarkdownShortcuts,\n  STRIKETHROUGH,\n  TEXT_FORMAT_TRANSFORMERS,\n  TEXT_MATCH_TRANSFORMERS,\n  type TextFormatTransformer,\n  type TextMatchTransformer,\n  type Transformer,\n  TRANSFORMERS,\n  UNORDERED_LIST,\n}\n"],"names":["CAN_USE_DOM", "window", "document", "createElement", "c", "_c", "useRef", "useRunDeprioritized", "t0", "$", "timeout", "undefined", "idleHandleRef", "t1", "fn", "Promise", "resolve", "exec", "window", "current", "cancelIdleCallback", "requestIdleCallback", "interactionResponse", "then", "setTimeout", "requestAnimationFrame", "Point", "_x", "_y", "constructor", "x", "y", "calcDeltaXTo", "calcDeltaYTo", "calcDistanceTo", "point", "Math", "sqrt", "pow", "calcHorizontalDistanceTo", "abs", "calcVerticalDistance", "equals", "isPoint", "useLexicalComposerContext", "mergeRegister", "$getSelection", "$isRangeSelection", "$isTextNode", "COMMAND_PRIORITY_LOW", "createCommand", "getDOMSelection", "useCallback", "useEffect", "useState", "React", "c", "_c", "useLexicalComposerContext", "mergeRegister", "$getSelection", "$isRangeSelection", "$setSelection", "COMMAND_PRIORITY_LOW", "COMMAND_PRIORITY_NORMAL", "createCommand", "KEY_ARROW_DOWN_COMMAND", "KEY_ARROW_UP_COMMAND", "KEY_ENTER_COMMAND", "KEY_ESCAPE_COMMAND", "KEY_TAB_COMMAND", "useCallback", "useEffect", "useLayoutEffect", "useMemo", "useRef", "useState", "baseClass", "scrollIntoViewIfNeeded", "target", "typeaheadContainerNode", "document", "getElementById", "typeaheadRect", "getBoundingClientRect", "top", "height", "window", "innerHeight", "scrollIntoView", "block", "getFullMatchOffset", "documentText", "entryText", "offset", "triggerOffset", "i", "length", "substring", "$splitNodeContainingQuery", "match", "selection", "$getSelection", "$isRangeSelection", "isCollapsed", "anchor", "type", "anchorNode", "getNode", "isSimpleText", "selectionOffset", "textContent", "getTextContent", "slice", "characterOffset", "replaceableString", "queryOffset", "matchingString", "startOffset", "newNode", "splitText", "getScrollParent", "element", "includeHidden", "style", "getComputedStyle", "excludeStaticParent", "position", "overflowRegex", "body", "parent1", "parentElement", "test", "overflow", "overflowY", "overflowX", "isTriggerVisibleInNearestScrollContainer", "targetElement", "containerElement", "tRect", "cRect", "bottom", "useDynamicPositioning", "resolution", "targetElementRef", "onReposition", "onVisibilityChange", "$", "_c", "editor", "useLexicalComposerContext", "t0", "t1", "current", "rootElement", "getRootElement", "rootScrollParent", "ticking", "previousIsInView", "handleScroll", "requestAnimationFrame", "isInView", "resizeObserver", "ResizeObserver", "addEventListener", "capture", "passive", "observe", "disconnect", "removeEventListener", "useEffect", "SCROLL_TYPEAHEAD_OPTION_INTO_VIEW_COMMAND", "createCommand", "LexicalMenu", "anchorElementRef", "close", "groups", "menuRenderFn", "shouldSplitNodeWithQuery", "selectedItemKey", "setSelectedItemKey", "useState", "updateSelectedItem", "useCallback", "item", "rootElem", "setAttribute", "key", "setSelectedItemKeyToFirstMatchingItem", "allItems", "flatMap", "group", "items", "firstMatchingItem", "selectItemAndCleanUp", "selectedItem", "update", "textNodeContainingQuery", "remove", "setTimeout", "read", "clone", "$setSelection", "onSelect", "queryString", "removeAttribute", "useLayoutEffect", "mergeRegister", "registerCommand", "ref", "COMMAND_PRIORITY_LOW", "KEY_ARROW_DOWN_COMMAND", "payload", "event", "selectedIndex", "findIndex", "newSelectedIndex", "newSelectedItem", "dispatchCommand", "index", "preventDefault", "stopImmediatePropagation", "COMMAND_PRIORITY_NORMAL", "KEY_ARROW_UP_COMMAND", "KEY_ESCAPE_COMMAND", "KEY_TAB_COMMAND", "find", "KEY_ENTER_COMMAND", "listItemProps", "useMemo", "setContainerDivAttributes", "containerDiv", "className", "display", "useMenuAnchorRef", "anchorElem", "setResolution", "Symbol", "for", "CAN_USE_DOM", "createElement", "useRef", "parent", "undefined", "menuEle", "firstChild", "width", "getRect", "left", "rawTop", "scrollY", "scrollX", "menuRect", "menuHeight", "menuWidth", "rootElementRect", "isRTL", "dir", "documentElement", "anchorRect", "leftBoundary", "Math", "max", "right", "newLeft", "wouldGoOffBottomOfScreen", "wouldGoOffTopOfScreen", "isConnected", "append", "positionMenu", "t2", "t3", "rootElement_0", "containerDiv_0", "t4", "PUNCTUATION", "getTextUpToAnchor", "selection", "anchor", "type", "anchorNode", "getNode", "isSimpleText", "anchorOffset", "offset", "getTextContent", "slice", "tryToPositionRange", "leadOffset", "range", "editorWindow", "domSelection", "getDOMSelection", "isCollapsed", "startOffset", "endOffset", "setStart", "setEnd", "getQueryTextForSearch", "editor", "text", "getEditorState", "read", "$getSelection", "$isRangeSelection", "isSelectionOnEntityBoundary", "prevSibling", "getPreviousSibling", "$isTextNode", "isTextEntity", "startTransition", "callback", "ENABLE_SLASH_MENU_COMMAND", "createCommand", "LexicalTypeaheadMenuPlugin", "anchorClassName", "anchorElem", "groups", "menuRenderFn", "onClose", "onOpen", "onQueryChange", "triggerFn", "useLexicalComposerContext", "resolution", "setResolution", "useState", "anchorElementRef", "useMenuAnchorRef", "closeTypeahead", "useCallback", "openTypeahead", "res", "useEffect", "mergeRegister", "registerCommand", "node", "match", "matchingString", "replaceableString", "_window", "window", "document", "createRange", "getRect", "getBoundingClientRect", "COMMAND_PRIORITY_LOW", "updateListener", "undefined", "query", "removeUpdateListener", "registerUpdateListener", "current", "_jsx", "LexicalMenu", "close", "shouldSplitNodeWithQuery", "Rect", "_bottom", "_left", "_right", "_top", "constructor", "left", "top", "right", "bottom", "physicTop", "physicBottom", "physicLeft", "physicRight", "fromDOM", "dom", "height", "width", "getBoundingClientRect", "fromLWTH", "fromDOMRect", "domRect", "fromLTRB", "fromPoints", "startPoint", "endPoint", "x", "y", "contains", "target", "isPoint", "isOnTopSide", "isOnBottomSide", "isOnLeftSide", "isOnRightSide", "reason", "result", "distanceFromPoint", "point", "containsResult", "distance", "dx", "dy", "Math", "sqrt", "equals", "generateNewRect", "intersectsWith", "rect", "h1", "x1", "y1", "w1", "h2", "x2", "y2", "w2", "maxX", "maxY", "minX", "minY", "abs", "getEnabledNodes", "editorConfig", "getEnabledNodesFromServerNodes", "nodes", "features", "map", "node", "$getRoot", "$isDecoratorNode", "$isElementNode", "$isLineBreakNode", "$isTextNode", "$isListItemNode", "$isListNode", "$isHeadingNode", "$isQuoteNode", "$isParagraphNode", "$isTextNode", "autoFormatBase", "markdownFormatKind", "regEx", "regExForAutoFormatting", "requiresParagraphStart", "paragraphStartBase", "markdownHeader1", "export", "createHeadingExport", "markdownHeader2", "markdownHeader3", "markdownHeader4", "markdownHeader5", "markdownHeader6", "markdownBlockQuote", "blockQuoteExport", "markdownUnorderedListDash", "listExport", "markdownUnorderedListAsterisk", "markdownOrderedList", "markdownHorizontalRule", "markdownHorizontalRuleUsingDashes", "markdownInlineCode", "exportFormat", "exportTag", "markdownBold", "markdownItalic", "markdownBold2", "markdownItalic2", "fakeMarkdownUnderline", "exportTagClose", "markdownStrikethrough", "markdownStrikethroughItalicBold", "markdownItalicbold", "markdownStrikethroughItalic", "markdownStrikethroughBold", "markdownLink", "createHeadingExport", "level", "node", "exportChildren", "$isHeadingNode", "getTag", "repeat", "listExport", "$isListNode", "processNestedLists", "LIST_INDENT_SIZE", "listNode", "depth", "output", "children", "getChildren", "index", "listItemNode", "$isListItemNode", "getChildrenSize", "firstChild", "getFirstChild", "push", "indent", "prefix", "getListType", "getStart", "join", "blockQuoteExport", "$isQuoteNode", "indexBy", "list", "callback", "item", "key", "transformersByType", "transformers", "byType", "t", "type", "element", "multilineElement", "textFormat", "textMatch", "PUNCTUATION_OR_SPACE", "MARKDOWN_EMPTY_LINE_REG_EXP", "isEmptyParagraph", "$isParagraphNode", "$isTextNode", "test", "getTextContent", "createMarkdownExport", "transformers", "shouldPreserveNewLines", "byType", "transformersByType", "elementTransformers", "multilineElement", "element", "isNewlineDelimited", "textFormatTransformers", "textFormat", "filter", "transformer", "format", "length", "sort", "a", "b", "includes", "node", "output", "children", "$getRoot", "getChildren", "forEach", "child", "i", "result", "exportTopLevelElements", "textMatch", "push", "isEmptyParagraph", "concat", "join", "textTransformersIndex", "textMatchTransformers", "export", "_node", "exportChildren", "$isElementNode", "$isDecoratorNode", "getTextContent", "unclosedTags", "unclosableTags", "mainLoop", "parentNode", "textNode", "textContent", "exportTextFormat", "$isLineBreakNode", "$isTextNode", "textTransformers", "frozenString", "trim", "hasFormat", "replace", "openingTags", "closingTagsBefore", "closingTagsAfter", "prevNode", "getTextSibling", "nextNode", "applied", "Set", "tag", "has", "add", "find", "unclosedTag", "nodeHasFormat", "nextNodeHasFormat", "unhandledUnclosedTags", "pop", "backward", "sibling", "getPreviousSibling", "getNextSibling", "parent", "getParentOrThrow", "isInline", "descendant", "getLastDescendant", "getFirstDescendant", "$isListItemNode", "$isListNode", "$isQuoteNode", "$findMatchingParent", "$createLineBreakNode", "$createParagraphNode", "$createTextNode", "$getRoot", "$getSelection", "$isParagraphNode", "$isTextNode", "findOutermostTextFormatTransformer", "textNode", "textFormatTransformersIndex", "textContent", "getTextContent", "match", "findOutermostMatch", "textFormatMatchStart", "index", "textFormatMatchEnd", "length", "transformer", "transformersByTag", "endIndex", "startIndex", "textTransformersIndex", "openTagsMatch", "openTagsRegExp", "tag", "replace", "fullMatchRegExp", "fullMatchRegExpByTag", "fullMatch", "intraword", "beforeChar", "afterChar", "PUNCTUATION_OR_SPACE", "test", "importTextFormatTransformer", "nodeAfter", "nodeBefore", "transformedNode", "splitText", "setTextContent", "format", "hasFormat", "toggleFormat", "findOutermostTextMatchTransformer", "textNode_", "textMatchTransformers", "textNode", "foundMatchStartIndex", "foundMatchEndIndex", "foundMatchTransformer", "foundMatch", "transformer", "replace", "importRegExp", "match", "getTextContent", "startIndex", "index", "endIndex", "getEndIndex", "length", "undefined", "importFoundTextMatchTransformer", "nodeAfter", "nodeBefore", "transformedNode", "splitText", "potentialTransformedNode", "importTextTransformers", "textNode", "textFormatTransformersIndex", "textMatchTransformers", "foundTextFormat", "findOutermostTextFormatTransformer", "foundTextMatch", "findOutermostTextMatchTransformer", "startIndex", "endIndex", "result", "importTextFormatTransformer", "transformer", "match", "nodeAfter", "$isTextNode", "hasFormat", "nodeBefore", "transformedNode", "importFoundTextMatchTransformer", "escapedText", "getTextContent", "replace", "setTextContent", "createMarkdownImport", "transformers", "shouldPreserveNewLines", "byType", "transformersByType", "textFormatTransformersIndex", "createTextFormatTransformersIndex", "textFormat", "markdownString", "node", "lines", "split", "linesLength", "length", "root", "$getRoot", "clear", "i", "lineText", "imported", "shiftedIndex", "$importMultiline", "multilineElement", "$importBlocks", "element", "textMatch", "children", "getChildren", "child", "isEmptyParagraph", "getChildrenSize", "remove", "$getSelection", "selectStart", "startLineIndex", "multilineElementTransformers", "rootNode", "transformer", "handleImportAfterStartMatch", "regExpEnd", "regExpStart", "replace", "startMatch", "match", "result", "regexpEndRegex", "regExp", "isEndOptional", "optional", "endLineIndex", "endMatch", "index", "linesInBetween", "push", "slice", "line", "text", "elementTransformers", "textMatchTransformers", "textNode", "$createTextNode", "elementNode", "$createParagraphNode", "append", "setTextContent", "importTextTransformers", "isAttached", "previousNode", "getPreviousSibling", "$isParagraphNode", "$isQuoteNode", "$isListNode", "targetNode", "lastDescendant", "getLastDescendant", "$findMatchingParent", "$isListItemNode", "getTextContentSize", "splice", "$createLineBreakNode", "textTransformers", "transformersByTag", "fullMatchRegExpByTag", "openTagsRegExp", "escapeRegExp", "tag", "tagRegExp", "RegExp", "join", "$createRangeSelection", "$getSelection", "$isLineBreakNode", "$isRangeSelection", "$isRootOrShadowRoot", "$isTextNode", "$setSelection", "runElementTransformers", "parentNode", "anchorNode", "anchorOffset", "elementTransformers", "grandParentNode", "getParent", "$isRootOrShadowRoot", "getFirstChild", "textContent", "getTextContent", "regExp", "replace", "match", "length", "endsWith", "nextSiblings", "getNextSiblings", "leadingNode", "remainderNode", "splitText", "remove", "siblings", "runMultilineElementTransformers", "regExpEnd", "regExpStart", "optional", "runTextMatchTransformers", "transformersByTrigger", "lastChar", "transformers", "slice", "transformer", "startIndex", "index", "endIndex", "replaceNode", "selectNext", "$runTextFormatTransformers", "textFormatTransformers", "closeTagEndIndex", "closeChar", "matchers", "matcher", "tag", "tagLength", "closeTagStartIndex", "isEqualSubString", "afterCloseTagChar", "intraword", "PUNCTUATION_OR_SPACE", "test", "closeNode", "openNode", "openTagStartIndex", "getOpenTagStartIndex", "sibling", "getPreviousSibling", "$isLineBreakNode", "$isTextNode", "siblingTextContent", "prevOpenNodeText", "beforeOpenTagChar", "prevCloseNodeText", "closeNodeText", "setTextContent", "openNodeText", "selection", "$getSelection", "nextSelection", "$createRangeSelection", "$setSelection", "newOffset", "anchor", "set", "__key", "focus", "format", "hasFormat", "formatText", "key", "offset", "type", "toggleFormat", "$isRangeSelection", "string", "maxIndex", "i", "stringA", "aStart", "stringB", "bStart", "registerMarkdownShortcuts", "editor", "TRANSFORMERS", "byType", "transformersByType", "textFormatTransformersByTrigger", "indexBy", "textFormat", "textMatchTransformersByTrigger", "textMatch", "trigger", "dependencies", "node", "hasNode", "Error", "getType", "$transform", "element", "multilineElement", "registerUpdateListener", "dirtyLeaves", "editorState", "prevEditorState", "tags", "has", "isComposing", "read", "prevSelection", "isCollapsed", "is", "anchorKey", "_nodeMap", "get", "update", "$createListItemNode", "$createListNode", "$isListItemNode", "$isListNode", "ListItemNode", "ListNode", "$createHeadingNode", "$createQuoteNode", "$isHeadingNode", "$isQuoteNode", "HeadingNode", "QuoteNode", "$createLineBreakNode", "EMPTY_OR_WHITESPACE_ONLY", "ORDERED_LIST_REGEX", "UNORDERED_LIST_REGEX", "CHECK_LIST_REGEX", "HEADING_REGEX", "QUOTE_REGEX", "CODE_START_REGEX", "CODE_END_REGEX", "CODE_SINGLE_LINE_REGEX", "TABLE_ROW_REG_EXP", "TABLE_ROW_DIVIDER_REG_EXP", "TAG_START_REGEX", "TAG_END_REGEX", "createBlockNode", "createNode", "parentNode", "children", "match", "node", "append", "replace", "select", "LIST_INDENT_SIZE", "getIndent", "whitespaces", "tabs", "spaces", "indent", "length", "Math", "floor", "listReplace", "listType", "previousNode", "getPreviousSibling", "nextNode", "getNextSibling", "listItem", "undefined", "getListType", "firstChild", "getFirstChild", "insertBefore", "remove", "list", "Number", "setIndent", "listExport", "listNode", "exportChildren", "depth", "output", "getChildren", "index", "listItemNode", "getChildrenSize", "push", "repeat", "prefix", "getStart", "getChecked", "join", "HEADING", "type", "dependencies", "export", "level", "getTag", "slice", "regExp", "tag", "QUOTE", "lines", "split", "line", "_match", "isImport", "splice", "UNORDERED_LIST", "CHECK_LIST", "ORDERED_LIST", "INLINE_CODE", "format", "HIGHLIGHT", "BOLD_ITALIC_STAR", "BOLD_ITALIC_UNDERSCORE", "intraword", "BOLD_STAR", "BOLD_UNDERSCORE", "STRIKETHROUGH", "ITALIC_STAR", "ITALIC_UNDERSCORE", "normalizeMarkdown", "input", "shouldMergeAdjacentLines", "inCodeBlock", "sanitizedLines", "nestedDeepCodeBlock", "i", "lastLine", "test", "trim", "ELEMENT_TRANSFORMERS", "HEADING", "QUOTE", "UNORDERED_LIST", "ORDERED_LIST", "MULTILINE_ELEMENT_TRANSFORMERS", "TEXT_FORMAT_TRANSFORMERS", "INLINE_CODE", "BOLD_ITALIC_STAR", "BOLD_ITALIC_UNDERSCORE", "BOLD_STAR", "BOLD_UNDERSCORE", "HIGHLIGHT", "ITALIC_STAR", "ITALIC_UNDERSCORE", "STRIKETHROUGH", "TEXT_MATCH_TRANSFORMERS", "TRANSFORMERS", "$convertFromMarkdownString", "markdown", "transformers", "node", "shouldPreserveNewLines", "shouldMergeAdjacentLines", "sanitizedMarkdown", "normalizeMarkdown", "createMarkdownImport", "$convertToMarkdownString", "createMarkdownExport"],"mappings":"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"}},
    {"offset": {"line": 2226, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/shared/slashMenu/basicGroup.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/align/client/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/ui/icons/AlignCenter/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/ui/icons/AlignJustify/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/ui/icons/AlignLeft/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/ui/icons/AlignRight/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/utilities/createClientFeature.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/align/client/toolbarAlignGroup.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/blockquote/client/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/ui/icons/Blockquote/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/ui/icons/Text/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/shared/toolbar/textDropdownGroup.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/blockquote/markdownTransformer.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/blocks/client/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/ui/icons/Block/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/ui/icons/InlineBlocks/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/blocks/client/getBlockImageComponent.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/blocks/client/markdown/markdownTransformer.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/utilities/jsx/extractPropsFromJSXPropsString.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/utilities/jsx/jsx.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/blocks/server/markdown/linesFromMatchToContentAndPropsString.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/blocks/client/nodes/BlocksNode.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/blocks/server/nodes/BlocksNode.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/blocks/client/component/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/blocks/client/component/BlockContent.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/blocks/client/component/removeEmptyArrayValues.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/blocks/client/markdown/getLexicalToMarkdown.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/blocks/client/markdown/getMarkdownToLexical.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/blocks/client/plugin/commands.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/blocks/client/plugin/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/debug/testRecorder/client/plugin/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/utils/environment.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/debug/testRecorder/client/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/debug/treeView/client/plugin/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/debug/treeView/client/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/format/bold/feature.client.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/ui/icons/Bold/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/format/shared/toolbarFormatGroup.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/format/bold/markdownTransformers.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/format/inlineCode/feature.client.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/ui/icons/Code/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/format/inlineCode/markdownTransformers.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/format/italic/feature.client.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/ui/icons/Italic/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/format/italic/markdownTransformers.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/format/strikethrough/feature.client.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/ui/icons/Strikethrough/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/format/strikethrough/markdownTransformers.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/format/subscript/feature.client.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/ui/icons/Subscript/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/format/superscript/feature.client.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/ui/icons/Superscript/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/format/underline/feature.client.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/ui/icons/Underline/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/ui/icons/TextState/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/textState/textState.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/textState/feature.client.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/heading/client/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/ui/icons/H1/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/ui/icons/H2/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/ui/icons/H3/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/ui/icons/H4/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/ui/icons/H5/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/ui/icons/H6/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/heading/markdownTransformer.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/utils/markdown/createBlockNode.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/horizontalRule/client/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/ui/icons/HorizontalRule/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/ui/icons/Add/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/shared/toolbar/addDropdownGroup.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/horizontalRule/server/nodes/HorizontalRuleNode.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/horizontalRule/client/nodes/HorizontalRuleNode.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/horizontalRule/client/markdownTransformer.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/horizontalRule/client/plugin/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/indent/client/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/ui/icons/IndentDecrease/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/ui/icons/IndentIncrease/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/indent/client/IndentPlugin.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/indent/client/toolbarIndentGroup.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/link/client/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/ui/icons/Link/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/utils/getSelectedNode.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/shared/toolbar/featureButtonsGroup.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/link/markdownTransformer.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/link/nodes/LinkNode.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/link/nodes/AutoLinkNode.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/link/client/plugins/autoLink/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/link/client/plugins/clickableLink/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/link/client/plugins/floatingLinkEditor/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/link/client/plugins/floatingLinkEditor/LinkEditor/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/utils/setFloatingElemPositionForLinkEditor.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/link/client/plugins/floatingLinkEditor/LinkEditor/commands.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/link/client/plugins/link/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/utils/url.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/lists/checklist/client/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/ui/icons/Checklist/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/lists/plugin/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/lists/shared/shouldRegisterListBaseNodes.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/lists/shared/slashMenuListGroup.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/lists/checklist/markdownTransformers.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/lists/shared/markdown.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/lists/checklist/client/plugin/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/lists/orderedList/client/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/ui/icons/OrderedList/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/lists/orderedList/markdownTransformer.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/lists/unorderedList/client/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/ui/icons/UnorderedList/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/lists/unorderedList/markdownTransformer.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/migrations/lexicalPluginToLexical/nodes/unknownConvertedNode/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/migrations/lexicalPluginToLexical/feature.client.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/migrations/slateToLexical/nodes/unknownConvertedNode/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/migrations/slateToLexical/feature.client.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/paragraph/client/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/debug/jsxConverter/client/plugin/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/converters/lexicalToJSX/Component/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/converters/lexicalToJSX/converter/converters/blockquote.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/converters/lexicalToJSX/converter/converters/heading.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/converters/lexicalToJSX/converter/converters/horizontalRule.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/converters/lexicalToJSX/converter/converters/linebreak.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/converters/lexicalToJSX/converter/converters/link.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/converters/lexicalToJSX/converter/converters/list.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/converters/lexicalToJSX/converter/converters/paragraph.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/converters/lexicalToJSX/converter/converters/tab.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/converters/lexicalToJSX/converter/converters/table.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/converters/lexicalToJSX/converter/converters/text.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/utils/nodeFormat.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/converters/lexicalToJSX/converter/converters/upload.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/converters/lexicalToJSX/converter/defaultConverters.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/converters/lexicalToJSX/converter/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/validate/hasText.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/debug/jsxConverter/client/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/textState/defaultColors.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/relationship/client/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/ui/icons/Relationship/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/relationship/client/nodes/RelationshipNode.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/relationship/server/nodes/RelationshipNode.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/relationship/client/plugins/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/relationship/client/drawer/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/utilities/fieldsDrawer/useLexicalListDrawer.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/relationship/client/utils/useEnabledRelationships.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/toolbars/fixed/client/Toolbar/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/toolbars/shared/ToolbarButton/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/toolbars/shared/ToolbarDropdown/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/toolbars/shared/ToolbarDropdown/DropDown.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/toolbars/fixed/client/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/toolbars/inline/client/Toolbar/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/utils/getDOMRangeRect.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/utils/setFloatingElemPosition.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/toolbars/inline/client/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/experimental_table/client/index.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/ui/icons/Table/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/experimental_table/markdownTransformer.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/experimental_table/client/plugins/TableActionMenuPlugin/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/ui/icons/Meatballs/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/experimental_table/client/plugins/TableCellResizerPlugin/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/experimental_table/client/plugins/TableHoverActionsPlugin/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/experimental_table/client/utils/useDebounce.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/experimental_table/client/utils/debounce.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/experimental_table/client/plugins/TablePlugin/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/upload/client/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/ui/icons/Upload/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/upload/client/nodes/UploadNode.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/upload/server/nodes/conversions.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/upload/server/nodes/UploadNode.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/upload/client/component/pending/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/upload/client/plugin/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/upload/client/drawer/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/field/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/theme/EditorTheme.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/config/client/default.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/config/client/loader.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/config/client/sanitize.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/utils/guard.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/utils/joinClasses.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/utils/swipe.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/blocks/client/componentInline/components/InlineBlockEditButton.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/blocks/client/componentInline/components/InlineBlockRemoveButton.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/blocks/client/componentInline/components/InlineBlockLabel.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/blocks/client/componentInline/components/InlineBlockContainer.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/blocks/client/component/components/BlockCollapsible.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/blocks/client/component/components/BlockEditButton.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/blocks/client/component/components/BlockRemoveButton.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/converters/utilities/restPopulateFn.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/blocks/premade/CodeBlock/converter.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/blocks/premade/CodeBlock/Component/Code.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/blocks/premade/CodeBlock/Component/defaultLanguages.ts","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/blocks/premade/CodeBlock/Component/Block.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/ui/icons/CodeBlock/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/blocks/premade/CodeBlock/Component/Collapse/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/lexical/ui/icons/Collapse/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/features/blocks/premade/CodeBlock/Component/FloatingCollapse/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/field/RenderLexical/index.tsx","file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/%40payloadcms%2Brichtext-lexical%403.64.0_%40faceless-ui%2Bmodal%403.0.0_react-dom%4019.0.0_react%4019._bd7baf48251713852e8e278ca79c7dae/node_modules/%40payloadcms/richtext-lexical/src/utilities/buildEditorState.ts"],"sourcesContent":["import type {\n  SlashMenuGroup,\n  SlashMenuItem,\n} from '../../../lexical/plugins/SlashMenu/LexicalTypeaheadMenuPlugin/types.js'\n\nexport function slashMenuBasicGroupWithItems(items: SlashMenuItem[]): SlashMenuGroup {\n  return {\n    items,\n    key: 'basic',\n    label: ({ i18n }) => {\n      return i18n.t('lexical:general:slashMenuBasicGroupLabel')\n    },\n  }\n}\n","'use client'\n\nimport { $isElementNode, $isRangeSelection, FORMAT_ELEMENT_COMMAND } from 'lexical'\n\nimport type { ToolbarGroup } from '../../toolbars/types.js'\n\nimport { AlignCenterIcon } from '../../../lexical/ui/icons/AlignCenter/index.js'\nimport { AlignJustifyIcon } from '../../../lexical/ui/icons/AlignJustify/index.js'\nimport { AlignLeftIcon } from '../../../lexical/ui/icons/AlignLeft/index.js'\nimport { AlignRightIcon } from '../../../lexical/ui/icons/AlignRight/index.js'\nimport { createClientFeature } from '../../../utilities/createClientFeature.js'\nimport { toolbarAlignGroupWithItems } from './toolbarAlignGroup.js'\n\nconst toolbarGroups: ToolbarGroup[] = [\n  toolbarAlignGroupWithItems([\n    {\n      ChildComponent: AlignLeftIcon,\n      isActive: ({ selection }) => {\n        if (!$isRangeSelection(selection)) {\n          return false\n        }\n        for (const node of selection.getNodes()) {\n          if ($isElementNode(node)) {\n            if (node.getFormatType() === 'left') {\n              continue\n            }\n          }\n\n          const parent = node.getParent()\n          if ($isElementNode(parent)) {\n            if (parent.getFormatType() === 'left') {\n              continue\n            }\n          }\n\n          return false\n        }\n        return true\n      },\n      key: 'alignLeft',\n      label: ({ i18n }) => {\n        return i18n.t('lexical:align:alignLeftLabel')\n      },\n      onSelect: ({ editor }) => {\n        editor.dispatchCommand(FORMAT_ELEMENT_COMMAND, 'left')\n      },\n      order: 1,\n    },\n    {\n      ChildComponent: AlignCenterIcon,\n      isActive: ({ selection }) => {\n        if (!$isRangeSelection(selection)) {\n          return false\n        }\n        for (const node of selection.getNodes()) {\n          if ($isElementNode(node)) {\n            if (node.getFormatType() === 'center') {\n              continue\n            }\n          }\n\n          const parent = node.getParent()\n          if ($isElementNode(parent)) {\n            if (parent.getFormatType() === 'center') {\n              continue\n            }\n          }\n\n          return false\n        }\n        return true\n      },\n      key: 'alignCenter',\n      label: ({ i18n }) => {\n        return i18n.t('lexical:align:alignCenterLabel')\n      },\n      onSelect: ({ editor }) => {\n        editor.dispatchCommand(FORMAT_ELEMENT_COMMAND, 'center')\n      },\n      order: 2,\n    },\n    {\n      ChildComponent: AlignRightIcon,\n      isActive: ({ selection }) => {\n        if (!$isRangeSelection(selection)) {\n          return false\n        }\n        for (const node of selection.getNodes()) {\n          if ($isElementNode(node)) {\n            if (node.getFormatType() === 'right') {\n              continue\n            }\n          }\n\n          const parent = node.getParent()\n          if ($isElementNode(parent)) {\n            if (parent.getFormatType() === 'right') {\n              continue\n            }\n          }\n\n          return false\n        }\n        return true\n      },\n      key: 'alignRight',\n      label: ({ i18n }) => {\n        return i18n.t('lexical:align:alignRightLabel')\n      },\n      onSelect: ({ editor }) => {\n        editor.dispatchCommand(FORMAT_ELEMENT_COMMAND, 'right')\n      },\n      order: 3,\n    },\n    {\n      ChildComponent: AlignJustifyIcon,\n      isActive: ({ selection }) => {\n        if (!$isRangeSelection(selection)) {\n          return false\n        }\n        for (const node of selection.getNodes()) {\n          if ($isElementNode(node)) {\n            if (node.getFormatType() === 'justify') {\n              continue\n            }\n          }\n\n          const parent = node.getParent()\n          if ($isElementNode(parent)) {\n            if (parent.getFormatType() === 'justify') {\n              continue\n            }\n          }\n\n          return false\n        }\n        return true\n      },\n      key: 'alignJustify',\n      label: ({ i18n }) => {\n        return i18n.t('lexical:align:alignJustifyLabel')\n      },\n      onSelect: ({ editor }) => {\n        editor.dispatchCommand(FORMAT_ELEMENT_COMMAND, 'justify')\n      },\n      order: 4,\n    },\n  ]),\n]\n\nexport const AlignFeatureClient = createClientFeature({\n  toolbarFixed: {\n    groups: toolbarGroups,\n  },\n  toolbarInline: {\n    groups: toolbarGroups,\n  },\n})\n","'use client'\nimport React from 'react'\n\nexport const AlignCenterIcon: React.FC = () => (\n  <svg\n    aria-hidden=\"true\"\n    className=\"icon\"\n    fill=\"none\"\n    focusable=\"false\"\n    height=\"20\"\n    viewBox=\"0 0 20 20\"\n    width=\"20\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path d=\"M2.5 5H17.5\" stroke=\"currentColor\" strokeWidth=\"1.5\" />\n    <path d=\"M2.5 10H17.5\" stroke=\"currentColor\" strokeWidth=\"1.5\" />\n    <path d=\"M5 15H15\" stroke=\"currentColor\" strokeWidth=\"1.5\" />\n  </svg>\n)\n","'use client'\nimport React from 'react'\n\nexport const AlignJustifyIcon: React.FC = () => (\n  <svg\n    aria-hidden=\"true\"\n    className=\"icon\"\n    fill=\"none\"\n    focusable=\"false\"\n    height=\"20\"\n    viewBox=\"0 0 20 20\"\n    width=\"20\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path d=\"M2.5 5H17.5\" stroke=\"currentColor\" strokeWidth=\"1.5\" />\n    <path d=\"M2.5 10H17.5\" stroke=\"currentColor\" strokeWidth=\"1.5\" />\n    <path d=\"M2.5 15H17.5\" stroke=\"currentColor\" strokeWidth=\"1.5\" />\n  </svg>\n)\n","'use client'\nimport React from 'react'\n\nexport const AlignLeftIcon: React.FC = () => (\n  <svg\n    aria-hidden=\"true\"\n    className=\"icon\"\n    fill=\"none\"\n    focusable=\"false\"\n    height=\"20\"\n    viewBox=\"0 0 20 20\"\n    width=\"20\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path d=\"M2.5 5H17.5\" stroke=\"currentColor\" strokeWidth=\"1.5\" />\n    <path d=\"M2.5 10H17.5\" stroke=\"currentColor\" strokeWidth=\"1.5\" />\n    <path d=\"M2.5 15H12.5\" stroke=\"currentColor\" strokeWidth=\"1.5\" />\n  </svg>\n)\n","'use client'\nimport React from 'react'\n\nexport const AlignRightIcon: React.FC = () => (\n  <svg\n    aria-hidden=\"true\"\n    className=\"icon\"\n    fill=\"none\"\n    focusable=\"false\"\n    height=\"20\"\n    viewBox=\"0 0 20 20\"\n    width=\"20\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path d=\"M2.5 5H17.5\" stroke=\"currentColor\" strokeWidth=\"1.5\" />\n    <path d=\"M2.5 10H17.5\" stroke=\"currentColor\" strokeWidth=\"1.5\" />\n    <path d=\"M7.5 15H17.5\" stroke=\"currentColor\" strokeWidth=\"1.5\" />\n  </svg>\n)\n","import type { ClientConfig, RichTextFieldClient } from 'payload'\n\nimport type {\n  BaseClientFeatureProps,\n  ClientFeature,\n  ClientFeatureProviderMap,\n  FeatureProviderClient,\n  FeatureProviderProviderClient,\n  ResolvedClientFeatureMap,\n} from '../features/typesClient.js'\nimport type { ClientEditorConfig } from '../lexical/config/types.js'\nimport type { FeatureClientSchemaMap } from '../types.js'\n\nexport type CreateClientFeatureArgs<UnSanitizedClientProps, ClientProps> =\n  | ((props: {\n      config: ClientConfig\n      featureClientImportMap: Record<string, any>\n      featureClientSchemaMap: FeatureClientSchemaMap\n      /** unSanitizedEditorConfig.features, but mapped */\n      featureProviderMap: ClientFeatureProviderMap\n      field?: RichTextFieldClient\n      props: BaseClientFeatureProps<UnSanitizedClientProps>\n      // other resolved features, which have been loaded before this one. All features declared in 'dependencies' should be available here\n      resolvedFeatures: ResolvedClientFeatureMap\n      schemaPath: string\n      // unSanitized EditorConfig,\n      unSanitizedEditorConfig: ClientEditorConfig\n    }) => ClientFeature<ClientProps>)\n  | Omit<ClientFeature<ClientProps>, 'sanitizedClientFeatureProps'>\n\nexport const createClientFeature: <\n  UnSanitizedClientProps = undefined,\n  ClientProps = UnSanitizedClientProps,\n>(\n  args: CreateClientFeatureArgs<UnSanitizedClientProps, ClientProps>,\n) => FeatureProviderProviderClient<UnSanitizedClientProps, ClientProps> = (feature) => {\n  const featureProviderProvideClient: FeatureProviderProviderClient<any, any> = (props) => {\n    const featureProviderClient: Partial<FeatureProviderClient<any, any>> = {\n      clientFeatureProps: props,\n    }\n\n    if (typeof feature === 'function') {\n      featureProviderClient.feature = ({\n        config,\n        featureClientImportMap,\n        featureClientSchemaMap,\n        featureProviderMap,\n        field,\n        resolvedFeatures,\n        schemaPath,\n        unSanitizedEditorConfig,\n      }) => {\n        const toReturn = feature({\n          config,\n          featureClientImportMap,\n          featureClientSchemaMap,\n          featureProviderMap,\n          field,\n          props,\n          resolvedFeatures,\n          schemaPath,\n          unSanitizedEditorConfig,\n        })\n\n        if (toReturn.sanitizedClientFeatureProps === null) {\n          toReturn.sanitizedClientFeatureProps = props\n        }\n\n        return toReturn\n      }\n    } else {\n      // We have to spread feature here! Otherwise, if the arg of createClientFeature is not a function, and 2\n      // richText editors have the same feature (even if both call it, e.g. both call UploadFeature()),\n      // the second richText editor here will override sanitizedClientFeatureProps of the first feature, as both richText\n      // editor features share the same reference to the feature object.\n      // Example: richText editor 1 and 2 both have UploadFeature. richText editor 1 calls UploadFeature() with custom fields,\n      // richText editor 2 calls UploadFeature() with NO custom fields. If we don't spread feature here, richText editor 1\n      // will not have any custom fields, as richText editor 2 will override the feature object.\n      const newFeature: ClientFeature<any> = { ...feature }\n      newFeature.sanitizedClientFeatureProps = props\n      featureProviderClient.feature = newFeature\n    }\n    return featureProviderClient as FeatureProviderClient<any, any>\n  }\n\n  return featureProviderProvideClient\n}\n","'use client'\nimport type { ToolbarGroup, ToolbarGroupItem } from '../../toolbars/types.js'\n\nimport { AlignLeftIcon } from '../../../lexical/ui/icons/AlignLeft/index.js'\n\nexport const toolbarAlignGroupWithItems = (items: ToolbarGroupItem[]): ToolbarGroup => {\n  return {\n    type: 'dropdown',\n    ChildComponent: AlignLeftIcon,\n    items,\n    key: 'align',\n    order: 30,\n  }\n}\n","'use client'\n\nimport { $createQuoteNode, $isQuoteNode, QuoteNode } from '@lexical/rich-text'\nimport { $setBlocksType } from '@lexical/selection'\nimport { $getSelection, $isRangeSelection } from 'lexical'\n\nimport type { ToolbarGroup } from '../../toolbars/types.js'\n\nimport { BlockquoteIcon } from '../../../lexical/ui/icons/Blockquote/index.js'\nimport { createClientFeature } from '../../../utilities/createClientFeature.js'\nimport { slashMenuBasicGroupWithItems } from '../../shared/slashMenu/basicGroup.js'\nimport { toolbarTextDropdownGroupWithItems } from '../../shared/toolbar/textDropdownGroup.js'\nimport { MarkdownTransformer } from '../markdownTransformer.js'\n\nconst toolbarGroups: ToolbarGroup[] = [\n  toolbarTextDropdownGroupWithItems([\n    {\n      ChildComponent: BlockquoteIcon,\n      isActive: ({ selection }) => {\n        if (!$isRangeSelection(selection)) {\n          return false\n        }\n        for (const node of selection.getNodes()) {\n          if (!$isQuoteNode(node) && !$isQuoteNode(node.getParent())) {\n            return false\n          }\n        }\n        return true\n      },\n      key: 'blockquote',\n      label: ({ i18n }) => {\n        return i18n.t('lexical:blockquote:label')\n      },\n      onSelect: ({ editor }) => {\n        editor.update(() => {\n          const selection = $getSelection()\n          $setBlocksType(selection, () => $createQuoteNode())\n        })\n      },\n      order: 20,\n    },\n  ]),\n]\n\nexport const BlockquoteFeatureClient = createClientFeature({\n  markdownTransformers: [MarkdownTransformer],\n  nodes: [QuoteNode],\n\n  slashMenu: {\n    groups: [\n      slashMenuBasicGroupWithItems([\n        {\n          Icon: BlockquoteIcon,\n          key: 'blockquote',\n          keywords: ['quote', 'blockquote'],\n          label: ({ i18n }) => {\n            return i18n.t('lexical:blockquote:label')\n          },\n          onSelect: ({ editor }) => {\n            editor.update(() => {\n              const selection = $getSelection()\n              $setBlocksType(selection, () => $createQuoteNode())\n            })\n          },\n        },\n      ]),\n    ],\n  },\n  toolbarFixed: {\n    groups: toolbarGroups,\n  },\n  toolbarInline: {\n    groups: toolbarGroups,\n  },\n})\n","'use client'\nimport React from 'react'\n\nexport const BlockquoteIcon: React.FC = () => (\n  <svg\n    aria-hidden=\"true\"\n    className=\"icon\"\n    fill=\"none\"\n    focusable=\"false\"\n    height=\"20\"\n    viewBox=\"0 0 20 20\"\n    width=\"20\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M13.5353 10.5725C13.5353 9.47709 11.0456 9.99991 11.0456 7.85883C11.0456 6.46464 12.1162 5.61816 13.361 5.61816C14.805 5.61816 16 6.86298 16 8.92937C16 11.2945 14.4564 13.7841 11.1203 14.3816L10.8216 13.1368C12.888 12.4895 13.5353 11.4937 13.5353 10.5725ZM6.71369 10.5725C6.71369 9.47709 4.22407 9.99991 4.22407 7.85883C4.22407 6.46464 5.29461 5.61816 6.53942 5.61816C7.9834 5.61816 9.17842 6.86298 9.17842 8.92937C9.17842 11.2945 7.63485 13.7841 4.29876 14.3816L4 13.1368C6.06639 12.4895 6.71369 11.4937 6.71369 10.5725Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n)\n","'use client'\nimport React from 'react'\n\nexport const TextIcon: React.FC = () => (\n  <svg\n    aria-hidden=\"true\"\n    className=\"icon\"\n    fill=\"currentColor\"\n    focusable=\"false\"\n    height=\"20\"\n    viewBox=\"0 0 20 20\"\n    width=\"20\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M11.708 14.5H7.79785V13.9414H8.01367C9.00391 13.9414 9.15625 13.9033 9.15625 13.6113V6.70508H8.07715C6.82031 6.70508 6.73145 7.08594 6.28711 8.67285H5.80469L5.91895 6.12109H13.5869L13.7012 8.67285H13.2188C12.7744 7.08594 12.6855 6.70508 11.4287 6.70508H10.3496V13.6113C10.3496 13.9033 10.502 13.9414 11.4922 13.9414H11.708V14.5Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n)\n","import type { ToolbarGroup, ToolbarGroupItem } from '../../toolbars/types.js'\n\nimport { TextIcon } from '../../../lexical/ui/icons/Text/index.js'\n\nexport const toolbarTextDropdownGroupWithItems = (items: ToolbarGroupItem[]): ToolbarGroup => {\n  return {\n    type: 'dropdown',\n    ChildComponent: TextIcon,\n    items,\n    key: 'text',\n    order: 25,\n  }\n}\n","import { $createQuoteNode, $isQuoteNode, QuoteNode } from '@lexical/rich-text'\n\nimport type { ElementTransformer } from '../../packages/@lexical/markdown/index.js'\n\nexport const MarkdownTransformer: ElementTransformer = {\n  type: 'element',\n  dependencies: [QuoteNode],\n  export: (node, exportChildren) => {\n    if (!$isQuoteNode(node)) {\n      return null\n    }\n\n    const lines = exportChildren(node).split('\\n')\n    const output: string[] = []\n    for (const line of lines) {\n      output.push('> ' + line)\n    }\n    return output.join('\\n')\n  },\n  regExp: /^>\\s/,\n  replace: (parentNode, children, _match, isImport) => {\n    if (isImport) {\n      const previousNode = parentNode.getPreviousSibling()\n      if ($isQuoteNode(previousNode)) {\n        previousNode.splice(previousNode.getChildrenSize(), 0, [...children])\n        previousNode.select(0, 0)\n        parentNode.remove()\n        return\n      }\n    }\n\n    const node = $createQuoteNode()\n    node.append(...children)\n    parentNode.replace(node)\n    node.select(0, 0)\n  },\n}\n","'use client'\n\nimport type { I18nClient } from '@payloadcms/translations'\nimport type { BlocksFieldClient, ClientBlock } from 'payload'\n\nimport { getTranslation } from '@payloadcms/translations'\n\nimport type {\n  SlashMenuGroup,\n  SlashMenuItem,\n} from '../../../lexical/plugins/SlashMenu/LexicalTypeaheadMenuPlugin/types.js'\nimport type { ToolbarGroup, ToolbarGroupItem } from '../../toolbars/types.js'\n\nimport { BlockIcon } from '../../../lexical/ui/icons/Block/index.js'\nimport { InlineBlocksIcon } from '../../../lexical/ui/icons/InlineBlocks/index.js'\nimport { createClientFeature } from '../../../utilities/createClientFeature.js'\nimport { getBlockImageComponent } from './getBlockImageComponent.js'\nimport { getBlockMarkdownTransformers } from './markdown/markdownTransformer.js'\nimport { BlockNode } from './nodes/BlocksNode.js'\nimport { InlineBlockNode } from './nodes/InlineBlocksNode.js'\nimport { INSERT_BLOCK_COMMAND, INSERT_INLINE_BLOCK_COMMAND } from './plugin/commands.js'\nimport { BlocksPlugin } from './plugin/index.js'\nexport const BlocksFeatureClient = createClientFeature(\n  ({ config, featureClientSchemaMap, props, schemaPath }) => {\n    const schemaMapRenderedBlockPathPrefix = `${schemaPath}.lexical_internal_feature.blocks.lexical_blocks`\n    const schemaMapRenderedInlineBlockPathPrefix = `${schemaPath}.lexical_internal_feature.blocks.lexical_inline_blocks`\n    const clientSchema = featureClientSchemaMap['blocks']\n\n    if (!clientSchema) {\n      return {}\n    }\n\n    const blocksFields: BlocksFieldClient[] = Object.entries(clientSchema)\n      .filter(\n        ([key]) =>\n          key.startsWith(schemaMapRenderedBlockPathPrefix + '.') &&\n          !key.replace(schemaMapRenderedBlockPathPrefix + '.', '').includes('.'),\n      )\n      .map(([, value]) => value[0] as BlocksFieldClient)\n\n    const inlineBlocksFields: BlocksFieldClient[] = Object.entries(clientSchema)\n      .filter(\n        ([key]) =>\n          key.startsWith(schemaMapRenderedInlineBlockPathPrefix + '.') &&\n          !key.replace(schemaMapRenderedInlineBlockPathPrefix + '.', '').includes('.'),\n      )\n      .map(([, value]) => value[0] as BlocksFieldClient)\n\n    const clientBlocks: ClientBlock[] = blocksFields\n      .map((field) => {\n        return field.blockReferences\n          ? typeof field.blockReferences[0] === 'string'\n            ? config.blocksMap[field.blockReferences[0]]\n            : field.blockReferences[0]\n          : field.blocks[0]\n      })\n      .filter((block) => block !== undefined)\n\n    const clientInlineBlocks: ClientBlock[] = inlineBlocksFields\n      .map((field) => {\n        return field.blockReferences\n          ? typeof field.blockReferences[0] === 'string'\n            ? config.blocksMap[field.blockReferences[0]]\n            : field.blockReferences[0]\n          : field.blocks[0]\n      })\n      .filter((block) => block !== undefined)\n\n    return {\n      markdownTransformers: getBlockMarkdownTransformers({\n        blocks: clientBlocks,\n        inlineBlocks: clientInlineBlocks,\n      }),\n      nodes: [BlockNode, InlineBlockNode],\n      plugins: [\n        {\n          Component: BlocksPlugin,\n          position: 'normal',\n        },\n      ],\n      sanitizedClientFeatureProps: props,\n      slashMenu: {\n        groups: [\n          clientBlocks?.length\n            ? {\n                items: clientBlocks.map((block) => {\n                  return {\n                    Icon: getBlockImageComponent(block.imageURL, block.imageAltText),\n                    key: 'block-' + block.slug,\n                    keywords: ['block', 'blocks', block.slug],\n                    label: ({ i18n }) => {\n                      const blockDisplayName = block?.labels?.singular\n                        ? getTranslation(block.labels.singular, i18n)\n                        : block?.slug\n\n                      return blockDisplayName\n                    },\n                    onSelect: ({ editor }) => {\n                      editor.dispatchCommand(INSERT_BLOCK_COMMAND, {\n                        blockName: '',\n                        blockType: block.slug,\n                      })\n                    },\n                  } as SlashMenuItem\n                }),\n                key: 'blocks',\n                label: ({ i18n }: { i18n: I18nClient<object, 'lexical:blocks:label'> }) => {\n                  return i18n.t('lexical:blocks:label')\n                },\n              }\n            : null,\n          clientInlineBlocks?.length\n            ? {\n                items: clientInlineBlocks.map((inlineBlock) => {\n                  return {\n                    Icon: InlineBlocksIcon,\n                    key: 'inlineBlocks-' + inlineBlock.slug,\n                    keywords: ['inlineBlock', 'inline block', inlineBlock.slug],\n                    label: ({ i18n }) => {\n                      const blockDisplayName = inlineBlock?.labels?.singular\n                        ? getTranslation(inlineBlock.labels.singular, i18n)\n                        : inlineBlock?.slug\n\n                      return blockDisplayName\n                    },\n                    onSelect: ({ editor }) => {\n                      editor.dispatchCommand(INSERT_INLINE_BLOCK_COMMAND, {\n                        blockName: '',\n                        blockType: inlineBlock.slug,\n                      })\n                    },\n                  } as SlashMenuItem\n                }),\n                key: 'inlineBlocks',\n                label: ({\n                  i18n,\n                }: {\n                  i18n: I18nClient<object, 'lexical:blocks:inlineBlocks:label'>\n                }) => {\n                  return i18n.t('lexical:blocks:inlineBlocks:label')\n                },\n              }\n            : null,\n        ].filter(Boolean) as SlashMenuGroup[],\n      },\n      toolbarFixed: {\n        groups: [\n          clientBlocks.length\n            ? {\n                type: 'dropdown',\n                ChildComponent: BlockIcon,\n                items: clientBlocks.map((block, index) => {\n                  return {\n                    ChildComponent: getBlockImageComponent(block.imageURL, block.imageAltText),\n                    isActive: undefined, // At this point, we would be inside a sub-richtext-editor. And at this point this will be run against the focused sub-editor, not the parent editor which has the actual block. Thus, no point in running this\n                    key: 'block-' + block.slug,\n                    label: ({ i18n }) => {\n                      const blockDisplayName = block?.labels?.singular\n                        ? getTranslation(block.labels.singular, i18n)\n                        : block?.slug\n\n                      return blockDisplayName\n                    },\n                    onSelect: ({ editor }) => {\n                      editor.dispatchCommand(INSERT_BLOCK_COMMAND, {\n                        blockName: '',\n                        blockType: block.slug,\n                      })\n                    },\n                    order: index,\n                  } as ToolbarGroupItem\n                }),\n                key: 'blocks',\n                order: 20,\n              }\n            : null,\n          clientInlineBlocks?.length\n            ? {\n                type: 'dropdown',\n                ChildComponent: InlineBlocksIcon,\n                items: clientInlineBlocks.map((inlineBlock, index) => {\n                  return {\n                    ChildComponent: inlineBlock.imageURL\n                      ? getBlockImageComponent(inlineBlock.imageURL, inlineBlock.imageAltText)\n                      : InlineBlocksIcon,\n                    isActive: undefined,\n                    key: 'inlineBlock-' + inlineBlock.slug,\n                    label: ({ i18n }) => {\n                      const blockDisplayName = inlineBlock?.labels?.singular\n                        ? getTranslation(inlineBlock.labels.singular, i18n)\n                        : inlineBlock?.slug\n\n                      return blockDisplayName\n                    },\n                    onSelect: ({ editor }) => {\n                      editor.dispatchCommand(INSERT_INLINE_BLOCK_COMMAND, {\n                        blockName: '',\n                        blockType: inlineBlock.slug,\n                      })\n                    },\n                    order: index,\n                  } as ToolbarGroupItem\n                }),\n                key: 'inlineBlocks',\n                order: 25,\n              }\n            : null,\n        ].filter(Boolean) as ToolbarGroup[],\n      },\n    }\n  },\n)\n","'use client'\nimport React from 'react'\n\nexport const BlockIcon: React.FC = () => (\n  <svg\n    aria-hidden=\"true\"\n    className=\"icon\"\n    fill=\"none\"\n    focusable=\"false\"\n    height=\"20\"\n    viewBox=\"0 0 20 20\"\n    width=\"20\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <rect height=\"4\" rx=\"0.5\" stroke=\"currentColor\" width=\"4\" x=\"8\" y=\"5\" />\n    <rect height=\"4\" rx=\"0.5\" stroke=\"currentColor\" width=\"4\" x=\"5\" y=\"11\" />\n    <rect height=\"4\" rx=\"0.5\" stroke=\"currentColor\" width=\"4\" x=\"11\" y=\"11\" />\n  </svg>\n)\n","'use client'\nimport React from 'react'\n\nexport const InlineBlocksIcon: React.FC = () => (\n  <svg\n    aria-hidden=\"true\"\n    className=\"icon\"\n    fill=\"none\"\n    focusable=\"false\"\n    height=\"20\"\n    viewBox=\"0 0 20 20\"\n    width=\"20\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      clipRule=\"evenodd\"\n      d=\"M5.33333 6.5C5.11232 6.5 4.90036 6.5878 4.74408 6.74408C4.5878 6.90036 4.5 7.11232 4.5 7.33333V12.1667C4.5 12.3877 4.5878 12.5996 4.74408 12.7559C4.90036 12.9122 5.11232 13 5.33333 13H14.6667C14.8877 13 15.0996 12.9122 15.2559 12.7559C15.4122 12.5996 15.5 12.3877 15.5 12.1667V11.6667C15.5 11.3905 15.7239 11.1667 16 11.1667C16.2761 11.1667 16.5 11.3905 16.5 11.6667V12.1667C16.5 12.6529 16.3068 13.1192 15.963 13.463C15.6192 13.8068 15.1529 14 14.6667 14H5.33333C4.8471 14 4.38079 13.8068 4.03697 13.463C3.69315 13.1192 3.5 12.6529 3.5 12.1667V7.33333C3.5 6.8471 3.69315 6.38079 4.03697 6.03697C4.38079 5.69315 4.8471 5.5 5.33333 5.5H10.3333C10.6095 5.5 10.8333 5.72386 10.8333 6C10.8333 6.27614 10.6095 6.5 10.3333 6.5H5.33333ZM13 6.5C12.7239 6.5 12.5 6.27614 12.5 6C12.5 5.72386 12.7239 5.5 13 5.5H16C16.2761 5.5 16.5 5.72386 16.5 6V9C16.5 9.27614 16.2761 9.5 16 9.5C15.7239 9.5 15.5 9.27614 15.5 9V7.20711L13.3536 9.35355C13.1583 9.54882 12.8417 9.54882 12.6464 9.35355C12.4512 9.15829 12.4512 8.84171 12.6464 8.64645L14.7929 6.5H13ZM6.16699 8.33325C6.16699 8.05711 6.39085 7.83325 6.66699 7.83325H11.0003C11.2765 7.83325 11.5003 8.05711 11.5003 8.33325C11.5003 8.60939 11.2765 8.83325 11.0003 8.83325H6.66699C6.39085 8.83325 6.16699 8.60939 6.16699 8.33325ZM6.16699 10.9999C6.16699 10.7238 6.39085 10.4999 6.66699 10.4999H13.3337C13.6098 10.4999 13.8337 10.7238 13.8337 10.9999C13.8337 11.2761 13.6098 11.4999 13.3337 11.4999H6.66699C6.39085 11.4999 6.16699 11.2761 6.16699 10.9999Z\"\n      fill=\"currentColor\"\n      fillRule=\"evenodd\"\n    />\n  </svg>\n)\n","import React from 'react'\n\nimport { BlockIcon } from '../../../lexical/ui/icons/Block/index.js'\n\nexport function getBlockImageComponent(imageURL?: string, imageAltText?: string) {\n  if (!imageURL) {\n    return BlockIcon\n  }\n\n  return () => (\n    <img\n      alt={imageAltText ?? 'Block Image'}\n      className=\"lexical-block-custom-image\"\n      src={imageURL}\n      style={{ maxHeight: 20, maxWidth: 20 }}\n    />\n  )\n}\n","import type { ClientBlock } from 'payload'\n\nimport {\n  $parseSerializedNode,\n  type ElementNode,\n  type Klass,\n  type LexicalNode,\n  type LexicalNodeReplacement,\n  type SerializedLexicalNode,\n} from 'lexical'\n\nimport type { Transformer } from '../../../../packages/@lexical/markdown/index.js'\nimport type {\n  MultilineElementTransformer,\n  TextMatchTransformer,\n} from '../../../../packages/@lexical/markdown/MarkdownTransformers.js'\n\nimport { extractPropsFromJSXPropsString } from '../../../../utilities/jsx/extractPropsFromJSXPropsString.js'\nimport { propsToJSXString } from '../../../../utilities/jsx/jsx.js'\nimport { linesFromStartToContentAndPropsString } from '../../server/markdown/linesFromMatchToContentAndPropsString.js'\nimport { $createBlockNode, $isBlockNode, BlockNode } from '../nodes/BlocksNode.js'\nimport {\n  $createInlineBlockNode,\n  $isInlineBlockNode,\n  InlineBlockNode,\n} from '../nodes/InlineBlocksNode.js'\nimport { getLexicalToMarkdown } from './getLexicalToMarkdown.js'\nimport { getMarkdownToLexical } from './getMarkdownToLexical.js'\n\nfunction createTagRegexes(tagName: string) {\n  const escapedTagName = tagName.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')\n  return {\n    regExpEnd: new RegExp(`</(${escapedTagName})\\\\s*>|<${escapedTagName}[^>]*?/>`, 'i'),\n    regExpStart: new RegExp(`<(${escapedTagName})([^>]*?)\\\\s*(/?)>`, 'i'),\n  }\n}\nexport const getBlockMarkdownTransformers = ({\n  blocks,\n  inlineBlocks,\n}: {\n  blocks: ClientBlock[]\n  inlineBlocks: ClientBlock[]\n}): ((props: {\n  allNodes: Array<Klass<LexicalNode> | LexicalNodeReplacement>\n  allTransformers: Transformer[]\n}) => MultilineElementTransformer | TextMatchTransformer)[] => {\n  if (!blocks?.length && !inlineBlocks?.length) {\n    return []\n  }\n  let transformers: ((props: {\n    allNodes: Array<Klass<LexicalNode> | LexicalNodeReplacement>\n    allTransformers: Transformer[]\n  }) => MultilineElementTransformer | TextMatchTransformer)[] = []\n\n  if (blocks?.length) {\n    for (const block of blocks) {\n      const transformer = getMarkdownTransformerForBlock(block, false)\n\n      if (transformer) {\n        transformers = transformers.concat(transformer)\n      }\n    }\n  }\n\n  if (inlineBlocks?.length) {\n    for (const block of inlineBlocks) {\n      const transformer = getMarkdownTransformerForBlock(block, true)\n\n      if (transformer) {\n        transformers = transformers.concat(transformer)\n      }\n    }\n  }\n\n  return transformers\n}\n\nfunction getMarkdownTransformerForBlock(\n  block: ClientBlock,\n  isInlineBlock: boolean,\n): Array<\n  (props: {\n    allNodes: Array<Klass<LexicalNode> | LexicalNodeReplacement>\n    allTransformers: Transformer[]\n  }) => MultilineElementTransformer | TextMatchTransformer\n> | null {\n  if (!block.jsx) {\n    return null\n  }\n  const regex = createTagRegexes(block.slug)\n  const toReturn: Array<\n    (props: {\n      allNodes: Array<Klass<LexicalNode> | LexicalNodeReplacement>\n      allTransformers: Transformer[]\n    }) => MultilineElementTransformer | TextMatchTransformer\n  > = []\n\n  if (isInlineBlock) {\n    toReturn.push(({ allNodes, allTransformers }) => ({\n      type: 'text-match',\n      dependencies: [InlineBlockNode],\n      export: (node) => {\n        if (!$isInlineBlockNode(node)) {\n          return null\n        }\n\n        if (node.getFields()?.blockType?.toLowerCase() !== block.slug.toLowerCase()) {\n          return null\n        }\n\n        const nodeFields = node.getFields()\n        const lexicalToMarkdown = getLexicalToMarkdown(allNodes, allTransformers)\n\n        const exportResult = block.jsx!.export({\n          fields: nodeFields,\n          lexicalToMarkdown,\n        })\n        if (exportResult === false) {\n          return null\n        }\n        if (typeof exportResult === 'string') {\n          return exportResult\n        }\n\n        const hasProps = exportResult.props && Object.keys(exportResult.props)?.length > 0\n        const props = exportResult.props ?? {}\n\n        if (exportResult?.children?.length) {\n          return `<${nodeFields.blockType}${hasProps ? ' ' + propsToJSXString({ props }) : ''}>${exportResult.children}</${nodeFields.blockType}>`\n        }\n\n        return `<${nodeFields.blockType}${hasProps ? ' ' + propsToJSXString({ props }) : ''}/>`\n      },\n      getEndIndex: (node, match) => {\n        const { endlineLastCharIndex } = linesFromStartToContentAndPropsString({\n          isEndOptional: false,\n          lines: [node.getTextContent()],\n          regexpEndRegex: regex.regExpEnd,\n          startLineIndex: 0,\n          startMatch: match,\n          trimChildren: false,\n        })\n\n        return endlineLastCharIndex\n      },\n      importRegExp: block.jsx?.customStartRegex ?? regex.regExpStart,\n      regExp: /___ignoreignoreignore___/g,\n      replace(node, match) {\n        const { content, propsString } = linesFromStartToContentAndPropsString({\n          isEndOptional: false,\n          lines: [node.getTextContent()],\n          regexpEndRegex: regex.regExpEnd,\n          startLineIndex: 0,\n          startMatch: {\n            ...match,\n            index: 0,\n          },\n          trimChildren: false,\n        })\n\n        if (!block?.jsx?.import) {\n          // No multiline transformer handled this line successfully\n          return\n        }\n\n        const markdownToLexical = getMarkdownToLexical(allNodes, allTransformers)\n\n        const blockFields = block.jsx.import({\n          children: content,\n          closeMatch: null,\n          htmlToLexical: null, // TODO\n          markdownToLexical,\n          openMatch: match,\n          props: propsString\n            ? extractPropsFromJSXPropsString({\n                propsString,\n              })\n            : {},\n        })\n        if (blockFields === false) {\n          return\n        }\n\n        const inlineBlockNode = $createInlineBlockNode({\n          blockType: block.slug,\n          ...(blockFields as any),\n        })\n\n        node.replace(inlineBlockNode)\n      },\n    }))\n\n    return toReturn\n  }\n\n  toReturn.push(({ allNodes, allTransformers }) => ({\n    dependencies: [BlockNode],\n    export: (node) => {\n      if (!$isBlockNode(node)) {\n        return null\n      }\n\n      if (node.getFields()?.blockType?.toLowerCase() !== block.slug.toLowerCase()) {\n        return null\n      }\n\n      const nodeFields = node.getFields()\n      const lexicalToMarkdown = getLexicalToMarkdown(allNodes, allTransformers)\n\n      const exportResult = block.jsx!.export({\n        fields: nodeFields,\n        lexicalToMarkdown,\n      })\n      if (exportResult === false) {\n        return null\n      }\n      if (typeof exportResult === 'string') {\n        return exportResult\n      }\n\n      const hasProps = exportResult.props && Object.keys(exportResult.props)?.length > 0\n      const props = exportResult.props ?? {}\n\n      if (exportResult?.children?.length) {\n        const children = exportResult.children\n        let sanitizedChildren = ''\n\n        // Ensure it has a leftpad of at least 2 spaces. The data is saved without those spaces, so we can just blindly add it to every child\n        if (children.includes('\\n')) {\n          for (const child of children.split('\\n')) {\n            let sanitizedChild = ''\n            if (!block?.jsx?.doNotTrimChildren && child !== '') {\n              sanitizedChild = '  '\n            }\n            sanitizedChild += child + '\\n'\n\n            sanitizedChildren += sanitizedChild\n          }\n        } else {\n          sanitizedChildren = (block?.jsx?.doNotTrimChildren ? '' : '  ') + children + '\\n'\n        }\n\n        return `<${nodeFields.blockType}${hasProps ? ' ' + propsToJSXString({ props }) : ''}>\\n${sanitizedChildren}</${nodeFields.blockType}>`\n      }\n\n      return `<${nodeFields.blockType}${hasProps ? ' ' + propsToJSXString({ props }) : ''}/>`\n    },\n    handleImportAfterStartMatch: block.jsx?.customEndRegex\n      ? undefined\n      : ({ lines, rootNode, startLineIndex, startMatch, transformer }) => {\n          const regexpEndRegex: RegExp | undefined =\n            typeof transformer.regExpEnd === 'object' && 'regExp' in transformer.regExpEnd\n              ? transformer.regExpEnd.regExp\n              : transformer.regExpEnd\n\n          const isEndOptional =\n            transformer.regExpEnd &&\n            typeof transformer.regExpEnd === 'object' &&\n            'optional' in transformer.regExpEnd\n              ? transformer.regExpEnd.optional\n              : !transformer.regExpEnd\n\n          const {\n            afterEndLine,\n            beforeStartLine,\n            content: unsanitizedContent,\n            endLineIndex,\n            propsString,\n          } = linesFromStartToContentAndPropsString({\n            isEndOptional,\n            lines,\n            regexpEndRegex,\n            startLineIndex,\n            startMatch,\n            trimChildren: false,\n          })\n\n          let content = ''\n\n          if (block?.jsx?.doNotTrimChildren) {\n            content = unsanitizedContent.endsWith('\\n')\n              ? unsanitizedContent.slice(0, -1)\n              : unsanitizedContent\n          } else {\n            // Ensure it has a leftpad of at least 2 spaces. The data is saved without those spaces, so we can just blindly add it to every child\n            if (unsanitizedContent.includes('\\n')) {\n              const split = unsanitizedContent.split('\\n')\n              let index = 0\n              for (const child of split) {\n                index++\n\n                if (child.startsWith('  ')) {\n                  content += child.slice(2)\n                } else {\n                  // If one child is misaligned, skip aligning completely, unless it's just empty\n                  if (child === '') {\n                    content += child\n                  } else {\n                    content = unsanitizedContent.endsWith('\\n')\n                      ? unsanitizedContent.slice(0, -1)\n                      : unsanitizedContent\n                    break\n                  }\n                }\n\n                content += index === split.length ? '' : '\\n'\n              }\n            } else {\n              content =\n                (!unsanitizedContent.startsWith('  ')\n                  ? unsanitizedContent\n                  : unsanitizedContent.slice(2)) + '\\n'\n            }\n          }\n\n          if (!block?.jsx?.import) {\n            // No multiline transformer handled this line successfully\n            return [false, startLineIndex]\n          }\n\n          const markdownToLexical = getMarkdownToLexical(allNodes, allTransformers)\n\n          const blockFields = block.jsx.import({\n            children: content,\n            closeMatch: null,\n            htmlToLexical: null, // TODO\n            markdownToLexical,\n            openMatch: startMatch,\n            props: propsString\n              ? extractPropsFromJSXPropsString({\n                  propsString,\n                })\n              : {},\n          })\n          if (blockFields === false) {\n            return [false, startLineIndex]\n          }\n\n          const node = $createBlockNode({\n            blockType: block.slug,\n            ...blockFields,\n          } as any)\n\n          if (node) {\n            // Now handle beforeStartLine and afterEndLine. If those are not empty, we need to add them as text nodes before and after the block node.\n            // However, those themselves can contain other markdown matches, so we need to parse them as well.\n            // Example where this is needed: \"Hello <InlineCode>inline code</InlineCode> test.\"\n            let prevNodes: null | SerializedLexicalNode[] = null\n            let nextNodes: null | SerializedLexicalNode[] = null\n            // TODO: Might not need this prevNodes and nextNodes handling if inline nodes are handled by textmatch transformers\n\n            if (beforeStartLine?.length) {\n              prevNodes = markdownToLexical({ markdown: beforeStartLine })?.root?.children ?? []\n\n              const firstPrevNode = prevNodes?.[0]\n              if (firstPrevNode) {\n                rootNode.append($parseSerializedNode(firstPrevNode))\n              }\n            }\n\n            rootNode.append(node)\n\n            if (afterEndLine?.length) {\n              nextNodes = markdownToLexical({ markdown: afterEndLine })?.root?.children\n              const lastChild = rootNode.getChildren()[rootNode.getChildren().length - 1]\n\n              const children = ($parseSerializedNode(nextNodes[0]!) as ElementNode)?.getChildren()\n              if (children?.length) {\n                for (const child of children) {\n                  ;(lastChild as ElementNode).append(child)\n                }\n              }\n            }\n          }\n\n          return [true, endLineIndex]\n        },\n    regExpEnd: block.jsx?.customEndRegex ?? regex.regExpEnd,\n    regExpStart: block.jsx?.customStartRegex ?? regex.regExpStart,\n    // This replace is ONLY run for ``` code blocks (so any blocks with custom start and end regexes). For others, we use the special JSX handling above:\n    type: 'multiline-element',\n    replace: (rootNode, children, openMatch, closeMatch, linesInBetween) => {\n      if (block?.jsx?.import) {\n        if (!linesInBetween) {\n          // convert children to linesInBetween\n          let line = ''\n          if (children) {\n            for (const child of children) {\n              line += child.getTextContent()\n            }\n          }\n\n          linesInBetween = [line]\n        }\n\n        let childrenString = ''\n        if (block?.jsx?.doNotTrimChildren) {\n          childrenString = linesInBetween.join('\\n')\n        } else {\n          childrenString = linesInBetween.join('\\n').trim()\n        }\n\n        const propsString = openMatch[1]?.trim()\n\n        const markdownToLexical = getMarkdownToLexical(allNodes, allTransformers)\n\n        const blockFields = block.jsx.import({\n          children: childrenString,\n          closeMatch: closeMatch as RegExpMatchArray,\n          htmlToLexical: null, // TODO\n          markdownToLexical,\n          openMatch: openMatch as RegExpMatchArray,\n          props: propsString\n            ? extractPropsFromJSXPropsString({\n                propsString,\n              })\n            : {},\n        })\n        if (blockFields === false) {\n          return false\n        }\n\n        const node = $createBlockNode({\n          blockType: block.slug,\n          ...blockFields,\n        } as any)\n\n        if (node) {\n          rootNode.append(node)\n        }\n\n        return\n      }\n      return false // Run next transformer\n    },\n  }))\n\n  return toReturn\n}\n","import { JSOX } from 'jsox'\n\n/**\n * Turns a JSX props string into an object.\n *\n * @example\n *\n * Input: type=\"info\" hello={{heyyy: 'test', someNumber: 2}}\n * Output: { type: 'info', hello: { heyyy: 'test', someNumber: 2 } }\n */\nexport function extractPropsFromJSXPropsString({\n  propsString,\n}: {\n  propsString: string\n}): Record<string, any> {\n  const props: Record<string, any> = {}\n  let key = ''\n  let collectingKey = true\n\n  for (let i = 0; i < propsString.length; i++) {\n    const char = propsString[i]\n\n    if (collectingKey) {\n      if (char === '=' || char === ' ') {\n        if (key) {\n          if (char === ' ') {\n            props[key] = true\n            key = ''\n          } else {\n            collectingKey = false\n          }\n        }\n      } else {\n        key += char\n      }\n    } else {\n      const result = handleValue(propsString, i)\n      props[key] = result.value\n      i = result.newIndex\n      key = ''\n      collectingKey = true\n    }\n  }\n\n  if (key) {\n    props[key] = true\n  }\n\n  return props\n}\n\nfunction handleValue(propsString: string, startIndex: number): { newIndex: number; value: any } {\n  const char = propsString[startIndex]\n\n  if (char === '\"') {\n    return handleQuotedString(propsString, startIndex)\n  } else if (char === \"'\") {\n    return handleQuotedString(propsString, startIndex, true)\n  } else if (char === '{') {\n    return handleObject(propsString, startIndex)\n  } else if (char === '[') {\n    return handleArray(propsString, startIndex)\n  } else {\n    return handleUnquotedString(propsString, startIndex)\n  }\n}\n\nfunction handleArray(propsString: string, startIndex: number): { newIndex: number; value: any } {\n  let bracketCount = 1\n  let value = ''\n  let i = startIndex + 1\n\n  while (i < propsString.length && bracketCount > 0) {\n    if (propsString[i] === '[') {\n      bracketCount++\n    } else if (propsString[i] === ']') {\n      bracketCount--\n    }\n    if (bracketCount > 0) {\n      value += propsString[i]\n    }\n    i++\n  }\n\n  return { newIndex: i, value: JSOX.parse(`[${value}]`) }\n}\n\nfunction handleQuotedString(\n  propsString: string,\n  startIndex: number,\n  isSingleQuoted = false,\n): { newIndex: number; value: string } {\n  let value = ''\n  let i = startIndex + 1\n  while (\n    i < propsString.length &&\n    (propsString[i] !== (isSingleQuoted ? \"'\" : '\"') || propsString[i - 1] === '\\\\')\n  ) {\n    value += propsString[i]\n    i++\n  }\n  return { newIndex: i, value }\n}\n\nfunction handleObject(propsString: string, startIndex: number): { newIndex: number; value: any } {\n  let bracketCount = 1\n  let value = ''\n  let i = startIndex + 1\n\n  while (i < propsString.length && bracketCount > 0) {\n    if (propsString[i] === '{') {\n      bracketCount++\n    } else if (propsString[i] === '}') {\n      bracketCount--\n    }\n    if (bracketCount > 0) {\n      value += propsString[i]\n    }\n    i++\n  }\n\n  return { newIndex: i, value: parseObject(value) }\n}\n\nfunction parseObject(objString: string): Record<string, any> {\n  if (objString[0] !== '{') {\n    return JSOX.parse(objString)\n  }\n\n  const result = JSOX.parse(objString.replace(/(\\w+):/g, '\"$1\":'))\n\n  return result\n}\n\nfunction handleUnquotedString(\n  propsString: string,\n  startIndex: number,\n): { newIndex: number; value: string } {\n  let value = ''\n  let i = startIndex\n  while (i < propsString.length && propsString[i] !== ' ') {\n    value += propsString[i]\n    i++\n  }\n  return { newIndex: i - 1, value }\n}\n","/**\n * Converts an object of props to a JSX props string.\n *\n * This function is the inverse of `extractPropsFromJSXPropsString`.\n */\nexport function propsToJSXString({ props }: { props: Record<string, any> }): string {\n  const propsArray: string[] = []\n\n  for (const [key, value] of Object.entries(props)) {\n    if (typeof value === 'string') {\n      // Handle simple string props\n      propsArray.push(`${key}=\"${escapeQuotes(value)}\"`)\n    } else if (typeof value === 'number') {\n      // Handle number and boolean props\n      propsArray.push(`${key}={${value}}`)\n    } else if (typeof value === 'boolean') {\n      if (value) {\n        propsArray.push(`${key}`)\n      }\n    } else if (value !== null && typeof value === 'object') {\n      if (Array.isArray(value)) {\n        // Handle array props\n        propsArray.push(`${key}={[${value.map((v) => JSON.stringify(v, replacer)).join(', ')}]}`)\n      } else {\n        // Handle complex object props\n        propsArray.push(`${key}={${JSON.stringify(value, replacer)}}`)\n      }\n    }\n  }\n\n  return propsArray.join(' ')\n}\n\n// Helper function to escape quotes in string values\nfunction escapeQuotes(str: string): string {\n  return str.replace(/\"/g, '&quot;')\n}\n\n// Custom replacer function for JSON.stringify to handle single quotes\nfunction replacer(key: string, value: any): any {\n  if (typeof value === 'string') {\n    return value.replace(/'/g, \"\\\\'\")\n  }\n  return value\n}\n\n/**\n * Converts a frontmatter string to an object.\n */\nexport function frontmatterToObject(frontmatter: string): Record<string, any> {\n  const lines = frontmatter.trim().split('\\n')\n  const result = {}\n  let inFrontmatter = false\n\n  for (const line of lines) {\n    if (line.trim() === '---') {\n      inFrontmatter = !inFrontmatter\n      continue\n    }\n\n    if (inFrontmatter) {\n      const [key, ...valueParts] = line.split(':')\n      const value = valueParts.join(':').trim()\n\n      // @ts-expect-error - vestiges of when tsconfig was not strict. Feel free to improve\n      result[key.trim()] = value\n    }\n  }\n\n  return result\n}\n\n/**\n * Converts an object to a frontmatter string.\n */\nexport function objectToFrontmatter(obj: Record<string, any>): null | string {\n  if (!Object.entries(obj)?.length) {\n    return null\n  }\n  let frontmatter = '---\\n'\n\n  for (const [key, value] of Object.entries(obj)) {\n    if (Array.isArray(value)) {\n      frontmatter += `${key}: ${value.join(', ')}\\n`\n    } else {\n      frontmatter += `${key}: ${value}\\n`\n    }\n  }\n\n  frontmatter += '---\\n'\n  return frontmatter\n}\n\n/**\n * Takes an MDX content string and extracts the frontmatter and content.\n *\n * The resulting object contains the mdx content without the frontmatter and the frontmatter itself.\n */\nexport function extractFrontmatter(mdxContent: string) {\n  // eslint-disable-next-line regexp/no-super-linear-backtracking\n  const frontmatterRegex = /^---\\s*\\n[\\s\\S]*?\\n---\\s*\\n/\n  const match = mdxContent.match(frontmatterRegex)\n\n  if (match) {\n    const frontmatter = match[0]\n    const contentWithoutFrontmatter = mdxContent.slice(frontmatter.length).trim()\n    return {\n      content: contentWithoutFrontmatter,\n      frontmatter: frontmatter.trim(),\n    }\n  } else {\n    // If no frontmatter is found, return the original content\n    return {\n      content: mdxContent.trim(),\n      frontmatter: '',\n    }\n  }\n}\n","export function linesFromStartToContentAndPropsString({\n  isEndOptional,\n  lines,\n  regexpEndRegex,\n  startLineIndex,\n  startMatch,\n  trimChildren,\n}: {\n  isEndOptional?: boolean\n  lines: string[]\n  regexpEndRegex?: RegExp\n  startLineIndex: number\n  startMatch: RegExpMatchArray\n  trimChildren?: boolean\n}): {\n  /**\n   * The matched string after the end match, in the same line as the end match. Useful for inline matches.\n   */\n  afterEndLine: string\n  /**\n   * The matched string before the start match, in the same line as the start match. Useful for inline matches.\n   */\n  beforeStartLine: string\n  content: string\n  endLineIndex: number\n  endlineLastCharIndex: number\n  propsString: string\n} {\n  let propsString = ''\n  let content = ''\n  const linesCopy = lines.slice(startLineIndex)\n\n  let isWithinContent = false // If false => is within prop\n  let contentSubTagStartAmount = 0\n\n  let bracketCount = 0\n  let quoteChar: null | string = null\n  let isSelfClosing = false\n  let isWithinCodeBlockAmount = 0\n\n  const beforeStartLine = linesCopy[0]!.slice(0, startMatch.index)\n  let endlineLastCharIndex = 0\n\n  let endLineIndex = startLineIndex\n\n  mainLoop: for (const [lineIndex, lineCopy] of linesCopy.entries()) {\n    const line = trimChildren ? lineCopy.trim() : lineCopy\n    let amountOfBeginningSpacesRemoved = 0\n    if (trimChildren) {\n      for (let i = 0; i < lineCopy.length; i++) {\n        if (lineCopy[i] === ' ') {\n          amountOfBeginningSpacesRemoved++\n        } else {\n          break\n        }\n      }\n    }\n\n    let charIndex = 0\n\n    if (lineIndex === 0) {\n      charIndex = (startMatch.index ?? 0) + startMatch[0].length - amountOfBeginningSpacesRemoved // We need to also loop over the \">\" in something like \"<InlineCode>\" in order to later set isWithinContent to true\n    }\n\n    while (charIndex < line.length) {\n      const char = line[charIndex]\n      const nextChar = line[charIndex + 1]\n\n      if (!isWithinContent) {\n        if (char === '{' && !quoteChar) {\n          bracketCount++\n        } else if (char === '}' && !quoteChar) {\n          bracketCount--\n        } else if ((char === '\"' || char === \"'\") && !quoteChar) {\n          quoteChar = char\n        } else if (char === quoteChar) {\n          quoteChar = null\n        }\n\n        if (char === '/' && nextChar === '>' && bracketCount === 0 && !quoteChar) {\n          isSelfClosing = true\n          endLineIndex = lineIndex\n          endlineLastCharIndex = charIndex + 2\n\n          break mainLoop\n        } else if (char === '>' && bracketCount === 0 && !quoteChar) {\n          isWithinContent = true\n          charIndex++\n          continue\n        }\n\n        propsString += char\n      } else {\n        if (char === '`') {\n          isWithinCodeBlockAmount++\n        }\n\n        if (isWithinCodeBlockAmount % 2 === 0) {\n          if (char === '<' && nextChar === '/') {\n            contentSubTagStartAmount--\n\n            if (contentSubTagStartAmount < 0) {\n              if (content[content.length - 1] === '\\n') {\n                content = content.slice(0, -1) // Remove the last newline\n              }\n              endLineIndex = lineIndex\n              // Calculate endlineLastCharIndex by finding \">\" in line\n              for (let i = charIndex; i < line.length; i++) {\n                if (line[i] === '>') {\n                  endlineLastCharIndex = i + 1\n\n                  break\n                }\n              }\n              break mainLoop\n            }\n          } else if (char === '/' && nextChar === '>') {\n            contentSubTagStartAmount--\n\n            if (contentSubTagStartAmount < 0) {\n              if (content[content.length - 1] === '\\n') {\n                content = content.slice(0, -1) // Remove the last newline\n              }\n              endLineIndex = lineIndex\n              endlineLastCharIndex = charIndex + 2\n              break mainLoop\n            }\n          } else if (char === '<' && nextChar !== '/') {\n            contentSubTagStartAmount++\n          }\n        }\n\n        content += char\n      }\n\n      charIndex++\n    }\n\n    if (isWithinContent) {\n      if (content?.length > 0 && lineIndex > 0) {\n        content += '\\n'\n      }\n    } else {\n      propsString += '\\n'\n    }\n\n    if (regexpEndRegex && contentSubTagStartAmount < 0) {\n      // If 0 and in same line where it got lowered to 0 then this is not the match we are looking for\n      const match = line.match(regexpEndRegex)\n      if (match?.index !== undefined) {\n        endLineIndex = lineIndex\n        endlineLastCharIndex = match.index + match[0].length - 1\n        break\n      }\n    }\n\n    if (lineIndex === linesCopy.length - 1 && !isEndOptional && !isSelfClosing) {\n      throw new Error(\n        'End match not found for lines ' +\n          lines.join('\\n') +\n          '\\n\\n. Start match: ' +\n          JSON.stringify(startMatch),\n      )\n    }\n  }\n\n  const afterEndLine = linesCopy[endLineIndex]!.trim().slice(endlineLastCharIndex)\n\n  return {\n    afterEndLine,\n    beforeStartLine,\n    content,\n    endLineIndex: startLineIndex + endLineIndex,\n    endlineLastCharIndex,\n    propsString,\n  }\n}\n","'use client'\nimport ObjectID from 'bson-objectid'\nimport {\n  $applyNodeReplacement,\n  type EditorConfig,\n  type LexicalEditor,\n  type LexicalNode,\n} from 'lexical'\nimport React, { type JSX } from 'react'\n\nimport type { BlockFieldsOptionalID, SerializedBlockNode } from '../../server/nodes/BlocksNode.js'\n\nimport { ServerBlockNode } from '../../server/nodes/BlocksNode.js'\nimport { BlockComponent } from '../component/index.js'\n\nexport class BlockNode extends ServerBlockNode {\n  static override clone(node: ServerBlockNode): ServerBlockNode {\n    return super.clone(node)\n  }\n\n  static override getType(): string {\n    return super.getType()\n  }\n\n  static override importJSON(serializedNode: SerializedBlockNode): BlockNode {\n    if (serializedNode.version === 1) {\n      // Convert (version 1 had the fields wrapped in another, unnecessary data property)\n      serializedNode = {\n        ...serializedNode,\n        fields: {\n          ...(serializedNode as any).fields.data,\n        },\n        version: 2,\n      }\n    }\n    const node = $createBlockNode(serializedNode.fields)\n    node.setFormat(serializedNode.format)\n    return node\n  }\n\n  override decorate(_editor: LexicalEditor, config: EditorConfig): JSX.Element {\n    return (\n      <BlockComponent\n        cacheBuster={this.getCacheBuster()}\n        className={config.theme.block ?? 'LexicalEditorTheme__block'}\n        formData={this.getFields()}\n        nodeKey={this.getKey()}\n      />\n    )\n  }\n\n  override exportJSON(): SerializedBlockNode {\n    return super.exportJSON()\n  }\n}\n\nexport function $createBlockNode(fields: BlockFieldsOptionalID): BlockNode {\n  return $applyNodeReplacement(\n    new BlockNode({\n      fields: {\n        ...fields,\n        id: fields?.id || new ObjectID.default().toHexString(),\n      },\n    }),\n  )\n}\n\nexport function $isBlockNode(node: BlockNode | LexicalNode | null | undefined): node is BlockNode {\n  return node instanceof BlockNode\n}\n","import type { SerializedDecoratorBlockNode } from '@lexical/react/LexicalDecoratorBlockNode.js'\nimport type { JsonObject } from 'payload'\nimport type { JSX } from 'react'\n\nimport { DecoratorBlockNode } from '@lexical/react/LexicalDecoratorBlockNode.js'\nimport { addClassNamesToElement } from '@lexical/utils'\nimport ObjectID from 'bson-objectid'\nimport {\n  $applyNodeReplacement,\n  type DOMConversionMap,\n  type DOMExportOutput,\n  type EditorConfig,\n  type ElementFormatType,\n  type LexicalEditor,\n  type LexicalNode,\n  type NodeKey,\n} from 'lexical'\n\nimport type { StronglyTypedLeafNode } from '../../../../nodeTypes.js'\n\ntype BaseBlockFields<TBlockFields extends JsonObject = JsonObject> = {\n  /** Block form data */\n  blockName: string\n  blockType: string\n} & TBlockFields\n\nexport type BlockFields<TBlockFields extends JsonObject = JsonObject> = {\n  id: string\n} & BaseBlockFields<TBlockFields>\n\nexport type BlockFieldsOptionalID<TBlockFields extends JsonObject = JsonObject> = {\n  id?: string\n} & BaseBlockFields<TBlockFields>\n\nexport type SerializedBlockNode<TBlockFields extends JsonObject = JsonObject> = {\n  fields: BlockFields<TBlockFields>\n} & StronglyTypedLeafNode<SerializedDecoratorBlockNode, 'block'>\n\nexport class ServerBlockNode extends DecoratorBlockNode {\n  __cacheBuster: number\n  __fields: BlockFields\n\n  constructor({\n    cacheBuster,\n    fields,\n    format,\n    key,\n  }: {\n    cacheBuster?: number\n    fields: BlockFields\n    format?: ElementFormatType\n    key?: NodeKey\n  }) {\n    super(format, key)\n    this.__fields = fields\n    this.__cacheBuster = cacheBuster || 0\n  }\n\n  static override clone(node: ServerBlockNode): ServerBlockNode {\n    return new this({\n      cacheBuster: node.__cacheBuster,\n      fields: node.__fields,\n      format: node.__format,\n      key: node.__key,\n    })\n  }\n\n  static override getType(): string {\n    return 'block'\n  }\n\n  static override importDOM(): DOMConversionMap<HTMLDivElement> | null {\n    return {}\n  }\n\n  static override importJSON(serializedNode: SerializedBlockNode): ServerBlockNode {\n    if (serializedNode.version === 1) {\n      // Convert (version 1 had the fields wrapped in another, unnecessary data property)\n      serializedNode = {\n        ...serializedNode,\n        fields: {\n          ...(serializedNode as any).fields.data,\n        },\n        version: 2,\n      }\n    }\n    const node = $createServerBlockNode(serializedNode.fields)\n    node.setFormat(serializedNode.format)\n    return node\n  }\n\n  static isInline(): false {\n    return false\n  }\n\n  override createDOM(config?: EditorConfig): HTMLElement {\n    const element = document.createElement('div')\n    addClassNamesToElement(element, config?.theme?.block)\n    return element\n  }\n\n  override decorate(editor: LexicalEditor, config: EditorConfig): JSX.Element {\n    return null as unknown as JSX.Element\n  }\n\n  override exportDOM(): DOMExportOutput {\n    const element = document.createElement('div')\n\n    const text = document.createTextNode(this.getTextContent())\n    element.append(text)\n    return { element }\n  }\n\n  override exportJSON(): SerializedBlockNode {\n    return {\n      ...super.exportJSON(),\n      type: 'block',\n      fields: this.getFields(),\n      version: 2,\n    }\n  }\n\n  getCacheBuster(): number {\n    return this.getLatest().__cacheBuster\n  }\n\n  getFields(): BlockFields {\n    return this.getLatest().__fields\n  }\n\n  override getTextContent(): string {\n    return `Block Field`\n  }\n\n  setFields(fields: BlockFields, preventFormStateUpdate?: boolean): void {\n    const writable = this.getWritable()\n    writable.__fields = fields\n    if (!preventFormStateUpdate) {\n      writable.__cacheBuster++\n    }\n  }\n}\n\nexport function $createServerBlockNode(fields: BlockFieldsOptionalID): ServerBlockNode {\n  return $applyNodeReplacement(\n    new ServerBlockNode({\n      fields: {\n        ...fields,\n        id: fields?.id || new ObjectID.default().toHexString(),\n      },\n    }),\n  )\n}\n\nexport function $isServerBlockNode(\n  node: LexicalNode | null | ServerBlockNode | undefined,\n): node is ServerBlockNode {\n  return node instanceof ServerBlockNode\n}\n","'use client'\n\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext'\nimport { useLexicalEditable } from '@lexical/react/useLexicalEditable'\nimport { getTranslation } from '@payloadcms/translations'\nimport {\n  Button,\n  Collapsible,\n  Drawer,\n  EditDepthProvider,\n  ErrorPill,\n  Form,\n  formatDrawerSlug,\n  FormSubmit,\n  Pill,\n  RenderFields,\n  SectionTitle,\n  useConfig,\n  useDocumentForm,\n  useDocumentInfo,\n  useEditDepth,\n  useFormSubmitted,\n  useServerFunctions,\n  useTranslation,\n} from '@payloadcms/ui'\nimport { abortAndIgnore } from '@payloadcms/ui/shared'\nimport { $getNodeByKey } from 'lexical'\nimport {\n  type BlocksFieldClient,\n  type ClientBlock,\n  type CollapsedPreferences,\n  type FormState,\n} from 'payload'\nimport { deepCopyObjectSimpleWithoutReactComponents, reduceFieldsToValues } from 'payload/shared'\nimport React, { useCallback, useEffect, useMemo, useRef } from 'react'\nimport { v4 as uuid } from 'uuid'\n\nimport type { BlockFields } from '../../server/nodes/BlocksNode.js'\n\nimport { useEditorConfigContext } from '../../../../lexical/config/client/EditorConfigProvider.js'\nimport './index.scss'\nimport { useLexicalDrawer } from '../../../../utilities/fieldsDrawer/useLexicalDrawer.js'\nimport { $isBlockNode } from '../nodes/BlocksNode.js'\nimport { type BlockCollapsibleWithErrorProps, BlockContent } from './BlockContent.js'\nimport { removeEmptyArrayValues } from './removeEmptyArrayValues.js'\n\ntype Props = {\n  /**\n   * Can be modified by the node in order to trigger the re-fetch of the initial state based on the\n   * formData. This is useful when node.setFields() is explicitly called from outside of the form - in\n   * this case, the new field state is likely not reflected in the form state, so we need to re-fetch\n   */\n  readonly cacheBuster: number\n  readonly className: string\n  readonly formData: BlockFields\n  readonly nodeKey: string\n}\n\nexport const BlockComponent: React.FC<Props> = (props) => {\n  const { cacheBuster, className: baseClass, formData, nodeKey } = props\n  const submitted = useFormSubmitted()\n  const { id, collectionSlug, globalSlug } = useDocumentInfo()\n  const {\n    fieldProps: {\n      featureClientSchemaMap,\n      field: parentLexicalRichTextField,\n      initialLexicalFormState,\n      schemaPath,\n    },\n    uuid: uuidFromContext,\n  } = useEditorConfigContext()\n\n  const { fields: parentDocumentFields } = useDocumentForm()\n  const onChangeAbortControllerRef = useRef(new AbortController())\n  const editDepth = useEditDepth()\n  const [errorCount, setErrorCount] = React.useState(0)\n\n  const { config } = useConfig()\n\n  const drawerSlug = formatDrawerSlug({\n    slug: `lexical-blocks-create-${uuidFromContext}-${formData.id}`,\n    depth: editDepth,\n  })\n  const { toggleDrawer } = useLexicalDrawer(drawerSlug)\n\n  // Used for saving collapsed to preferences (and gettin' it from there again)\n  // Remember, these preferences are scoped to the whole document, not just this form. This\n  // is important to consider for the data path used in setDocFieldPreferences\n  const { getDocPreferences, setDocFieldPreferences } = useDocumentInfo()\n  const [editor] = useLexicalComposerContext()\n  const isEditable = useLexicalEditable()\n\n  const blockType = formData.blockType\n\n  const { getFormState } = useServerFunctions()\n  const schemaFieldsPath = `${schemaPath}.lexical_internal_feature.blocks.lexical_blocks.${blockType}.fields`\n\n  const [initialState, setInitialState] = React.useState<false | FormState | undefined>(() => {\n    // Initial form state that was calculated server-side. May have stale values\n    const cachedFormState = initialLexicalFormState?.[formData.id]?.formState\n    if (!cachedFormState) {\n      return false\n    }\n\n    // Merge current formData values into the cached form state\n    // This ensures that when the component remounts (e.g., due to view changes), we don't lose user edits\n    return Object.fromEntries(\n      Object.entries(cachedFormState).map(([fieldName, fieldState]) => [\n        fieldName,\n        fieldName in formData\n          ? {\n              ...fieldState,\n              initialValue: formData[fieldName],\n              value: formData[fieldName],\n            }\n          : fieldState,\n      ]),\n    )\n  })\n\n  const hasMounted = useRef(false)\n  const prevCacheBuster = useRef(cacheBuster)\n  useEffect(() => {\n    if (hasMounted.current) {\n      if (prevCacheBuster.current !== cacheBuster) {\n        setInitialState(false)\n      }\n      prevCacheBuster.current = cacheBuster\n    } else {\n      hasMounted.current = true\n    }\n  }, [cacheBuster])\n\n  const [CustomLabel, setCustomLabel] = React.useState<React.ReactNode | undefined>(\n    // @ts-expect-error - vestiges of when tsconfig was not strict. Feel free to improve\n    initialState?.['_components']?.customComponents?.BlockLabel ?? undefined,\n  )\n\n  const [CustomBlock, setCustomBlock] = React.useState<React.ReactNode | undefined>(\n    // @ts-expect-error - vestiges of when tsconfig was not strict. Feel free to improve\n    initialState?.['_components']?.customComponents?.Block ?? undefined,\n  )\n\n  // Initial state for newly created blocks\n  useEffect(() => {\n    const abortController = new AbortController()\n\n    const awaitInitialState = async () => {\n      /*\n       * This will only run if a new block is created. For all existing blocks that are loaded when the document is loaded, or when the form is saved,\n       * this is not run, as the lexical field RSC will fetch the state server-side and pass it to the client. That way, we avoid unnecessary client-side\n       * requests. Though for newly created blocks, we need to fetch the state client-side, as the server doesn't know about the block yet.\n       */\n      const { state } = await getFormState({\n        id,\n        collectionSlug,\n        data: formData,\n        docPermissions: { fields: true },\n        docPreferences: await getDocPreferences(),\n        documentFormState: deepCopyObjectSimpleWithoutReactComponents(parentDocumentFields),\n        globalSlug,\n        initialBlockData: formData,\n        operation: 'update',\n        readOnly: !isEditable,\n        renderAllFields: true,\n        schemaPath: schemaFieldsPath,\n        signal: abortController.signal,\n      })\n\n      if (state) {\n        state.blockName = {\n          initialValue: formData.blockName,\n          passesCondition: true,\n          valid: true,\n          value: formData.blockName,\n        }\n\n        const newFormStateData: BlockFields = reduceFieldsToValues(\n          deepCopyObjectSimpleWithoutReactComponents(state),\n          true,\n        ) as BlockFields\n\n        // Things like default values may come back from the server => update the node with the new data\n        editor.update(() => {\n          const node = $getNodeByKey(nodeKey)\n          if (node && $isBlockNode(node)) {\n            const newData = newFormStateData\n            newData.blockType = blockType\n\n            node.setFields(newData, true)\n          }\n        })\n\n        setInitialState(state)\n        setCustomLabel(state._components?.customComponents?.BlockLabel ?? undefined)\n        setCustomBlock(state._components?.customComponents?.Block ?? undefined)\n      }\n    }\n\n    if (formData && !initialState) {\n      void awaitInitialState()\n    }\n\n    return () => {\n      abortAndIgnore(abortController)\n    }\n  }, [\n    getFormState,\n    schemaFieldsPath,\n    isEditable,\n    id,\n    formData,\n    editor,\n    nodeKey,\n    initialState,\n    collectionSlug,\n    globalSlug,\n    getDocPreferences,\n    parentDocumentFields,\n    blockType,\n  ])\n\n  const [isCollapsed, setIsCollapsed] = React.useState<boolean>(\n    initialLexicalFormState?.[formData.id]?.collapsed ?? false,\n  )\n\n  const componentMapRenderedBlockPath = `${schemaPath}.lexical_internal_feature.blocks.lexical_blocks.${blockType}`\n\n  const clientSchemaMap = featureClientSchemaMap['blocks']\n\n  const blocksField: BlocksFieldClient | undefined = clientSchemaMap?.[\n    componentMapRenderedBlockPath\n  ]?.[0] as BlocksFieldClient\n\n  const clientBlock: ClientBlock | undefined = blocksField.blockReferences\n    ? typeof blocksField?.blockReferences?.[0] === 'string'\n      ? config.blocksMap[blocksField?.blockReferences?.[0]]\n      : blocksField?.blockReferences?.[0]\n    : blocksField?.blocks?.[0]\n\n  const { i18n, t } = useTranslation<object, string>()\n\n  const onChange = useCallback(\n    async ({ formState: prevFormState, submit }: { formState: FormState; submit?: boolean }) => {\n      abortAndIgnore(onChangeAbortControllerRef.current)\n\n      const controller = new AbortController()\n      onChangeAbortControllerRef.current = controller\n\n      const { state: newFormState } = await getFormState({\n        id,\n        collectionSlug,\n        docPermissions: {\n          fields: true,\n        },\n        docPreferences: await getDocPreferences(),\n        documentFormState: deepCopyObjectSimpleWithoutReactComponents(parentDocumentFields),\n        formState: prevFormState,\n        globalSlug,\n        initialBlockFormState: prevFormState,\n        operation: 'update',\n        readOnly: !isEditable,\n        renderAllFields: submit ? true : false,\n        schemaPath: schemaFieldsPath,\n        signal: controller.signal,\n      })\n\n      if (!newFormState) {\n        return prevFormState\n      }\n\n      if (prevFormState.blockName) {\n        newFormState.blockName = prevFormState.blockName\n      }\n\n      const newFormStateData: BlockFields = reduceFieldsToValues(\n        removeEmptyArrayValues({\n          fields: deepCopyObjectSimpleWithoutReactComponents(newFormState),\n        }),\n        true,\n      ) as BlockFields\n\n      setTimeout(() => {\n        editor.update(() => {\n          const node = $getNodeByKey(nodeKey)\n          if (node && $isBlockNode(node)) {\n            const newData = newFormStateData\n            newData.blockType = blockType\n            node.setFields(newData, true)\n          }\n        })\n      }, 0)\n\n      if (submit) {\n        setCustomLabel(newFormState._components?.customComponents?.BlockLabel ?? undefined)\n        setCustomBlock(newFormState._components?.customComponents?.Block ?? undefined)\n\n        let rowErrorCount = 0\n        for (const formField of Object.values(newFormState)) {\n          if (formField?.valid === false) {\n            rowErrorCount++\n          }\n        }\n        setErrorCount(rowErrorCount)\n      }\n\n      return newFormState\n    },\n\n    [\n      getFormState,\n      id,\n      collectionSlug,\n      getDocPreferences,\n      globalSlug,\n      schemaFieldsPath,\n      blockType,\n      parentDocumentFields,\n      isEditable,\n      editor,\n      nodeKey,\n    ],\n  )\n\n  useEffect(() => {\n    return () => {\n      abortAndIgnore(onChangeAbortControllerRef.current)\n    }\n  }, [])\n\n  const removeBlock = useCallback(() => {\n    editor.update(() => {\n      $getNodeByKey(nodeKey)?.remove()\n    })\n  }, [editor, nodeKey])\n\n  const blockDisplayName = clientBlock?.labels?.singular\n    ? getTranslation(clientBlock.labels.singular, i18n)\n    : clientBlock?.slug\n\n  const onCollapsedChange = useCallback(\n    (changedCollapsed: boolean) => {\n      void getDocPreferences().then((currentDocPreferences) => {\n        const currentFieldPreferences =\n          currentDocPreferences?.fields?.[parentLexicalRichTextField.name]\n\n        const collapsedArray = currentFieldPreferences?.collapsed\n\n        const newCollapsed: CollapsedPreferences =\n          collapsedArray && collapsedArray?.length ? collapsedArray : []\n\n        if (changedCollapsed) {\n          if (!newCollapsed.includes(formData.id)) {\n            newCollapsed.push(formData.id)\n          }\n        } else {\n          if (newCollapsed.includes(formData.id)) {\n            newCollapsed.splice(newCollapsed.indexOf(formData.id), 1)\n          }\n        }\n\n        setDocFieldPreferences(parentLexicalRichTextField.name, {\n          collapsed: newCollapsed,\n          hello: 'hi',\n        })\n      })\n    },\n    [getDocPreferences, parentLexicalRichTextField.name, setDocFieldPreferences, formData.id],\n  )\n\n  const EditButton = useMemo(\n    () => () => (\n      <Button\n        buttonStyle=\"icon-label\"\n        className={`${baseClass}__editButton`}\n        disabled={!isEditable}\n        el=\"button\"\n        icon=\"edit\"\n        onClick={(e) => {\n          e.preventDefault()\n          e.stopPropagation()\n          toggleDrawer()\n          return false\n        }}\n        onMouseDown={(e) => {\n          // Needed to preserve lexical selection for toggleDrawer lexical selection restore.\n          // I believe this is needed due to this button (usually) being inside of a collapsible.\n          e.preventDefault()\n        }}\n        round\n        size=\"small\"\n        tooltip={t('lexical:blocks:inlineBlocks:edit', { label: blockDisplayName })}\n      />\n    ),\n    [baseClass, isEditable, t, blockDisplayName, toggleDrawer],\n  )\n\n  const RemoveButton = useMemo(\n    () => () => (\n      <Button\n        buttonStyle=\"icon-label\"\n        className={`${baseClass}__removeButton`}\n        disabled={!isEditable}\n        icon=\"x\"\n        onClick={(e) => {\n          e.preventDefault()\n          removeBlock()\n        }}\n        round\n        tooltip=\"Remove Block\"\n      />\n    ),\n    [baseClass, isEditable, removeBlock],\n  )\n\n  const BlockCollapsible = useMemo(\n    () =>\n      ({\n        Actions,\n        children,\n        className,\n        collapsibleProps,\n        disableBlockName,\n        editButton,\n        errorCount,\n        fieldHasErrors,\n        Label,\n        Pill: CustomPill,\n        removeButton,\n      }: BlockCollapsibleWithErrorProps) => {\n        return (\n          <div className={`${baseClass}__container ${baseClass}-${blockType}`}>\n            <Collapsible\n              className={[\n                `${baseClass}__row`,\n                fieldHasErrors ? `${baseClass}__row--has-errors` : `${baseClass}__row--no-errors`,\n                className,\n              ]\n                .filter(Boolean)\n                .join(' ')}\n              collapsibleStyle={fieldHasErrors ? 'error' : 'default'}\n              header={\n                <div className={`${baseClass}__block-header`}>\n                  {typeof Label !== 'undefined' ? (\n                    Label\n                  ) : typeof CustomLabel !== 'undefined' ? (\n                    CustomLabel\n                  ) : (\n                    <div className={`${baseClass}__block-label`}>\n                      {typeof CustomPill !== 'undefined' ? (\n                        CustomPill\n                      ) : (\n                        <Pill\n                          className={`${baseClass}__block-pill ${baseClass}__block-pill-${blockType}`}\n                          pillStyle=\"white\"\n                          size=\"small\"\n                        >\n                          {blockDisplayName ?? blockType}\n                        </Pill>\n                      )}\n                      {!disableBlockName && !clientBlock?.admin?.disableBlockName && (\n                        <SectionTitle path=\"blockName\" readOnly={!isEditable} />\n                      )}\n\n                      {fieldHasErrors && (\n                        <ErrorPill count={errorCount ?? 0} i18n={i18n} withMessage />\n                      )}\n                    </div>\n                  )}\n\n                  <div className={`${baseClass}__block-actions`}>\n                    {typeof Actions !== 'undefined' ? (\n                      Actions\n                    ) : (\n                      <>\n                        {(CustomBlock && editButton !== false) || (!CustomBlock && editButton) ? (\n                          <EditButton />\n                        ) : null}\n                        {removeButton !== false && isEditable ? <RemoveButton /> : null}\n                      </>\n                    )}\n                  </div>\n                </div>\n              }\n              isCollapsed={isCollapsed}\n              key={0}\n              onToggle={(incomingCollapsedState) => {\n                onCollapsedChange(incomingCollapsedState)\n                setIsCollapsed(incomingCollapsedState)\n              }}\n              {...(collapsibleProps || {})}\n            >\n              {children}\n            </Collapsible>\n          </div>\n        )\n      },\n    [\n      CustomBlock,\n      CustomLabel,\n      EditButton,\n      RemoveButton,\n      blockDisplayName,\n      baseClass,\n      clientBlock?.admin?.disableBlockName,\n      blockType,\n      i18n,\n      isCollapsed,\n      onCollapsedChange,\n      isEditable,\n    ],\n  )\n\n  const blockID = formData?.id\n\n  const BlockDrawer = useMemo(\n    () => () => (\n      <EditDepthProvider>\n        <Drawer\n          className={''}\n          slug={drawerSlug}\n          title={t(`lexical:blocks:inlineBlocks:${blockID ? 'edit' : 'create'}`, {\n            label: blockDisplayName ?? t('lexical:blocks:inlineBlocks:label'),\n          })}\n        >\n          {initialState ? (\n            <>\n              <RenderFields\n                fields={clientBlock?.fields ?? []}\n                forceRender\n                parentIndexPath=\"\"\n                parentPath=\"\" // See Blocks feature path for details as for why this is empty\n                parentSchemaPath={schemaFieldsPath}\n                permissions={true}\n                readOnly={!isEditable}\n              />\n              <FormSubmit programmaticSubmit={true}>{t('fields:saveChanges')}</FormSubmit>\n            </>\n          ) : null}\n        </Drawer>\n      </EditDepthProvider>\n    ),\n    [\n      initialState,\n      drawerSlug,\n      blockID,\n      blockDisplayName,\n      t,\n      isEditable,\n      clientBlock?.fields,\n      schemaFieldsPath,\n      // DO NOT ADD FORMDATA HERE! Adding formData will kick you out of sub block editors while writing.\n    ],\n  )\n\n  // Memoized Form JSX\n  const Block = useMemo(() => {\n    if (!initialState) {\n      return null\n    }\n    return (\n      <Form\n        beforeSubmit={[\n          async ({ formState }) => {\n            // This is only called when form is submitted from drawer - usually only the case if the block has a custom Block component\n            return await onChange({ formState, submit: true })\n          },\n        ]}\n        el=\"div\"\n        fields={clientBlock?.fields ?? []}\n        initialState={initialState}\n        onChange={[onChange]}\n        onSubmit={(formState, newData) => {\n          // This is only called when form is submitted from drawer - usually only the case if the block has a custom Block component\n          newData.blockType = blockType\n          editor.update(() => {\n            const node = $getNodeByKey(nodeKey)\n            if (node && $isBlockNode(node)) {\n              node.setFields(newData as BlockFields, true)\n            }\n          })\n          toggleDrawer()\n        }}\n        submitted={submitted}\n        uuid={uuid()}\n      >\n        <BlockContent\n          baseClass={baseClass}\n          BlockDrawer={BlockDrawer}\n          Collapsible={BlockCollapsible}\n          CustomBlock={CustomBlock}\n          EditButton={EditButton}\n          errorCount={errorCount}\n          formSchema={clientBlock?.fields ?? []}\n          initialState={initialState}\n          nodeKey={nodeKey}\n          RemoveButton={RemoveButton}\n        />\n      </Form>\n    )\n  }, [\n    BlockCollapsible,\n    BlockDrawer,\n    CustomBlock,\n    blockType,\n    RemoveButton,\n    EditButton,\n    baseClass,\n    editor,\n    errorCount,\n    toggleDrawer,\n    clientBlock?.fields,\n    // DO NOT ADD FORMDATA HERE! Adding formData will kick you out of sub block editors while writing.\n    initialState,\n    nodeKey,\n    onChange,\n    submitted,\n  ])\n\n  if (!clientBlock) {\n    return (\n      <BlockCollapsible disableBlockName={true} fieldHasErrors={true}>\n        <div className={`${baseClass}-not-found`}>\n          Error: Block '{blockType}' not found in the config but exists in the lexical data\n        </div>\n      </BlockCollapsible>\n    )\n  }\n\n  return Block\n}\n","'use client'\nimport type { CollapsibleProps } from '@payloadcms/ui/elements/Collapsible'\nimport type { ClientField, FormState } from 'payload'\n\nimport { useLexicalEditable } from '@lexical/react/useLexicalEditable'\nimport { RenderFields, useFormSubmitted } from '@payloadcms/ui'\nimport React, { createContext, useMemo } from 'react'\n\nexport type BlockCollapsibleProps = {\n  /**\n   * Replace the top-right portion of the header that renders the Edit and Remove buttons with custom content.\n   * If this property is provided, the `removeButton` and `editButton` properties are ignored.\n   */\n  Actions?: React.ReactNode\n  children?: React.ReactNode\n  /**\n   * Additional className to the collapsible wrapper\n   */\n  className?: string\n  /**\n   * Props to pass to the underlying Collapsible component. You could use this to override the `Header` entirely, for example.\n   */\n  collapsibleProps?: Partial<CollapsibleProps>\n  /**\n   * Whether to disable rendering the block name field in the header Label\n   * @default false\n   */\n  disableBlockName?: boolean\n  /**\n   * Whether to show the Edit button\n   * If `Actions` is provided, this property is ignored.\n   * @default true\n   */\n  editButton?: boolean\n  /**\n   * Replace the default Label component with a custom Label\n   */\n  Label?: React.ReactNode\n  /**\n   * Replace the default Pill component component that's rendered within the default Label component with a custom Pill.\n   * This property has no effect if you provide a custom Label component via the `Label` property.\n   */\n  Pill?: React.ReactNode\n  /**\n   * Whether to show the Remove button\n   * If `Actions` is provided, this property is ignored.\n   * @default true\n   */\n  removeButton?: boolean\n}\n\nexport type BlockCollapsibleWithErrorProps = {\n  errorCount?: number\n  fieldHasErrors?: boolean\n} & BlockCollapsibleProps\n\nexport type BlockContentProps = {\n  baseClass: string\n  BlockDrawer: React.FC\n  Collapsible: React.FC<BlockCollapsibleWithErrorProps>\n  CustomBlock: React.ReactNode\n  EditButton: React.FC\n  errorCount: number\n  formSchema: ClientField[]\n  initialState: false | FormState | undefined\n\n  nodeKey: string\n  RemoveButton: React.FC\n}\n\ntype BlockComponentContextType = {\n  BlockCollapsible: React.FC<BlockCollapsibleProps>\n} & Omit<BlockContentProps, 'Collapsible'>\n\nconst BlockComponentContext = createContext<BlockComponentContextType>({\n  baseClass: 'LexicalEditorTheme__block',\n  BlockCollapsible: () => null,\n  BlockDrawer: () => null,\n  CustomBlock: null,\n  EditButton: () => null,\n  errorCount: 0,\n  formSchema: [],\n  initialState: false,\n  nodeKey: '',\n  RemoveButton: () => null,\n})\n\nexport const useBlockComponentContext = () => React.use(BlockComponentContext)\n\n/**\n * The actual content of the Block. This should be INSIDE a Form component,\n * scoped to the block. All format operations in here are thus scoped to the block's form, and\n * not the whole document.\n */\nexport const BlockContent: React.FC<BlockContentProps> = (props) => {\n  const { Collapsible, ...contextProps } = props\n\n  const { BlockDrawer, CustomBlock, errorCount, formSchema } = contextProps\n\n  const hasSubmitted = useFormSubmitted()\n\n  const fieldHasErrors = hasSubmitted && errorCount > 0\n  const isEditable = useLexicalEditable()\n\n  const CollapsibleWithErrorProps = useMemo(\n    () => (props: BlockCollapsibleProps) => {\n      const { children, ...rest } = props\n      return (\n        <Collapsible errorCount={errorCount} fieldHasErrors={fieldHasErrors} {...rest}>\n          {children}\n        </Collapsible>\n      )\n    },\n    [Collapsible, fieldHasErrors, errorCount],\n  )\n\n  return CustomBlock ? (\n    <BlockComponentContext\n      value={{\n        ...contextProps,\n        BlockCollapsible: CollapsibleWithErrorProps,\n      }}\n    >\n      {CustomBlock}\n      <BlockDrawer />\n    </BlockComponentContext>\n  ) : (\n    <CollapsibleWithErrorProps>\n      <RenderFields\n        fields={formSchema}\n        forceRender={true}\n        parentIndexPath=\"\"\n        parentPath={''}\n        parentSchemaPath=\"\"\n        permissions={true}\n        readOnly={!isEditable}\n      />\n    </CollapsibleWithErrorProps>\n  )\n}\n","'use client'\nimport type { FormState } from 'payload'\n\n/**\n * By default, if an array field is empty, it will be included in the form state with a value of 0.\n * We do not need this behavior here, By setting `disableFormData` to true, we can prevent the field from being included in the form state\n * like that.\n * @param fields form state\n */\nexport function removeEmptyArrayValues({ fields }: { fields: FormState }): FormState {\n  for (const key in fields) {\n    const field = fields[key]\n    if (Array.isArray(field?.rows) && 'value' in field) {\n      field.disableFormData = true\n    }\n  }\n  return fields\n}\n","import type { Klass, LexicalNode, LexicalNodeReplacement } from 'lexical'\n\nimport { createHeadlessEditor } from '@lexical/headless'\n\nimport {\n  $convertToMarkdownString,\n  type Transformer,\n} from '../../../../packages/@lexical/markdown/index.js'\n\nexport function getLexicalToMarkdown(\n  allNodes: Array<Klass<LexicalNode> | LexicalNodeReplacement>,\n  allTransformers: Transformer[],\n): (args: { editorState: Record<string, any> }) => string {\n  const lexicalToMarkdown = ({ editorState }: { editorState: Record<string, any> }): string => {\n    const headlessEditor = createHeadlessEditor({\n      nodes: allNodes,\n    })\n\n    try {\n      headlessEditor.setEditorState(headlessEditor.parseEditorState(editorState as any)) // This should commit the editor state immediately\n    } catch (e) {\n      console.error('getLexicalToMarkdown: ERROR parsing editor state', e)\n    }\n\n    let markdown: string = ''\n    headlessEditor.getEditorState().read(() => {\n      markdown = $convertToMarkdownString(allTransformers)\n    })\n\n    return markdown\n  }\n  return lexicalToMarkdown\n}\n","import type { Klass, LexicalNode, LexicalNodeReplacement, SerializedEditorState } from 'lexical'\n\nimport { createHeadlessEditor } from '@lexical/headless'\n\nimport {\n  $convertFromMarkdownString,\n  type Transformer,\n} from '../../../../packages/@lexical/markdown/index.js'\n\nexport function getMarkdownToLexical(\n  allNodes: Array<Klass<LexicalNode> | LexicalNodeReplacement>,\n  allTransformers: Transformer[],\n): (args: { markdown: string }) => SerializedEditorState {\n  const markdownToLexical = ({ markdown }: { markdown: string }): SerializedEditorState => {\n    const headlessEditor = createHeadlessEditor({\n      nodes: allNodes,\n    })\n\n    headlessEditor.update(\n      () => {\n        $convertFromMarkdownString(markdown, allTransformers)\n      },\n      { discrete: true },\n    )\n\n    const editorJSON = headlessEditor.getEditorState().toJSON()\n\n    return editorJSON\n  }\n  return markdownToLexical\n}\n","'use client'\nimport type { LexicalCommand } from 'lexical'\n\nimport { createCommand } from 'lexical'\n\nimport type { InsertBlockPayload } from './index.js'\n\nexport const INSERT_BLOCK_COMMAND: LexicalCommand<InsertBlockPayload> =\n  createCommand('INSERT_BLOCK_COMMAND')\n\nexport const INSERT_INLINE_BLOCK_COMMAND: LexicalCommand<Partial<InsertBlockPayload>> =\n  createCommand('INSERT_INLINE_BLOCK_COMMAND')\n","'use client'\n\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext.js'\nimport { $insertNodeToNearestRoot, $wrapNodeInElement, mergeRegister } from '@lexical/utils'\nimport { formatDrawerSlug, useEditDepth } from '@payloadcms/ui'\nimport {\n  $createParagraphNode,\n  $getNodeByKey,\n  $getPreviousSelection,\n  $getSelection,\n  $insertNodes,\n  $isParagraphNode,\n  $isRangeSelection,\n  $isRootOrShadowRoot,\n  COMMAND_PRIORITY_EDITOR,\n} from 'lexical'\nimport { useEffect, useState } from 'react'\n\nimport type { PluginComponent } from '../../../typesClient.js'\nimport type { BlockFields, BlockFieldsOptionalID } from '../../server/nodes/BlocksNode.js'\n\nimport { useEditorConfigContext } from '../../../../lexical/config/client/EditorConfigProvider.js'\nimport { useLexicalDrawer } from '../../../../utilities/fieldsDrawer/useLexicalDrawer.js'\nimport { $createBlockNode, BlockNode } from '../nodes/BlocksNode.js'\nimport { $createInlineBlockNode, $isInlineBlockNode } from '../nodes/InlineBlocksNode.js'\nimport { INSERT_BLOCK_COMMAND, INSERT_INLINE_BLOCK_COMMAND } from './commands.js'\n\nexport type InsertBlockPayload = BlockFieldsOptionalID\n\nexport const BlocksPlugin: PluginComponent = () => {\n  const [editor] = useLexicalComposerContext()\n\n  const [targetNodeKey, setTargetNodeKey] = useState<null | string>(null)\n\n  const { setCreatedInlineBlock, uuid } = useEditorConfigContext()\n  const editDepth = useEditDepth()\n\n  const drawerSlug = formatDrawerSlug({\n    slug: `lexical-inlineBlocks-create-` + uuid,\n    depth: editDepth,\n  })\n\n  const { toggleDrawer } = useLexicalDrawer(drawerSlug, true)\n\n  useEffect(() => {\n    if (!editor.hasNodes([BlockNode])) {\n      throw new Error('BlocksPlugin: BlocksNode not registered on editor')\n    }\n\n    return mergeRegister(\n      editor.registerCommand<InsertBlockPayload>(\n        INSERT_BLOCK_COMMAND,\n        (payload: InsertBlockPayload) => {\n          editor.update(() => {\n            const selection = $getSelection() || $getPreviousSelection()\n\n            if ($isRangeSelection(selection)) {\n              const blockNode = $createBlockNode(payload)\n\n              // we need to get the focus node before inserting the block node, as $insertNodeToNearestRoot can change the focus node\n              const { focus } = selection\n              const focusNode = focus.getNode()\n              // Insert blocks node BEFORE potentially removing focusNode, as $insertNodeToNearestRoot errors if the focusNode doesn't exist\n              $insertNodeToNearestRoot(blockNode)\n\n              // Delete the node it it's an empty paragraph\n              if ($isParagraphNode(focusNode) && !focusNode.__first) {\n                focusNode.remove()\n              }\n            }\n          })\n\n          return true\n        },\n        COMMAND_PRIORITY_EDITOR,\n      ),\n      editor.registerCommand(\n        INSERT_INLINE_BLOCK_COMMAND,\n        (fields) => {\n          if (targetNodeKey) {\n            const node = $getNodeByKey(targetNodeKey)\n\n            if (!node || !$isInlineBlockNode(node)) {\n              return false\n            }\n\n            node.setFields(fields as BlockFields)\n\n            setTargetNodeKey(null)\n            return true\n          }\n\n          const inlineBlockNode = $createInlineBlockNode(fields as BlockFields)\n          setCreatedInlineBlock?.(inlineBlockNode)\n          $insertNodes([inlineBlockNode])\n          if ($isRootOrShadowRoot(inlineBlockNode.getParentOrThrow())) {\n            $wrapNodeInElement(inlineBlockNode, $createParagraphNode).selectEnd()\n          }\n\n          return true\n        },\n        COMMAND_PRIORITY_EDITOR,\n      ),\n    )\n  }, [editor, setCreatedInlineBlock, targetNodeKey, toggleDrawer])\n\n  return null\n}\n","'use client'\nimport type { BaseSelection, LexicalEditor } from 'lexical'\n\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext.js'\nimport { $createParagraphNode, $createTextNode, $getRoot, getDOMSelection } from 'lexical'\nimport * as React from 'react'\nimport { type JSX, useCallback, useEffect, useLayoutEffect, useRef, useState } from 'react'\n\nimport type { PluginComponent } from '../../../../typesClient.js'\n\nimport { IS_APPLE } from '../../../../../lexical/utils/environment.js'\nimport './index.scss'\n\nconst copy = (text: null | string) => {\n  const textArea = document.createElement('textarea')\n  textArea.value = text || ''\n  textArea.style.position = 'absolute'\n  textArea.style.opacity = '0'\n  document.body?.appendChild(textArea)\n  textArea.focus()\n  textArea.select()\n  try {\n    const result = document.execCommand('copy')\n    // eslint-disable-next-line no-console\n    console.log(result)\n  } catch (error) {\n    console.error(error)\n  }\n  document.body?.removeChild(textArea)\n}\n\nconst download = (filename: string, text: null | string) => {\n  const a = document.createElement('a')\n  a.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text || ''))\n  a.setAttribute('download', filename)\n  a.style.display = 'none'\n  document.body?.appendChild(a)\n  a.click()\n  document.body?.removeChild(a)\n}\n\nconst formatStep = (step: Step) => {\n  const formatOneStep = (name: string, value: Step['value']) => {\n    switch (name) {\n      case 'click': {\n        return `      await page.mouse.click(${value.x}, ${value.y});`\n      }\n      case 'keydown': {\n        return `      await page.keyboard.keydown('${value}');`\n      }\n      case 'keyup': {\n        return `      await page.keyboard.keyup('${value}');`\n      }\n      case 'press': {\n        return `      await page.keyboard.press('${value}');`\n      }\n      case 'selectAll': {\n        return `      await selectAll(page);`\n      }\n      case 'snapshot': {\n        return `      await assertHTMLSnapshot(page);\n      await assertSelection(page, {\n        anchorPath: [${value.anchorPath.toString()}],\n        anchorOffset: ${value.anchorOffset},\n        focusPath: [${value.focusPath.toString()}],\n        focusOffset: ${value.focusOffset},\n      });\n`\n      }\n      case 'type': {\n        return `      await page.keyboard.type('${value}');`\n      }\n      default:\n        return ``\n    }\n  }\n  const formattedStep = formatOneStep(step.name, step.value)\n  switch (step.count) {\n    case 1:\n      return formattedStep\n    case 2:\n      return [formattedStep, formattedStep].join(`\\n`)\n    default:\n      return `      await repeat(${step.count}, async () => {\n  ${formattedStep}\n      );`\n  }\n}\n\nexport function isSelectAll(event: KeyboardEvent): boolean {\n  return event.key.toLowerCase() === 'a' && (IS_APPLE ? event.metaKey : event.ctrlKey)\n}\n\n// stolen from LexicalSelection-test\nfunction sanitizeSelection(selection: Selection) {\n  const { anchorNode, focusNode } = selection\n  let { anchorOffset, focusOffset } = selection\n  if (anchorOffset !== 0) {\n    anchorOffset--\n  }\n  if (focusOffset !== 0) {\n    focusOffset--\n  }\n  return { anchorNode, anchorOffset, focusNode, focusOffset }\n}\n\nfunction getPathFromNodeToEditor(node: Node, rootElement: HTMLElement | null) {\n  let currentNode: Node | null | undefined = node\n  const path: number[] = []\n  while (currentNode !== rootElement) {\n    if (currentNode !== null && currentNode !== undefined) {\n      path.unshift(\n        Array.from(currentNode?.parentNode?.childNodes ?? []).indexOf(currentNode as ChildNode),\n      )\n    }\n    currentNode = currentNode?.parentNode\n  }\n  return path\n}\n\nconst keyPresses = new Set([\n  'ArrowDown',\n  'ArrowLeft',\n  'ArrowRight',\n  'ArrowUp',\n  'Backspace',\n  'Delete',\n  'Enter',\n  'Escape',\n])\n\ntype Step = {\n  count: number\n  name: string\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  value: any\n}\n\ntype Steps = Step[]\n\nfunction useTestRecorder(editor: LexicalEditor): [JSX.Element, JSX.Element | null] {\n  const [steps, setSteps] = useState<Steps>([])\n  const [isRecording, setIsRecording] = useState(false)\n  const [, setCurrentInnerHTML] = useState('')\n  const [templatedTest, setTemplatedTest] = useState('')\n  const previousSelectionRef = useRef<BaseSelection | null>(null)\n  const skipNextSelectionChangeRef = useRef(false)\n  const preRef = useRef<HTMLPreElement>(null)\n\n  const getCurrentEditor = useCallback(() => {\n    return editor\n  }, [editor])\n\n  const generateTestContent = useCallback(() => {\n    const rootElement = editor.getRootElement()\n    const browserSelection = getDOMSelection(editor._window)\n\n    if (\n      rootElement == null ||\n      browserSelection == null ||\n      browserSelection.anchorNode == null ||\n      browserSelection.focusNode == null ||\n      !rootElement.contains(browserSelection.anchorNode) ||\n      !rootElement.contains(browserSelection.focusNode)\n    ) {\n      return null\n    }\n\n    return `\nimport {\n  initializeE2E,\n  assertHTMLSnapshot,\n  assertSelection,\n  repeat,\n} from '../utils';\nimport {selectAll} from '../keyboardShortcuts';\nimport { RangeSelection } from 'lexical';\nimport { NodeSelection } from 'lexical';\n\ndescribe('Test case', () => {\n  initializeE2E((e2e) => {\n    it('Should pass this test', async () => {\n      const {page} = e2e;\n\n      await page.focus('div[contenteditable=\"true\"]');\n${steps.map(formatStep).join(`\\n`)}\n    });\n});\n    `\n  }, [editor, steps])\n\n  // just a wrapper around inserting new actions so that we can\n  // coalesce some actions like insertText/moveNativeSelection\n  const pushStep = useCallback(\n    (name: string, value: Step['value']) => {\n      setSteps((currentSteps) => {\n        // trying to group steps\n        const currentIndex = steps.length - 1\n        const lastStep = steps[currentIndex]\n        if (lastStep) {\n          if (lastStep.name === name) {\n            if (name === 'type') {\n              // for typing events we just append the text\n              return [\n                ...steps.slice(0, currentIndex),\n                { ...lastStep, value: lastStep.value + value },\n              ]\n            } else {\n              // for other events we bump the counter if their values are the same\n              if (lastStep.value === value) {\n                return [...steps.slice(0, currentIndex), { ...lastStep, count: lastStep.count + 1 }]\n              }\n            }\n          }\n        }\n        // could not group, just append a new one\n        return [...currentSteps, { name, count: 1, value }]\n      })\n    },\n    [steps, setSteps],\n  )\n\n  useLayoutEffect(() => {\n    const onKeyDown = (event: KeyboardEvent) => {\n      if (!isRecording) {\n        return\n      }\n      const key = event.key\n      if (isSelectAll(event)) {\n        pushStep('selectAll', '')\n      } else if (keyPresses.has(key)) {\n        pushStep('press', event.key)\n      } else if ([...key].length > 1) {\n        pushStep('keydown', event.key)\n      } else {\n        pushStep('type', event.key)\n      }\n    }\n\n    const onKeyUp = (event: KeyboardEvent) => {\n      if (!isRecording) {\n        return\n      }\n      const key = event.key\n      if (!keyPresses.has(key) && [...key].length > 1) {\n        pushStep('keyup', event.key)\n      }\n    }\n\n    return editor.registerRootListener(\n      (rootElement: HTMLElement | null, prevRootElement: HTMLElement | null) => {\n        if (prevRootElement !== null) {\n          prevRootElement.removeEventListener('keydown', onKeyDown)\n          prevRootElement.removeEventListener('keyup', onKeyUp)\n        }\n        if (rootElement !== null) {\n          rootElement.addEventListener('keydown', onKeyDown)\n          rootElement.addEventListener('keyup', onKeyUp)\n        }\n      },\n    )\n  }, [editor, isRecording, pushStep])\n\n  useLayoutEffect(() => {\n    if (preRef.current) {\n      preRef.current.scrollTo(0, preRef.current.scrollHeight)\n    }\n  }, [generateTestContent])\n\n  useEffect(() => {\n    if (steps) {\n      const testContent = generateTestContent()\n      if (testContent !== null) {\n        setTemplatedTest(testContent)\n      }\n      if (preRef.current) {\n        preRef.current.scrollTo(0, preRef.current.scrollHeight)\n      }\n    }\n  }, [generateTestContent, steps])\n\n  useEffect(() => {\n    const removeUpdateListener = editor.registerUpdateListener(\n      ({ dirtyElements, dirtyLeaves, editorState }) => {\n        if (!isRecording) {\n          return\n        }\n        const currentSelection = editorState._selection\n        const previousSelection = previousSelectionRef.current\n        const skipNextSelectionChange = skipNextSelectionChangeRef.current\n        if (previousSelection !== currentSelection) {\n          if (dirtyLeaves.size === 0 && dirtyElements.size === 0 && !skipNextSelectionChange) {\n            const browserSelection = getDOMSelection(editor._window)\n            if (\n              browserSelection &&\n              (browserSelection.anchorNode == null || browserSelection.focusNode == null)\n            ) {\n              return\n            }\n          }\n          previousSelectionRef.current = currentSelection\n        }\n        skipNextSelectionChangeRef.current = false\n        const testContent = generateTestContent()\n        if (testContent !== null) {\n          setTemplatedTest(testContent)\n        }\n      },\n    )\n    return removeUpdateListener\n  }, [editor, generateTestContent, isRecording, pushStep])\n\n  // save innerHTML\n  useEffect(() => {\n    if (!isRecording) {\n      return\n    }\n    const removeUpdateListener = editor.registerUpdateListener(() => {\n      const rootElement = editor.getRootElement()\n      if (rootElement !== null) {\n        setCurrentInnerHTML(rootElement?.innerHTML)\n      }\n    })\n    return removeUpdateListener\n  }, [editor, isRecording])\n\n  // clear editor and start recording\n  const toggleEditorSelection = useCallback(\n    (currentEditor: LexicalEditor) => {\n      if (!isRecording) {\n        currentEditor.update(() => {\n          const root = $getRoot()\n          root.clear()\n          const text = $createTextNode()\n          root.append($createParagraphNode().append(text))\n          text.select()\n        })\n        setSteps([])\n      }\n      setIsRecording((currentIsRecording) => !currentIsRecording)\n    },\n    [isRecording],\n  )\n\n  const onSnapshotClick = useCallback(() => {\n    if (!isRecording) {\n      return\n    }\n    const browserSelection = getDOMSelection(editor._window)\n    if (\n      browserSelection === null ||\n      browserSelection.anchorNode == null ||\n      browserSelection.focusNode == null\n    ) {\n      return\n    }\n    const { anchorNode, anchorOffset, focusNode, focusOffset } = sanitizeSelection(browserSelection)\n    const rootElement = getCurrentEditor().getRootElement()\n    let anchorPath\n    if (anchorNode !== null) {\n      anchorPath = getPathFromNodeToEditor(anchorNode, rootElement)\n    }\n    let focusPath\n    if (focusNode !== null) {\n      focusPath = getPathFromNodeToEditor(focusNode, rootElement)\n    }\n    pushStep('snapshot', {\n      anchorNode,\n      anchorOffset,\n      anchorPath,\n      focusNode,\n      focusOffset,\n      focusPath,\n    })\n  }, [pushStep, isRecording, getCurrentEditor])\n\n  const onCopyClick = useCallback(() => {\n    copy(generateTestContent())\n  }, [generateTestContent])\n\n  const onDownloadClick = useCallback(() => {\n    download('test.js', generateTestContent())\n  }, [generateTestContent])\n\n  const button = (\n    <button\n      className={`editor-dev-button ${isRecording ? 'active' : ''}`}\n      id=\"test-recorder-button\"\n      onClick={(e) => {\n        toggleEditorSelection(getCurrentEditor())\n        e.preventDefault()\n      }}\n      title={isRecording ? 'Disable test recorder' : 'Enable test recorder'}\n      type=\"button\"\n    >\n      {isRecording ? 'Disable test recorder' : 'Enable test recorder'}\n    </button>\n  )\n  const output = isRecording ? (\n    <div className=\"test-recorder-output\">\n      <div className=\"test-recorder-toolbar\">\n        <button\n          className=\"test-recorder-button\"\n          id=\"test-recorder-button-snapshot\"\n          onClick={(e) => {\n            onSnapshotClick()\n            e.preventDefault()\n          }}\n          title=\"Insert snapshot\"\n          type=\"button\"\n        >\n          Insert Snapshot\n        </button>\n        <button\n          className=\"test-recorder-button\"\n          id=\"test-recorder-button-copy\"\n          onClick={(e) => {\n            onCopyClick()\n            e.preventDefault()\n          }}\n          title=\"Copy to clipboard\"\n          type=\"button\"\n        >\n          Copy\n        </button>\n        <button\n          className=\"test-recorder-button\"\n          id=\"test-recorder-button-download\"\n          onClick={(e) => {\n            onDownloadClick()\n            e.preventDefault()\n          }}\n          title=\"Download as a file\"\n          type=\"button\"\n        >\n          Download\n        </button>\n      </div>\n      <pre id=\"test-recorder\" ref={preRef}>\n        {templatedTest}\n      </pre>\n    </div>\n  ) : null\n\n  return [button, output]\n}\nexport const TestRecorderPlugin: PluginComponent<undefined> = () => {\n  const [editor] = useLexicalComposerContext()\n  const [testRecorderButton, testRecorderOutput] = useTestRecorder(editor)\n\n  return (\n    <React.Fragment>\n      <p>HI</p>\n      {testRecorderButton}\n      {testRecorderOutput}\n      <p>DONE</p>\n    </React.Fragment>\n  )\n}\n","'use client'\nimport { CAN_USE_DOM } from './canUseDOM.js'\n\ndeclare global {\n  interface Document {\n    documentMode?: unknown\n  }\n\n  interface Window {\n    MSStream?: unknown\n  }\n}\n\nconst documentMode = CAN_USE_DOM && 'documentMode' in document ? document.documentMode : null\n\nexport const IS_APPLE: boolean = CAN_USE_DOM && /Mac|iPod|iPhone|iPad/.test(navigator.platform)\n\nexport const IS_FIREFOX: boolean =\n  CAN_USE_DOM && /^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent)\n\nexport const CAN_USE_BEFORE_INPUT: boolean =\n  CAN_USE_DOM && 'InputEvent' in window && !documentMode\n    ? 'getTargetRanges' in new window.InputEvent('input')\n    : false\n\nexport const IS_SAFARI: boolean = CAN_USE_DOM && /Version\\/[\\d.].*Safari/.test(navigator.userAgent)\n\nexport const IS_IOS: boolean =\n  CAN_USE_DOM && /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream\n\nexport const IS_ANDROID: boolean = CAN_USE_DOM && /Android/.test(navigator.userAgent)\n\nexport const IS_WINDOWS: boolean = CAN_USE_DOM && /Win/.test(navigator.platform)\nexport const IS_CHROME: boolean = CAN_USE_DOM && /^(?=.*Chrome).*/i.test(navigator.userAgent)\n// export const canUseTextInputEvent: boolean = CAN_USE_DOM && 'TextEvent' in window && !documentMode;\n\nexport const IS_APPLE_WEBKIT =\n  CAN_USE_DOM && /AppleWebKit\\/[\\d.]+/.test(navigator.userAgent) && !IS_CHROME\n","'use client'\n\nimport { createClientFeature } from '../../../../utilities/createClientFeature.js'\nimport { TestRecorderPlugin } from './plugin/index.js'\n\nexport const TestRecorderFeatureClient = createClientFeature({\n  plugins: [\n    {\n      Component: TestRecorderPlugin,\n      position: 'bottom',\n    },\n  ],\n})\n","'use client'\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext.js'\nimport { TreeView } from '@lexical/react/LexicalTreeView.js'\nimport * as React from 'react'\n\nimport type { PluginComponent } from '../../../../typesClient.js'\n\nimport './index.scss'\n\nexport const TreeViewPlugin: PluginComponent<undefined> = () => {\n  const [editor] = useLexicalComposerContext()\n  return (\n    <TreeView\n      editor={editor}\n      timeTravelButtonClassName=\"debug-timetravel-button\"\n      timeTravelPanelButtonClassName=\"debug-timetravel-panel-button\"\n      timeTravelPanelClassName=\"debug-timetravel-panel\"\n      timeTravelPanelSliderClassName=\"debug-timetravel-panel-slider\"\n      treeTypeButtonClassName=\"debug-treetype-button\"\n      viewClassName=\"tree-view-output\"\n    />\n  )\n}\n","'use client'\n\nimport { createClientFeature } from '../../../../utilities/createClientFeature.js'\nimport { TreeViewPlugin } from './plugin/index.js'\n\nexport const TreeViewFeatureClient = createClientFeature({\n  plugins: [\n    {\n      Component: TreeViewPlugin,\n      position: 'bottom',\n    },\n  ],\n})\n","'use client'\nimport { $isTableSelection } from '@lexical/table'\nimport { $isRangeSelection, FORMAT_TEXT_COMMAND } from 'lexical'\n\nimport type { ToolbarGroup } from '../../toolbars/types.js'\n\nimport { BoldIcon } from '../../../lexical/ui/icons/Bold/index.js'\nimport { createClientFeature } from '../../../utilities/createClientFeature.js'\nimport { toolbarFormatGroupWithItems } from '../shared/toolbarFormatGroup.js'\nimport {\n  BOLD_ITALIC_STAR,\n  BOLD_ITALIC_UNDERSCORE,\n  BOLD_STAR,\n  BOLD_UNDERSCORE,\n} from './markdownTransformers.js'\n\nconst toolbarGroups: ToolbarGroup[] = [\n  toolbarFormatGroupWithItems([\n    {\n      ChildComponent: BoldIcon,\n      isActive: ({ selection }) => {\n        if ($isRangeSelection(selection) || $isTableSelection(selection)) {\n          return selection.hasFormat('bold')\n        }\n        return false\n      },\n      key: 'bold',\n      onSelect: ({ editor }) => {\n        editor.dispatchCommand(FORMAT_TEXT_COMMAND, 'bold')\n      },\n      order: 1,\n    },\n  ]),\n]\n\nexport const BoldFeatureClient = createClientFeature(({ featureProviderMap }) => {\n  const markdownTransformers = [BOLD_STAR, BOLD_UNDERSCORE]\n  if (featureProviderMap.get('italic')) {\n    markdownTransformers.push(BOLD_ITALIC_UNDERSCORE, BOLD_ITALIC_STAR)\n  }\n\n  return {\n    enableFormats: ['bold'],\n    markdownTransformers,\n    toolbarFixed: {\n      groups: toolbarGroups,\n    },\n    toolbarInline: {\n      groups: toolbarGroups,\n    },\n  }\n})\n","'use client'\nimport React from 'react'\n\nexport const BoldIcon: React.FC = () => (\n  <svg\n    aria-hidden=\"true\"\n    className=\"icon\"\n    fill=\"currentColor\"\n    focusable=\"false\"\n    height=\"20\"\n    viewBox=\"0 0 20 20\"\n    width=\"20\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M10.6772 15H6.27017V5.718H10.4172C12.6792 5.718 13.8492 6.602 13.8492 8.292C13.8492 9.098 13.1992 9.982 12.4712 10.216C13.3812 10.476 14.1742 11.256 14.1742 12.322C14.1742 14.09 12.9002 15 10.6772 15ZM8.46717 9.501H10.3262C11.3012 9.501 11.7042 9.046 11.7042 8.409C11.7042 7.72 11.2362 7.317 10.3392 7.317H8.46717V9.501ZM8.46717 11.061V13.401H10.4822C11.4702 13.401 11.9642 12.959 11.9642 12.218C11.9642 11.49 11.4702 11.061 10.4822 11.061H8.46717Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n)\n","'use client'\nimport type { ToolbarGroup, ToolbarGroupItem } from '../../toolbars/types.js'\n\nexport const toolbarFormatGroupWithItems = (items: ToolbarGroupItem[]): ToolbarGroup => {\n  return {\n    type: 'buttons',\n    items,\n    key: 'format',\n    order: 40,\n  }\n}\n","import type { TextFormatTransformer } from '../../../packages/@lexical/markdown/MarkdownTransformers.js'\n\nexport const BOLD_ITALIC_STAR: TextFormatTransformer = {\n  type: 'text-format',\n  format: ['bold', 'italic'],\n  tag: '***',\n}\n\nexport const BOLD_ITALIC_UNDERSCORE: TextFormatTransformer = {\n  type: 'text-format',\n  format: ['bold', 'italic'],\n  intraword: false,\n  tag: '___',\n}\n\nexport const BOLD_STAR: TextFormatTransformer = {\n  type: 'text-format',\n  format: ['bold'],\n  tag: '**',\n}\n\nexport const BOLD_UNDERSCORE: TextFormatTransformer = {\n  type: 'text-format',\n  format: ['bold'],\n  intraword: false,\n  tag: '__',\n}\n","'use client'\n\nimport { $isTableSelection } from '@lexical/table'\nimport { $isRangeSelection, FORMAT_TEXT_COMMAND } from 'lexical'\n\nimport type { ToolbarGroup } from '../../toolbars/types.js'\n\nimport { CodeIcon } from '../../../lexical/ui/icons/Code/index.js'\nimport { createClientFeature } from '../../../utilities/createClientFeature.js'\nimport { toolbarFormatGroupWithItems } from '../shared/toolbarFormatGroup.js'\nimport { INLINE_CODE } from './markdownTransformers.js'\n\nconst toolbarGroups: ToolbarGroup[] = [\n  toolbarFormatGroupWithItems([\n    {\n      ChildComponent: CodeIcon,\n      isActive: ({ selection }) => {\n        if ($isRangeSelection(selection) || $isTableSelection(selection)) {\n          return selection.hasFormat('code')\n        }\n        return false\n      },\n      key: 'inlineCode',\n      onSelect: ({ editor }) => {\n        editor.dispatchCommand(FORMAT_TEXT_COMMAND, 'code')\n      },\n      order: 7,\n    },\n  ]),\n]\n\nexport const InlineCodeFeatureClient = createClientFeature({\n  enableFormats: ['code'],\n  markdownTransformers: [INLINE_CODE],\n  toolbarFixed: {\n    groups: toolbarGroups,\n  },\n  toolbarInline: {\n    groups: toolbarGroups,\n  },\n})\n","'use client'\nimport React from 'react'\n\nexport const CodeIcon: React.FC = () => (\n  <svg\n    aria-hidden=\"true\"\n    className=\"icon\"\n    fill=\"none\"\n    focusable=\"false\"\n    height=\"20\"\n    viewBox=\"0 0 20 20\"\n    width=\"20\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path d=\"M7.76465 6L3.76465 10L7.76465 14\" stroke=\"currentColor\" />\n    <path d=\"M12.2354 6L16.2354 10L12.2354 14\" stroke=\"currentColor\" />\n  </svg>\n)\n","import type { TextFormatTransformer } from '../../../packages/@lexical/markdown/MarkdownTransformers.js'\n\nexport const INLINE_CODE: TextFormatTransformer = {\n  type: 'text-format',\n  format: ['code'],\n  tag: '`',\n}\n","'use client'\n\nimport { $isTableSelection } from '@lexical/table'\nimport { $isRangeSelection, FORMAT_TEXT_COMMAND } from 'lexical'\n\nimport type { ToolbarGroup } from '../../toolbars/types.js'\n\nimport { ItalicIcon } from '../../../lexical/ui/icons/Italic/index.js'\nimport { createClientFeature } from '../../../utilities/createClientFeature.js'\nimport { toolbarFormatGroupWithItems } from '../shared/toolbarFormatGroup.js'\nimport { ITALIC_STAR, ITALIC_UNDERSCORE } from './markdownTransformers.js'\n\nconst toolbarGroups: ToolbarGroup[] = [\n  toolbarFormatGroupWithItems([\n    {\n      ChildComponent: ItalicIcon,\n      isActive: ({ selection }) => {\n        if ($isRangeSelection(selection) || $isTableSelection(selection)) {\n          return selection.hasFormat('italic')\n        }\n        return false\n      },\n      key: 'italic',\n      onSelect: ({ editor }) => {\n        editor.dispatchCommand(FORMAT_TEXT_COMMAND, 'italic')\n      },\n      order: 2,\n    },\n  ]),\n]\n\nexport const ItalicFeatureClient = createClientFeature({\n  enableFormats: ['italic'],\n  markdownTransformers: [ITALIC_STAR, ITALIC_UNDERSCORE],\n  toolbarFixed: {\n    groups: toolbarGroups,\n  },\n  toolbarInline: {\n    groups: toolbarGroups,\n  },\n})\n","'use client'\nimport React from 'react'\n\nexport const ItalicIcon: React.FC = () => (\n  <svg\n    aria-hidden=\"true\"\n    className=\"icon\"\n    fill=\"currentColor\"\n    focusable=\"false\"\n    height=\"20\"\n    viewBox=\"0 0 20 20\"\n    width=\"20\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M11.311 14.2969L11.0327 15H6.18408L6.4624 14.2969C7.54639 14.2969 7.70752 14.209 7.83936 13.8721L10.8423 6.45996C10.8716 6.38672 10.8862 6.32812 10.8862 6.26953C10.8862 6.09375 10.6519 6.03516 9.80225 6.03516L10.0952 5.33203H14.9438L14.6509 6.03516C13.5669 6.03516 13.4204 6.12305 13.2886 6.45996L10.2856 13.8721C10.2563 13.9453 10.2271 14.0039 10.2271 14.0625C10.2271 14.2383 10.4614 14.2969 11.311 14.2969Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n)\n","import type { TextFormatTransformer } from '../../../packages/@lexical/markdown/MarkdownTransformers.js'\n\nexport const ITALIC_STAR: TextFormatTransformer = {\n  type: 'text-format',\n  format: ['italic'],\n  tag: '*',\n}\n\nexport const ITALIC_UNDERSCORE: TextFormatTransformer = {\n  type: 'text-format',\n  format: ['italic'],\n  intraword: false,\n  tag: '_',\n}\n","'use client'\n\nimport { $isTableSelection } from '@lexical/table'\nimport { $isRangeSelection, FORMAT_TEXT_COMMAND } from 'lexical'\n\nimport { StrikethroughIcon } from '../../../lexical/ui/icons/Strikethrough/index.js'\nimport { createClientFeature } from '../../../utilities/createClientFeature.js'\nimport { toolbarFormatGroupWithItems } from '../shared/toolbarFormatGroup.js'\nimport { STRIKETHROUGH } from './markdownTransformers.js'\n\nconst toolbarGroups = [\n  toolbarFormatGroupWithItems([\n    {\n      ChildComponent: StrikethroughIcon,\n      isActive: ({ selection }) => {\n        if ($isRangeSelection(selection) || $isTableSelection(selection)) {\n          return selection.hasFormat('strikethrough')\n        }\n        return false\n      },\n      key: 'strikethrough',\n      onSelect: ({ editor }) => {\n        editor.dispatchCommand(FORMAT_TEXT_COMMAND, 'strikethrough')\n      },\n      order: 4,\n    },\n  ]),\n]\n\nexport const StrikethroughFeatureClient = createClientFeature({\n  enableFormats: ['strikethrough'],\n  markdownTransformers: [STRIKETHROUGH],\n  toolbarFixed: {\n    groups: toolbarGroups,\n  },\n  toolbarInline: {\n    groups: toolbarGroups,\n  },\n})\n","'use client'\nimport React from 'react'\n\nexport const StrikethroughIcon: React.FC = () => (\n  <svg\n    aria-hidden=\"true\"\n    className=\"icon\"\n    fill=\"currentColor\"\n    focusable=\"false\"\n    height=\"20\"\n    viewBox=\"0 0 20 20\"\n    width=\"20\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M5.50756 12.76H7.42756C7.56256 14.215 8.82256 14.71 10.1576 14.71C11.4326 14.71 12.4226 14.14 12.4226 13.06C12.4226 12.28 11.9576 11.845 10.6676 11.605L8.70256 11.245C7.12756 10.96 5.85256 10.21 5.85256 8.335C5.85256 6.43 7.53256 5.11 9.87256 5.11C12.4226 5.11 13.9526 6.22 14.1626 8.23H12.2876C12.1526 7.18 11.2226 6.595 9.88756 6.595C8.59756 6.595 7.78756 7.27 7.78756 8.215C7.78756 9.1 8.34256 9.385 9.49756 9.61L11.5676 10.015C13.3226 10.345 14.3726 11.215 14.3726 12.94C14.3726 14.89 12.5876 16.18 10.2176 16.18C7.66756 16.18 5.70256 15.115 5.50756 12.76Z\"\n      fill=\"currentColor\"\n    />\n    <path d=\"M4.99756 11.44H15.0026V12.19H4.99756V11.44Z\" fill=\"currentColor\" />\n  </svg>\n)\n","import type { TextFormatTransformer } from '../../../packages/@lexical/markdown/MarkdownTransformers.js'\n\nexport const STRIKETHROUGH: TextFormatTransformer = {\n  type: 'text-format',\n  format: ['strikethrough'],\n  tag: '~~',\n}\n","'use client'\n\nimport { $isTableSelection } from '@lexical/table'\nimport { $isRangeSelection, FORMAT_TEXT_COMMAND } from 'lexical'\n\nimport type { ToolbarGroup } from '../../toolbars/types.js'\n\nimport { SubscriptIcon } from '../../../lexical/ui/icons/Subscript/index.js'\nimport { createClientFeature } from '../../../utilities/createClientFeature.js'\nimport { toolbarFormatGroupWithItems } from '../shared/toolbarFormatGroup.js'\n\nconst toolbarGroups: ToolbarGroup[] = [\n  toolbarFormatGroupWithItems([\n    {\n      ChildComponent: SubscriptIcon,\n      isActive: ({ selection }) => {\n        if ($isRangeSelection(selection) || $isTableSelection(selection)) {\n          return selection.hasFormat('subscript')\n        }\n        return false\n      },\n      key: 'subscript',\n      onSelect: ({ editor }) => {\n        editor.dispatchCommand(FORMAT_TEXT_COMMAND, 'subscript')\n      },\n      order: 5,\n    },\n  ]),\n]\n\nexport const SubscriptFeatureClient = createClientFeature({\n  enableFormats: ['subscript'],\n  toolbarFixed: {\n    groups: toolbarGroups,\n  },\n  toolbarInline: {\n    groups: toolbarGroups,\n  },\n})\n","'use client'\nimport React from 'react'\n\nexport const SubscriptIcon: React.FC = () => (\n  <svg\n    aria-hidden=\"true\"\n    className=\"icon\"\n    fill=\"currentColor\"\n    focusable=\"false\"\n    height=\"20\"\n    viewBox=\"0 0 20 20\"\n    width=\"20\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M10.167 15L7.45002 11.36L4.73302 15H2.91302L6.55302 10.177L3.23802 5.718H5.20102L7.54102 8.89L9.89402 5.718H11.714L8.43802 10.06L12.13 15H10.167ZM16.7768 13.258C16.7768 14.155 16.1398 14.532 15.2038 15C14.5538 15.325 14.2808 15.546 14.2418 15.78H16.7898V16.82H12.7208V16.339C12.7208 15.286 13.5918 14.675 14.3588 14.233C15.0868 13.83 15.4378 13.635 15.4378 13.232C15.4378 12.894 15.2038 12.686 14.8268 12.686C14.3848 12.686 14.1248 13.024 14.1118 13.427H12.7468C12.8248 12.426 13.5528 11.633 14.8398 11.633C15.9448 11.633 16.7768 12.257 16.7768 13.258Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n)\n","'use client'\n\nimport { $isTableSelection } from '@lexical/table'\nimport { $isRangeSelection, FORMAT_TEXT_COMMAND } from 'lexical'\n\nimport type { ToolbarGroup } from '../../toolbars/types.js'\n\nimport { SuperscriptIcon } from '../../../lexical/ui/icons/Superscript/index.js'\nimport { createClientFeature } from '../../../utilities/createClientFeature.js'\nimport { toolbarFormatGroupWithItems } from '../shared/toolbarFormatGroup.js'\n\nconst toolbarGroups: ToolbarGroup[] = [\n  toolbarFormatGroupWithItems([\n    {\n      ChildComponent: SuperscriptIcon,\n      isActive: ({ selection }) => {\n        if ($isRangeSelection(selection) || $isTableSelection(selection)) {\n          return selection.hasFormat('superscript')\n        }\n        return false\n      },\n      key: 'superscript',\n      onSelect: ({ editor }) => {\n        editor.dispatchCommand(FORMAT_TEXT_COMMAND, 'superscript')\n      },\n      order: 6,\n    },\n  ]),\n]\n\nexport const SuperscriptFeatureClient = createClientFeature({\n  enableFormats: ['superscript'],\n  toolbarFixed: {\n    groups: toolbarGroups,\n  },\n  toolbarInline: {\n    groups: toolbarGroups,\n  },\n})\n","'use client'\nimport React from 'react'\n\nexport const SuperscriptIcon: React.FC = () => (\n  <svg\n    aria-hidden=\"true\"\n    className=\"icon\"\n    fill=\"currentColor\"\n    focusable=\"false\"\n    height=\"20\"\n    viewBox=\"0 0 20 20\"\n    width=\"20\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M10.167 15L7.45002 11.36L4.73302 15H2.91302L6.55302 10.177L3.23802 5.718H5.20102L7.54102 8.89L9.89402 5.718H11.714L8.43802 10.06L12.13 15H10.167ZM16.7768 7.252C16.7768 8.149 16.1398 8.526 15.2038 8.994C14.5538 9.319 14.2808 9.54 14.2418 9.774H16.7898V10.814H12.7208V10.333C12.7208 9.28 13.5918 8.669 14.3588 8.227C15.0868 7.824 15.4378 7.629 15.4378 7.226C15.4378 6.888 15.2038 6.68 14.8268 6.68C14.3848 6.68 14.1248 7.018 14.1118 7.421H12.7468C12.8248 6.42 13.5528 5.627 14.8398 5.627C15.9448 5.627 16.7768 6.251 16.7768 7.252Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n)\n","'use client'\n\nimport { $isTableSelection } from '@lexical/table'\nimport { $isRangeSelection, FORMAT_TEXT_COMMAND } from 'lexical'\n\nimport type { ToolbarGroup } from '../../toolbars/types.js'\n\nimport { UnderlineIcon } from '../../../lexical/ui/icons/Underline/index.js'\nimport { createClientFeature } from '../../../utilities/createClientFeature.js'\nimport { toolbarFormatGroupWithItems } from '../shared/toolbarFormatGroup.js'\n\nconst toolbarGroups: ToolbarGroup[] = [\n  toolbarFormatGroupWithItems([\n    {\n      ChildComponent: UnderlineIcon,\n      isActive: ({ selection }) => {\n        if ($isRangeSelection(selection) || $isTableSelection(selection)) {\n          return selection.hasFormat('underline')\n        }\n        return false\n      },\n      key: 'underline',\n      onSelect: ({ editor }) => {\n        editor.dispatchCommand(FORMAT_TEXT_COMMAND, 'underline')\n      },\n      order: 3,\n    },\n  ]),\n]\n\nexport const UnderlineFeatureClient = createClientFeature({\n  enableFormats: ['underline'],\n  toolbarFixed: {\n    groups: toolbarGroups,\n  },\n  toolbarInline: {\n    groups: toolbarGroups,\n  },\n})\n","'use client'\nimport React from 'react'\n\nexport const UnderlineIcon: React.FC = () => (\n  <svg\n    aria-hidden=\"true\"\n    className=\"icon\"\n    fill=\"currentColor\"\n    focusable=\"false\"\n    height=\"20\"\n    viewBox=\"0 0 20 20\"\n    width=\"20\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M13.9656 11.256C13.9656 13.791 12.5096 15.156 10.0006 15.156C7.50461 15.156 6.03561 13.791 6.03561 11.23V5.718H7.76461V11.243C7.76461 12.868 8.50561 13.778 10.0006 13.778C11.4956 13.778 12.2496 12.868 12.2496 11.243V5.718H13.9656V11.256Z\"\n      fill=\"currentColor\"\n    />\n    <path d=\"M5.09961 16.3H14.9016V16.95H5.09961V16.3Z\" fill=\"currentColor\" />\n  </svg>\n)\n","import type { StyleObject } from '../../../../features/textState/feature.server.js'\n\nfunction kebabToCamelCase(str: string): string {\n  return str.replace(/-([a-z])/g, (_, letter) => letter.toUpperCase())\n}\n\nexport const TextStateIcon: React.FC<{\n  css?: StyleObject\n}> = ({ css }) => {\n  const convertedCss = css\n    ? Object.fromEntries(Object.entries(css).map(([key, value]) => [kebabToCamelCase(key), value]))\n    : {}\n\n  return (\n    <span\n      style={{\n        ...convertedCss,\n        alignItems: 'center',\n        borderRadius: '4px',\n        display: 'flex',\n        fontSize: '16px',\n        height: '20px',\n        justifyContent: 'center',\n        width: '20px',\n      }}\n    >\n      A\n    </span>\n  )\n}\n","import type { LexicalEditor, StateConfig } from 'lexical'\n\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext'\nimport { $forEachSelectedTextNode } from '@lexical/selection'\nimport { $getNodeByKey, $getState, $setState, createState, TextNode } from 'lexical'\nimport { useEffect } from 'react'\n\nimport { type StateValues, type TextStateFeatureProps } from './feature.server.js'\n\nexport type StateMap = Map<\n  string,\n  {\n    stateConfig: StateConfig<string, string | undefined>\n    stateValues: StateValues\n  }\n>\n\nexport function registerTextStates(state: TextStateFeatureProps['state']) {\n  const stateMap: StateMap = new Map()\n\n  for (const stateKey in state) {\n    const stateValues = state[stateKey]!\n    const stateConfig = createState(stateKey, {\n      parse: (value) =>\n        typeof value === 'string' && Object.keys(stateValues).includes(value) ? value : undefined,\n    })\n    stateMap.set(stateKey, { stateConfig, stateValues })\n  }\n  return stateMap\n}\n\nexport function setTextState(\n  editor: LexicalEditor,\n  stateMap: StateMap,\n  stateKey: string,\n  value: string | undefined,\n) {\n  editor.update(() => {\n    $forEachSelectedTextNode((textNode) => {\n      const stateMapEntry = stateMap.get(stateKey)\n      if (!stateMapEntry) {\n        throw new Error(`State config for ${stateKey} not found`)\n      }\n      $setState(textNode, stateMapEntry.stateConfig, value)\n    })\n  })\n}\n\nexport function StatePlugin({ stateMap }: { stateMap: StateMap }) {\n  const [editor] = useLexicalComposerContext()\n\n  useEffect(() => {\n    return editor.registerMutationListener(TextNode, (mutatedNodes) => {\n      editor.getEditorState().read(() => {\n        for (const [nodeKey, mutation] of mutatedNodes) {\n          if (mutation === 'destroyed') {\n            continue\n          }\n          const node = $getNodeByKey(nodeKey)\n          const dom = editor.getElementByKey(nodeKey)\n          if (!node || !dom) {\n            continue\n          }\n\n          const mergedStyles: Record<string, string> = Object.create(null)\n          // Examples:\n          // stateKey: 'color'\n          // stateValue: 'bg-red'\n          stateMap.forEach((stateEntry, stateKey) => {\n            const stateValue = $getState(node, stateEntry.stateConfig)\n            if (!stateValue) {\n              // clear the previous dataset value for this key\n              delete dom.dataset[stateKey]\n              return\n            } // skip - nothing else to do\n\n            dom.dataset[stateKey] = stateValue\n\n            const css = stateEntry.stateValues[stateValue]?.css\n            if (css) {\n              // merge existing styles with the new ones\n              Object.assign(mergedStyles, css)\n            }\n          })\n\n          // wipe previous inline styles once, then set the merged ones\n          dom.style.cssText = ''\n          Object.assign(dom.style, mergedStyles)\n        }\n      })\n    })\n  }, [editor])\n\n  return null\n}\n","'use client'\n\nimport type { ToolbarDropdownGroup, ToolbarGroup } from '../toolbars/types.js'\nimport type { TextStateFeatureProps } from './feature.server.js'\n\nimport { TextStateIcon } from '../../lexical/ui/icons/TextState/index.js'\nimport { createClientFeature } from '../../utilities/createClientFeature.js'\nimport { registerTextStates, setTextState, type StateMap, StatePlugin } from './textState.js'\n\nconst toolbarGroups = (props: TextStateFeatureProps, stateMap: StateMap): ToolbarGroup[] => {\n  const items: ToolbarDropdownGroup['items'] = []\n\n  for (const stateKey in props.state) {\n    const key = props.state[stateKey]!\n    for (const stateValue in key) {\n      const meta = key[stateValue]!\n      items.push({\n        ChildComponent: () => <TextStateIcon css={meta.css} />,\n        key: stateValue,\n        label: meta.label,\n        onSelect: ({ editor }) => {\n          setTextState(editor, stateMap, stateKey, stateValue)\n        },\n      })\n    }\n  }\n\n  const clearStyle: ToolbarDropdownGroup['items'] = [\n    {\n      ChildComponent: () => <TextStateIcon />,\n      key: `clear-style`,\n      label: ({ i18n }) => i18n.t('lexical:textState:defaultStyle'),\n      onSelect: ({ editor }) => {\n        for (const stateKey in props.state) {\n          setTextState(editor, stateMap, stateKey, undefined)\n        }\n      },\n      order: 1,\n    },\n  ]\n\n  return [\n    {\n      type: 'dropdown',\n      ChildComponent: () => <TextStateIcon css={{ color: 'var(--theme-elevation-600)' }} />,\n      items: [...clearStyle, ...items],\n      key: 'textState',\n      order: 30,\n    },\n  ]\n}\n\nexport const TextStateFeatureClient = createClientFeature<TextStateFeatureProps>(({ props }) => {\n  const stateMap = registerTextStates(props.state)\n  return {\n    plugins: [\n      {\n        Component: () => StatePlugin({ stateMap }),\n        position: 'normal',\n      },\n    ],\n    toolbarFixed: {\n      groups: toolbarGroups(props, stateMap),\n    },\n    toolbarInline: {\n      groups: toolbarGroups(props, stateMap),\n    },\n  }\n})\n","'use client'\n\nimport type { HeadingTagType } from '@lexical/rich-text'\n\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext'\nimport { $createHeadingNode, $isHeadingNode, HeadingNode } from '@lexical/rich-text'\nimport { $setBlocksType } from '@lexical/selection'\nimport { $getSelection, $isRangeSelection } from 'lexical'\nimport { useEffect } from 'react'\n\nimport type { ToolbarGroup } from '../../toolbars/types.js'\nimport type { PluginComponent } from '../../typesClient.js'\nimport type { HeadingFeatureProps } from '../server/index.js'\n\nimport { H1Icon } from '../../../lexical/ui/icons/H1/index.js'\nimport { H2Icon } from '../../../lexical/ui/icons/H2/index.js'\nimport { H3Icon } from '../../../lexical/ui/icons/H3/index.js'\nimport { H4Icon } from '../../../lexical/ui/icons/H4/index.js'\nimport { H5Icon } from '../../../lexical/ui/icons/H5/index.js'\nimport { H6Icon } from '../../../lexical/ui/icons/H6/index.js'\nimport { createClientFeature } from '../../../utilities/createClientFeature.js'\nimport { slashMenuBasicGroupWithItems } from '../../shared/slashMenu/basicGroup.js'\nimport { toolbarTextDropdownGroupWithItems } from '../../shared/toolbar/textDropdownGroup.js'\nimport { MarkdownTransformer } from '../markdownTransformer.js'\n\nconst $setHeading = (headingSize: HeadingTagType) => {\n  const selection = $getSelection()\n  $setBlocksType(selection, () => $createHeadingNode(headingSize))\n}\n\nconst iconImports = {\n  h1: H1Icon,\n  h2: H2Icon,\n  h3: H3Icon,\n  h4: H4Icon,\n  h5: H5Icon,\n  h6: H6Icon,\n}\n\nexport const HeadingFeatureClient = createClientFeature<HeadingFeatureProps>(({ props }) => {\n  const { enabledHeadingSizes = ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'] } = props\n\n  const toolbarGroups: ToolbarGroup[] = [\n    toolbarTextDropdownGroupWithItems(\n      enabledHeadingSizes.map((headingSize, i) => {\n        return {\n          ChildComponent: iconImports[headingSize],\n          isActive: ({ selection }) => {\n            if (!$isRangeSelection(selection)) {\n              return false\n            }\n            for (const node of selection.getNodes()) {\n              if ($isHeadingNode(node) && node.getTag() === headingSize) {\n                continue\n              }\n\n              const parent = node.getParent()\n              if ($isHeadingNode(parent) && parent.getTag() === headingSize) {\n                continue\n              }\n\n              return false\n            }\n            return true\n          },\n          key: headingSize,\n          label: ({ i18n }) => {\n            return i18n.t('lexical:heading:label', { headingLevel: headingSize.charAt(1) })\n          },\n          onSelect: ({ editor }) => {\n            editor.update(() => {\n              $setHeading(headingSize)\n            })\n          },\n          order: i + 2,\n        }\n      }),\n    ),\n  ]\n\n  return {\n    markdownTransformers: [MarkdownTransformer(enabledHeadingSizes)],\n    nodes: [HeadingNode],\n    plugins: [\n      {\n        Component: HeadingPlugin,\n        position: 'normal',\n      },\n    ],\n    sanitizedClientFeatureProps: props,\n    slashMenu: {\n      groups: enabledHeadingSizes?.length\n        ? [\n            slashMenuBasicGroupWithItems(\n              enabledHeadingSizes.map((headingSize) => {\n                return {\n                  Icon: iconImports[headingSize],\n                  key: `heading-${headingSize.charAt(1)}`,\n                  keywords: ['heading', headingSize],\n                  label: ({ i18n }) => {\n                    return i18n.t('lexical:heading:label', {\n                      headingLevel: headingSize.charAt(1),\n                    })\n                  },\n                  onSelect: ({ editor }) => {\n                    editor.update(() => {\n                      $setHeading(headingSize)\n                    })\n                  },\n                }\n              }),\n            ),\n          ]\n        : [],\n    },\n    toolbarFixed: {\n      groups: enabledHeadingSizes?.length ? toolbarGroups : [],\n    },\n    toolbarInline: {\n      groups: enabledHeadingSizes?.length ? toolbarGroups : [],\n    },\n  }\n})\n\nconst HeadingPlugin: PluginComponent<HeadingFeatureProps> = ({ clientProps }) => {\n  const { enabledHeadingSizes = ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'] } = clientProps\n  const lowestAllowed = enabledHeadingSizes.at(-1)\n  const [editor] = useLexicalComposerContext()\n\n  useEffect(() => {\n    if (!lowestAllowed || enabledHeadingSizes.length === 6) {\n      return\n    }\n    return editor.registerNodeTransform(HeadingNode, (node) => {\n      if (!enabledHeadingSizes.includes(node.getTag())) {\n        node.setTag(lowestAllowed)\n      }\n    })\n  }, [editor, enabledHeadingSizes, lowestAllowed])\n\n  return null\n}\n","'use client'\nimport React from 'react'\n\nexport const H1Icon: React.FC = () => (\n  <svg\n    aria-hidden=\"true\"\n    className=\"icon\"\n    fill=\"none\"\n    focusable=\"false\"\n    height=\"20\"\n    viewBox=\"0 0 20 20\"\n    width=\"20\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M4.639 13.5V7.074H6.196V9.648H9.076V7.074H10.642V13.5H9.076V10.836H6.196V13.5H4.639ZM11.5656 9.045V8.019C12.6636 8.019 13.1316 7.731 13.2846 7.065H14.4006V13.5H12.8436V9.045H11.5656Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n)\n","'use client'\nimport React from 'react'\n\nexport const H2Icon: React.FC = () => (\n  <svg\n    aria-hidden=\"true\"\n    className=\"icon\"\n    fill=\"none\"\n    focusable=\"false\"\n    height=\"20\"\n    viewBox=\"0 0 20 20\"\n    width=\"20\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M4.139 13.5V7.074H5.696V9.648H8.576V7.074H10.142V13.5H8.576V10.836H5.696V13.5H4.139ZM15.9796 8.973C15.9796 10.116 15.1696 10.656 14.0356 11.232C13.2256 11.646 12.8206 11.943 12.7846 12.294H15.9886V13.5H11.0566V12.951C11.0566 11.601 12.1636 10.845 13.1176 10.287C14.0356 9.756 14.5126 9.486 14.5126 8.946C14.5126 8.46 14.2156 8.145 13.6306 8.145C13.0186 8.145 12.6586 8.613 12.6226 9.198H11.1196C11.2186 7.947 12.1006 6.966 13.6396 6.966C15.0346 6.966 15.9796 7.785 15.9796 8.973Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n)\n","'use client'\nimport React from 'react'\n\nexport const H3Icon: React.FC = () => (\n  <svg\n    aria-hidden=\"true\"\n    className=\"icon\"\n    fill=\"none\"\n    focusable=\"false\"\n    height=\"20\"\n    viewBox=\"0 0 20 20\"\n    width=\"20\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M4.139 13.5V7.074H5.696V9.648H8.576V7.074H10.142V13.5H8.576V10.836H5.696V13.5H4.139ZM16.1146 11.745C16.1146 12.744 15.2236 13.608 13.6126 13.608C12.0736 13.608 11.0926 12.762 10.9846 11.547H12.4696C12.5146 12.114 13.0006 12.456 13.6126 12.456C14.2876 12.456 14.6746 12.132 14.6746 11.619C14.6746 11.061 14.2426 10.836 13.6216 10.836H12.9826V9.738H13.6036C14.1526 9.738 14.5486 9.486 14.5486 8.937C14.5486 8.46 14.2156 8.127 13.6486 8.127C13.0366 8.127 12.6586 8.514 12.6226 9.045H11.1916C11.2726 7.929 12.1276 6.966 13.6666 6.966C15.1876 6.966 15.9706 7.848 15.9706 8.865C15.9706 9.603 15.5026 10.143 14.8186 10.269C15.6196 10.404 16.1146 10.971 16.1146 11.745Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n)\n","'use client'\nimport React from 'react'\n\nexport const H4Icon: React.FC = () => (\n  <svg\n    aria-hidden=\"true\"\n    className=\"icon\"\n    fill=\"none\"\n    focusable=\"false\"\n    height=\"20\"\n    viewBox=\"0 0 20 20\"\n    width=\"20\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M3.639 13.5V7.074H5.196V9.648H8.076V7.074H9.642V13.5H8.076V10.836H5.196V13.5H3.639ZM15.1736 7.074V10.854H16.3706V12.033H15.1736V13.5H13.6796V12.033H10.5116V10.845L13.4996 7.074H15.1736ZM13.6796 8.46L11.8256 10.854H13.6796V8.46Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n)\n","'use client'\nimport React from 'react'\n\nexport const H5Icon: React.FC = () => (\n  <svg\n    aria-hidden=\"true\"\n    className=\"icon\"\n    fill=\"none\"\n    focusable=\"false\"\n    height=\"20\"\n    viewBox=\"0 0 20 20\"\n    width=\"20\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M3.639 13.5V7.074H5.196V9.648H8.076V7.074H9.642V13.5H8.076V10.836H5.196V13.5H3.639ZM13.1576 10.269C12.6896 10.269 12.3746 10.494 12.2216 10.737H10.8176L11.1956 7.074H15.2546V8.28H12.3206L12.1856 9.549C12.4016 9.351 12.8516 9.126 13.4636 9.126C14.7866 9.126 15.6596 10.053 15.6596 11.358C15.6596 12.609 14.7326 13.608 13.1756 13.608C11.5826 13.608 10.6556 12.753 10.5566 11.511H12.1136C12.1586 12.06 12.5456 12.465 13.1576 12.465C13.8236 12.465 14.1746 11.97 14.1746 11.376C14.1746 10.764 13.8416 10.269 13.1576 10.269Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n)\n","'use client'\nimport React from 'react'\n\nexport const H6Icon: React.FC = () => (\n  <svg\n    aria-hidden=\"true\"\n    className=\"icon\"\n    fill=\"none\"\n    focusable=\"false\"\n    height=\"20\"\n    viewBox=\"0 0 20 20\"\n    width=\"20\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M3.639 13.5V7.074H5.196V9.648H8.076V7.074H9.642V13.5H8.076V10.836H5.196V13.5H3.639ZM13.3646 8.127C12.5456 8.127 12.0416 8.937 12.0416 9.999C12.3296 9.54 12.8246 9.207 13.5536 9.207C14.8586 9.207 15.8036 10.134 15.8036 11.376C15.8036 12.645 14.8226 13.608 13.3196 13.608C11.7266 13.608 10.6196 12.393 10.6196 10.395C10.6196 8.316 11.7716 6.966 13.4186 6.966C14.7056 6.966 15.5786 7.749 15.7316 8.829H14.3186C14.2016 8.415 13.9226 8.127 13.3646 8.127ZM13.3106 12.51C13.9586 12.51 14.3816 12.042 14.3816 11.385C14.3816 10.737 13.9586 10.278 13.3106 10.278C12.6536 10.278 12.2126 10.737 12.2126 11.385C12.2126 12.042 12.6536 12.51 13.3106 12.51Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n)\n","import type { HeadingTagType } from '@lexical/rich-text'\n\nimport { $createHeadingNode, $isHeadingNode, HeadingNode } from '@lexical/rich-text'\n\nimport type { ElementTransformer } from '../../packages/@lexical/markdown/MarkdownTransformers.js'\n\nimport { createBlockNode } from '../../lexical/utils/markdown/createBlockNode.js'\n\nexport const MarkdownTransformer: (enabledHeadingSizes: HeadingTagType[]) => ElementTransformer = (\n  enabledHeadingSizes,\n) => {\n  // Convert enabledHeadingSizes to a list of numbers (1 for h1, 2 for h2, etc.)\n  const enabledSizes = enabledHeadingSizes.map((tag) => Number(tag.slice(1)))\n\n  // Create a regex pattern that matches any of the enabled sizes\n  const pattern = `^(${enabledSizes.map((size) => `#{${size}}`).join('|')})\\\\s`\n  const regExp = new RegExp(pattern)\n\n  return {\n    type: 'element',\n    dependencies: [HeadingNode],\n    export: (node, exportChildren) => {\n      if (!$isHeadingNode(node)) {\n        return null\n      }\n      const level = Number(node.getTag().slice(1))\n      return '#'.repeat(level) + ' ' + exportChildren(node)\n    },\n    regExp,\n    replace: createBlockNode((match) => {\n      const tag = ('h' + match[1]?.length) as HeadingTagType\n      return $createHeadingNode(tag)\n    }),\n  }\n}\n","import type { ElementNode } from 'lexical'\n\nimport type { ElementTransformer } from '../../../packages/@lexical/markdown/MarkdownTransformers.js'\n\nexport const createBlockNode = (\n  createNode: (match: Array<string>) => ElementNode,\n): ElementTransformer['replace'] => {\n  return (parentNode, children, match) => {\n    const node = createNode(match)\n    if (node) {\n      node.append(...children)\n      parentNode.replace(node)\n      node.select(0, 0)\n    }\n  }\n}\n","'use client'\n\nimport { $isNodeSelection } from 'lexical'\n\nimport { HorizontalRuleIcon } from '../../../lexical/ui/icons/HorizontalRule/index.js'\nimport { createClientFeature } from '../../../utilities/createClientFeature.js'\nimport { slashMenuBasicGroupWithItems } from '../../shared/slashMenu/basicGroup.js'\nimport { toolbarAddDropdownGroupWithItems } from '../../shared/toolbar/addDropdownGroup.js'\nimport { INSERT_HORIZONTAL_RULE_COMMAND } from '../server/nodes/HorizontalRuleNode.js'\nimport { MarkdownTransformer } from './markdownTransformer.js'\nimport { $isHorizontalRuleNode, HorizontalRuleNode } from './nodes/HorizontalRuleNode.js'\nimport { HorizontalRulePlugin } from './plugin/index.js'\n\nexport const HorizontalRuleFeatureClient = createClientFeature({\n  markdownTransformers: [MarkdownTransformer],\n  nodes: [HorizontalRuleNode],\n  plugins: [\n    {\n      Component: HorizontalRulePlugin,\n      position: 'normal',\n    },\n  ],\n  slashMenu: {\n    groups: [\n      slashMenuBasicGroupWithItems([\n        {\n          Icon: HorizontalRuleIcon,\n          key: 'horizontalRule',\n          keywords: ['hr', 'horizontal rule', 'line', 'separator'],\n          label: ({ i18n }) => {\n            return i18n.t('lexical:horizontalRule:label')\n          },\n\n          onSelect: ({ editor }) => {\n            editor.dispatchCommand(INSERT_HORIZONTAL_RULE_COMMAND, undefined)\n          },\n        },\n      ]),\n    ],\n  },\n  toolbarFixed: {\n    groups: [\n      toolbarAddDropdownGroupWithItems([\n        {\n          ChildComponent: HorizontalRuleIcon,\n          isActive: ({ selection }) => {\n            if (!$isNodeSelection(selection) || !selection.getNodes().length) {\n              return false\n            }\n\n            const firstNode = selection.getNodes()[0]\n            return $isHorizontalRuleNode(firstNode)\n          },\n          key: 'horizontalRule',\n          label: ({ i18n }) => {\n            return i18n.t('lexical:horizontalRule:label')\n          },\n          onSelect: ({ editor }) => {\n            editor.dispatchCommand(INSERT_HORIZONTAL_RULE_COMMAND, undefined)\n          },\n        },\n      ]),\n    ],\n  },\n})\n","'use client'\nimport React from 'react'\n\nexport const HorizontalRuleIcon: React.FC = () => (\n  <svg\n    aria-hidden=\"true\"\n    className=\"icon\"\n    fill=\"none\"\n    focusable=\"false\"\n    height=\"20\"\n    viewBox=\"0 0 20 20\"\n    width=\"20\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <rect fill=\"currentColor\" height=\"1\" width=\"12\" x=\"4\" y=\"9.5\" />\n  </svg>\n)\n","'use client'\nimport React from 'react'\n\nexport const AddIcon: React.FC = () => (\n  <svg fill=\"none\" height=\"20\" viewBox=\"0 0 20 20\" width=\"20\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M5 10h10\" stroke=\"currentColor\" />\n    <path d=\"M10 15V5\" stroke=\"currentColor\" />\n  </svg>\n)\n","import type { ToolbarGroup, ToolbarGroupItem } from '../../toolbars/types.js'\n\nimport { AddIcon } from '../../../lexical/ui/icons/Add/index.js'\n\nexport const toolbarAddDropdownGroupWithItems = (items: ToolbarGroupItem[]): ToolbarGroup => {\n  return {\n    type: 'dropdown',\n    ChildComponent: AddIcon,\n    items,\n    key: 'add',\n    order: 10,\n  }\n}\n","import type {\n  DOMConversionMap,\n  DOMConversionOutput,\n  DOMExportOutput,\n  EditorConfig,\n  LexicalCommand,\n  LexicalNode,\n  SerializedLexicalNode,\n} from 'lexical'\nimport type * as React from 'react'\n\nimport { addClassNamesToElement } from '@lexical/utils'\nimport { $applyNodeReplacement, createCommand, DecoratorNode } from 'lexical'\n\nimport type { StronglyTypedLeafNode } from '../../../../nodeTypes.js'\n\n/**\n * Serialized representation of a horizontal rule node. Serialized = converted to JSON. This is what is stored in the database / in the lexical editor state.\n */\nexport type SerializedHorizontalRuleNode = StronglyTypedLeafNode<\n  SerializedLexicalNode,\n  'horizontalrule'\n>\n\nexport const INSERT_HORIZONTAL_RULE_COMMAND: LexicalCommand<void> = createCommand(\n  'INSERT_HORIZONTAL_RULE_COMMAND',\n)\n\n/**\n * This node is a DecoratorNode. DecoratorNodes allow you to render React components in the editor.\n *\n * They need both createDom and decorate functions. createDom => outside of the html. decorate => React Component inside of the html.\n *\n * If we used DecoratorBlockNode instead, we would only need a decorate method\n */\nexport class HorizontalRuleServerNode extends DecoratorNode<null | React.ReactElement> {\n  static override clone(node: HorizontalRuleServerNode): HorizontalRuleServerNode {\n    return new this(node.__key)\n  }\n\n  static override getType(): string {\n    return 'horizontalrule'\n  }\n\n  /**\n   * Defines what happens if you copy an hr element from another page and paste it into the lexical editor\n   *\n   * This also determines the behavior of lexical's internal HTML -> Lexical converter\n   */\n  static override importDOM(): DOMConversionMap | null {\n    return {\n      hr: () => ({\n        conversion: $convertHorizontalRuleElement,\n        priority: 0,\n      }),\n    }\n  }\n\n  /**\n   * The data for this node is stored serialized as JSON. This is the \"load function\" of that node: it takes the saved data and converts it into a node.\n   */\n  static override importJSON(\n    serializedNode: SerializedHorizontalRuleNode,\n  ): HorizontalRuleServerNode {\n    return $createHorizontalRuleServerNode()\n  }\n\n  /**\n   * Determines how the hr element is rendered in the lexical editor. This is only the \"initial\" / \"outer\" HTML element.\n   */\n  override createDOM(config: EditorConfig): HTMLElement {\n    const element = document.createElement('hr')\n    addClassNamesToElement(element, config.theme.hr)\n    return element\n  }\n\n  override decorate(): null | React.ReactElement {\n    return null\n  }\n\n  /**\n   * Opposite of importDOM, this function defines what happens when you copy an hr element from the lexical editor and paste it into another page.\n   *\n   * This also determines the behavior of lexical's internal Lexical -> HTML converter\n   */\n  override exportDOM(): DOMExportOutput {\n    return { element: document.createElement('hr') }\n  }\n  /**\n   * Opposite of importJSON. This determines what data is saved in the database / in the lexical editor state.\n   */\n  override exportJSON(): SerializedLexicalNode {\n    return {\n      type: 'horizontalrule',\n      version: 1,\n    }\n  }\n\n  override getTextContent(): string {\n    return '\\n'\n  }\n\n  override isInline(): false {\n    return false\n  }\n\n  override updateDOM(): boolean {\n    return false\n  }\n}\n\nfunction $convertHorizontalRuleElement(): DOMConversionOutput {\n  return { node: $createHorizontalRuleServerNode() }\n}\n\nexport function $createHorizontalRuleServerNode(): HorizontalRuleServerNode {\n  return $applyNodeReplacement(new HorizontalRuleServerNode())\n}\n\nexport function $isHorizontalRuleServerNode(\n  node: LexicalNode | null | undefined,\n): node is HorizontalRuleServerNode {\n  return node instanceof HorizontalRuleServerNode\n}\n","'use client'\nimport type { DOMConversionOutput, LexicalNode, SerializedLexicalNode } from 'lexical'\n\nimport { $applyNodeReplacement } from 'lexical'\nimport * as React from 'react'\n\nimport type { SerializedHorizontalRuleNode } from '../../server/nodes/HorizontalRuleNode.js'\n\nimport { HorizontalRuleServerNode } from '../../server/nodes/HorizontalRuleNode.js'\n\nexport class HorizontalRuleNode extends HorizontalRuleServerNode {\n  static override clone(node: HorizontalRuleServerNode): HorizontalRuleServerNode {\n    return super.clone(node)\n  }\n\n  static override getType(): string {\n    return super.getType()\n  }\n\n  /**\n   * The data for this node is stored serialized as JSON. This is the \"load function\" of that node: it takes the saved data and converts it into a node.\n   */\n  static override importJSON(serializedNode: SerializedHorizontalRuleNode): HorizontalRuleNode {\n    return $createHorizontalRuleNode()\n  }\n\n  /**\n   * Allows you to render a React component within whatever createDOM returns.\n   */\n  override decorate() {\n    return null\n  }\n\n  override exportJSON(): SerializedLexicalNode {\n    return super.exportJSON()\n  }\n}\n\nfunction $convertHorizontalRuleElement(): DOMConversionOutput {\n  return { node: $createHorizontalRuleNode() }\n}\n\nexport function $createHorizontalRuleNode(): HorizontalRuleNode {\n  return $applyNodeReplacement(new HorizontalRuleNode())\n}\n\nexport function $isHorizontalRuleNode(\n  node: LexicalNode | null | undefined,\n): node is HorizontalRuleNode {\n  return node instanceof HorizontalRuleNode\n}\n","import type { ElementTransformer } from '../../../packages/@lexical/markdown/MarkdownTransformers.js'\n\nimport {\n  $createHorizontalRuleNode,\n  $isHorizontalRuleNode,\n  HorizontalRuleNode,\n} from './nodes/HorizontalRuleNode.js'\n\nexport const MarkdownTransformer: ElementTransformer = {\n  type: 'element',\n  dependencies: [HorizontalRuleNode],\n  export: (node, exportChildren) => {\n    if (!$isHorizontalRuleNode(node)) {\n      return null\n    }\n    return '---'\n  },\n  // match ---\n  regExp: /^---\\s*$/,\n  replace: (parentNode) => {\n    const node = $createHorizontalRuleNode()\n    if (node) {\n      parentNode.replace(node)\n    }\n  },\n}\n","'use client'\n\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext.js'\nimport { $insertNodeToNearestRoot } from '@lexical/utils'\nimport { $getSelection, $isRangeSelection, COMMAND_PRIORITY_EDITOR } from 'lexical'\nimport { useEffect } from 'react'\n\nimport type { PluginComponent } from '../../../typesClient.js'\n\nimport { INSERT_HORIZONTAL_RULE_COMMAND } from '../../server/nodes/HorizontalRuleNode.js'\nimport { $createHorizontalRuleNode } from '../nodes/HorizontalRuleNode.js'\nimport './index.scss'\n\n/**\n * Registers the INSERT_HORIZONTAL_RULE_COMMAND lexical command and defines the behavior for when it is called.\n */\nexport const HorizontalRulePlugin: PluginComponent<undefined> = () => {\n  const [editor] = useLexicalComposerContext()\n\n  useEffect(() => {\n    return editor.registerCommand(\n      INSERT_HORIZONTAL_RULE_COMMAND,\n      (type) => {\n        const selection = $getSelection()\n\n        if (!$isRangeSelection(selection)) {\n          return false\n        }\n\n        const focusNode = selection.focus.getNode()\n\n        if (focusNode !== null) {\n          const horizontalRuleNode = $createHorizontalRuleNode()\n          $insertNodeToNearestRoot(horizontalRuleNode)\n        }\n\n        return true\n      },\n      COMMAND_PRIORITY_EDITOR,\n    )\n  }, [editor])\n\n  return null\n}\n","'use client'\n\nimport type { ElementNode, LexicalNode } from 'lexical'\n\nimport { $findMatchingParent } from '@lexical/utils'\nimport { $isElementNode, INDENT_CONTENT_COMMAND, OUTDENT_CONTENT_COMMAND } from 'lexical'\n\nimport type { ToolbarGroup } from '../../toolbars/types.js'\n\nimport { IndentDecreaseIcon } from '../../../lexical/ui/icons/IndentDecrease/index.js'\nimport { IndentIncreaseIcon } from '../../../lexical/ui/icons/IndentIncrease/index.js'\nimport { createClientFeature } from '../../../utilities/createClientFeature.js'\nimport { type IndentFeatureProps } from '../server/index.js'\nimport { IndentPlugin } from './IndentPlugin.js'\nimport { toolbarIndentGroupWithItems } from './toolbarIndentGroup.js'\n\nconst toolbarGroups = ({ disabledNodes }: IndentFeatureProps): ToolbarGroup[] => [\n  toolbarIndentGroupWithItems([\n    {\n      ChildComponent: IndentDecreaseIcon,\n      isActive: () => false,\n      isEnabled: ({ selection }) => {\n        const nodes = selection?.getNodes() ?? []\n\n        const isOutdentable = (node: LexicalNode) => {\n          return isIndentable(node) && node.getIndent() > 0\n        }\n\n        return nodes.some((node) => {\n          return isOutdentable(node) || Boolean($findMatchingParent(node, isOutdentable))\n        })\n      },\n      key: 'indentDecrease',\n      label: ({ i18n }) => {\n        return i18n.t('lexical:indent:decreaseLabel')\n      },\n      onSelect: ({ editor }) => {\n        editor.dispatchCommand(OUTDENT_CONTENT_COMMAND, undefined)\n      },\n      order: 1,\n    },\n    {\n      ChildComponent: IndentIncreaseIcon,\n      isActive: () => false,\n      isEnabled: ({ selection }) => {\n        const nodes = selection?.getNodes() ?? []\n\n        const isIndentableAndNotDisabled = (node: LexicalNode) => {\n          return isIndentable(node) && !(disabledNodes ?? []).includes(node.getType())\n        }\n\n        return nodes.some((node) => {\n          return (\n            isIndentableAndNotDisabled(node) ||\n            Boolean($findMatchingParent(node, isIndentableAndNotDisabled))\n          )\n        })\n      },\n      key: 'indentIncrease',\n      label: ({ i18n }) => {\n        return i18n.t('lexical:indent:increaseLabel')\n      },\n      onSelect: ({ editor }) => {\n        editor.dispatchCommand(INDENT_CONTENT_COMMAND, undefined)\n      },\n      order: 2,\n    },\n  ]),\n]\n\nexport const IndentFeatureClient = createClientFeature<IndentFeatureProps>(({ props }) => {\n  const disabledNodes = props.disabledNodes ?? []\n  return {\n    plugins: [\n      {\n        Component: IndentPlugin,\n        position: 'normal',\n      },\n    ],\n    sanitizedClientFeatureProps: props,\n    toolbarFixed: {\n      groups: toolbarGroups({ disabledNodes }),\n    },\n    toolbarInline: {\n      groups: toolbarGroups({ disabledNodes }),\n    },\n  }\n})\n\nconst isIndentable = (node: LexicalNode): node is ElementNode =>\n  $isElementNode(node) && node.canIndent()\n","'use client'\nimport React from 'react'\n\nexport const IndentDecreaseIcon: React.FC = () => (\n  <svg\n    aria-hidden=\"true\"\n    className=\"icon\"\n    fill=\"none\"\n    focusable=\"false\"\n    height=\"20\"\n    viewBox=\"0 0 20 20\"\n    width=\"20\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path d=\"M2.5 5H10.5\" stroke=\"currentColor\" strokeWidth=\"1.5\" />\n    <path d=\"M2.5 10H10.5\" stroke=\"currentColor\" strokeWidth=\"1.5\" />\n    <path d=\"M2.5 15H17.5\" stroke=\"currentColor\" strokeWidth=\"1.5\" />\n    <path d=\"M12.25 7.25L17.25 3.75V10.75L12.25 7.25Z\" fill=\"currentColor\" />\n  </svg>\n)\n","'use client'\nimport React from 'react'\n\nexport const IndentIncreaseIcon: React.FC = () => (\n  <svg\n    aria-hidden=\"true\"\n    className=\"icon\"\n    fill=\"none\"\n    focusable=\"false\"\n    height=\"20\"\n    viewBox=\"0 0 20 20\"\n    width=\"20\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path d=\"M17.5 5H9.5\" stroke=\"currentColor\" strokeWidth=\"1.5\" />\n    <path d=\"M17.5 10H9.5\" stroke=\"currentColor\" strokeWidth=\"1.5\" />\n    <path d=\"M17.5 15H2.5\" stroke=\"currentColor\" strokeWidth=\"1.5\" />\n    <path d=\"M7.75 7.25L2.75 3.75V10.75L7.75 7.25Z\" fill=\"currentColor\" />\n  </svg>\n)\n","import type { ElementNode } from 'lexical'\n\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext'\nimport { TabIndentationPlugin } from '@lexical/react/LexicalTabIndentationPlugin'\nimport { $findMatchingParent, mergeRegister } from '@lexical/utils'\nimport {\n  $getSelection,\n  $isElementNode,\n  $isRangeSelection,\n  COMMAND_PRIORITY_LOW,\n  INDENT_CONTENT_COMMAND,\n  KEY_TAB_COMMAND,\n  OUTDENT_CONTENT_COMMAND,\n  TabNode,\n} from 'lexical'\nimport { useEffect } from 'react'\n\nimport type { PluginComponent } from '../../typesClient.js'\nimport type { IndentFeatureProps } from '../server/index.js'\n\nexport const IndentPlugin: PluginComponent<IndentFeatureProps> = ({ clientProps }) => {\n  const [editor] = useLexicalComposerContext()\n  const { disabledNodes, disableTabNode } = clientProps\n\n  useEffect(() => {\n    if (!editor || !disabledNodes?.length) {\n      return\n    }\n    return mergeRegister(\n      editor.registerCommand(\n        INDENT_CONTENT_COMMAND,\n        () => {\n          return $handleIndentAndOutdent((block) => {\n            if (!disabledNodes.includes(block.getType())) {\n              const indent = block.getIndent()\n              block.setIndent(indent + 1)\n            }\n          })\n        },\n        COMMAND_PRIORITY_LOW,\n      ),\n      // If we disable indenting for certain nodes, we need to ensure that these are not indented,\n      // if they get transformed from an indented state (e.g. an indented list node gets transformed into a\n      // paragraph node for which indenting is disabled).\n      editor.registerUpdateListener(({ dirtyElements, editorState }) => {\n        editor.update(() => {\n          for (const [nodeKey] of dirtyElements) {\n            const node = editorState._nodeMap.get(nodeKey)\n            if ($isElementNode(node) && disabledNodes.includes(node.getType())) {\n              const currentIndent = node.getIndent()\n              if (currentIndent > 0) {\n                node.setIndent(0)\n              }\n            }\n          }\n        })\n      }),\n    )\n  }, [editor, disabledNodes])\n\n  useEffect(() => {\n    if (!editor || !disableTabNode) {\n      return\n    }\n    return mergeRegister(\n      // This is so that when you press Tab in the middle of a paragraph,\n      // it indents the paragraph, instead of inserting a TabNode.\n      editor.registerCommand<KeyboardEvent>(\n        KEY_TAB_COMMAND,\n        (event) => {\n          event.preventDefault()\n          return editor.dispatchCommand(\n            event.shiftKey ? OUTDENT_CONTENT_COMMAND : INDENT_CONTENT_COMMAND,\n            undefined,\n          )\n        },\n        COMMAND_PRIORITY_LOW,\n      ),\n      // Tab isn't the only way to insert a TabNode. We have to make sure\n      // it doesn't happen, for example, when pasting from the clipboard.\n      editor.registerNodeTransform(TabNode, (node) => {\n        node.remove()\n      }),\n    )\n  }, [editor, disableTabNode])\n\n  return <TabIndentationPlugin />\n}\n\nfunction $handleIndentAndOutdent(indentOrOutdent: (block: ElementNode) => void): boolean {\n  const selection = $getSelection()\n  if (!$isRangeSelection(selection)) {\n    return false\n  }\n  const alreadyHandled = new Set()\n  const nodes = selection.getNodes()\n  for (let i = 0; i < nodes.length; i++) {\n    const node = nodes[i]!\n    const key = node.getKey()\n    if (alreadyHandled.has(key)) {\n      continue\n    }\n    const parentBlock = $findMatchingParent(\n      node,\n      (parentNode): parentNode is ElementNode =>\n        $isElementNode(parentNode) && !parentNode.isInline(),\n    )\n    if (parentBlock === null) {\n      continue\n    }\n    const parentKey = parentBlock.getKey()\n    if (parentBlock.canIndent() && !alreadyHandled.has(parentKey)) {\n      alreadyHandled.add(parentKey)\n      indentOrOutdent(parentBlock)\n    }\n  }\n  return alreadyHandled.size > 0\n}\n","'use client'\nimport type { ToolbarGroup, ToolbarGroupItem } from '../../toolbars/types.js'\n\nexport const toolbarIndentGroupWithItems = (items: ToolbarGroupItem[]): ToolbarGroup => {\n  return {\n    type: 'buttons',\n    items,\n    key: 'indent',\n    order: 35,\n  }\n}\n","'use client'\n\nimport type { Klass, LexicalNode } from 'lexical'\n\nimport { $findMatchingParent } from '@lexical/utils'\nimport { $getSelection, $isRangeSelection } from 'lexical'\n\nimport type { ToolbarGroup } from '../../toolbars/types.js'\nimport type { ClientFeature } from '../../typesClient.js'\nimport type { LinkFields } from '../nodes/types.js'\nimport type { ExclusiveLinkCollectionsProps } from '../server/index.js'\n\nimport { LinkIcon } from '../../../lexical/ui/icons/Link/index.js'\nimport { getSelectedNode } from '../../../lexical/utils/getSelectedNode.js'\nimport { createClientFeature } from '../../../utilities/createClientFeature.js'\nimport { toolbarFeatureButtonsGroupWithItems } from '../../shared/toolbar/featureButtonsGroup.js'\nimport { LinkMarkdownTransformer } from '../markdownTransformer.js'\nimport { AutoLinkNode } from '../nodes/AutoLinkNode.js'\nimport { $isLinkNode, LinkNode, TOGGLE_LINK_COMMAND } from '../nodes/LinkNode.js'\nimport { AutoLinkPlugin } from './plugins/autoLink/index.js'\nimport { ClickableLinkPlugin } from './plugins/clickableLink/index.js'\nimport { FloatingLinkEditorPlugin } from './plugins/floatingLinkEditor/index.js'\nimport { TOGGLE_LINK_WITH_MODAL_COMMAND } from './plugins/floatingLinkEditor/LinkEditor/commands.js'\nimport { LinkPlugin } from './plugins/link/index.js'\n\nexport type ClientProps = {\n  defaultLinkType?: string\n  defaultLinkURL?: string\n  disableAutoLinks?: 'creationOnly' | true\n} & ExclusiveLinkCollectionsProps\n\nconst toolbarGroups: ToolbarGroup[] = [\n  toolbarFeatureButtonsGroupWithItems([\n    {\n      ChildComponent: LinkIcon,\n      isActive: ({ selection }) => {\n        if ($isRangeSelection(selection)) {\n          const selectedNode = getSelectedNode(selection)\n          const linkParent = $findMatchingParent(selectedNode, $isLinkNode)\n          return linkParent != null\n        }\n        return false\n      },\n      isEnabled: ({ selection }) => {\n        return !!($isRangeSelection(selection) && $getSelection()?.getTextContent()?.length)\n      },\n      key: 'link',\n      label: ({ i18n }) => {\n        return i18n.t('lexical:link:label')\n      },\n      onSelect: ({ editor, isActive }) => {\n        if (!isActive) {\n          let selectedText: string | undefined\n          let selectedNodes: LexicalNode[] = []\n          editor.getEditorState().read(() => {\n            selectedText = $getSelection()?.getTextContent()\n            // We need to selected nodes here before the drawer opens, as clicking around in the drawer may change the original selection\n            selectedNodes = $getSelection()?.getNodes() ?? []\n          })\n\n          if (!selectedText?.length) {\n            return\n          }\n\n          const linkFields: Partial<LinkFields> = {\n            doc: null,\n          }\n\n          editor.dispatchCommand(TOGGLE_LINK_WITH_MODAL_COMMAND, {\n            fields: linkFields,\n            selectedNodes,\n            text: selectedText,\n          })\n        } else {\n          // remove link\n          editor.dispatchCommand(TOGGLE_LINK_COMMAND, null)\n        }\n      },\n      order: 1,\n    },\n  ]),\n]\n\nexport const LinkFeatureClient = createClientFeature<ClientProps>(({ props }) => ({\n  markdownTransformers: [LinkMarkdownTransformer],\n  nodes: [LinkNode, props?.disableAutoLinks === true ? null : AutoLinkNode].filter(\n    Boolean,\n  ) as Array<Klass<LexicalNode>>,\n  plugins: [\n    {\n      Component: LinkPlugin,\n      position: 'normal',\n    },\n    props?.disableAutoLinks === true || props?.disableAutoLinks === 'creationOnly'\n      ? null\n      : {\n          Component: AutoLinkPlugin,\n          position: 'normal',\n        },\n    {\n      Component: ClickableLinkPlugin,\n      position: 'normal',\n    },\n    {\n      Component: FloatingLinkEditorPlugin,\n      position: 'floatingAnchorElem',\n    },\n  ].filter(Boolean) as ClientFeature<ClientProps>['plugins'],\n  sanitizedClientFeatureProps: props,\n  toolbarFixed: {\n    groups: toolbarGroups,\n  },\n  toolbarInline: {\n    groups: toolbarGroups,\n  },\n}))\n","'use client'\nimport React from 'react'\n\nexport const LinkIcon: React.FC = () => (\n  <svg\n    aria-hidden=\"true\"\n    className=\"icon\"\n    fill=\"none\"\n    height=\"20\"\n    viewBox=\"0 0 20 20\"\n    width=\"20\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M8.5 11.5L11.5 8.5M8.5 7L9.625 5.875C10.868 4.633 12.882 4.633 14.125 5.875C15.368 7.118 15.368 9.133 14.125 10.375L13 11.5M7 8.5L5.746 9.754C4.56 10.94 4.519 12.85 5.652 14.087C6.814 15.354 8.78 15.449 10.058 14.298L11.5 13\"\n      stroke=\"currentColor\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    />\n  </svg>\n)\n","'use client'\nimport type { ElementNode, RangeSelection, TextNode } from 'lexical'\n\nimport { $isAtNodeEnd } from '@lexical/selection'\n\nexport function getSelectedNode(selection: RangeSelection): ElementNode | TextNode {\n  const { anchor } = selection\n  const { focus } = selection\n  const anchorNode = selection.anchor.getNode()\n  const focusNode = selection.focus.getNode()\n  if (anchorNode === focusNode) {\n    return anchorNode\n  }\n  const isBackward = selection.isBackward()\n  if (isBackward) {\n    return $isAtNodeEnd(focus) ? anchorNode : focusNode\n  }\n  return $isAtNodeEnd(anchor) ? anchorNode : focusNode\n}\n","import type { ToolbarGroup, ToolbarGroupItem } from '../../toolbars/types.js'\n\nexport const toolbarFeatureButtonsGroupWithItems = (items: ToolbarGroupItem[]): ToolbarGroup => {\n  return {\n    type: 'buttons',\n    items,\n    key: 'features',\n    order: 50,\n  }\n}\n","/**\n * Code taken from https://github.com/facebook/lexical/blob/main/packages/lexical-markdown/src/MarkdownTransformers.ts#L357\n */\n\n// Order of text transformers matters:\n//\n// - code should go first as it prevents any transformations inside\n\nimport { $createTextNode, $isTextNode } from 'lexical'\n\nimport type { TextMatchTransformer } from '../../packages/@lexical/markdown/MarkdownTransformers.js'\n\nimport { $createLinkNode, $isLinkNode, LinkNode } from './nodes/LinkNode.js'\n\n// - then longer tags match (e.g. ** or __ should go before * or _)\nexport const LinkMarkdownTransformer: TextMatchTransformer = {\n  type: 'text-match',\n  dependencies: [LinkNode],\n  export: (_node, exportChildren) => {\n    if (!$isLinkNode(_node)) {\n      return null\n    }\n    const node: LinkNode = _node\n    const { url } = node.getFields()\n\n    const textContent = exportChildren(node)\n\n    const linkContent = `[${textContent}](${url})`\n\n    return linkContent\n  },\n  importRegExp: /\\[([^[]+)\\]\\(([^()\\s]+)(?:\\s\"((?:[^\"]*\\\\\")*[^\"]*)\"\\s*)?\\)/,\n  regExp: /\\[([^[]+)\\]\\(([^()\\s]+)(?:\\s\"((?:[^\"]*\\\\\")*[^\"]*)\"\\s*)?\\)$/,\n  replace: (textNode, match) => {\n    const [, linkText, linkUrl] = match\n    const linkNode = $createLinkNode({\n      fields: {\n        doc: null,\n        linkType: 'custom',\n        newTab: false,\n        url: linkUrl,\n      },\n    })\n    const linkTextNode = $createTextNode(linkText)\n    linkTextNode.setFormat(textNode.getFormat())\n    linkNode.append(linkTextNode)\n    textNode.replace(linkNode)\n\n    return linkTextNode\n  },\n  trigger: ')',\n}\n","import type {\n  BaseSelection,\n  DOMConversionMap,\n  DOMConversionOutput,\n  EditorConfig,\n  ElementNode as ElementNodeType,\n  LexicalCommand,\n  LexicalNode,\n  LexicalUpdateJSON,\n  NodeKey,\n  RangeSelection,\n} from 'lexical'\n\nimport { addClassNamesToElement, isHTMLAnchorElement } from '@lexical/utils'\nimport ObjectID from 'bson-objectid'\nimport {\n  $applyNodeReplacement,\n  $createTextNode,\n  $getSelection,\n  $isElementNode,\n  $isRangeSelection,\n  createCommand,\n  ElementNode,\n} from 'lexical'\n\nimport type { LinkPayload } from '../client/plugins/floatingLinkEditor/types.js'\nimport type { LinkFields, SerializedLinkNode } from './types.js'\n\nconst SUPPORTED_URL_PROTOCOLS = new Set(['http:', 'https:', 'mailto:', 'sms:', 'tel:'])\n\n/** @noInheritDoc */\nexport class LinkNode extends ElementNode {\n  __fields: LinkFields\n  __id: string\n\n  constructor({\n    id,\n    fields = {\n      linkType: 'custom',\n      newTab: false,\n    },\n    key,\n  }: {\n    fields?: LinkFields\n    id: string\n    key?: NodeKey\n  }) {\n    super(key)\n    this.__fields = fields\n    this.__id = id\n  }\n\n  static override clone(node: LinkNode): LinkNode {\n    return new this({\n      id: node.__id,\n      fields: node.__fields,\n      key: node.__key,\n    })\n  }\n\n  static override getType(): string {\n    return 'link'\n  }\n\n  static override importDOM(): DOMConversionMap | null {\n    return {\n      a: (node: Node) => ({\n        conversion: $convertAnchorElement,\n        priority: 1,\n      }),\n    }\n  }\n\n  static override importJSON(serializedNode: SerializedLinkNode): LinkNode {\n    const node = $createLinkNode({}).updateFromJSON(serializedNode)\n\n    /**\n     * @todo remove this in 4.0\n     */\n    if (\n      serializedNode.version === 1 &&\n      typeof serializedNode.fields?.doc?.value === 'object' &&\n      serializedNode.fields?.doc?.value?.id\n    ) {\n      serializedNode.fields.doc.value = serializedNode.fields.doc.value.id\n      serializedNode.version = 2\n    }\n\n    if (serializedNode.version === 2 && !serializedNode.id) {\n      serializedNode.id = new ObjectID.default().toHexString()\n      serializedNode.version = 3\n    }\n    return node\n  }\n\n  override canBeEmpty(): false {\n    return false\n  }\n\n  override canInsertTextAfter(): false {\n    return false\n  }\n\n  override canInsertTextBefore(): false {\n    return false\n  }\n\n  override createDOM(config: EditorConfig): HTMLAnchorElement {\n    const element = document.createElement('a')\n    if (this.__fields?.linkType === 'custom') {\n      element.href = this.sanitizeUrl(this.__fields.url ?? '')\n    }\n    if (this.__fields?.newTab ?? false) {\n      element.target = '_blank'\n    }\n\n    if (this.__fields?.newTab === true && this.__fields?.linkType === 'custom') {\n      element.rel = manageRel(element.rel, 'add', 'noopener')\n    }\n\n    addClassNamesToElement(element, config.theme.link)\n    return element\n  }\n\n  override exportJSON(): SerializedLinkNode {\n    const fields = this.getFields()\n\n    if (fields?.linkType === 'internal') {\n      delete fields.url\n    } else if (fields?.linkType === 'custom') {\n      delete fields.doc\n    }\n\n    const returnObject: SerializedLinkNode = {\n      ...super.exportJSON(),\n      type: 'link',\n      fields,\n      version: 3,\n    }\n    const id = this.getID()\n    if (id) {\n      returnObject.id = id\n    }\n    return returnObject\n  }\n\n  override extractWithChild(\n    child: LexicalNode,\n    selection: BaseSelection,\n    destination: 'clone' | 'html',\n  ): boolean {\n    if (!$isRangeSelection(selection)) {\n      return false\n    }\n\n    const anchorNode = selection.anchor.getNode()\n    const focusNode = selection.focus.getNode()\n\n    return (\n      this.isParentOf(anchorNode) &&\n      this.isParentOf(focusNode) &&\n      selection.getTextContent().length > 0\n    )\n  }\n\n  getFields(): LinkFields {\n    return this.getLatest().__fields\n  }\n\n  getID(): string {\n    return this.getLatest().__id\n  }\n\n  override insertNewAfter(\n    selection: RangeSelection,\n    restoreSelection = true,\n  ): ElementNodeType | null {\n    const element = this.getParentOrThrow().insertNewAfter(selection, restoreSelection)\n    if ($isElementNode(element)) {\n      const linkNode = $createLinkNode({ fields: this.__fields })\n      element.append(linkNode)\n      return linkNode\n    }\n    return null\n  }\n\n  override isInline(): true {\n    return true\n  }\n\n  sanitizeUrl(url: string): string {\n    try {\n      const parsedUrl = new URL(url)\n\n      if (!SUPPORTED_URL_PROTOCOLS.has(parsedUrl.protocol)) {\n        return 'about:blank'\n      }\n    } catch (e) {\n      return 'https://'\n    }\n    return url\n  }\n\n  setFields(fields: LinkFields): this {\n    const writable = this.getWritable()\n    writable.__fields = fields\n    return writable\n  }\n\n  setID(id: string): this {\n    const writable = this.getWritable()\n    writable.__id = id\n    return writable\n  }\n\n  override updateDOM(prevNode: this, anchor: HTMLAnchorElement, config: EditorConfig): boolean {\n    const url = this.__fields?.url\n    const newTab = this.__fields?.newTab\n    if (url != null && url !== prevNode.__fields?.url && this.__fields?.linkType === 'custom') {\n      anchor.href = url\n    }\n    if (this.__fields?.linkType === 'internal' && prevNode.__fields?.linkType === 'custom') {\n      anchor.removeAttribute('href')\n    }\n\n    // TODO: not 100% sure why we're settign rel to '' - revisit\n    // Start rel config here, then check newTab below\n    if (anchor.rel == null) {\n      anchor.rel = ''\n    }\n\n    if (newTab !== prevNode.__fields?.newTab) {\n      if (newTab ?? false) {\n        anchor.target = '_blank'\n        if (this.__fields?.linkType === 'custom') {\n          anchor.rel = manageRel(anchor.rel, 'add', 'noopener')\n        }\n      } else {\n        anchor.removeAttribute('target')\n        anchor.rel = manageRel(anchor.rel, 'remove', 'noopener')\n      }\n    }\n\n    return false\n  }\n\n  override updateFromJSON(serializedNode: LexicalUpdateJSON<SerializedLinkNode>): this {\n    return super\n      .updateFromJSON(serializedNode)\n      .setFields(serializedNode.fields)\n      .setID(serializedNode.id as string)\n  }\n}\n\nfunction $convertAnchorElement(domNode: Node): DOMConversionOutput {\n  let node: LinkNode | null = null\n  if (isHTMLAnchorElement(domNode)) {\n    const content = domNode.textContent\n    if (content !== null && content !== '') {\n      node = $createLinkNode({\n        id: new ObjectID.default().toHexString(),\n        fields: {\n          doc: null,\n          linkType: 'custom',\n          newTab: domNode.getAttribute('target') === '_blank',\n          url: domNode.getAttribute('href') ?? '',\n        },\n      })\n    }\n  }\n  return { node }\n}\n\nexport function $createLinkNode({ id, fields }: { fields?: LinkFields; id?: string }): LinkNode {\n  return $applyNodeReplacement(\n    new LinkNode({\n      id: id ?? new ObjectID.default().toHexString(),\n      fields,\n    }),\n  )\n}\n\nexport function $isLinkNode(node: LexicalNode | null | undefined): node is LinkNode {\n  return node instanceof LinkNode\n}\n\nexport const TOGGLE_LINK_COMMAND: LexicalCommand<LinkPayload | null> =\n  createCommand('TOGGLE_LINK_COMMAND')\n\nexport function $toggleLink(payload: ({ fields: LinkFields } & LinkPayload) | null): void {\n  const selection = $getSelection()\n\n  if (!$isRangeSelection(selection) && (payload === null || !payload.selectedNodes?.length)) {\n    return\n  }\n  const nodes = $isRangeSelection(selection)\n    ? selection.extract()\n    : payload === null\n      ? []\n      : payload.selectedNodes\n\n  if (payload === null) {\n    // Remove LinkNodes\n    nodes?.forEach((node) => {\n      const parent = node.getParent()\n\n      if ($isLinkNode(parent)) {\n        const children = parent.getChildren()\n\n        children.forEach((child) => {\n          parent.insertBefore(child)\n        })\n\n        parent.remove()\n      }\n    })\n\n    return\n  }\n  // Add or merge LinkNodes\n  if (nodes?.length === 1) {\n    const firstNode = nodes[0]!\n    // if the first node is a LinkNode or if its\n    // parent is a LinkNode, we update the URL, target and rel.\n    const linkNode: LinkNode | null = $isLinkNode(firstNode)\n      ? firstNode\n      : $getLinkAncestor(firstNode)\n    if (linkNode !== null) {\n      linkNode.setFields(payload.fields)\n\n      if (payload.text != null && payload.text !== linkNode.getTextContent()) {\n        // remove all children and add child with new textcontent:\n        linkNode.append($createTextNode(payload.text))\n        linkNode.getChildren().forEach((child) => {\n          if (child !== linkNode.getLastChild()) {\n            child.remove()\n          }\n        })\n      }\n      return\n    }\n  }\n\n  let prevParent: ElementNodeType | LinkNode | null = null\n  let linkNode: LinkNode | null = null\n\n  nodes?.forEach((node) => {\n    const parent = node.getParent()\n\n    if (parent === linkNode || parent === null || ($isElementNode(node) && !node.isInline())) {\n      return\n    }\n\n    if ($isLinkNode(parent)) {\n      linkNode = parent\n      parent.setFields(payload.fields)\n      if (payload.text != null && payload.text !== parent.getTextContent()) {\n        // remove all children and add child with new textcontent:\n        parent.append($createTextNode(payload.text))\n        parent.getChildren().forEach((child) => {\n          if (child !== parent.getLastChild()) {\n            child.remove()\n          }\n        })\n      }\n      return\n    }\n\n    if (!parent.is(prevParent)) {\n      prevParent = parent\n      linkNode = $createLinkNode({ fields: payload.fields })\n\n      if ($isLinkNode(parent)) {\n        if (node.getPreviousSibling() === null) {\n          parent.insertBefore(linkNode)\n        } else {\n          parent.insertAfter(linkNode)\n        }\n      } else {\n        node.insertBefore(linkNode)\n      }\n    }\n\n    if ($isLinkNode(node)) {\n      if (node.is(linkNode)) {\n        return\n      }\n      if (linkNode !== null) {\n        const children = node.getChildren()\n        linkNode.append(...children)\n      }\n\n      node.remove()\n      return\n    }\n\n    if (linkNode !== null) {\n      linkNode.append(node)\n    }\n  })\n}\n\nfunction $getLinkAncestor(node: LexicalNode): LinkNode | null {\n  return $getAncestor(node, (ancestor) => $isLinkNode(ancestor)) as LinkNode\n}\n\nfunction $getAncestor(\n  node: LexicalNode,\n  predicate: (ancestor: LexicalNode) => boolean,\n): LexicalNode | null {\n  let parent: LexicalNode | null = node\n  while (parent !== null) {\n    parent = parent.getParent()\n    if (parent === null || predicate(parent)) {\n      break\n    }\n  }\n  return parent\n}\n\nfunction manageRel(input: string, action: 'add' | 'remove', value: string): string {\n  let result: string\n  let mutableInput = `${input}`\n  if (action === 'add') {\n    // if we somehow got out of sync - clean up\n    if (mutableInput.includes(value)) {\n      const re = new RegExp(value, 'g')\n      mutableInput = mutableInput.replace(re, '').trim()\n    }\n    mutableInput = mutableInput.trim()\n    result = mutableInput.length === 0 ? `${value}` : `${mutableInput} ${value}`\n  } else {\n    const re = new RegExp(value, 'g')\n    result = mutableInput.replace(re, '').trim()\n  }\n  return result\n}\n","import type { ElementNode, LexicalNode, LexicalUpdateJSON, RangeSelection } from 'lexical'\n\nimport { $applyNodeReplacement, $isElementNode } from 'lexical'\n\nimport type { LinkFields, SerializedAutoLinkNode } from './types.js'\n\nimport { LinkNode } from './LinkNode.js'\n\n// Custom node type to override `canInsertTextAfter` that will\n// allow typing within the link\n\nexport class AutoLinkNode extends LinkNode {\n  static override clone(node: AutoLinkNode): AutoLinkNode {\n    return new this({ id: '', fields: node.__fields, key: node.__key })\n  }\n\n  static override getType(): string {\n    return 'autolink'\n  }\n\n  static override importDOM(): null {\n    // TODO: Should link node should handle the import over autolink?\n    return null\n  }\n\n  static override importJSON(serializedNode: SerializedAutoLinkNode): AutoLinkNode {\n    const node = $createAutoLinkNode({}).updateFromJSON(serializedNode)\n\n    /**\n     * @todo remove in 4.0\n     */\n    if (\n      serializedNode.version === 1 &&\n      typeof serializedNode.fields?.doc?.value === 'object' &&\n      serializedNode.fields?.doc?.value?.id\n    ) {\n      serializedNode.fields.doc.value = serializedNode.fields.doc.value.id\n      serializedNode.version = 2\n    }\n\n    return node\n  }\n\n  // @ts-expect-error\n  exportJSON(): SerializedAutoLinkNode {\n    const serialized = super.exportJSON()\n    return {\n      type: 'autolink',\n      children: serialized.children,\n      direction: serialized.direction,\n      fields: serialized.fields,\n      format: serialized.format,\n      indent: serialized.indent,\n      version: 2,\n    }\n  }\n\n  override insertNewAfter(selection: RangeSelection, restoreSelection = true): ElementNode | null {\n    const element = this.getParentOrThrow().insertNewAfter(selection, restoreSelection)\n    if ($isElementNode(element)) {\n      const linkNode = $createAutoLinkNode({ fields: this.__fields })\n      element.append(linkNode)\n      return linkNode\n    }\n    return null\n  }\n\n  override updateFromJSON(serializedNode: LexicalUpdateJSON<SerializedAutoLinkNode>): this {\n    return super.updateFromJSON(serializedNode).setFields(serializedNode.fields)\n  }\n}\n\nexport function $createAutoLinkNode({ fields }: { fields?: LinkFields }): AutoLinkNode {\n  return $applyNodeReplacement(new AutoLinkNode({ id: '', fields }))\n}\nexport function $isAutoLinkNode(node: LexicalNode | null | undefined): node is AutoLinkNode {\n  return node instanceof AutoLinkNode\n}\n","'use client'\nimport type { ElementNode, LexicalEditor, LexicalNode, TextNode } from 'lexical'\n\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext.js'\nimport { mergeRegister } from '@lexical/utils'\nimport {\n  $createTextNode,\n  $getSelection,\n  $isElementNode,\n  $isLineBreakNode,\n  $isNodeSelection,\n  $isRangeSelection,\n  $isTextNode,\n  TextNode as TextNodeValue,\n} from 'lexical'\nimport { useEffect } from 'react'\n\nimport type { PluginComponent } from '../../../../typesClient.js'\nimport type { LinkFields } from '../../../nodes/types.js'\nimport type { ClientProps } from '../../index.js'\n\nimport { $createAutoLinkNode, $isAutoLinkNode, AutoLinkNode } from '../../../nodes/AutoLinkNode.js'\nimport { $isLinkNode } from '../../../nodes/LinkNode.js'\n\ntype ChangeHandler = (url: null | string, prevUrl: null | string) => void\n\ninterface LinkMatcherResult {\n  fields?: LinkFields\n  index: number\n  length: number\n  text: string\n  url: string\n}\n\nexport type LinkMatcher = (text: string) => LinkMatcherResult | null\n\nexport function createLinkMatcherWithRegExp(\n  regExp: RegExp,\n  urlTransformer: (text: string) => string = (text) => text,\n) {\n  return (text: string) => {\n    const match = regExp.exec(text)\n    if (match === null) {\n      return null\n    }\n    return {\n      index: match.index,\n      length: match[0].length,\n      text: match[0],\n      url: urlTransformer(match[0]),\n    }\n  }\n}\n\nfunction findFirstMatch(text: string, matchers: LinkMatcher[]): LinkMatcherResult | null {\n  for (const matcher of matchers) {\n    const match = matcher(text)\n\n    if (match != null) {\n      return match\n    }\n  }\n\n  return null\n}\n\nconst PUNCTUATION_OR_SPACE = /[.,;\\s]/\n\nfunction isSeparator(char: string | undefined): boolean {\n  return char !== undefined && PUNCTUATION_OR_SPACE.test(char)\n}\n\nfunction endsWithSeparator(textContent: string): boolean {\n  return isSeparator(textContent[textContent.length - 1])\n}\n\nfunction startsWithSeparator(textContent: string): boolean {\n  return isSeparator(textContent[0])\n}\n\n/**\n * Check if the text content starts with a fullstop followed by a top-level domain.\n * Meaning if the text content can be a beginning of a top level domain.\n * @param textContent\n * @param isEmail\n * @returns boolean\n */\nfunction startsWithTLD(textContent: string, isEmail: boolean): boolean {\n  if (isEmail) {\n    return /^\\.[a-z]{2,}/i.test(textContent)\n  } else {\n    return /^\\.[a-z0-9]+/i.test(textContent)\n  }\n}\n\nfunction isPreviousNodeValid(node: LexicalNode): boolean {\n  let previousNode = node.getPreviousSibling()\n  if ($isElementNode(previousNode)) {\n    previousNode = previousNode.getLastDescendant()\n  }\n  return (\n    previousNode === null ||\n    $isLineBreakNode(previousNode) ||\n    ($isTextNode(previousNode) && endsWithSeparator(previousNode.getTextContent()))\n  )\n}\n\nfunction isNextNodeValid(node: LexicalNode): boolean {\n  let nextNode = node.getNextSibling()\n  if ($isElementNode(nextNode)) {\n    nextNode = nextNode.getFirstDescendant()\n  }\n  return (\n    nextNode === null ||\n    $isLineBreakNode(nextNode) ||\n    ($isTextNode(nextNode) && startsWithSeparator(nextNode.getTextContent()))\n  )\n}\n\nfunction isContentAroundIsValid(\n  matchStart: number,\n  matchEnd: number,\n  text: string,\n  nodes: TextNode[],\n): boolean {\n  const contentBeforeIsValid =\n    matchStart > 0 ? isSeparator(text[matchStart - 1]) : isPreviousNodeValid(nodes[0]!)\n  if (!contentBeforeIsValid) {\n    return false\n  }\n\n  const contentAfterIsValid =\n    matchEnd < text.length ? isSeparator(text[matchEnd]) : isNextNodeValid(nodes[nodes.length - 1]!)\n  return contentAfterIsValid\n}\n\nfunction extractMatchingNodes(\n  nodes: TextNode[],\n  startIndex: number,\n  endIndex: number,\n): [\n  matchingOffset: number,\n  unmodifiedBeforeNodes: TextNode[],\n  matchingNodes: TextNode[],\n  unmodifiedAfterNodes: TextNode[],\n] {\n  const unmodifiedBeforeNodes: TextNode[] = []\n  const matchingNodes: TextNode[] = []\n  const unmodifiedAfterNodes: TextNode[] = []\n  let matchingOffset = 0\n\n  let currentOffset = 0\n  const currentNodes = [...nodes]\n\n  while (currentNodes.length > 0) {\n    const currentNode = currentNodes[0]!\n    const currentNodeText = currentNode.getTextContent()\n    const currentNodeLength = currentNodeText.length\n    const currentNodeStart = currentOffset\n    const currentNodeEnd = currentOffset + currentNodeLength\n\n    if (currentNodeEnd <= startIndex) {\n      unmodifiedBeforeNodes.push(currentNode)\n      matchingOffset += currentNodeLength\n    } else if (currentNodeStart >= endIndex) {\n      unmodifiedAfterNodes.push(currentNode)\n    } else {\n      matchingNodes.push(currentNode)\n    }\n    currentOffset += currentNodeLength\n    currentNodes.shift()\n  }\n  return [matchingOffset, unmodifiedBeforeNodes, matchingNodes, unmodifiedAfterNodes]\n}\n\nfunction $createAutoLinkNode_(\n  nodes: TextNode[],\n  startIndex: number,\n  endIndex: number,\n  match: LinkMatcherResult,\n): TextNode | undefined {\n  const fields = {\n    linkType: 'custom',\n    url: match.url,\n    ...match.fields,\n  } as LinkFields\n\n  const linkNode = $createAutoLinkNode({ fields })\n  if (nodes.length === 1) {\n    const remainingTextNode = nodes[0]!\n    let linkTextNode: TextNode | undefined\n    if (startIndex === 0) {\n      ;[linkTextNode] = remainingTextNode.splitText(endIndex)\n    } else {\n      ;[, linkTextNode] = remainingTextNode.splitText(startIndex, endIndex)\n    }\n    if (linkTextNode) {\n      const textNode = $createTextNode(match.text)\n      textNode.setFormat(linkTextNode.getFormat())\n      textNode.setDetail(linkTextNode.getDetail())\n      textNode.setStyle(linkTextNode.getStyle())\n      linkNode.append(textNode)\n      linkTextNode.replace(linkNode)\n    }\n    return remainingTextNode\n  } else if (nodes.length > 1) {\n    const firstTextNode = nodes[0]!\n    let offset = firstTextNode.getTextContent().length\n    let firstLinkTextNode\n    if (startIndex === 0) {\n      firstLinkTextNode = firstTextNode\n    } else {\n      ;[, firstLinkTextNode] = firstTextNode.splitText(startIndex)\n    }\n    const linkNodes: LexicalNode[] = []\n    let remainingTextNode\n    nodes.forEach((currentNode) => {\n      const currentNodeText = currentNode.getTextContent()\n      const currentNodeLength = currentNodeText.length\n      const currentNodeStart = offset\n      const currentNodeEnd = offset + currentNodeLength\n      if (currentNodeStart < endIndex) {\n        if (currentNodeEnd <= endIndex) {\n          linkNodes.push(currentNode)\n        } else {\n          const [linkTextNode, endNode] = currentNode.splitText(endIndex - currentNodeStart)\n          if (linkTextNode) {\n            linkNodes.push(linkTextNode)\n          }\n          remainingTextNode = endNode\n        }\n      }\n      offset += currentNodeLength\n    })\n\n    if (firstLinkTextNode) {\n      const selection = $getSelection()\n      const selectedTextNode = selection ? selection.getNodes().find($isTextNode) : undefined\n      const textNode = $createTextNode(firstLinkTextNode.getTextContent())\n      textNode.setFormat(firstLinkTextNode.getFormat())\n      textNode.setDetail(firstLinkTextNode.getDetail())\n      textNode.setStyle(firstLinkTextNode.getStyle())\n      linkNode.append(textNode, ...linkNodes)\n      // it does not preserve caret position if caret was at the first text node\n      // so we need to restore caret position\n      if (selectedTextNode && selectedTextNode === firstLinkTextNode) {\n        if ($isRangeSelection(selection)) {\n          textNode.select(selection.anchor.offset, selection.focus.offset)\n        } else if ($isNodeSelection(selection)) {\n          textNode.select(0, textNode.getTextContent().length)\n        }\n      }\n      firstLinkTextNode.replace(linkNode)\n      return remainingTextNode\n    }\n  }\n  return undefined\n}\n\nfunction $handleLinkCreation(\n  nodes: TextNode[],\n  matchers: LinkMatcher[],\n  onChange: ChangeHandler,\n): void {\n  let currentNodes = [...nodes]\n  const initialText = currentNodes.map((node) => node.getTextContent()).join('')\n  let text = initialText\n\n  let match\n  let invalidMatchEnd = 0\n\n  while ((match = findFirstMatch(text, matchers)) != null && match !== null) {\n    const matchStart: number = match.index\n    const matchLength: number = match.length\n    const matchEnd = matchStart + matchLength\n    const isValid = isContentAroundIsValid(\n      invalidMatchEnd + matchStart,\n      invalidMatchEnd + matchEnd,\n      initialText,\n      currentNodes,\n    )\n\n    if (isValid) {\n      const [matchingOffset, , matchingNodes, unmodifiedAfterNodes] = extractMatchingNodes(\n        currentNodes,\n        invalidMatchEnd + matchStart,\n        invalidMatchEnd + matchEnd,\n      )\n\n      const actualMatchStart = invalidMatchEnd + matchStart - matchingOffset\n      const actualMatchEnd = invalidMatchEnd + matchEnd - matchingOffset\n      const remainingTextNode = $createAutoLinkNode_(\n        matchingNodes,\n        actualMatchStart,\n        actualMatchEnd,\n        match,\n      )\n      currentNodes = remainingTextNode\n        ? [remainingTextNode, ...unmodifiedAfterNodes]\n        : unmodifiedAfterNodes\n      onChange(match.url, null)\n      invalidMatchEnd = 0\n    } else {\n      invalidMatchEnd += matchEnd\n    }\n\n    text = text.substring(matchEnd)\n  }\n}\n\nfunction handleLinkEdit(\n  linkNode: AutoLinkNode,\n  matchers: LinkMatcher[],\n  onChange: ChangeHandler,\n): void {\n  // Check children are simple text\n  const children = linkNode.getChildren()\n  const childrenLength = children.length\n  for (let i = 0; i < childrenLength; i++) {\n    const child = children[i]\n    if (!$isTextNode(child) || !child.isSimpleText()) {\n      replaceWithChildren(linkNode)\n      onChange(null, linkNode.getFields()?.url ?? null)\n      return\n    }\n  }\n\n  // Check text content fully matches\n  const text = linkNode.getTextContent()\n  const match = findFirstMatch(text, matchers)\n  if (match === null || match.text !== text) {\n    replaceWithChildren(linkNode)\n    onChange(null, linkNode.getFields()?.url ?? null)\n    return\n  }\n\n  // Check neighbors\n  if (!isPreviousNodeValid(linkNode) || !isNextNodeValid(linkNode)) {\n    replaceWithChildren(linkNode)\n    onChange(null, linkNode.getFields()?.url ?? null)\n    return\n  }\n\n  const url = linkNode.getFields()?.url\n  if (url !== match?.url) {\n    const flds = linkNode.getFields()\n    flds.url = match?.url\n    linkNode.setFields(flds)\n    onChange(match.url, url ?? null)\n  }\n}\n\n// Bad neighbors are edits in neighbor nodes that make AutoLinks incompatible.\n// Given the creation preconditions, these can only be simple text nodes.\nfunction handleBadNeighbors(\n  textNode: TextNode,\n  matchers: LinkMatcher[],\n  onChange: ChangeHandler,\n): void {\n  const previousSibling = textNode.getPreviousSibling()\n  const nextSibling = textNode.getNextSibling()\n  const text = textNode.getTextContent()\n\n  if ($isAutoLinkNode(previousSibling)) {\n    const isEmailURI = previousSibling.getFields()?.url\n      ? (previousSibling.getFields()?.url?.startsWith('mailto:') ?? false)\n      : false\n    if (!startsWithSeparator(text) || startsWithTLD(text, isEmailURI)) {\n      previousSibling.append(textNode)\n      handleLinkEdit(previousSibling, matchers, onChange)\n      onChange(null, previousSibling.getFields()?.url ?? null)\n    }\n  }\n\n  if ($isAutoLinkNode(nextSibling) && !endsWithSeparator(text)) {\n    replaceWithChildren(nextSibling)\n    handleLinkEdit(nextSibling, matchers, onChange)\n    onChange(null, nextSibling.getFields()?.url ?? null)\n  }\n}\n\nfunction replaceWithChildren(node: ElementNode): LexicalNode[] {\n  const children = node.getChildren()\n  const childrenLength = children.length\n\n  for (let j = childrenLength - 1; j >= 0; j--) {\n    node.insertAfter(children[j]!)\n  }\n\n  node.remove()\n  return children.map((child) => child.getLatest())\n}\n\nfunction getTextNodesToMatch(textNode: TextNode): TextNode[] {\n  // check if next siblings are simple text nodes till a node contains a space separator\n  const textNodesToMatch = [textNode]\n  let nextSibling = textNode.getNextSibling()\n  while (nextSibling !== null && $isTextNode(nextSibling) && nextSibling.isSimpleText()) {\n    textNodesToMatch.push(nextSibling)\n    if (/\\s/.test(nextSibling.getTextContent())) {\n      break\n    }\n    nextSibling = nextSibling.getNextSibling()\n  }\n  return textNodesToMatch\n}\n\nfunction useAutoLink(\n  editor: LexicalEditor,\n  matchers: LinkMatcher[],\n  onChange?: ChangeHandler,\n): void {\n  useEffect(() => {\n    if (!editor.hasNodes([AutoLinkNode])) {\n      throw new Error('LexicalAutoLinkPlugin: AutoLinkNode not registered on editor')\n    }\n\n    const onChangeWrapped = (url: null | string, prevUrl: null | string): void => {\n      if (onChange != null) {\n        onChange(url, prevUrl)\n      }\n    }\n\n    return mergeRegister(\n      editor.registerNodeTransform(TextNodeValue, (textNode: TextNode) => {\n        const parent = textNode.getParentOrThrow()\n        const previous = textNode.getPreviousSibling()\n        if ($isAutoLinkNode(parent)) {\n          handleLinkEdit(parent, matchers, onChangeWrapped)\n        } else if (!$isLinkNode(parent)) {\n          if (\n            textNode.isSimpleText() &&\n            (startsWithSeparator(textNode.getTextContent()) || !$isAutoLinkNode(previous))\n          ) {\n            const textNodesToMatch = getTextNodesToMatch(textNode)\n            $handleLinkCreation(textNodesToMatch, matchers, onChangeWrapped)\n          }\n\n          handleBadNeighbors(textNode, matchers, onChangeWrapped)\n        }\n      }),\n    )\n  }, [editor, matchers, onChange])\n}\n\nconst URL_REGEX =\n  /((https?:\\/\\/(www\\.)?)|(www\\.))[-\\w@:%.+~#=]{1,256}\\.[a-zA-Z\\d()]{1,6}\\b([-\\w()@:%+.~#?&/=]*)(?<![-.+():%])/\n\nconst EMAIL_REGEX =\n  /(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\])|(([a-z\\-\\d]+\\.)+[a-z]{2,}))/i\n\nconst MATCHERS = [\n  createLinkMatcherWithRegExp(URL_REGEX, (text) => {\n    return text.startsWith('http') ? text : `https://${text}`\n  }),\n  createLinkMatcherWithRegExp(EMAIL_REGEX, (text) => {\n    return `mailto:${text}`\n  }),\n]\n\nexport const AutoLinkPlugin: PluginComponent<ClientProps> = () => {\n  const [editor] = useLexicalComposerContext()\n\n  useAutoLink(editor, MATCHERS)\n\n  return null\n}\n","'use client'\nimport { ClickableLinkPlugin as LexicalClickableLinkPlugin } from '@lexical/react/LexicalClickableLinkPlugin.js'\nimport React from 'react'\n\nimport type { PluginComponent } from '../../../../typesClient.js'\nimport type { ClientProps } from '../../index.js'\n\nexport const ClickableLinkPlugin: PluginComponent<ClientProps> = () => {\n  return <LexicalClickableLinkPlugin />\n}\n","'use client'\nimport * as React from 'react'\nimport { createPortal } from 'react-dom'\n\nimport type { PluginComponentWithAnchor } from '../../../../typesClient.js'\nimport type { ClientProps } from '../../index.js'\n\nimport './index.scss'\nimport { LinkEditor } from './LinkEditor/index.js'\n\nexport const FloatingLinkEditorPlugin: PluginComponentWithAnchor<ClientProps> = (props) => {\n  const { anchorElem = document.body } = props\n\n  return createPortal(<LinkEditor anchorElem={anchorElem} />, anchorElem)\n}\n","'use client'\nimport type { ElementNode, LexicalNode } from 'lexical'\nimport type { Data, FormState } from 'payload'\n\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext.js'\nimport { useLexicalEditable } from '@lexical/react/useLexicalEditable'\nimport { $findMatchingParent, mergeRegister } from '@lexical/utils'\nimport { getTranslation } from '@payloadcms/translations'\nimport {\n  CloseMenuIcon,\n  EditIcon,\n  ExternalLinkIcon,\n  formatDrawerSlug,\n  useConfig,\n  useEditDepth,\n  useLocale,\n  useTranslation,\n} from '@payloadcms/ui'\nimport { requests } from '@payloadcms/ui/shared'\nimport {\n  $getSelection,\n  $isLineBreakNode,\n  $isRangeSelection,\n  COMMAND_PRIORITY_HIGH,\n  COMMAND_PRIORITY_LOW,\n  getDOMSelection,\n  KEY_ESCAPE_COMMAND,\n  SELECTION_CHANGE_COMMAND,\n} from 'lexical'\nimport React, { useCallback, useEffect, useRef, useState } from 'react'\n\nimport type { LinkNode } from '../../../../nodes/LinkNode.js'\nimport type { LinkFields } from '../../../../nodes/types.js'\nimport type { LinkPayload } from '../types.js'\n\nimport { useEditorConfigContext } from '../../../../../../lexical/config/client/EditorConfigProvider.js'\nimport { getSelectedNode } from '../../../../../../lexical/utils/getSelectedNode.js'\nimport { setFloatingElemPositionForLinkEditor } from '../../../../../../lexical/utils/setFloatingElemPositionForLinkEditor.js'\nimport { FieldsDrawer } from '../../../../../../utilities/fieldsDrawer/Drawer.js'\nimport { useLexicalDrawer } from '../../../../../../utilities/fieldsDrawer/useLexicalDrawer.js'\nimport { $isAutoLinkNode } from '../../../../nodes/AutoLinkNode.js'\nimport { $createLinkNode, $isLinkNode, TOGGLE_LINK_COMMAND } from '../../../../nodes/LinkNode.js'\nimport { TOGGLE_LINK_WITH_MODAL_COMMAND } from './commands.js'\n\nfunction preventDefault(\n  event: React.KeyboardEvent<HTMLInputElement> | React.MouseEvent<HTMLElement>,\n): void {\n  event.preventDefault()\n}\n\nexport function LinkEditor({ anchorElem }: { anchorElem: HTMLElement }): React.ReactNode {\n  const [editor] = useLexicalComposerContext()\n  // TO-DO: There are several states that should not be state, because they\n  // are derived from linkNode (linkUrl, linkLabel, stateData, isLink, isAutoLink...)\n  const [linkNode, setLinkNode] = useState<LinkNode>()\n\n  const editorRef = useRef<HTMLDivElement | null>(null)\n  const [linkUrl, setLinkUrl] = useState<null | string>(null)\n  const [linkLabel, setLinkLabel] = useState<null | string>(null)\n\n  const {\n    fieldProps: { schemaPath },\n    uuid,\n  } = useEditorConfigContext()\n  const isEditable = useLexicalEditable()\n\n  const { config, getEntityConfig } = useConfig()\n\n  const { i18n, t } = useTranslation<object, 'lexical:link:loadingWithEllipsis'>()\n\n  const [stateData, setStateData] = useState<\n    ({ id?: string; text: string } & LinkFields) | undefined\n  >()\n\n  const editDepth = useEditDepth()\n  const [isLink, setIsLink] = useState(false)\n  const [selectedNodes, setSelectedNodes] = useState<LexicalNode[]>([])\n  const locale = useLocale()\n\n  const [isAutoLink, setIsAutoLink] = useState(false)\n\n  const drawerSlug = formatDrawerSlug({\n    slug: `lexical-rich-text-link-` + uuid,\n    depth: editDepth,\n  })\n\n  const { toggleDrawer } = useLexicalDrawer(drawerSlug)\n\n  const setNotLink = useCallback(() => {\n    setIsLink(false)\n    if (editorRef && editorRef.current) {\n      editorRef.current.style.opacity = '0'\n      editorRef.current.style.transform = 'translate(-10000px, -10000px)'\n    }\n    setIsAutoLink(false)\n    setLinkUrl(null)\n    setLinkLabel(null)\n    setSelectedNodes([])\n    setStateData(undefined)\n  }, [setIsLink, setLinkUrl, setLinkLabel, setSelectedNodes])\n\n  const $updateLinkEditor = useCallback(() => {\n    const selection = $getSelection()\n    let selectedNodeDomRect: DOMRect | undefined\n\n    if (!$isRangeSelection(selection) || !selection) {\n      void setNotLink()\n      return\n    }\n\n    // Handle the data displayed in the floating link editor & drawer when you click on a link node\n\n    const focusNode = getSelectedNode(selection)\n    selectedNodeDomRect = editor.getElementByKey(focusNode.getKey())?.getBoundingClientRect()\n    const focusLinkParent = $findMatchingParent(focusNode, $isLinkNode)\n\n    // Prevent link modal from showing if selection spans further than the link: https://github.com/facebook/lexical/issues/4064\n    const badNode = selection\n      .getNodes()\n      .filter((node) => !$isLineBreakNode(node))\n      .find((node) => {\n        const linkNode = $findMatchingParent(node, $isLinkNode)\n        return (\n          (focusLinkParent && !focusLinkParent.is(linkNode)) ||\n          (linkNode && !linkNode.is(focusLinkParent))\n        )\n      })\n\n    if (focusLinkParent == null || badNode) {\n      setNotLink()\n      return\n    }\n    setLinkNode(focusLinkParent)\n\n    const fields = focusLinkParent.getFields()\n\n    // Initial state:\n    const data: { text: string } & LinkFields = {\n      ...fields,\n      id: focusLinkParent.getID(),\n      text: focusLinkParent.getTextContent(),\n    }\n\n    if (fields?.linkType === 'custom') {\n      setLinkUrl(fields?.url ?? null)\n      setLinkLabel(null)\n    } else {\n      // internal link\n      setLinkUrl(\n        `${config.routes.admin === '/' ? '' : config.routes.admin}/collections/${fields?.doc?.relationTo}/${\n          fields?.doc?.value\n        }`,\n      )\n\n      const relatedField = fields?.doc?.relationTo\n        ? getEntityConfig({ collectionSlug: fields?.doc?.relationTo })\n        : undefined\n      if (!relatedField) {\n        // Usually happens if the user removed all default fields. In this case, we let them specify the label or do not display the label at all.\n        // label could be a virtual field the user added. This is useful if they want to use the link feature for things other than links.\n        setLinkLabel(fields?.label ? String(fields?.label) : null)\n        setLinkUrl(fields?.url ? String(fields?.url) : null)\n      } else {\n        const id = typeof fields.doc?.value === 'object' ? fields.doc.value.id : fields.doc?.value\n        const collection = fields.doc?.relationTo\n        if (!id || !collection) {\n          throw new Error(`Focus link parent is missing doc.value or doc.relationTo`)\n        }\n\n        const loadingLabel = t('fields:linkedTo', {\n          label: `${getTranslation(relatedField.labels.singular, i18n)} - ${t('lexical:link:loadingWithEllipsis', i18n)}`,\n        }).replace(/<[^>]*>?/g, '')\n        setLinkLabel(loadingLabel)\n\n        requests\n          .get(`${config.serverURL}${config.routes.api}/${collection}/${id}`, {\n            headers: {\n              'Accept-Language': i18n.language,\n            },\n            params: {\n              depth: 0,\n              locale: locale?.code,\n            },\n          })\n          .then(async (res) => {\n            if (!res.ok) {\n              throw new Error(`HTTP error! Status: ${res.status}`)\n            }\n            const data = await res.json()\n            const useAsTitle = relatedField?.admin?.useAsTitle || 'id'\n            const title = data[useAsTitle]\n            const label = t('fields:linkedTo', {\n              label: `${getTranslation(relatedField.labels.singular, i18n)} - ${title}`,\n            }).replace(/<[^>]*>?/g, '')\n            setLinkLabel(label)\n          })\n          .catch(() => {\n            const label = t('fields:linkedTo', {\n              label: `${getTranslation(relatedField.labels.singular, i18n)} - ${t('general:untitled', i18n)} - ID: ${id}`,\n            }).replace(/<[^>]*>?/g, '')\n            setLinkLabel(label)\n          })\n      }\n    }\n\n    setStateData(data)\n    setIsLink(true)\n    setSelectedNodes(selection ? selection?.getNodes() : [])\n\n    if ($isAutoLinkNode(focusLinkParent)) {\n      setIsAutoLink(true)\n    } else {\n      setIsAutoLink(false)\n    }\n\n    const editorElem = editorRef.current\n    const nativeSelection = getDOMSelection(editor._window)\n    const { activeElement } = document\n\n    if (editorElem === null) {\n      return\n    }\n\n    const rootElement = editor.getRootElement()\n\n    if (\n      nativeSelection !== null &&\n      rootElement !== null &&\n      rootElement.contains(nativeSelection.anchorNode)\n    ) {\n      if (!selectedNodeDomRect) {\n        // Get the DOM rect of the selected node using the native selection. This sometimes produces the wrong\n        // result, which is why we use lexical's selection preferably.\n        selectedNodeDomRect = nativeSelection.getRangeAt(0).getBoundingClientRect()\n      }\n\n      if (selectedNodeDomRect != null) {\n        selectedNodeDomRect.y += 40\n        setFloatingElemPositionForLinkEditor(selectedNodeDomRect, editorElem, anchorElem)\n      }\n    } else if (activeElement == null || activeElement.className !== 'link-input') {\n      if (rootElement !== null) {\n        setFloatingElemPositionForLinkEditor(null, editorElem, anchorElem)\n      }\n      setLinkUrl(null)\n      setLinkLabel(null)\n    }\n\n    return true\n  }, [\n    editor,\n    setNotLink,\n    config.routes.admin,\n    config.routes.api,\n    config.serverURL,\n    getEntityConfig,\n    t,\n    i18n,\n    locale?.code,\n    anchorElem,\n  ])\n\n  useEffect(() => {\n    return mergeRegister(\n      editor.registerCommand(\n        TOGGLE_LINK_WITH_MODAL_COMMAND,\n        (payload: LinkPayload) => {\n          editor.dispatchCommand(TOGGLE_LINK_COMMAND, payload)\n\n          // Now, open the modal\n          $updateLinkEditor()\n          toggleDrawer()\n\n          return true\n        },\n        COMMAND_PRIORITY_LOW,\n      ),\n    )\n  }, [editor, $updateLinkEditor, toggleDrawer, drawerSlug])\n\n  useEffect(() => {\n    const scrollerElem = anchorElem.parentElement\n\n    const update = (): void => {\n      editor.getEditorState().read(() => {\n        void $updateLinkEditor()\n      })\n    }\n\n    window.addEventListener('resize', update)\n\n    if (scrollerElem != null) {\n      scrollerElem.addEventListener('scroll', update)\n    }\n\n    return () => {\n      window.removeEventListener('resize', update)\n\n      if (scrollerElem != null) {\n        scrollerElem.removeEventListener('scroll', update)\n      }\n    }\n  }, [anchorElem.parentElement, editor, $updateLinkEditor])\n\n  useEffect(() => {\n    return mergeRegister(\n      editor.registerUpdateListener(({ editorState }) => {\n        editorState.read(() => {\n          void $updateLinkEditor()\n        })\n      }),\n\n      editor.registerCommand(\n        SELECTION_CHANGE_COMMAND,\n        () => {\n          void $updateLinkEditor()\n          return true\n        },\n        COMMAND_PRIORITY_LOW,\n      ),\n      editor.registerCommand(\n        KEY_ESCAPE_COMMAND,\n        () => {\n          if (isLink) {\n            setNotLink()\n\n            return true\n          }\n          return false\n        },\n        COMMAND_PRIORITY_HIGH,\n      ),\n    )\n  }, [editor, $updateLinkEditor, isLink, setNotLink])\n\n  useEffect(() => {\n    editor.getEditorState().read(() => {\n      void $updateLinkEditor()\n    })\n  }, [editor, $updateLinkEditor])\n\n  return (\n    <React.Fragment>\n      <div className=\"link-editor\" ref={editorRef}>\n        <div className=\"link-input\">\n          {linkUrl && linkUrl.length > 0 ? (\n            <a href={linkUrl} rel=\"noopener noreferrer\" target=\"_blank\">\n              {linkNode?.__fields.newTab ? <ExternalLinkIcon /> : null}\n              {linkLabel != null && linkLabel.length > 0 ? linkLabel : linkUrl}\n            </a>\n          ) : linkLabel != null && linkLabel.length > 0 ? (\n            <>\n              {linkNode?.__fields.newTab ? <ExternalLinkIcon /> : null}\n              <span className=\"link-input__label-pure\">{linkLabel}</span>\n            </>\n          ) : null}\n\n          {isEditable && (\n            <React.Fragment>\n              <button\n                aria-label=\"Edit link\"\n                className=\"link-edit\"\n                onClick={(event) => {\n                  event.preventDefault()\n                  toggleDrawer()\n                }}\n                onMouseDown={preventDefault}\n                tabIndex={0}\n                type=\"button\"\n              >\n                <EditIcon />\n              </button>\n              {!isAutoLink && (\n                <button\n                  aria-label=\"Remove link\"\n                  className=\"link-trash\"\n                  onClick={() => {\n                    editor.dispatchCommand(TOGGLE_LINK_COMMAND, null)\n                  }}\n                  onMouseDown={preventDefault}\n                  tabIndex={0}\n                  type=\"button\"\n                >\n                  <CloseMenuIcon />\n                </button>\n              )}\n            </React.Fragment>\n          )}\n        </div>\n      </div>\n      <FieldsDrawer\n        className=\"lexical-link-edit-drawer\"\n        data={stateData}\n        drawerSlug={drawerSlug}\n        drawerTitle={t('fields:editLink')}\n        featureKey=\"link\"\n        handleDrawerSubmit={(fields: FormState, data: Data) => {\n          const newLinkPayload = data as { text: string } & LinkFields\n\n          const bareLinkFields: LinkFields = {\n            ...newLinkPayload,\n          }\n          delete bareLinkFields.text\n\n          // See: https://github.com/facebook/lexical/pull/5536. This updates autolink nodes to link nodes whenever a change was made (which is good!).\n          editor.update(() => {\n            const selection = $getSelection()\n            let linkParent: ElementNode | null = null\n            if ($isRangeSelection(selection)) {\n              linkParent = getSelectedNode(selection).getParent()\n            } else {\n              if (selectedNodes.length) {\n                linkParent = selectedNodes[0]?.getParent() ?? null\n              }\n            }\n\n            if (linkParent && $isAutoLinkNode(linkParent)) {\n              const linkNode = $createLinkNode({\n                fields: bareLinkFields,\n              })\n              linkParent.replace(linkNode, true)\n            }\n          })\n\n          // Needs to happen AFTER a potential auto link => link node conversion, as otherwise, the updated text to display may be lost due to\n          // it being applied to the auto link node instead of the link node.\n          editor.dispatchCommand(TOGGLE_LINK_COMMAND, {\n            fields: bareLinkFields,\n            selectedNodes,\n            text: newLinkPayload.text,\n          })\n        }}\n        schemaPath={schemaPath}\n        schemaPathSuffix=\"fields\"\n      />\n    </React.Fragment>\n  )\n}\n","'use client'\nconst VERTICAL_GAP = 10\nconst HORIZONTAL_OFFSET = 5\n\nexport function setFloatingElemPositionForLinkEditor(\n  targetRect: DOMRect | null,\n  floatingElem: HTMLElement,\n  anchorElem: HTMLElement,\n  verticalGap: number = VERTICAL_GAP,\n  horizontalOffset: number = HORIZONTAL_OFFSET,\n): void {\n  const scrollerElem = anchorElem.parentElement\n\n  if (targetRect === null || scrollerElem == null) {\n    floatingElem.style.opacity = '0'\n    floatingElem.style.transform = 'translate(-10000px, -10000px)'\n    return\n  }\n\n  const floatingElemRect = floatingElem.getBoundingClientRect()\n  const anchorElementRect = anchorElem.getBoundingClientRect()\n  const editorScrollerRect = scrollerElem.getBoundingClientRect()\n\n  let top = targetRect.top - verticalGap\n  let left = targetRect.left - horizontalOffset\n\n  if (top < editorScrollerRect.top) {\n    top += floatingElemRect.height + targetRect.height + verticalGap * 2\n  }\n\n  if (left + floatingElemRect.width > editorScrollerRect.right) {\n    left = editorScrollerRect.right - floatingElemRect.width - horizontalOffset\n  }\n\n  top -= anchorElementRect.top\n  left -= anchorElementRect.left\n\n  floatingElem.style.opacity = '1'\n  floatingElem.style.transform = `translate(${left}px, ${top}px)`\n}\n","'use client'\nimport type { LexicalCommand } from 'lexical'\n\nimport { createCommand } from 'lexical'\n\nimport type { LinkPayload } from '../types.js'\n\nexport const TOGGLE_LINK_WITH_MODAL_COMMAND: LexicalCommand<LinkPayload | null> = createCommand(\n  'TOGGLE_LINK_WITH_MODAL_COMMAND',\n)\n","'use client'\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext.js'\nimport { mergeRegister } from '@lexical/utils'\nimport {\n  $getSelection,\n  $isElementNode,\n  $isRangeSelection,\n  COMMAND_PRIORITY_LOW,\n  PASTE_COMMAND,\n} from 'lexical'\nimport { useEffect } from 'react'\n\nimport type { PluginComponent } from '../../../../typesClient.js'\nimport type { LinkFields } from '../../../nodes/types.js'\nimport type { ClientProps } from '../../index.js'\nimport type { LinkPayload } from '../floatingLinkEditor/types.js'\n\nimport { validateUrl } from '../../../../../lexical/utils/url.js'\nimport { $toggleLink, LinkNode, TOGGLE_LINK_COMMAND } from '../../../nodes/LinkNode.js'\n\nexport const LinkPlugin: PluginComponent<ClientProps> = ({ clientProps }) => {\n  const [editor] = useLexicalComposerContext()\n\n  useEffect(() => {\n    if (!editor.hasNodes([LinkNode])) {\n      throw new Error('LinkPlugin: LinkNode not registered on editor')\n    }\n    return mergeRegister(\n      editor.registerCommand(\n        TOGGLE_LINK_COMMAND,\n        (payload: LinkPayload) => {\n          if (payload === null) {\n            $toggleLink(null)\n            return true\n          }\n          if (!payload.fields?.linkType) {\n            payload.fields.linkType = clientProps.defaultLinkType as any\n          }\n          if (!payload.fields?.url) {\n            payload.fields.url = clientProps.defaultLinkURL as any\n          }\n          $toggleLink(payload as { fields: LinkFields } & LinkPayload)\n          return true\n        },\n        COMMAND_PRIORITY_LOW,\n      ),\n      editor.registerCommand(\n        PASTE_COMMAND,\n        (event) => {\n          const selection = $getSelection()\n          if (\n            !$isRangeSelection(selection) ||\n            selection.isCollapsed() ||\n            !(event instanceof ClipboardEvent) ||\n            event.clipboardData == null\n          ) {\n            return false\n          }\n          const clipboardText = event.clipboardData.getData('text')\n          if (!validateUrl(clipboardText)) {\n            return false\n          }\n          // If we select nodes that are elements then avoid applying the link.\n          if (!selection.getNodes().some((node) => $isElementNode(node))) {\n            const linkFields: LinkFields = {\n              doc: null,\n              linkType: 'custom',\n              newTab: false,\n              url: clipboardText,\n            }\n            editor.dispatchCommand(TOGGLE_LINK_COMMAND, {\n              fields: linkFields,\n              text: null,\n            })\n            event.preventDefault()\n            return true\n          }\n          return false\n        },\n        COMMAND_PRIORITY_LOW,\n      ),\n    )\n  }, [clientProps.defaultLinkType, clientProps.defaultLinkURL, editor])\n\n  return null\n}\n","export function sanitizeUrl(url: string): string {\n  /** A pattern that matches safe  URLs. */\n  const SAFE_URL_PATTERN = /^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi\n\n  /** A pattern that matches safe data URLs. */\n  const DATA_URL_PATTERN =\n    /^data:(?:image\\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\\/(?:mpeg|mp4|ogg|webm)|audio\\/(?:mp3|oga|ogg|opus));base64,[a-z\\d+/]+=*$/i\n\n  url = String(url).trim()\n\n  if (url.match(SAFE_URL_PATTERN) != null || url.match(DATA_URL_PATTERN) != null) {\n    return url\n  }\n\n  return 'https://'\n}\n\n/**\n * This regex checks for absolute URLs in a string. Tested for the following use cases:\n * - http://example.com\n * - https://example.com\n * - ftp://files.example.com\n * - http://example.com/resource\n * - https://example.com/resource?key=value\n * - http://example.com/resource#anchor\n * - http://www.example.com\n * - https://sub.example.com/path/file\n * - mailto:\n */\nexport const absoluteRegExp =\n  /^(?:[a-zA-Z][a-zA-Z\\d+.-]*:(?:\\/\\/)?(?:[-;:&=+$,\\w]+@)?[A-Za-z\\d]+(?:\\.[A-Za-z\\d]+)+|www\\.[A-Za-z\\d]+(?:\\.[A-Za-z\\d]+)+|(?:tel|mailto):[\\w+.-]+)(?:\\/[+~%/\\w-]*)?(?:\\?[-;&=%\\w]*)?(?:#\\w+)?$/\n\n/**\n * This regex checks for relative URLs starting with / or anchor links starting with # in a string. Tested for the following use cases:\n * - /privacy-policy\n * - /privacy-policy#primary-terms\n * - #primary-terms\n * - /page?id=123\n * - /page?id=123#section\n *  */\nexport const relativeOrAnchorRegExp = /^(?:\\/[\\w\\-./]*(?:\\?[-;&=%\\w]*)?(?:#[\\w-]+)?|#[\\w\\-]+)$/\n\n/**\n * Prevents unreasonable URLs from being inserted into the editor.\n * @param url\n */\nexport function validateUrlMinimal(url: string): boolean {\n  if (!url) {\n    return false\n  }\n\n  return !url.includes(' ')\n}\n\n// Do not keep validateUrl function too loose. This is run when pasting in text, to determine if links are in that text and if it should create AutoLinkNodes.\n// This is why we do not allow stuff like anchors here, as we don't want copied anchors to be turned into AutoLinkNodes.\nexport function validateUrl(url: string): boolean {\n  // TODO Fix UI for link insertion; it should never default to an invalid URL such as https://.\n  // Maybe show a dialog where they user can type the URL before inserting it.\n  if (!url) {\n    return false\n  }\n\n  // Reject URLs with spaces\n  if (url.includes(' ')) {\n    return false\n  }\n\n  // Reject malformed protocol URLs (e.g., http:/example.com instead of http://example.com)\n  if (/^[a-z][a-z\\d+.-]*:\\/[^/]/i.test(url)) {\n    return false\n  }\n\n  if (url === 'https://') {\n    return true\n  }\n\n  // This makes sure URLs starting with www. instead of https are valid too\n  if (absoluteRegExp.test(url)) {\n    return true\n  }\n\n  // Check relative or anchor links\n  if (relativeOrAnchorRegExp.test(url)) {\n    return true\n  }\n\n  // While this doesn't allow URLs starting with www (which is why we use the regex above), it does properly handle tel: URLs\n  try {\n    const urlObj = new URL(url)\n    // For http/https/ftp protocols, require a proper domain with at least one dot (for TLD)\n    if (['ftp:', 'http:', 'https:'].includes(urlObj.protocol)) {\n      if (!urlObj.hostname.includes('.')) {\n        return false\n      }\n    }\n    return true\n  } catch {\n    /* empty */\n  }\n\n  return false\n}\n","'use client'\nimport { $isListNode, INSERT_CHECK_LIST_COMMAND, ListItemNode, ListNode } from '@lexical/list'\nimport { $isRangeSelection } from 'lexical'\n\nimport type { ToolbarGroup } from '../../../toolbars/types.js'\nimport type { ClientFeature } from '../../../typesClient.js'\n\nimport { ChecklistIcon } from '../../../../lexical/ui/icons/Checklist/index.js'\nimport { createClientFeature } from '../../../../utilities/createClientFeature.js'\nimport { toolbarTextDropdownGroupWithItems } from '../../../shared/toolbar/textDropdownGroup.js'\nimport { LexicalListPlugin } from '../../plugin/index.js'\nimport { shouldRegisterListBaseNodes } from '../../shared/shouldRegisterListBaseNodes.js'\nimport { slashMenuListGroupWithItems } from '../../shared/slashMenuListGroup.js'\nimport { CHECK_LIST } from '../markdownTransformers.js'\nimport { LexicalCheckListPlugin } from './plugin/index.js'\n\nconst toolbarGroups: ToolbarGroup[] = [\n  toolbarTextDropdownGroupWithItems([\n    {\n      ChildComponent: ChecklistIcon,\n      isActive: ({ selection }) => {\n        if (!$isRangeSelection(selection)) {\n          return false\n        }\n        for (const node of selection.getNodes()) {\n          if ($isListNode(node) && node.getListType() === 'check') {\n            continue\n          }\n\n          const parent = node.getParent()\n\n          if ($isListNode(parent) && parent.getListType() === 'check') {\n            continue\n          }\n\n          const parentParent = parent?.getParent()\n          // Example scenario: Node = textNode, parent = listItemNode, parentParent = listNode\n          if ($isListNode(parentParent) && parentParent.getListType() === 'check') {\n            continue\n          }\n\n          return false\n        }\n        return true\n      },\n      key: 'checklist',\n      label: ({ i18n }) => {\n        return i18n.t('lexical:checklist:label')\n      },\n      onSelect: ({ editor }) => {\n        editor.dispatchCommand(INSERT_CHECK_LIST_COMMAND, undefined)\n      },\n      order: 12,\n    },\n  ]),\n]\n\nexport const ChecklistFeatureClient = createClientFeature(({ featureProviderMap }) => {\n  const plugins: ClientFeature<undefined>['plugins'] = [\n    {\n      Component: LexicalCheckListPlugin,\n      position: 'normal',\n    },\n  ]\n\n  const shouldRegister = shouldRegisterListBaseNodes('checklist', featureProviderMap)\n  if (shouldRegister) {\n    plugins.push({\n      Component: LexicalListPlugin,\n      position: 'normal',\n    })\n  }\n\n  return {\n    markdownTransformers: [CHECK_LIST],\n    nodes: shouldRegister ? [ListNode, ListItemNode] : [],\n    plugins,\n    slashMenu: {\n      groups: [\n        slashMenuListGroupWithItems([\n          {\n            Icon: ChecklistIcon,\n            key: 'checklist',\n            keywords: ['check list', 'check', 'checklist', 'cl'],\n            label: ({ i18n }) => {\n              return i18n.t('lexical:checklist:label')\n            },\n            onSelect: ({ editor }) => {\n              editor.dispatchCommand(INSERT_CHECK_LIST_COMMAND, undefined)\n            },\n          },\n        ]),\n      ],\n    },\n    toolbarFixed: {\n      groups: toolbarGroups,\n    },\n    toolbarInline: {\n      groups: toolbarGroups,\n    },\n  }\n})\n","'use client'\nimport React from 'react'\n\nexport const ChecklistIcon: React.FC = () => (\n  <svg\n    aria-hidden=\"true\"\n    className=\"icon\"\n    fill=\"none\"\n    focusable=\"false\"\n    height=\"20\"\n    viewBox=\"0 0 20 20\"\n    width=\"20\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <rect height=\"13\" rx=\"1.5\" stroke=\"currentColor\" width=\"13\" x=\"3.5\" y=\"3.5\" />\n    <path d=\"M7 10L9 12.5L13 7.5\" stroke=\"currentColor\" strokeWidth=\"1.5\" />\n  </svg>\n)\n","'use client'\nimport type {\n  SerializedListItemNode as _SerializedListItemNode,\n  SerializedListNode as _SerializedListNode,\n} from '@lexical/list'\nimport type { SerializedLexicalNode } from 'lexical'\n\nimport { ListPlugin } from '@lexical/react/LexicalListPlugin.js'\nimport React from 'react'\n\nimport type { StronglyTypedElementNode } from '../../../nodeTypes.js'\nimport type { PluginComponent } from '../../typesClient.js'\n\nexport type SerializedListItemNode<T extends SerializedLexicalNode = SerializedLexicalNode> = {\n  checked?: boolean\n} & StronglyTypedElementNode<_SerializedListItemNode, 'listitem', T>\n\nexport type SerializedListNode<T extends SerializedLexicalNode = SerializedLexicalNode> = {\n  checked?: boolean\n} & StronglyTypedElementNode<_SerializedListNode, 'list', T>\n\nexport const LexicalListPlugin: PluginComponent<undefined> = () => {\n  return <ListPlugin />\n}\n","// Priority order: unordered > ordered > checklist.\n// That's why we don't include unordered among the parameter options. It registers by default.\nexport function shouldRegisterListBaseNodes(\n  type: 'checklist' | 'ordered',\n  featureProviderMap: Map<string, unknown>,\n) {\n  if (type === 'ordered') {\n    // OrderedList only registers if UnorderedList is NOT present\n    return !featureProviderMap.has('unorderedList')\n  }\n\n  if (type === 'checklist') {\n    // Checklist only registers if neither UnorderedList nor OrderedList are present\n    return !featureProviderMap.has('unorderedList') && !featureProviderMap.has('orderedList')\n  }\n\n  return false\n}\n","import type {\n  SlashMenuGroup,\n  SlashMenuItem,\n} from '../../../lexical/plugins/SlashMenu/LexicalTypeaheadMenuPlugin/types.js'\n\nexport function slashMenuListGroupWithItems(items: SlashMenuItem[]): SlashMenuGroup {\n  return {\n    items,\n    key: 'lists',\n    label: ({ i18n }) => {\n      return i18n.t('lexical:general:slashMenuListGroupLabel')\n    },\n  }\n}\n","import { $isListNode, ListItemNode, ListNode } from '@lexical/list'\n\nimport type { ElementTransformer } from '../../../packages/@lexical/markdown/MarkdownTransformers.js'\n\nimport { listExport, listReplace } from '../shared/markdown.js'\n\nexport const CHECK_LIST: ElementTransformer = {\n  type: 'element',\n  dependencies: [ListNode, ListItemNode],\n  export: (node, exportChildren) => {\n    return $isListNode(node) ? listExport(node, exportChildren, 0) : null\n  },\n  regExp: /^(\\s*)(?:-\\s)?\\s?(\\[(\\s|x)?\\])\\s/i,\n  replace: listReplace('check'),\n}\n","// Copied from https://github.com/facebook/lexical/blob/176b8cf16ecb332ee5efe2c75219e223b7b019f2/packages/lexical-markdown/src/MarkdownTransformers.ts#L97C1-L172C1\n\nimport type { ListNode, ListType } from '@lexical/list'\nimport type { ElementNode } from 'lexical'\n\nimport { $createListItemNode, $createListNode, $isListItemNode, $isListNode } from '@lexical/list'\n\nimport type { ElementTransformer } from '../../../packages/@lexical/markdown/MarkdownTransformers.js'\n\n// Amount of spaces that define indentation level\nconst LIST_INDENT_SIZE = 4\n\nexport const listReplace = (listType: ListType): ElementTransformer['replace'] => {\n  return (parentNode, children, match) => {\n    const previousNode = parentNode.getPreviousSibling()\n    const nextNode = parentNode.getNextSibling()\n    const listItem = $createListItemNode(listType === 'check' ? match[3] === 'x' : undefined)\n    if ($isListNode(nextNode) && nextNode.getListType() === listType) {\n      const firstChild = nextNode.getFirstChild()\n      if (firstChild !== null) {\n        firstChild.insertBefore(listItem)\n      } else {\n        // should never happen, but let's handle gracefully, just in case.\n        nextNode.append(listItem)\n      }\n      parentNode.remove()\n    } else if ($isListNode(previousNode) && previousNode.getListType() === listType) {\n      previousNode.append(listItem)\n      parentNode.remove()\n    } else {\n      const list = $createListNode(listType, listType === 'number' ? Number(match[2]) : undefined)\n      list.append(listItem)\n      parentNode.replace(list)\n    }\n    listItem.append(...children)\n    listItem.select(0, 0)\n    const indent = Math.floor(match[1]!.length / LIST_INDENT_SIZE)\n    if (indent) {\n      listItem.setIndent(indent)\n    }\n  }\n}\n\nexport const listExport = (\n  listNode: ListNode,\n  exportChildren: (node: ElementNode) => string,\n  depth: number,\n): string => {\n  const output: string[] = []\n  const children = listNode.getChildren()\n  let index = 0\n  for (const listItemNode of children) {\n    if ($isListItemNode(listItemNode)) {\n      if (listItemNode.getChildrenSize() === 1) {\n        const firstChild = listItemNode.getFirstChild()\n        if ($isListNode(firstChild)) {\n          output.push(listExport(firstChild, exportChildren, depth + 1))\n          continue\n        }\n      }\n      const indent = ' '.repeat(depth * LIST_INDENT_SIZE)\n      const listType = listNode.getListType()\n      const prefix =\n        listType === 'number'\n          ? `${listNode.getStart() + index}. `\n          : listType === 'check'\n            ? `- [${listItemNode.getChecked() ? 'x' : ' '}] `\n            : '- '\n      output.push(indent + prefix + exportChildren(listItemNode))\n      index++\n    }\n  }\n\n  return output.join('\\n')\n}\n","'use client'\nimport { CheckListPlugin } from '@lexical/react/LexicalCheckListPlugin.js'\nimport React from 'react'\n\nimport type { PluginComponent } from '../../../../typesClient.js'\n\nexport const LexicalCheckListPlugin: PluginComponent<undefined> = () => {\n  return <CheckListPlugin />\n}\n","'use client'\nimport { $isListNode, INSERT_ORDERED_LIST_COMMAND, ListItemNode, ListNode } from '@lexical/list'\nimport { $isRangeSelection } from 'lexical'\n\nimport type { ToolbarGroup } from '../../../toolbars/types.js'\n\nimport { OrderedListIcon } from '../../../../lexical/ui/icons/OrderedList/index.js'\nimport { createClientFeature } from '../../../../utilities/createClientFeature.js'\nimport { toolbarTextDropdownGroupWithItems } from '../../../shared/toolbar/textDropdownGroup.js'\nimport { LexicalListPlugin } from '../../plugin/index.js'\nimport { shouldRegisterListBaseNodes } from '../../shared/shouldRegisterListBaseNodes.js'\nimport { slashMenuListGroupWithItems } from '../../shared/slashMenuListGroup.js'\nimport { ORDERED_LIST } from '../markdownTransformer.js'\n\nconst toolbarGroups: ToolbarGroup[] = [\n  toolbarTextDropdownGroupWithItems([\n    {\n      ChildComponent: OrderedListIcon,\n      isActive: ({ selection }) => {\n        if (!$isRangeSelection(selection)) {\n          return false\n        }\n        for (const node of selection.getNodes()) {\n          if ($isListNode(node) && node.getListType() === 'number') {\n            continue\n          }\n\n          const parent = node.getParent()\n\n          if ($isListNode(parent) && parent.getListType() === 'number') {\n            continue\n          }\n\n          const parentParent = parent?.getParent()\n          // Example scenario: Node = textNode, parent = listItemNode, parentParent = listNode\n          if ($isListNode(parentParent) && parentParent.getListType() === 'number') {\n            continue\n          }\n\n          return false\n        }\n        return true\n      },\n      key: 'orderedList',\n      label: ({ i18n }) => {\n        return i18n.t('lexical:orderedList:label')\n      },\n      onSelect: ({ editor }) => {\n        editor.dispatchCommand(INSERT_ORDERED_LIST_COMMAND, undefined)\n      },\n      order: 10,\n    },\n  ]),\n]\n\nexport const OrderedListFeatureClient = createClientFeature(({ featureProviderMap }) => {\n  const shouldRegister = shouldRegisterListBaseNodes('ordered', featureProviderMap)\n  return {\n    markdownTransformers: [ORDERED_LIST],\n    nodes: shouldRegister ? [ListNode, ListItemNode] : [],\n    plugins: shouldRegister\n      ? [\n          {\n            Component: LexicalListPlugin,\n            position: 'normal',\n          },\n        ]\n      : [],\n    slashMenu: {\n      groups: [\n        slashMenuListGroupWithItems([\n          {\n            Icon: OrderedListIcon,\n            key: 'orderedList',\n            keywords: ['ordered list', 'ol'],\n            label: ({ i18n }) => {\n              return i18n.t('lexical:orderedList:label')\n            },\n            onSelect: ({ editor }) => {\n              editor.dispatchCommand(INSERT_ORDERED_LIST_COMMAND, undefined)\n            },\n          },\n        ]),\n      ],\n    },\n    toolbarFixed: {\n      groups: toolbarGroups,\n    },\n    toolbarInline: {\n      groups: toolbarGroups,\n    },\n  }\n})\n","'use client'\nimport React from 'react'\n\nexport const OrderedListIcon: React.FC = () => (\n  <svg\n    aria-hidden=\"true\"\n    className=\"icon\"\n    fill=\"none\"\n    focusable=\"false\"\n    height=\"20\"\n    viewBox=\"0 0 20 20\"\n    width=\"20\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M5.89284 12.479C5.89284 13.368 5.26284 13.788 4.38084 14.236C3.75084 14.558 3.43584 14.789 3.40784 15.062H5.89984V16H2.06384V15.573C2.06384 14.523 2.92484 13.935 3.66684 13.501C4.38084 13.088 4.75184 12.878 4.75184 12.458C4.75184 12.08 4.52084 11.835 4.06584 11.835C3.58984 11.835 3.30984 12.199 3.28184 12.654H2.11284C2.18984 11.681 2.87584 10.918 4.07284 10.918C5.15784 10.918 5.89284 11.555 5.89284 12.479Z\"\n      fill=\"currentColor\"\n    />\n    <path\n      d=\"M2.68608 4.535V3.737C3.54008 3.737 3.90408 3.513 4.02308 2.995H4.89108V8H3.68008L3.68008 4.535H2.68608Z\"\n      fill=\"currentColor\"\n    />\n    <path d=\"M8 15L17 15\" stroke=\"currentColor\" strokeWidth=\"1.5\" />\n    <path d=\"M8 10L17 10\" stroke=\"currentColor\" strokeWidth=\"1.5\" />\n    <path d=\"M8 5L17 5\" stroke=\"currentColor\" strokeWidth=\"1.5\" />\n  </svg>\n)\n","import { $isListNode, ListItemNode, ListNode } from '@lexical/list'\n\nimport type { ElementTransformer } from '../../../packages/@lexical/markdown/MarkdownTransformers.js'\n\nimport { listExport, listReplace } from '../shared/markdown.js'\n\nexport const ORDERED_LIST: ElementTransformer = {\n  type: 'element',\n  dependencies: [ListNode, ListItemNode],\n  export: (node, exportChildren) => {\n    return $isListNode(node) ? listExport(node, exportChildren, 0) : null\n  },\n  regExp: /^(\\s*)(\\d+)\\.\\s/,\n  replace: listReplace('number'),\n}\n","'use client'\n\nimport { $isListNode, INSERT_UNORDERED_LIST_COMMAND, ListItemNode, ListNode } from '@lexical/list'\nimport { $isRangeSelection } from 'lexical'\n\nimport type { ToolbarGroup } from '../../../toolbars/types.js'\n\nimport { UnorderedListIcon } from '../../../../lexical/ui/icons/UnorderedList/index.js'\nimport { createClientFeature } from '../../../../utilities/createClientFeature.js'\nimport { toolbarTextDropdownGroupWithItems } from '../../../shared/toolbar/textDropdownGroup.js'\nimport { LexicalListPlugin } from '../../plugin/index.js'\nimport { slashMenuListGroupWithItems } from '../../shared/slashMenuListGroup.js'\nimport { UNORDERED_LIST } from '../markdownTransformer.js'\n\nconst toolbarGroups: ToolbarGroup[] = [\n  toolbarTextDropdownGroupWithItems([\n    {\n      ChildComponent: UnorderedListIcon,\n      isActive: ({ selection }) => {\n        if (!$isRangeSelection(selection)) {\n          return false\n        }\n        for (const node of selection.getNodes()) {\n          if ($isListNode(node) && node.getListType() === 'bullet') {\n            continue\n          }\n\n          const parent = node.getParent()\n\n          if ($isListNode(parent) && parent.getListType() === 'bullet') {\n            continue\n          }\n\n          const parentParent = parent?.getParent()\n          // Example scenario: Node = textNode, parent = listItemNode, parentParent = listNode\n          if ($isListNode(parentParent) && parentParent.getListType() === 'bullet') {\n            continue\n          }\n\n          return false\n        }\n        return true\n      },\n      key: 'unorderedList',\n      label: ({ i18n }) => {\n        return i18n.t('lexical:unorderedList:label')\n      },\n      onSelect: ({ editor }) => {\n        editor.dispatchCommand(INSERT_UNORDERED_LIST_COMMAND, undefined)\n      },\n      order: 11,\n    },\n  ]),\n]\n\nexport const UnorderedListFeatureClient = createClientFeature({\n  markdownTransformers: [UNORDERED_LIST],\n  nodes: [ListNode, ListItemNode],\n  plugins: [\n    {\n      Component: LexicalListPlugin,\n      position: 'normal',\n    },\n  ],\n  slashMenu: {\n    groups: [\n      slashMenuListGroupWithItems([\n        {\n          Icon: UnorderedListIcon,\n          key: 'unorderedList',\n          keywords: ['unordered list', 'ul'],\n          label: ({ i18n }) => {\n            return i18n.t('lexical:unorderedList:label')\n          },\n          onSelect: ({ editor }) => {\n            editor.dispatchCommand(INSERT_UNORDERED_LIST_COMMAND, undefined)\n          },\n        },\n      ]),\n    ],\n  },\n  toolbarFixed: {\n    groups: toolbarGroups,\n  },\n  toolbarInline: {\n    groups: toolbarGroups,\n  },\n})\n","'use client'\nimport React from 'react'\n\nexport const UnorderedListIcon: React.FC = () => (\n  <svg\n    aria-hidden=\"true\"\n    className=\"icon\"\n    fill=\"none\"\n    focusable=\"false\"\n    height=\"20\"\n    viewBox=\"0 0 20 20\"\n    width=\"20\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <circle cx=\"4\" cy=\"5\" fill=\"currentColor\" r=\"1.15\" stroke=\"currentColor\" strokeWidth=\"0.3\" />\n    <circle cx=\"4\" cy=\"10\" fill=\"currentColor\" r=\"1.15\" stroke=\"currentColor\" strokeWidth=\"0.3\" />\n    <circle cx=\"4\" cy=\"15\" fill=\"currentColor\" r=\"1.15\" stroke=\"currentColor\" strokeWidth=\"0.3\" />\n    <path d=\"M17 5H7\" stroke=\"currentColor\" strokeWidth=\"1.5\" />\n    <path d=\"M17 10H7\" stroke=\"currentColor\" strokeWidth=\"1.5\" />\n    <path d=\"M17 15H7\" stroke=\"currentColor\" strokeWidth=\"1.5\" />\n  </svg>\n)\n","import { $isListNode, ListItemNode, ListNode } from '@lexical/list'\n\nimport type { ElementTransformer } from '../../../packages/@lexical/markdown/MarkdownTransformers.js'\n\nimport { listExport, listReplace } from '../shared/markdown.js'\n\nexport const UNORDERED_LIST: ElementTransformer = {\n  type: 'element',\n  dependencies: [ListNode, ListItemNode],\n  export: (node, exportChildren) => {\n    return $isListNode(node) ? listExport(node, exportChildren, 0) : null\n  },\n  regExp: /^(\\s*)[-*+]\\s/,\n  replace: listReplace('bullet'),\n}\n","import type { EditorConfig, LexicalNode, NodeKey, SerializedLexicalNode, Spread } from 'lexical'\nimport type { JSX } from 'react'\n\nimport { addClassNamesToElement } from '@lexical/utils'\nimport { $applyNodeReplacement, DecoratorNode } from 'lexical'\nimport * as React from 'react'\n\nexport type UnknownConvertedNodeData = {\n  nodeData: unknown\n  nodeType: string\n}\n\nexport type SerializedUnknownConvertedNode = Spread<\n  {\n    data: UnknownConvertedNodeData\n  },\n  SerializedLexicalNode\n>\n\nconst Component = React.lazy(() =>\n  import('./Component.js').then((module) => ({\n    default: module.UnknownConvertedNodeComponent,\n  })),\n)\n\n/** @noInheritDoc */\nexport class UnknownConvertedNode extends DecoratorNode<JSX.Element> {\n  __data: UnknownConvertedNodeData\n\n  constructor({ data, key }: { data: UnknownConvertedNodeData; key?: NodeKey }) {\n    super(key)\n    this.__data = data\n  }\n\n  static override clone(node: UnknownConvertedNode): UnknownConvertedNode {\n    return new this({\n      data: node.__data,\n      key: node.__key,\n    })\n  }\n\n  static override getType(): string {\n    return 'unknownConverted'\n  }\n\n  static override importJSON(serializedNode: SerializedUnknownConvertedNode): UnknownConvertedNode {\n    const node = $createUnknownConvertedNode({ data: serializedNode.data })\n    return node\n  }\n\n  canInsertTextAfter(): true {\n    return true\n  }\n\n  canInsertTextBefore(): true {\n    return true\n  }\n\n  override createDOM(config: EditorConfig): HTMLElement {\n    const element = document.createElement('span')\n    addClassNamesToElement(element, 'unknownConverted')\n    return element\n  }\n\n  override decorate(): JSX.Element {\n    return <Component data={this.__data} />\n  }\n\n  override exportJSON(): SerializedUnknownConvertedNode {\n    return {\n      type: this.getType(),\n      data: this.__data,\n      version: 1,\n    }\n  }\n\n  // Mutation\n\n  override isInline(): boolean {\n    return true\n  }\n\n  override updateDOM(prevNode: this, dom: HTMLElement): boolean {\n    return false\n  }\n}\n\nexport function $createUnknownConvertedNode({\n  data,\n}: {\n  data: UnknownConvertedNodeData\n}): UnknownConvertedNode {\n  return $applyNodeReplacement(\n    new UnknownConvertedNode({\n      data,\n    }),\n  )\n}\n\nexport function $isUnknownConvertedNode(\n  node: LexicalNode | null | undefined,\n): node is UnknownConvertedNode {\n  return node instanceof UnknownConvertedNode\n}\n","'use client'\n\nimport { createClientFeature } from '../../../utilities/createClientFeature.js'\nimport { UnknownConvertedNode } from './nodes/unknownConvertedNode/index.js'\n\nexport const LexicalPluginToLexicalFeatureClient = createClientFeature(() => {\n  return {\n    nodes: [UnknownConvertedNode],\n  }\n})\n","import type { EditorConfig, LexicalNode, NodeKey, SerializedLexicalNode, Spread } from 'lexical'\nimport type { JSX } from 'react'\n\nimport { addClassNamesToElement } from '@lexical/utils'\nimport { $applyNodeReplacement, DecoratorNode } from 'lexical'\nimport * as React from 'react'\n\nexport type UnknownConvertedNodeData = {\n  nodeData: unknown\n  nodeType: string\n}\n\nexport type SerializedUnknownConvertedNode = Spread<\n  {\n    data: UnknownConvertedNodeData\n  },\n  SerializedLexicalNode\n>\n\nconst Component = React.lazy(() =>\n  import('./Component.js').then((module) => ({\n    default: module.UnknownConvertedNodeComponent,\n  })),\n)\n\n/** @noInheritDoc */\nexport class UnknownConvertedNode extends DecoratorNode<JSX.Element> {\n  __data: UnknownConvertedNodeData\n\n  constructor({ data, key }: { data: UnknownConvertedNodeData; key?: NodeKey }) {\n    super(key)\n    this.__data = data\n  }\n\n  static override clone(node: UnknownConvertedNode): UnknownConvertedNode {\n    return new this({\n      data: node.__data,\n      key: node.__key,\n    })\n  }\n\n  static override getType(): string {\n    return 'unknownConverted'\n  }\n\n  static override importJSON(serializedNode: SerializedUnknownConvertedNode): UnknownConvertedNode {\n    const node = $createUnknownConvertedNode({ data: serializedNode.data })\n    return node\n  }\n\n  canInsertTextAfter(): true {\n    return true\n  }\n\n  canInsertTextBefore(): true {\n    return true\n  }\n\n  override createDOM(config: EditorConfig): HTMLElement {\n    const element = document.createElement('span')\n    addClassNamesToElement(element, 'unknownConverted')\n    return element\n  }\n\n  override decorate(): JSX.Element {\n    return <Component data={this.__data} />\n  }\n\n  override exportJSON(): SerializedUnknownConvertedNode {\n    return {\n      type: this.getType(),\n      data: this.__data,\n      version: 1,\n    }\n  }\n\n  // Mutation\n\n  override isInline(): boolean {\n    return true\n  }\n\n  override updateDOM(prevNode: this, dom: HTMLElement): boolean {\n    return false\n  }\n}\n\nexport function $createUnknownConvertedNode({\n  data,\n}: {\n  data: UnknownConvertedNodeData\n}): UnknownConvertedNode {\n  return $applyNodeReplacement(\n    new UnknownConvertedNode({\n      data,\n    }),\n  )\n}\n\nexport function $isUnknownConvertedNode(\n  node: LexicalNode | null | undefined,\n): node is UnknownConvertedNode {\n  return node instanceof UnknownConvertedNode\n}\n","'use client'\n\nimport { createClientFeature } from '../../../utilities/createClientFeature.js'\nimport { UnknownConvertedNode } from './nodes/unknownConvertedNode/index.js'\n\nexport const SlateToLexicalFeatureClient = createClientFeature(() => {\n  return {\n    nodes: [UnknownConvertedNode],\n  }\n})\n","'use client'\n\nimport { $setBlocksType } from '@lexical/selection'\nimport { $createParagraphNode, $getSelection, $isParagraphNode, $isRangeSelection } from 'lexical'\n\nimport type { ToolbarGroup } from '../../toolbars/types.js'\n\nimport { TextIcon } from '../../../lexical/ui/icons/Text/index.js'\nimport { createClientFeature } from '../../../utilities/createClientFeature.js'\nimport { slashMenuBasicGroupWithItems } from '../../shared/slashMenu/basicGroup.js'\nimport { toolbarTextDropdownGroupWithItems } from '../../shared/toolbar/textDropdownGroup.js'\n\nconst toolbarGroups: ToolbarGroup[] = [\n  toolbarTextDropdownGroupWithItems([\n    {\n      ChildComponent: TextIcon,\n      isActive: ({ selection }) => {\n        if (!$isRangeSelection(selection)) {\n          return false\n        }\n        for (const node of selection.getNodes()) {\n          if (!$isParagraphNode(node) && !$isParagraphNode(node.getParent())) {\n            return false\n          }\n        }\n        return true\n      },\n      key: 'paragraph',\n      label: ({ i18n }) => {\n        return i18n.t('lexical:paragraph:label2')\n      },\n      onSelect: ({ editor }) => {\n        editor.update(() => {\n          const selection = $getSelection()\n          $setBlocksType(selection, () => $createParagraphNode())\n        })\n      },\n      order: 1,\n    },\n  ]),\n]\n\nexport const ParagraphFeatureClient = createClientFeature({\n  slashMenu: {\n    groups: [\n      slashMenuBasicGroupWithItems([\n        {\n          Icon: TextIcon,\n          key: 'paragraph',\n          keywords: ['normal', 'paragraph', 'p', 'text'],\n          label: ({ i18n }) => {\n            return i18n.t('lexical:paragraph:label')\n          },\n          onSelect: ({ editor }) => {\n            editor.update(() => {\n              const selection = $getSelection()\n              $setBlocksType(selection, () => $createParagraphNode())\n            })\n          },\n        },\n      ]),\n    ],\n  },\n  toolbarFixed: {\n    groups: toolbarGroups,\n  },\n  toolbarInline: {\n    groups: toolbarGroups,\n  },\n})\n","'use client'\n\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext'\nimport { useEffect, useState } from 'react'\n\n// eslint-disable-next-line payload/no-imports-from-exports-dir\nimport { defaultJSXConverters, RichText } from '../../../../../exports/react/index.js'\nimport './style.scss'\n\nexport function RichTextPlugin() {\n  const [editor] = useLexicalComposerContext()\n  const [editorState, setEditorState] = useState(editor.getEditorState().toJSON())\n\n  useEffect(() => {\n    return editor.registerUpdateListener(({ editorState }) => {\n      setEditorState(editorState.toJSON())\n    })\n  }, [editor])\n\n  return (\n    <div className=\"debug-jsx-converter\">\n      <RichText converters={defaultJSXConverters} data={editorState} />\n    </div>\n  )\n}\n","import type { SerializedEditorState } from 'lexical'\n\nimport React from 'react'\n\nimport type {\n  DefaultNodeTypes,\n  SerializedBlockNode,\n  SerializedInlineBlockNode,\n} from '../../../../nodeTypes.js'\nimport type { JSXConverters } from '../converter/types.js'\n\nimport { defaultJSXConverters } from '../converter/defaultConverters.js'\nimport { convertLexicalToJSX } from '../converter/index.js'\n\nexport type JSXConvertersFunction<\n  T extends { [key: string]: any; type?: string } =\n    | DefaultNodeTypes\n    | SerializedBlockNode<{ blockName?: null | string }>\n    | SerializedInlineBlockNode<{ blockName?: null | string }>,\n> = (args: { defaultConverters: JSXConverters<DefaultNodeTypes> }) => JSXConverters<T>\n\ntype RichTextProps = {\n  /**\n   * Override class names for the container.\n   */\n  className?: string\n  /**\n   * Custom converters to transform your nodes to JSX. Can be an object or a function that receives the default converters.\n   */\n  converters?: JSXConverters | JSXConvertersFunction\n  /**\n   * Serialized editor state to render.\n   */\n  data: SerializedEditorState\n  /**\n   * If true, removes the container div wrapper.\n   */\n  disableContainer?: boolean\n  /**\n   * If true, disables indentation globally. If an array, disables for specific node `type` values.\n   */\n  disableIndent?: boolean | string[]\n  /**\n   * If true, disables text alignment globally. If an array, disables for specific node `type` values.\n   */\n  disableTextAlign?: boolean | string[]\n}\n\nexport const RichText: React.FC<RichTextProps> = ({\n  className,\n  converters,\n  data: editorState,\n  disableContainer,\n  disableIndent,\n  disableTextAlign,\n}) => {\n  if (!editorState) {\n    return null\n  }\n\n  let finalConverters: JSXConverters = {}\n  if (converters) {\n    if (typeof converters === 'function') {\n      finalConverters = converters({ defaultConverters: defaultJSXConverters })\n    } else {\n      finalConverters = converters\n    }\n  } else {\n    finalConverters = defaultJSXConverters\n  }\n\n  const content =\n    editorState &&\n    !Array.isArray(editorState) &&\n    typeof editorState === 'object' &&\n    'root' in editorState &&\n    convertLexicalToJSX({\n      converters: finalConverters,\n      data: editorState,\n      disableIndent,\n      disableTextAlign,\n    })\n\n  if (disableContainer) {\n    return <>{content}</>\n  }\n\n  return <div className={className ?? 'payload-richtext'}>{content}</div>\n}\n","import type { SerializedQuoteNode } from '../../../../../nodeTypes.js'\nimport type { JSXConverters } from '../types.js'\n\nexport const BlockquoteJSXConverter: JSXConverters<SerializedQuoteNode> = {\n  quote: ({ node, nodesToJSX }) => {\n    const children = nodesToJSX({\n      nodes: node.children,\n    })\n\n    return <blockquote>{children}</blockquote>\n  },\n}\n","import type { SerializedHeadingNode } from '../../../../../nodeTypes.js'\nimport type { JSXConverters } from '../types.js'\n\nexport const HeadingJSXConverter: JSXConverters<SerializedHeadingNode> = {\n  heading: ({ node, nodesToJSX }) => {\n    const children = nodesToJSX({\n      nodes: node.children,\n    })\n\n    const NodeTag = node.tag\n\n    return <NodeTag>{children}</NodeTag>\n  },\n}\n","import type { SerializedHorizontalRuleNode } from '../../../../../nodeTypes.js'\nimport type { JSXConverters } from '../types.js'\nexport const HorizontalRuleJSXConverter: JSXConverters<SerializedHorizontalRuleNode> = {\n  horizontalrule: <hr />,\n}\n","import type { SerializedLineBreakNode } from '../../../../../nodeTypes.js'\nimport type { JSXConverters } from '../types.js'\n\nexport const LinebreakJSXConverter: JSXConverters<SerializedLineBreakNode> = {\n  linebreak: <br />,\n}\n","import type { SerializedAutoLinkNode, SerializedLinkNode } from '../../../../../nodeTypes.js'\nimport type { JSXConverters } from '../types.js'\n\nexport const LinkJSXConverter: (args: {\n  internalDocToHref?: (args: { linkNode: SerializedLinkNode }) => string\n}) => JSXConverters<SerializedAutoLinkNode | SerializedLinkNode> = ({ internalDocToHref }) => ({\n  autolink: ({ node, nodesToJSX }) => {\n    const children = nodesToJSX({\n      nodes: node.children,\n    })\n\n    const rel: string | undefined = node.fields.newTab ? 'noopener noreferrer' : undefined\n    const target: string | undefined = node.fields.newTab ? '_blank' : undefined\n\n    return (\n      <a href={node.fields.url} {...{ rel, target }}>\n        {children}\n      </a>\n    )\n  },\n  link: ({ node, nodesToJSX }) => {\n    const children = nodesToJSX({\n      nodes: node.children,\n    })\n\n    const rel: string | undefined = node.fields.newTab ? 'noopener noreferrer' : undefined\n    const target: string | undefined = node.fields.newTab ? '_blank' : undefined\n\n    let href: string = node.fields.url ?? ''\n    if (node.fields.linkType === 'internal') {\n      if (internalDocToHref) {\n        href = internalDocToHref({ linkNode: node })\n      } else {\n        console.error(\n          'Lexical => JSX converter: Link converter: found internal link, but internalDocToHref is not provided',\n        )\n        href = '#' // fallback\n      }\n    }\n\n    return (\n      <a href={href} {...{ rel, target }}>\n        {children}\n      </a>\n    )\n  },\n})\n","import { v4 as uuidv4 } from 'uuid'\n\nimport type { SerializedListItemNode, SerializedListNode } from '../../../../../nodeTypes.js'\nimport type { JSXConverters } from '../types.js'\n\nexport const ListJSXConverter: JSXConverters<SerializedListItemNode | SerializedListNode> = {\n  list: ({ node, nodesToJSX }) => {\n    const children = nodesToJSX({\n      nodes: node.children,\n    })\n\n    const NodeTag = node.tag\n\n    return <NodeTag className={`list-${node?.listType}`}>{children}</NodeTag>\n  },\n  listitem: ({ node, nodesToJSX, parent }) => {\n    const hasSubLists = node.children.some((child) => child.type === 'list')\n\n    const children = nodesToJSX({\n      nodes: node.children,\n    })\n\n    if ('listType' in parent && parent?.listType === 'check') {\n      const uuid = uuidv4()\n\n      return (\n        <li\n          aria-checked={node.checked ? 'true' : 'false'}\n          className={`list-item-checkbox${node.checked ? ' list-item-checkbox-checked' : ' list-item-checkbox-unchecked'}${hasSubLists ? ' nestedListItem' : ''}`}\n          // eslint-disable-next-line jsx-a11y/no-noninteractive-element-to-interactive-role\n          role=\"checkbox\"\n          style={{ listStyleType: 'none' }}\n          tabIndex={-1}\n          value={node?.value}\n        >\n          {hasSubLists ? (\n            children\n          ) : (\n            <>\n              <input checked={node.checked} id={uuid} readOnly={true} type=\"checkbox\" />\n              <label htmlFor={uuid}>{children}</label>\n              <br />\n            </>\n          )}\n        </li>\n      )\n    } else {\n      return (\n        <li\n          className={`${hasSubLists ? 'nestedListItem' : ''}`}\n          style={hasSubLists ? { listStyleType: 'none' } : undefined}\n          value={node?.value}\n        >\n          {children}\n        </li>\n      )\n    }\n  },\n}\n","import type { SerializedParagraphNode } from '../../../../../nodeTypes.js'\nimport type { JSXConverters } from '../types.js'\n\nexport const ParagraphJSXConverter: JSXConverters<SerializedParagraphNode> = {\n  paragraph: ({ node, nodesToJSX }) => {\n    const children = nodesToJSX({\n      nodes: node.children,\n    })\n\n    if (!children?.length) {\n      return (\n        <p>\n          <br />\n        </p>\n      )\n    }\n\n    return <p>{children}</p>\n  },\n}\n","import type { SerializedTabNode } from '../../../../../nodeTypes.js'\nimport type { JSXConverters } from '../types.js'\n\nexport const TabJSXConverter: JSXConverters<SerializedTabNode> = {\n  tab: '\\t',\n}\n","import type {\n  SerializedTableCellNode,\n  SerializedTableNode,\n  SerializedTableRowNode,\n} from '../../../../../nodeTypes.js'\nimport type { JSXConverters } from '../types.js'\n\nexport const TableJSXConverter: JSXConverters<\n  SerializedTableCellNode | SerializedTableNode | SerializedTableRowNode\n> = {\n  table: ({ node, nodesToJSX }) => {\n    const children = nodesToJSX({\n      nodes: node.children,\n    })\n    return (\n      <div className=\"lexical-table-container\">\n        <table className=\"lexical-table\" style={{ borderCollapse: 'collapse' }}>\n          <tbody>{children}</tbody>\n        </table>\n      </div>\n    )\n  },\n  tablecell: ({ node, nodesToJSX }) => {\n    const children = nodesToJSX({\n      nodes: node.children,\n    })\n\n    const TagName = node.headerState > 0 ? 'th' : 'td' // Use capital letter to denote a component\n    const headerStateClass = `lexical-table-cell-header-${node.headerState}`\n    const style = {\n      backgroundColor: node.backgroundColor || undefined, // Use undefined to avoid setting the style property if not needed\n      border: '1px solid #ccc',\n      padding: '8px',\n    }\n\n    // Note: JSX does not support setting attributes directly as strings, so you must convert the colSpan and rowSpan to numbers\n    const colSpan = node.colSpan && node.colSpan > 1 ? node.colSpan : undefined\n    const rowSpan = node.rowSpan && node.rowSpan > 1 ? node.rowSpan : undefined\n\n    return (\n      <TagName\n        className={`lexical-table-cell ${headerStateClass}`}\n        colSpan={colSpan} // colSpan and rowSpan will only be added if they are not null\n        rowSpan={rowSpan}\n        style={style}\n      >\n        {children}\n      </TagName>\n    )\n  },\n  tablerow: ({ node, nodesToJSX }) => {\n    const children = nodesToJSX({\n      nodes: node.children,\n    })\n    return <tr className=\"lexical-table-row\">{children}</tr>\n  },\n}\n","import React from 'react'\n\nimport type { SerializedTextNode } from '../../../../../nodeTypes.js'\nimport type { JSXConverters } from '../types.js'\n\nimport { NodeFormat } from '../../../../../lexical/utils/nodeFormat.js'\n\nexport const TextJSXConverter: JSXConverters<SerializedTextNode> = {\n  text: ({ node }) => {\n    let text: React.ReactNode = node.text\n\n    if (node.format & NodeFormat.IS_BOLD) {\n      text = <strong>{text}</strong>\n    }\n    if (node.format & NodeFormat.IS_ITALIC) {\n      text = <em>{text}</em>\n    }\n    if (node.format & NodeFormat.IS_STRIKETHROUGH) {\n      text = <span style={{ textDecoration: 'line-through' }}>{text}</span>\n    }\n    if (node.format & NodeFormat.IS_UNDERLINE) {\n      text = <span style={{ textDecoration: 'underline' }}>{text}</span>\n    }\n    if (node.format & NodeFormat.IS_CODE) {\n      text = <code>{text}</code>\n    }\n    if (node.format & NodeFormat.IS_SUBSCRIPT) {\n      text = <sub>{text}</sub>\n    }\n    if (node.format & NodeFormat.IS_SUPERSCRIPT) {\n      text = <sup>{text}</sup>\n    }\n\n    return text\n  },\n}\n","/* eslint-disable perfectionist/sort-objects */\n/* eslint-disable regexp/no-obscure-range */\n/* eslint-disable @typescript-eslint/no-redundant-type-constituents */\n/* eslint-disable regexp/no-misleading-unicode-character */\n//This copy-and-pasted from lexical here: https://github.com/facebook/lexical/blob/c2ceee223f46543d12c574e62155e619f9a18a5d/packages/lexical/src/LexicalConstants.ts\n\nimport type { ElementFormatType, TextFormatType, TextModeType } from 'lexical'\nexport type TextDetailType = 'directionless' | 'unmergable'\n\n// DOM\nexport const NodeFormat = {\n  DOM_ELEMENT_TYPE: 1,\n  DOM_TEXT_TYPE: 3,\n  // Reconciling\n  NO_DIRTY_NODES: 0,\n  HAS_DIRTY_NODES: 1,\n  FULL_RECONCILE: 2,\n  // Text node modes\n  IS_NORMAL: 0,\n  IS_TOKEN: 1,\n  IS_SEGMENTED: 2,\n  IS_INERT: 3,\n  // Text node formatting\n  IS_BOLD: 1,\n  IS_ITALIC: 1 << 1,\n  IS_STRIKETHROUGH: 1 << 2,\n  IS_UNDERLINE: 1 << 3,\n  IS_CODE: 1 << 4,\n  IS_SUBSCRIPT: 1 << 5,\n  IS_SUPERSCRIPT: 1 << 6,\n  IS_HIGHLIGHT: 1 << 7,\n  // Text node details\n  IS_DIRECTIONLESS: 1,\n  IS_UNMERGEABLE: 1 << 1,\n  // Element node formatting\n  IS_ALIGN_LEFT: 1,\n  IS_ALIGN_CENTER: 2,\n  IS_ALIGN_RIGHT: 3,\n  IS_ALIGN_JUSTIFY: 4,\n  IS_ALIGN_START: 5,\n  IS_ALIGN_END: 6,\n} as const\n\nexport const IS_ALL_FORMATTING =\n  NodeFormat.IS_BOLD |\n  NodeFormat.IS_ITALIC |\n  NodeFormat.IS_STRIKETHROUGH |\n  NodeFormat.IS_UNDERLINE |\n  NodeFormat.IS_CODE |\n  NodeFormat.IS_SUBSCRIPT |\n  NodeFormat.IS_SUPERSCRIPT |\n  NodeFormat.IS_HIGHLIGHT\n\n// Reconciliation\nexport const NON_BREAKING_SPACE = '\\u00A0'\n\nexport const DOUBLE_LINE_BREAK = '\\n\\n'\n\n// For FF, we need to use a non-breaking space, or it gets composition\n// in a stuck state.\n\nconst RTL = '\\u0591-\\u07FF\\uFB1D-\\uFDFD\\uFE70-\\uFEFC'\nconst LTR =\n  'A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6' +\n  '\\u00F8-\\u02B8\\u0300-\\u0590\\u0800-\\u1FFF\\u200E\\u2C00-\\uFB1C' +\n  '\\uFE00-\\uFE6F\\uFEFD-\\uFFFF'\n\n// eslint-disable-next-line no-misleading-character-class\nexport const RTL_REGEX = new RegExp('^[^' + LTR + ']*[' + RTL + ']')\n// eslint-disable-next-line no-misleading-character-class\nexport const LTR_REGEX = new RegExp('^[^' + RTL + ']*[' + LTR + ']')\n\nexport const TEXT_TYPE_TO_FORMAT: Record<string | TextFormatType, number> = {\n  bold: NodeFormat.IS_BOLD,\n  code: NodeFormat.IS_CODE,\n  highlight: NodeFormat.IS_HIGHLIGHT,\n  italic: NodeFormat.IS_ITALIC,\n  strikethrough: NodeFormat.IS_STRIKETHROUGH,\n  subscript: NodeFormat.IS_SUBSCRIPT,\n  superscript: NodeFormat.IS_SUPERSCRIPT,\n  underline: NodeFormat.IS_UNDERLINE,\n}\n\nexport const DETAIL_TYPE_TO_DETAIL: Record<string | TextDetailType, number> = {\n  directionless: NodeFormat.IS_DIRECTIONLESS,\n  unmergeable: NodeFormat.IS_UNMERGEABLE,\n}\n\nexport const ELEMENT_TYPE_TO_FORMAT: Record<Exclude<ElementFormatType, ''>, number> = {\n  center: NodeFormat.IS_ALIGN_CENTER,\n  end: NodeFormat.IS_ALIGN_END,\n  justify: NodeFormat.IS_ALIGN_JUSTIFY,\n  left: NodeFormat.IS_ALIGN_LEFT,\n  right: NodeFormat.IS_ALIGN_RIGHT,\n  start: NodeFormat.IS_ALIGN_START,\n}\n\nexport const ELEMENT_FORMAT_TO_TYPE: Record<number, ElementFormatType> = {\n  [NodeFormat.IS_ALIGN_CENTER]: 'center',\n  [NodeFormat.IS_ALIGN_END]: 'end',\n  [NodeFormat.IS_ALIGN_JUSTIFY]: 'justify',\n  [NodeFormat.IS_ALIGN_LEFT]: 'left',\n  [NodeFormat.IS_ALIGN_RIGHT]: 'right',\n  [NodeFormat.IS_ALIGN_START]: 'start',\n}\n\nexport const TEXT_MODE_TO_TYPE: Record<TextModeType, 0 | 1 | 2> = {\n  normal: NodeFormat.IS_NORMAL,\n  segmented: NodeFormat.IS_SEGMENTED,\n  token: NodeFormat.IS_TOKEN,\n}\n\nexport const TEXT_TYPE_TO_MODE: Record<number, TextModeType> = {\n  [NodeFormat.IS_NORMAL]: 'normal',\n  [NodeFormat.IS_SEGMENTED]: 'segmented',\n  [NodeFormat.IS_TOKEN]: 'token',\n}\n","import type { FileData, FileSizeImproved, TypeWithID } from 'payload'\n\nimport type { SerializedUploadNode } from '../../../../../nodeTypes.js'\nimport type { UploadDataImproved } from '../../../../upload/server/nodes/UploadNode.js'\nimport type { JSXConverters } from '../types.js'\n\nexport const UploadJSXConverter: JSXConverters<SerializedUploadNode> = {\n  upload: ({ node }) => {\n    // TO-DO (v4): SerializedUploadNode should use UploadData_P4\n    const uploadNode = node as UploadDataImproved\n    if (typeof uploadNode.value !== 'object') {\n      return null\n    }\n\n    const uploadDoc = uploadNode.value as FileData & TypeWithID\n\n    const url = uploadDoc.url\n\n    /**\n     * If the upload is not an image, return a link to the upload\n     */\n    if (!uploadDoc.mimeType.startsWith('image')) {\n      return (\n        <a href={url} rel=\"noopener noreferrer\">\n          {uploadDoc.filename}\n        </a>\n      )\n    }\n\n    /**\n     * If the upload is a simple image with no different sizes, return a simple img tag\n     */\n    if (!uploadDoc.sizes || !Object.keys(uploadDoc.sizes).length) {\n      return (\n        <img alt={uploadDoc.filename} height={uploadDoc.height} src={url} width={uploadDoc.width} />\n      )\n    }\n\n    /**\n     * If the upload is an image with different sizes, return a picture element\n     */\n    const pictureJSX: React.ReactNode[] = []\n\n    // Iterate through each size in the data.sizes object\n    for (const size in uploadDoc.sizes) {\n      const imageSize = uploadDoc.sizes[size] as FileSizeImproved\n\n      // Skip if any property of the size object is null\n      if (\n        !imageSize ||\n        !imageSize.width ||\n        !imageSize.height ||\n        !imageSize.mimeType ||\n        !imageSize.filesize ||\n        !imageSize.filename ||\n        !imageSize.url\n      ) {\n        continue\n      }\n      const imageSizeURL = imageSize?.url\n\n      pictureJSX.push(\n        <source\n          key={size}\n          media={`(max-width: ${imageSize.width}px)`}\n          srcSet={imageSizeURL}\n          type={imageSize.mimeType}\n        />,\n      )\n    }\n\n    // Add the default img tag\n    pictureJSX.push(\n      <img\n        alt={uploadDoc?.filename}\n        height={uploadDoc?.height}\n        key={'image'}\n        src={url}\n        width={uploadDoc?.width}\n      />,\n    )\n    return <picture>{pictureJSX}</picture>\n  },\n}\n","import type { DefaultNodeTypes } from '../../../../nodeTypes.js'\nimport type { JSXConverters } from './types.js'\n\nimport { BlockquoteJSXConverter } from './converters/blockquote.js'\nimport { HeadingJSXConverter } from './converters/heading.js'\nimport { HorizontalRuleJSXConverter } from './converters/horizontalRule.js'\nimport { LinebreakJSXConverter } from './converters/linebreak.js'\nimport { LinkJSXConverter } from './converters/link.js'\nimport { ListJSXConverter } from './converters/list.js'\nimport { ParagraphJSXConverter } from './converters/paragraph.js'\nimport { TabJSXConverter } from './converters/tab.js'\nimport { TableJSXConverter } from './converters/table.js'\nimport { TextJSXConverter } from './converters/text.js'\nimport { UploadJSXConverter } from './converters/upload.js'\n\nexport const defaultJSXConverters: JSXConverters<DefaultNodeTypes> = {\n  ...ParagraphJSXConverter,\n  ...TextJSXConverter,\n  ...LinebreakJSXConverter,\n  ...BlockquoteJSXConverter,\n  ...TableJSXConverter,\n  ...HeadingJSXConverter,\n  ...HorizontalRuleJSXConverter,\n  ...ListJSXConverter,\n  ...LinkJSXConverter({}),\n  ...UploadJSXConverter,\n  ...TabJSXConverter,\n}\n","/* eslint-disable no-console */\nimport type { SerializedEditorState, SerializedLexicalNode } from 'lexical'\n\nimport React from 'react'\n\nimport type { SerializedBlockNode, SerializedInlineBlockNode } from '../../../../nodeTypes.js'\nimport type { JSXConverter, JSXConverters, SerializedLexicalNodeWithParent } from './types.js'\n\nimport { hasText } from '../../../../validate/hasText.js'\n\nexport type ConvertLexicalToJSXArgs = {\n  converters: JSXConverters\n  data: SerializedEditorState\n  disableIndent?: boolean | string[]\n  disableTextAlign?: boolean | string[]\n}\n\nexport function convertLexicalToJSX({\n  converters,\n  data,\n  disableIndent,\n  disableTextAlign,\n}: ConvertLexicalToJSXArgs): React.ReactNode {\n  if (hasText(data)) {\n    return convertLexicalNodesToJSX({\n      converters,\n      disableIndent,\n      disableTextAlign,\n      nodes: data?.root?.children,\n      parent: data?.root,\n    })\n  }\n  return <></>\n}\n\nexport function convertLexicalNodesToJSX({\n  converters,\n  disableIndent,\n  disableTextAlign,\n  nodes,\n  parent,\n}: {\n  converters: JSXConverters\n  disableIndent?: boolean | string[]\n  disableTextAlign?: boolean | string[]\n  nodes: SerializedLexicalNode[]\n  parent: SerializedLexicalNodeWithParent\n}): React.ReactNode[] {\n  const unknownConverter: JSXConverter<any> = converters.unknown as JSXConverter<any>\n\n  const jsxArray: React.ReactNode[] = nodes.map((node, i) => {\n    let converterForNode: JSXConverter<any> | undefined\n    if (node.type === 'block') {\n      converterForNode = converters?.blocks?.[(node as SerializedBlockNode)?.fields?.blockType]\n      if (!converterForNode && !unknownConverter) {\n        console.error(\n          `Lexical => JSX converter: Blocks converter: found ${(node as SerializedBlockNode)?.fields?.blockType} block, but no converter is provided`,\n        )\n      }\n    } else if (node.type === 'inlineBlock') {\n      converterForNode =\n        converters?.inlineBlocks?.[(node as SerializedInlineBlockNode)?.fields?.blockType]\n      if (!converterForNode && !unknownConverter) {\n        console.error(\n          `Lexical => JSX converter: Inline Blocks converter: found ${(node as SerializedInlineBlockNode)?.fields?.blockType} inline block, but no converter is provided`,\n        )\n      }\n    } else {\n      converterForNode = converters[node.type] as JSXConverter<any>\n    }\n\n    try {\n      if (!converterForNode && unknownConverter) {\n        converterForNode = unknownConverter\n      }\n\n      let reactNode: React.ReactNode\n      if (converterForNode) {\n        const converted =\n          typeof converterForNode === 'function'\n            ? converterForNode({\n                childIndex: i,\n                converters,\n                node,\n                nodesToJSX: (args) => {\n                  return convertLexicalNodesToJSX({\n                    converters: args.converters ?? converters,\n                    disableIndent: args.disableIndent ?? disableIndent,\n                    disableTextAlign: args.disableTextAlign ?? disableTextAlign,\n                    nodes: args.nodes,\n                    parent: args.parent ?? {\n                      ...node,\n                      parent,\n                    },\n                  })\n                },\n                parent,\n              })\n            : converterForNode\n        reactNode = converted\n      } else {\n        reactNode = <span key={i}>unknown node</span>\n      }\n\n      const style: React.CSSProperties = {}\n\n      // Check if disableTextAlign is not true and does not include node type\n      if (\n        !disableTextAlign &&\n        (!Array.isArray(disableTextAlign) || !disableTextAlign?.includes(node.type))\n      ) {\n        if ('format' in node && node.format) {\n          switch (node.format) {\n            case 'center':\n              style.textAlign = 'center'\n              break\n            case 'end':\n              style.textAlign = 'right'\n              break\n            case 'justify':\n              style.textAlign = 'justify'\n              break\n            case 'left':\n              //style.textAlign = 'left'\n              // Do nothing, as left is the default\n              break\n            case 'right':\n              style.textAlign = 'right'\n              break\n            case 'start':\n              style.textAlign = 'left'\n              break\n          }\n        }\n      }\n\n      if (\n        !disableIndent &&\n        (!Array.isArray(disableIndent) || !disableIndent?.includes(node.type))\n      ) {\n        if ('indent' in node && node.indent && node.type !== 'listitem') {\n          // the unit should be px. Do not change it to rem, em, or something else.\n          // The quantity should be 40px. Do not change it either.\n          // See rationale in\n          // https://github.com/payloadcms/payload/issues/13130#issuecomment-3058348085\n          style.paddingInlineStart = `${Number(node.indent) * 40}px`\n        }\n      }\n\n      if (React.isValidElement(reactNode)) {\n        // Inject style into reactNode\n        if (style.textAlign || style.paddingInlineStart) {\n          const newStyle = {\n            ...style,\n            // @ts-expect-error type better later\n            ...(reactNode?.props?.style ?? {}),\n            // reactNode style comes after, thus a textAlign specified in the converter has priority over the one we inject here\n          }\n\n          return React.cloneElement(reactNode, {\n            key: i,\n            // @ts-expect-error type better later\n            style: newStyle,\n          })\n        }\n        return React.cloneElement(reactNode, {\n          key: i,\n        })\n      }\n\n      return reactNode\n    } catch (error) {\n      console.error('Error converting lexical node to JSX:', error, 'node:', node)\n      return null\n    }\n  })\n\n  return jsxArray.filter(Boolean)\n}\n","import type {\n  SerializedEditorState,\n  SerializedLexicalNode,\n  SerializedParagraphNode,\n  SerializedTextNode,\n} from 'lexical'\n\nexport function hasText(\n  value: null | SerializedEditorState<SerializedLexicalNode> | undefined,\n): boolean {\n  const hasChildren = !!value?.root?.children?.length\n\n  let hasOnlyEmptyParagraph = false\n  if (value?.root?.children?.length === 1) {\n    if (value?.root?.children[0]?.type === 'paragraph') {\n      const paragraphNode = value?.root?.children[0] as SerializedParagraphNode\n\n      if (!paragraphNode?.children || paragraphNode?.children?.length === 0) {\n        hasOnlyEmptyParagraph = true\n      } else if (paragraphNode?.children?.length === 1) {\n        const paragraphNodeChild = paragraphNode?.children[0]\n        if (paragraphNodeChild?.type === 'text') {\n          if (!(paragraphNodeChild as SerializedTextNode | undefined)?.['text']?.length) {\n            hasOnlyEmptyParagraph = true\n          }\n        }\n      }\n    }\n  }\n\n  if (!hasChildren || hasOnlyEmptyParagraph) {\n    return false\n  } else {\n    return true\n  }\n}\n","'use client'\n\nimport { createClientFeature } from '../../../../utilities/createClientFeature.js'\nimport { RichTextPlugin } from './plugin/index.js'\n\nexport const DebugJsxConverterFeatureClient = createClientFeature({\n  plugins: [\n    {\n      Component: RichTextPlugin,\n      position: 'bottom',\n    },\n  ],\n})\n","import type { StateValues } from './feature.server.js'\n\nconst tailwindColors = {\n  amber: {\n    '50': 'oklch(0.987 0.022 95.277)',\n    '100': 'oklch(0.962 0.059 95.617)',\n    '200': 'oklch(0.924 0.12 95.746)',\n    '300': 'oklch(0.879 0.169 91.605)',\n    '400': 'oklch(0.828 0.189 84.429)',\n    '500': 'oklch(0.769 0.188 70.08)',\n    '600': 'oklch(0.666 0.179 58.318)',\n    '700': 'oklch(0.555 0.163 48.998)',\n    '800': 'oklch(0.473 0.137 46.201)',\n    '900': 'oklch(0.414 0.112 45.904)',\n    '950': 'oklch(0.279 0.077 45.635)',\n  },\n  black: '#000',\n  blue: {\n    '50': 'oklch(0.97 0.014 254.604)',\n    '100': 'oklch(0.932 0.032 255.585)',\n    '200': 'oklch(0.882 0.059 254.128)',\n    '300': 'oklch(0.809 0.105 251.813)',\n    '400': 'oklch(0.707 0.165 254.624)',\n    '500': 'oklch(0.623 0.214 259.815)',\n    '600': 'oklch(0.546 0.245 262.881)',\n    '700': 'oklch(0.488 0.243 264.376)',\n    '800': 'oklch(0.424 0.199 265.638)',\n    '900': 'oklch(0.379 0.146 265.522)',\n    '950': 'oklch(0.282 0.091 267.935)',\n  },\n  current: 'currentColor',\n  cyan: {\n    '50': 'oklch(0.984 0.019 200.873)',\n    '100': 'oklch(0.956 0.045 203.388)',\n    '200': 'oklch(0.917 0.08 205.041)',\n    '300': 'oklch(0.865 0.127 207.078)',\n    '400': 'oklch(0.789 0.154 211.53)',\n    '500': 'oklch(0.715 0.143 215.221)',\n    '600': 'oklch(0.609 0.126 221.723)',\n    '700': 'oklch(0.52 0.105 223.128)',\n    '800': 'oklch(0.45 0.085 224.283)',\n    '900': 'oklch(0.398 0.07 227.392)',\n    '950': 'oklch(0.302 0.056 229.695)',\n  },\n  emerald: {\n    '50': 'oklch(0.979 0.021 166.113)',\n    '100': 'oklch(0.95 0.052 163.051)',\n    '200': 'oklch(0.905 0.093 164.15)',\n    '300': 'oklch(0.845 0.143 164.978)',\n    '400': 'oklch(0.765 0.177 163.223)',\n    '500': 'oklch(0.696 0.17 162.48)',\n    '600': 'oklch(0.596 0.145 163.225)',\n    '700': 'oklch(0.508 0.118 165.612)',\n    '800': 'oklch(0.432 0.095 166.913)',\n    '900': 'oklch(0.378 0.077 168.94)',\n    '950': 'oklch(0.262 0.051 172.552)',\n  },\n  fuchsia: {\n    '50': 'oklch(0.977 0.017 320.058)',\n    '100': 'oklch(0.952 0.037 318.852)',\n    '200': 'oklch(0.903 0.076 319.62)',\n    '300': 'oklch(0.833 0.145 321.434)',\n    '400': 'oklch(0.74 0.238 322.16)',\n    '500': 'oklch(0.667 0.295 322.15)',\n    '600': 'oklch(0.591 0.293 322.896)',\n    '700': 'oklch(0.518 0.253 323.949)',\n    '800': 'oklch(0.452 0.211 324.591)',\n    '900': 'oklch(0.401 0.17 325.612)',\n    '950': 'oklch(0.293 0.136 325.661)',\n  },\n  gray: {\n    '50': 'oklch(0.985 0.002 247.839)',\n    '100': 'oklch(0.967 0.003 264.542)',\n    '200': 'oklch(0.928 0.006 264.531)',\n    '300': 'oklch(0.872 0.01 258.338)',\n    '400': 'oklch(0.707 0.022 261.325)',\n    '500': 'oklch(0.551 0.027 264.364)',\n    '600': 'oklch(0.446 0.03 256.802)',\n    '700': 'oklch(0.373 0.034 259.733)',\n    '800': 'oklch(0.278 0.033 256.848)',\n    '900': 'oklch(0.21 0.034 264.665)',\n    '950': 'oklch(0.13 0.028 261.692)',\n  },\n  green: {\n    '50': 'oklch(0.982 0.018 155.826)',\n    '100': 'oklch(0.962 0.044 156.743)',\n    '200': 'oklch(0.925 0.084 155.995)',\n    '300': 'oklch(0.871 0.15 154.449)',\n    '400': 'oklch(0.792 0.209 151.711)',\n    '500': 'oklch(0.723 0.219 149.579)',\n    '600': 'oklch(0.627 0.194 149.214)',\n    '700': 'oklch(0.527 0.154 150.069)',\n    '800': 'oklch(0.448 0.119 151.328)',\n    '900': 'oklch(0.393 0.095 152.535)',\n    '950': 'oklch(0.266 0.065 152.934)',\n  },\n  indigo: {\n    '50': 'oklch(0.962 0.018 272.314)',\n    '100': 'oklch(0.93 0.034 272.788)',\n    '200': 'oklch(0.87 0.065 274.039)',\n    '300': 'oklch(0.785 0.115 274.713)',\n    '400': 'oklch(0.673 0.182 276.935)',\n    '500': 'oklch(0.585 0.233 277.117)',\n    '600': 'oklch(0.511 0.262 276.966)',\n    '700': 'oklch(0.457 0.24 277.023)',\n    '800': 'oklch(0.398 0.195 277.366)',\n    '900': 'oklch(0.359 0.144 278.697)',\n    '950': 'oklch(0.257 0.09 281.288)',\n  },\n  inherit: 'inherit',\n  lime: {\n    '50': 'oklch(0.986 0.031 120.757)',\n    '100': 'oklch(0.967 0.067 122.328)',\n    '200': 'oklch(0.938 0.127 124.321)',\n    '300': 'oklch(0.897 0.196 126.665)',\n    '400': 'oklch(0.841 0.238 128.85)',\n    '500': 'oklch(0.768 0.233 130.85)',\n    '600': 'oklch(0.648 0.2 131.684)',\n    '700': 'oklch(0.532 0.157 131.589)',\n    '800': 'oklch(0.453 0.124 130.933)',\n    '900': 'oklch(0.405 0.101 131.063)',\n    '950': 'oklch(0.274 0.072 132.109)',\n  },\n  neutral: {\n    '50': 'oklch(0.985 0 0)',\n    '100': 'oklch(0.97 0 0)',\n    '200': 'oklch(0.922 0 0)',\n    '300': 'oklch(0.87 0 0)',\n    '400': 'oklch(0.708 0 0)',\n    '500': 'oklch(0.556 0 0)',\n    '600': 'oklch(0.439 0 0)',\n    '700': 'oklch(0.371 0 0)',\n    '800': 'oklch(0.269 0 0)',\n    '900': 'oklch(0.205 0 0)',\n    '950': 'oklch(0.145 0 0)',\n  },\n  orange: {\n    '50': 'oklch(0.98 0.016 73.684)',\n    '100': 'oklch(0.954 0.038 75.164)',\n    '200': 'oklch(0.901 0.076 70.697)',\n    '300': 'oklch(0.837 0.128 66.29)',\n    '400': 'oklch(0.75 0.183 55.934)',\n    '500': 'oklch(0.705 0.213 47.604)',\n    '600': 'oklch(0.646 0.222 41.116)',\n    '700': 'oklch(0.553 0.195 38.402)',\n    '800': 'oklch(0.47 0.157 37.304)',\n    '900': 'oklch(0.408 0.123 38.172)',\n    '950': 'oklch(0.266 0.079 36.259)',\n  },\n  pink: {\n    '50': 'oklch(0.971 0.014 343.198)',\n    '100': 'oklch(0.948 0.028 342.258)',\n    '200': 'oklch(0.899 0.061 343.231)',\n    '300': 'oklch(0.823 0.12 346.018)',\n    '400': 'oklch(0.718 0.202 349.761)',\n    '500': 'oklch(0.656 0.241 354.308)',\n    '600': 'oklch(0.592 0.249 0.584)',\n    '700': 'oklch(0.525 0.223 3.958)',\n    '800': 'oklch(0.459 0.187 3.815)',\n    '900': 'oklch(0.408 0.153 2.432)',\n    '950': 'oklch(0.284 0.109 3.907)',\n  },\n  purple: {\n    '50': 'oklch(0.977 0.014 308.299)',\n    '100': 'oklch(0.946 0.033 307.174)',\n    '200': 'oklch(0.902 0.063 306.703)',\n    '300': 'oklch(0.827 0.119 306.383)',\n    '400': 'oklch(0.714 0.203 305.504)',\n    '500': 'oklch(0.627 0.265 303.9)',\n    '600': 'oklch(0.558 0.288 302.321)',\n    '700': 'oklch(0.496 0.265 301.924)',\n    '800': 'oklch(0.438 0.218 303.724)',\n    '900': 'oklch(0.381 0.176 304.987)',\n    '950': 'oklch(0.291 0.149 302.717)',\n  },\n  red: {\n    '50': 'oklch(0.971 0.013 17.38)',\n    '100': 'oklch(0.936 0.032 17.717)',\n    '200': 'oklch(0.885 0.062 18.334)',\n    '300': 'oklch(0.808 0.114 19.571)',\n    '400': 'oklch(0.704 0.191 22.216)',\n    '500': 'oklch(0.637 0.237 25.331)',\n    '600': 'oklch(0.577 0.245 27.325)',\n    '700': 'oklch(0.505 0.213 27.518)',\n    '800': 'oklch(0.444 0.177 26.899)',\n    '900': 'oklch(0.396 0.141 25.723)',\n    '950': 'oklch(0.258 0.092 26.042)',\n  },\n  rose: {\n    '50': 'oklch(0.969 0.015 12.422)',\n    '100': 'oklch(0.941 0.03 12.58)',\n    '200': 'oklch(0.892 0.058 10.001)',\n    '300': 'oklch(0.81 0.117 11.638)',\n    '400': 'oklch(0.712 0.194 13.428)',\n    '500': 'oklch(0.645 0.246 16.439)',\n    '600': 'oklch(0.586 0.253 17.585)',\n    '700': 'oklch(0.514 0.222 16.935)',\n    '800': 'oklch(0.455 0.188 13.697)',\n    '900': 'oklch(0.41 0.159 10.272)',\n    '950': 'oklch(0.271 0.105 12.094)',\n  },\n  sky: {\n    '50': 'oklch(0.977 0.013 236.62)',\n    '100': 'oklch(0.951 0.026 236.824)',\n    '200': 'oklch(0.901 0.058 230.902)',\n    '300': 'oklch(0.828 0.111 230.318)',\n    '400': 'oklch(0.746 0.16 232.661)',\n    '500': 'oklch(0.685 0.169 237.323)',\n    '600': 'oklch(0.588 0.158 241.966)',\n    '700': 'oklch(0.5 0.134 242.749)',\n    '800': 'oklch(0.443 0.11 240.79)',\n    '900': 'oklch(0.391 0.09 240.876)',\n    '950': 'oklch(0.293 0.066 243.157)',\n  },\n  slate: {\n    '50': 'oklch(0.984 0.003 247.858)',\n    '100': 'oklch(0.968 0.007 247.896)',\n    '200': 'oklch(0.929 0.013 255.508)',\n    '300': 'oklch(0.869 0.022 252.894)',\n    '400': 'oklch(0.704 0.04 256.788)',\n    '500': 'oklch(0.554 0.046 257.417)',\n    '600': 'oklch(0.446 0.043 257.281)',\n    '700': 'oklch(0.372 0.044 257.287)',\n    '800': 'oklch(0.279 0.041 260.031)',\n    '900': 'oklch(0.208 0.042 265.755)',\n    '950': 'oklch(0.129 0.042 264.695)',\n  },\n  stone: {\n    '50': 'oklch(0.985 0.001 106.423)',\n    '100': 'oklch(0.97 0.001 106.424)',\n    '200': 'oklch(0.923 0.003 48.717)',\n    '300': 'oklch(0.869 0.005 56.366)',\n    '400': 'oklch(0.709 0.01 56.259)',\n    '500': 'oklch(0.553 0.013 58.071)',\n    '600': 'oklch(0.444 0.011 73.639)',\n    '700': 'oklch(0.374 0.01 67.558)',\n    '800': 'oklch(0.268 0.007 34.298)',\n    '900': 'oklch(0.216 0.006 56.043)',\n    '950': 'oklch(0.147 0.004 49.25)',\n  },\n  teal: {\n    '50': 'oklch(0.984 0.014 180.72)',\n    '100': 'oklch(0.953 0.051 180.801)',\n    '200': 'oklch(0.91 0.096 180.426)',\n    '300': 'oklch(0.855 0.138 181.071)',\n    '400': 'oklch(0.777 0.152 181.912)',\n    '500': 'oklch(0.704 0.14 182.503)',\n    '600': 'oklch(0.6 0.118 184.704)',\n    '700': 'oklch(0.511 0.096 186.391)',\n    '800': 'oklch(0.437 0.078 188.216)',\n    '900': 'oklch(0.386 0.063 188.416)',\n    '950': 'oklch(0.277 0.046 192.524)',\n  },\n  transparent: 'transparent',\n  violet: {\n    '50': 'oklch(0.969 0.016 293.756)',\n    '100': 'oklch(0.943 0.029 294.588)',\n    '200': 'oklch(0.894 0.057 293.283)',\n    '300': 'oklch(0.811 0.111 293.571)',\n    '400': 'oklch(0.702 0.183 293.541)',\n    '500': 'oklch(0.606 0.25 292.717)',\n    '600': 'oklch(0.541 0.281 293.009)',\n    '700': 'oklch(0.491 0.27 292.581)',\n    '800': 'oklch(0.432 0.232 292.759)',\n    '900': 'oklch(0.38 0.189 293.745)',\n    '950': 'oklch(0.283 0.141 291.089)',\n  },\n  white: '#fff',\n  yellow: {\n    '50': 'oklch(0.987 0.026 102.212)',\n    '100': 'oklch(0.973 0.071 103.193)',\n    '200': 'oklch(0.945 0.129 101.54)',\n    '300': 'oklch(0.905 0.182 98.111)',\n    '400': 'oklch(0.852 0.199 91.936)',\n    '500': 'oklch(0.795 0.184 86.047)',\n    '600': 'oklch(0.681 0.162 75.834)',\n    '700': 'oklch(0.554 0.135 66.442)',\n    '800': 'oklch(0.476 0.114 61.907)',\n    '900': 'oklch(0.421 0.095 57.708)',\n    '950': 'oklch(0.286 0.066 53.813)',\n  },\n  zinc: {\n    '50': 'oklch(0.985 0 0)',\n    '100': 'oklch(0.967 0.001 286.375)',\n    '200': 'oklch(0.92 0.004 286.32)',\n    '300': 'oklch(0.871 0.006 286.286)',\n    '400': 'oklch(0.705 0.015 286.067)',\n    '500': 'oklch(0.552 0.016 285.938)',\n    '600': 'oklch(0.442 0.017 285.786)',\n    '700': 'oklch(0.37 0.013 285.805)',\n    '800': 'oklch(0.274 0.006 286.033)',\n    '900': 'oklch(0.21 0.006 285.885)',\n    '950': 'oklch(0.141 0.005 285.823)',\n  },\n}\n\n// prettier-ignore\n/* eslint-disable perfectionist/sort-objects */\nexport const defaultColors = {\n    text: {\n      'text-red': { css: { 'color': `light-dark(${tailwindColors.red[600]}, ${tailwindColors.red[400]})`, }, label: 'Red' },\n      'text-orange': { css: { 'color': `light-dark(${tailwindColors.orange[600]}, ${tailwindColors.orange[400]})`, }, label: 'Orange' },\n      'text-yellow': { css: { 'color': `light-dark(${tailwindColors.yellow[700]}, ${tailwindColors.yellow[300]})`, }, label: 'Yellow' },\n      'text-green': { css: { 'color': `light-dark(${tailwindColors.green[700]}, ${tailwindColors.green[400]})`, }, label: 'Green' },\n      'text-blue': { css: { 'color': `light-dark(${tailwindColors.blue[600]}, ${tailwindColors.blue[400]})`, }, label: 'Blue' },\n      'text-purple': { css: { 'color': `light-dark(${tailwindColors.purple[600]}, ${tailwindColors.purple[400]})`, }, label: 'Purple' },\n      'text-pink': { css: { 'color': `light-dark(${tailwindColors.pink[600]}, ${tailwindColors.pink[400]})`, }, label: 'Pink' },\n    } satisfies StateValues,\n    background: {\n      'bg-red': { css: { 'background-color': `light-dark(${tailwindColors.red[400]}, ${tailwindColors.red[600]})`, }, label: 'Red' },\n      'bg-orange': { css: { 'background-color': `light-dark(${tailwindColors.orange[400]}, ${tailwindColors.orange[600]})`, }, label: 'Orange' },\n      'bg-yellow': { css: { 'background-color': `light-dark(${tailwindColors.yellow[300]}, ${tailwindColors.yellow[700]})`, }, label: 'Yellow' },\n      'bg-green': { css: { 'background-color': `light-dark(${tailwindColors.green[400]}, ${tailwindColors.green[700]})`, }, label: 'Green' },\n      'bg-blue': { css: { 'background-color': `light-dark(${tailwindColors.blue[400]}, ${tailwindColors.blue[600]})`, }, label: 'Blue' },\n      'bg-purple': { css: { 'background-color': `light-dark(${tailwindColors.purple[400]}, ${tailwindColors.purple[600]})`, }, label: 'Purple' },\n      'bg-pink': { css: { 'background-color': `light-dark(${tailwindColors.pink[400]}, ${tailwindColors.pink[600]})`, }, label: 'Pink' },\n    } satisfies StateValues\n  }\n","'use client'\n\nimport { $isNodeSelection } from 'lexical'\n\nimport type { RelationshipFeatureProps } from '../server/index.js'\n\nimport { RelationshipIcon } from '../../../lexical/ui/icons/Relationship/index.js'\nimport { createClientFeature } from '../../../utilities/createClientFeature.js'\nimport { slashMenuBasicGroupWithItems } from '../../shared/slashMenu/basicGroup.js'\nimport { toolbarAddDropdownGroupWithItems } from '../../shared/toolbar/addDropdownGroup.js'\nimport { INSERT_RELATIONSHIP_WITH_DRAWER_COMMAND } from './drawer/commands.js'\nimport { $isRelationshipNode, RelationshipNode } from './nodes/RelationshipNode.js'\nimport { RelationshipPlugin } from './plugins/index.js'\n\nexport const RelationshipFeatureClient = createClientFeature<RelationshipFeatureProps>({\n  nodes: [RelationshipNode],\n  plugins: [\n    {\n      Component: RelationshipPlugin,\n      position: 'normal',\n    },\n  ],\n  slashMenu: {\n    groups: [\n      slashMenuBasicGroupWithItems([\n        {\n          Icon: RelationshipIcon,\n          key: 'relationship',\n          keywords: ['relationship', 'relation', 'rel'],\n          label: ({ i18n }) => {\n            return i18n.t('lexical:relationship:label')\n          },\n          onSelect: ({ editor }) => {\n            // dispatch INSERT_RELATIONSHIP_WITH_DRAWER_COMMAND\n            editor.dispatchCommand(INSERT_RELATIONSHIP_WITH_DRAWER_COMMAND, {\n              replace: false,\n            })\n          },\n        },\n      ]),\n    ],\n  },\n  toolbarFixed: {\n    groups: [\n      toolbarAddDropdownGroupWithItems([\n        {\n          ChildComponent: RelationshipIcon,\n          isActive: ({ selection }) => {\n            if (!$isNodeSelection(selection) || !selection.getNodes().length) {\n              return false\n            }\n\n            const firstNode = selection.getNodes()[0]\n            return $isRelationshipNode(firstNode)\n          },\n          key: 'relationship',\n          label: ({ i18n }) => {\n            return i18n.t('lexical:relationship:label')\n          },\n          onSelect: ({ editor }) => {\n            // dispatch INSERT_RELATIONSHIP_WITH_DRAWER_COMMAND\n            editor.dispatchCommand(INSERT_RELATIONSHIP_WITH_DRAWER_COMMAND, {\n              replace: false,\n            })\n          },\n        },\n      ]),\n    ],\n  },\n})\n","'use client'\nimport React from 'react'\n\nexport const RelationshipIcon: React.FC = () => (\n  <svg\n    aria-hidden=\"true\"\n    className=\"icon\"\n    fill=\"none\"\n    focusable=\"false\"\n    height=\"20\"\n    viewBox=\"0 0 20 20\"\n    width=\"20\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <g clipPath=\"url(#clip0_4397_10817)\">\n      <path\n        d=\"M7.75 12.25L15.25 4.75M15.25 4.75H11.5M15.25 4.75V8.5M13 11.5V13.75C13 14.5784 12.3284 15.25 11.5 15.25H6.25C5.42157 15.25 4.75 14.5784 4.75 13.75V8.5C4.75 7.67157 5.42157 7 6.25 7H8.5\"\n        stroke=\"currentColor\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n    </g>\n    <defs>\n      <clipPath id=\"clip0_4397_10817\">\n        <rect fill=\"currentColor\" height=\"12\" transform=\"translate(4 4)\" width=\"12\" />\n      </clipPath>\n    </defs>\n  </svg>\n)\n","'use client'\nimport type { JSX } from 'react'\n\nimport {\n  $applyNodeReplacement,\n  type DOMConversionMap,\n  type DOMConversionOutput,\n  type EditorConfig,\n  type LexicalEditor,\n  type LexicalNode,\n} from 'lexical'\nimport * as React from 'react'\n\nimport type {\n  RelationshipData,\n  SerializedRelationshipNode,\n} from '../../server/nodes/RelationshipNode.js'\n\nimport { RelationshipServerNode } from '../../server/nodes/RelationshipNode.js'\n\nconst RelationshipComponent = React.lazy(() =>\n  import('../components/RelationshipComponent.js').then((module) => ({\n    default: module.RelationshipComponent,\n  })),\n)\n\nfunction $relationshipElementToNode(domNode: HTMLDivElement): DOMConversionOutput | null {\n  const id = domNode.getAttribute('data-lexical-relationship-id')\n  const relationTo = domNode.getAttribute('data-lexical-relationship-relationTo')\n\n  if (id != null && relationTo != null) {\n    const node = $createRelationshipNode({\n      relationTo,\n      value: id,\n    })\n    return { node }\n  }\n  return null\n}\n\nexport class RelationshipNode extends RelationshipServerNode {\n  static override clone(node: RelationshipServerNode): RelationshipServerNode {\n    return super.clone(node)\n  }\n\n  static override getType(): string {\n    return super.getType()\n  }\n\n  static override importDOM(): DOMConversionMap<HTMLDivElement> | null {\n    return {\n      div: (domNode: HTMLDivElement) => {\n        if (\n          !domNode.hasAttribute('data-lexical-relationship-relationTo') ||\n          !domNode.hasAttribute('data-lexical-relationship-id')\n        ) {\n          return null\n        }\n        return {\n          conversion: $relationshipElementToNode,\n          priority: 2,\n        }\n      },\n    }\n  }\n\n  static override importJSON(serializedNode: SerializedRelationshipNode): RelationshipNode {\n    if (serializedNode.version === 1 && (serializedNode?.value as unknown as { id: string })?.id) {\n      serializedNode.value = (serializedNode.value as unknown as { id: string }).id\n    }\n\n    const importedData: RelationshipData = {\n      relationTo: serializedNode.relationTo,\n      value: serializedNode.value,\n    }\n    const node = $createRelationshipNode(importedData)\n    node.setFormat(serializedNode.format)\n    return node\n  }\n\n  override decorate(editor: LexicalEditor, config: EditorConfig): JSX.Element {\n    return (\n      <RelationshipComponent\n        className={config.theme.relationship ?? 'LexicalEditorTheme__relationship'}\n        data={this.__data}\n        format={this.__format}\n        nodeKey={this.getKey()}\n      />\n    )\n  }\n\n  override exportJSON(): SerializedRelationshipNode {\n    return super.exportJSON()\n  }\n}\n\nexport function $createRelationshipNode(data: RelationshipData): RelationshipNode {\n  return $applyNodeReplacement(\n    new RelationshipNode({\n      data,\n    }),\n  )\n}\n\nexport function $isRelationshipNode(\n  node: LexicalNode | null | RelationshipNode | undefined,\n): node is RelationshipNode {\n  return node instanceof RelationshipNode\n}\n","import type { SerializedDecoratorBlockNode } from '@lexical/react/LexicalDecoratorBlockNode.js'\nimport type { CollectionSlug, DataFromCollectionSlug } from 'payload'\nimport type { JSX } from 'react'\n\nimport { DecoratorBlockNode } from '@lexical/react/LexicalDecoratorBlockNode.js'\nimport { addClassNamesToElement } from '@lexical/utils'\nimport {\n  $applyNodeReplacement,\n  type DOMConversionMap,\n  type DOMConversionOutput,\n  type DOMExportOutput,\n  type EditorConfig,\n  type ElementFormatType,\n  type LexicalEditor,\n  type LexicalNode,\n  type NodeKey,\n} from 'lexical'\n\nimport type { StronglyTypedLeafNode } from '../../../../nodeTypes.js'\n\nexport type RelationshipData = {\n  [TCollectionSlug in CollectionSlug]: {\n    relationTo: TCollectionSlug\n    value: DataFromCollectionSlug<TCollectionSlug> | number | string\n  }\n}[CollectionSlug]\n\nexport type SerializedRelationshipNode = RelationshipData &\n  StronglyTypedLeafNode<SerializedDecoratorBlockNode, 'relationship'>\n\nfunction $relationshipElementToServerNode(domNode: HTMLDivElement): DOMConversionOutput | null {\n  const id = domNode.getAttribute('data-lexical-relationship-id')\n  const relationTo = domNode.getAttribute('data-lexical-relationship-relationTo')\n\n  if (id != null && relationTo != null) {\n    const node = $createServerRelationshipNode({\n      relationTo,\n      value: id,\n    })\n    return { node }\n  }\n  return null\n}\n\nexport class RelationshipServerNode extends DecoratorBlockNode {\n  __data: RelationshipData\n\n  constructor({\n    data,\n    format,\n    key,\n  }: {\n    data: RelationshipData\n    format?: ElementFormatType\n    key?: NodeKey\n  }) {\n    super(format, key)\n    this.__data = data\n  }\n\n  static override clone(node: RelationshipServerNode): RelationshipServerNode {\n    return new this({\n      data: node.__data,\n      format: node.__format,\n      key: node.__key,\n    })\n  }\n\n  static override getType(): string {\n    return 'relationship'\n  }\n\n  static override importDOM(): DOMConversionMap<HTMLDivElement> | null {\n    return {\n      div: (domNode: HTMLDivElement) => {\n        if (\n          !domNode.hasAttribute('data-lexical-relationship-relationTo') ||\n          !domNode.hasAttribute('data-lexical-relationship-id')\n        ) {\n          return null\n        }\n        return {\n          conversion: $relationshipElementToServerNode,\n          priority: 2,\n        }\n      },\n    }\n  }\n\n  static override importJSON(serializedNode: SerializedRelationshipNode): RelationshipServerNode {\n    if (serializedNode.version === 1 && (serializedNode?.value as unknown as { id: string })?.id) {\n      serializedNode.value = (serializedNode.value as unknown as { id: string }).id\n    }\n\n    const importedData: RelationshipData = {\n      relationTo: serializedNode.relationTo,\n      value: serializedNode.value,\n    }\n    const node = $createServerRelationshipNode(importedData)\n    node.setFormat(serializedNode.format)\n    return node\n  }\n\n  static isInline(): false {\n    return false\n  }\n\n  override createDOM(config?: EditorConfig): HTMLElement {\n    const element = document.createElement('div')\n    addClassNamesToElement(element, config?.theme?.relationship)\n    return element\n  }\n\n  override decorate(_editor: LexicalEditor, _config: EditorConfig): JSX.Element {\n    return null as unknown as JSX.Element\n  }\n\n  override exportDOM(): DOMExportOutput {\n    const element = document.createElement('div')\n    element.setAttribute(\n      'data-lexical-relationship-id',\n      String(typeof this.__data?.value === 'object' ? this.__data?.value?.id : this.__data?.value),\n    )\n    element.setAttribute('data-lexical-relationship-relationTo', this.__data?.relationTo)\n\n    const text = document.createTextNode(this.getTextContent())\n    element.append(text)\n    return { element }\n  }\n\n  override exportJSON(): SerializedRelationshipNode {\n    return {\n      ...super.exportJSON(),\n      ...this.getData(),\n      type: 'relationship',\n      version: 2,\n    }\n  }\n\n  getData(): RelationshipData {\n    return this.getLatest().__data\n  }\n\n  override getTextContent(): string {\n    return `${this.__data?.relationTo} relation to ${typeof this.__data?.value === 'object' ? this.__data?.value?.id : this.__data?.value}`\n  }\n\n  setData(data: RelationshipData): void {\n    const writable = this.getWritable()\n    writable.__data = data\n  }\n}\n\nexport function $createServerRelationshipNode(data: RelationshipData): RelationshipServerNode {\n  return $applyNodeReplacement(\n    new RelationshipServerNode({\n      data,\n    }),\n  )\n}\n\nexport function $isServerRelationshipNode(\n  node: LexicalNode | null | RelationshipServerNode | undefined,\n): node is RelationshipServerNode {\n  return node instanceof RelationshipServerNode\n}\n","'use client'\nimport type { LexicalCommand } from 'lexical'\n\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext.js'\nimport { $insertNodeToNearestRoot } from '@lexical/utils'\nimport {\n  $getPreviousSelection,\n  $getSelection,\n  $isParagraphNode,\n  $isRangeSelection,\n  COMMAND_PRIORITY_EDITOR,\n  createCommand,\n} from 'lexical'\nimport { useEffect } from 'react'\n\nimport type { PluginComponent } from '../../../typesClient.js'\nimport type { RelationshipFeatureProps } from '../../server/index.js'\nimport type { RelationshipData } from '../../server/nodes/RelationshipNode.js'\n\nimport { RelationshipDrawer } from '../drawer/index.js'\nimport { $createRelationshipNode, RelationshipNode } from '../nodes/RelationshipNode.js'\nimport { useEnabledRelationships } from '../utils/useEnabledRelationships.js'\n\nexport const INSERT_RELATIONSHIP_COMMAND: LexicalCommand<RelationshipData> = createCommand(\n  'INSERT_RELATIONSHIP_COMMAND',\n)\n\nexport const RelationshipPlugin: PluginComponent<RelationshipFeatureProps> = ({ clientProps }) => {\n  const [editor] = useLexicalComposerContext()\n\n  const { enabledCollectionSlugs } = useEnabledRelationships({\n    collectionSlugsBlacklist: clientProps?.disabledCollections,\n    collectionSlugsWhitelist: clientProps?.enabledCollections,\n  })\n\n  useEffect(() => {\n    if (!editor.hasNodes([RelationshipNode])) {\n      throw new Error('RelationshipPlugin: RelationshipNode not registered on editor')\n    }\n\n    return editor.registerCommand<RelationshipData>(\n      INSERT_RELATIONSHIP_COMMAND,\n      (payload) => {\n        const selection = $getSelection() || $getPreviousSelection()\n\n        if ($isRangeSelection(selection)) {\n          const relationshipNode = $createRelationshipNode(payload)\n          // we need to get the focus node before inserting the block node, as $insertNodeToNearestRoot can change the focus node\n          const { focus } = selection\n          const focusNode = focus.getNode()\n          // Insert relationship node BEFORE potentially removing focusNode, as $insertNodeToNearestRoot errors if the focusNode doesn't exist\n          $insertNodeToNearestRoot(relationshipNode)\n\n          // Delete the node it it's an empty paragraph\n          if ($isParagraphNode(focusNode) && !focusNode.__first) {\n            focusNode.remove()\n          }\n        }\n\n        return true\n      },\n      COMMAND_PRIORITY_EDITOR,\n    )\n  }, [editor])\n\n  return <RelationshipDrawer enabledCollectionSlugs={enabledCollectionSlugs} />\n}\n","'use client'\nimport type { LexicalEditor } from 'lexical'\nimport type { CollectionSlug } from 'payload'\n\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext.js'\nimport { type ListDrawerProps, toast } from '@payloadcms/ui'\nimport { $getNodeByKey, COMMAND_PRIORITY_EDITOR } from 'lexical'\nimport React, { useCallback, useEffect, useState } from 'react'\n\nimport { useLexicalListDrawer } from '../../../../utilities/fieldsDrawer/useLexicalListDrawer.js'\nimport { $createRelationshipNode } from '../nodes/RelationshipNode.js'\nimport { INSERT_RELATIONSHIP_COMMAND } from '../plugins/index.js'\nimport { INSERT_RELATIONSHIP_WITH_DRAWER_COMMAND } from './commands.js'\n\nconst insertRelationship = ({\n  editor,\n  relationTo,\n  replaceNodeKey,\n  value,\n}: {\n  editor: LexicalEditor\n  relationTo: string\n  replaceNodeKey: null | string\n  value: number | string\n}) => {\n  if (!replaceNodeKey) {\n    editor.dispatchCommand(INSERT_RELATIONSHIP_COMMAND, {\n      relationTo,\n      value,\n    })\n  } else {\n    editor.update(() => {\n      const node = $getNodeByKey(replaceNodeKey)\n      if (node) {\n        node.replace($createRelationshipNode({ relationTo, value }))\n      }\n    })\n  }\n}\n\ntype Props = {\n  enabledCollectionSlugs: CollectionSlug[]\n}\n\nconst RelationshipDrawerComponent: React.FC<Props> = ({ enabledCollectionSlugs }) => {\n  const [editor] = useLexicalComposerContext()\n\n  const [replaceNodeKey, setReplaceNodeKey] = useState<null | string>(null)\n\n  const { closeListDrawer, ListDrawer, openListDrawer } = useLexicalListDrawer({\n    collectionSlugs: enabledCollectionSlugs,\n    selectedCollection: enabledCollectionSlugs?.[0],\n  })\n\n  useEffect(() => {\n    return editor.registerCommand<{\n      replace: { nodeKey: string } | false\n    }>(\n      INSERT_RELATIONSHIP_WITH_DRAWER_COMMAND,\n      (payload) => {\n        setReplaceNodeKey(payload?.replace ? payload?.replace.nodeKey : null)\n        openListDrawer()\n        return true\n      },\n      COMMAND_PRIORITY_EDITOR,\n    )\n  }, [editor, openListDrawer])\n\n  const onSelect = useCallback<NonNullable<ListDrawerProps['onSelect']>>(\n    ({ collectionSlug, doc }) => {\n      insertRelationship({\n        editor,\n        relationTo: collectionSlug,\n        replaceNodeKey,\n        value: doc.id,\n      })\n      closeListDrawer()\n    },\n    [editor, closeListDrawer, replaceNodeKey],\n  )\n\n  return <ListDrawer onSelect={onSelect} />\n}\n\nconst RelationshipDrawerComponentFallback: React.FC = () => {\n  const [editor] = useLexicalComposerContext()\n\n  useEffect(() => {\n    return editor.registerCommand<{\n      replace: { nodeKey: string } | false\n    }>(\n      INSERT_RELATIONSHIP_WITH_DRAWER_COMMAND,\n      () => {\n        toast.error('No relationship collections enabled')\n        return true\n      },\n      COMMAND_PRIORITY_EDITOR,\n    )\n  }, [editor])\n\n  return null\n}\n\nexport const RelationshipDrawer = ({ enabledCollectionSlugs }: Props): React.ReactNode => {\n  if (!enabledCollectionSlugs?.length) {\n    return <RelationshipDrawerComponentFallback />\n  }\n\n  return <RelationshipDrawerComponent enabledCollectionSlugs={enabledCollectionSlugs} />\n}\n","'use client'\nimport type { UseListDrawer } from '@payloadcms/ui'\nimport type { BaseSelection } from 'lexical'\n\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext'\nimport { useListDrawer, useModal } from '@payloadcms/ui'\nimport {\n  $getNodeByKey,\n  $getPreviousSelection,\n  $getRoot,\n  $getSelection,\n  $isRangeSelection,\n  $setSelection,\n} from 'lexical'\nimport { useCallback, useEffect, useState } from 'react'\n\n/**\n *\n * Wrapper around useListDrawer that restores and saves selection state (cursor position) when opening and closing the drawer.\n * By default, the lexical cursor position may be lost when opening a drawer and clicking somewhere on that drawer.\n */\nexport const useLexicalListDrawer = (\n  args: Parameters<UseListDrawer>[0],\n): {\n  closeListDrawer: () => void\n  isListDrawerOpen: boolean\n  ListDrawer: ReturnType<UseListDrawer>[0]\n  listDrawerSlug: string\n  ListDrawerToggler: ReturnType<UseListDrawer>[1]\n  openListDrawer: (selection?: BaseSelection) => void\n} => {\n  const [editor] = useLexicalComposerContext()\n  const [selectionState, setSelectionState] = useState<BaseSelection | null>(null)\n  const [wasOpen, setWasOpen] = useState<boolean>(false)\n\n  const [\n    BaseListDrawer,\n    BaseListDrawerToggler,\n    {\n      closeDrawer: baseCloseDrawer,\n      drawerSlug: listDrawerSlug,\n      isDrawerOpen,\n      openDrawer: baseOpenDrawer,\n    },\n  ] = useListDrawer(args)\n  const { modalState } = useModal()\n\n  const $storeSelection = useCallback(() => {\n    // editor.read() causes an error here when creating a new upload node from the slash menu. It seems like we can omit it here though, as all\n    // invocations of that functions are wrapped in editor.read() or editor.update() somewhere in the call stack.\n    const selection = $getSelection() ?? $getPreviousSelection()\n    setSelectionState(selection)\n  }, [])\n\n  const restoreSelection = useCallback(() => {\n    if (selectionState) {\n      editor.update(\n        () => {\n          if ($isRangeSelection(selectionState)) {\n            const { anchor, focus } = selectionState\n            if ($getNodeByKey(anchor.key) && $getNodeByKey(focus.key)) {\n              $setSelection(selectionState.clone())\n            }\n          } else {\n            // not ideal, but better than losing the selection. Try to set the selection\n            // in a valid place if you remove selected nodes!\n            $getRoot().selectEnd()\n          }\n        },\n        { discrete: true, skipTransforms: true },\n      )\n    }\n  }, [editor, selectionState])\n\n  const closeListDrawer = () => {\n    //restoreSelection() // Should already be stored by the useEffect below\n    baseCloseDrawer()\n  }\n\n  // We need to handle drawer closing via a useEffect, as toggleDrawer / closeDrawer will not be triggered if the drawer\n  // is closed by clicking outside of the drawer. This useEffect will handle everything.\n  useEffect(() => {\n    if (!wasOpen) {\n      return\n    }\n\n    const thisModalState = modalState[listDrawerSlug]\n    // Exists in modalState (thus has opened at least once before) and is closed\n    if (thisModalState && !thisModalState?.isOpen) {\n      setWasOpen(false)\n      setTimeout(() => {\n        restoreSelection()\n      }, 1)\n    }\n  }, [modalState, listDrawerSlug, restoreSelection, wasOpen])\n\n  return {\n    closeListDrawer,\n    isListDrawerOpen: isDrawerOpen,\n    ListDrawer: BaseListDrawer,\n    listDrawerSlug,\n    ListDrawerToggler: (props) => (\n      <BaseListDrawerToggler\n        {...props}\n        onClick={() => {\n          $storeSelection()\n        }}\n      />\n    ),\n    openListDrawer: () => {\n      $storeSelection()\n      baseOpenDrawer()\n      setWasOpen(true)\n    },\n  }\n}\n","'use client'\nimport type { ClientCollectionConfig, CollectionSlug } from 'payload'\n\nimport { useConfig, useEntityVisibility } from '@payloadcms/ui'\nimport * as React from 'react'\n\ntype UseEnabledRelationshipsOptions = {\n  collectionSlugsBlacklist?: string[]\n  collectionSlugsWhitelist?: string[]\n  uploads?: boolean\n}\n\ntype UseEnabledRelationshipsResult = {\n  enabledCollections: ClientCollectionConfig[]\n  enabledCollectionSlugs: CollectionSlug[]\n}\n\nexport const useEnabledRelationships = (\n  options?: UseEnabledRelationshipsOptions,\n): UseEnabledRelationshipsResult => {\n  const { collectionSlugsBlacklist, collectionSlugsWhitelist, uploads = false } = options || {}\n  const {\n    config: { collections },\n  } = useConfig()\n  const { visibleEntities } = useEntityVisibility()\n\n  const result = React.useMemo(() => {\n    const enabledCollectionSlugs: string[] = []\n    const enabledCollections: ClientCollectionConfig[] = []\n    const whitelistSet = collectionSlugsWhitelist ? new Set(collectionSlugsWhitelist) : null\n    const blacklistSet = collectionSlugsBlacklist ? new Set(collectionSlugsBlacklist) : null\n\n    for (const collection of collections) {\n      const {\n        slug,\n        admin: { enableRichTextRelationship },\n        upload,\n      } = collection\n\n      // Check visibility\n      if (!visibleEntities?.collections.includes(slug)) {\n        continue\n      }\n\n      // Check rich text relationship and upload settings\n      if (uploads) {\n        if (!enableRichTextRelationship || !upload) {\n          continue\n        }\n      } else {\n        if (upload || !enableRichTextRelationship) {\n          continue\n        }\n      }\n\n      // Check whitelist (if provided, only include slugs in the whitelist)\n      if (whitelistSet && !whitelistSet.has(slug)) {\n        continue\n      }\n\n      // Check blacklist (if provided, exclude slugs in the blacklist)\n      if (blacklistSet && blacklistSet.has(slug)) {\n        continue\n      }\n\n      enabledCollectionSlugs.push(slug)\n      enabledCollections.push(collection)\n    }\n\n    return { enabledCollections, enabledCollectionSlugs }\n  }, [collections, visibleEntities, uploads, collectionSlugsWhitelist, collectionSlugsBlacklist])\n\n  return result\n}\n","'use client'\nimport type { LexicalEditor } from 'lexical'\n\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext.js'\nimport { useLexicalEditable } from '@lexical/react/useLexicalEditable'\nimport { useScrollInfo, useThrottledEffect, useTranslation } from '@payloadcms/ui'\nimport * as React from 'react'\nimport { useMemo } from 'react'\n\nimport type { EditorConfigContextType } from '../../../../../lexical/config/client/EditorConfigProvider.js'\nimport type { SanitizedClientEditorConfig } from '../../../../../lexical/config/types.js'\nimport type { PluginComponent } from '../../../../typesClient.js'\nimport type { ToolbarGroup, ToolbarGroupItem } from '../../../types.js'\nimport type { FixedToolbarFeatureProps } from '../../server/index.js'\n\nimport { useEditorConfigContext } from '../../../../../lexical/config/client/EditorConfigProvider.js'\nimport { ToolbarButton } from '../../../shared/ToolbarButton/index.js'\nimport './index.scss'\nimport { ToolbarDropdown } from '../../../shared/ToolbarDropdown/index.js'\n\nfunction ButtonGroupItem({\n  anchorElem,\n  editor,\n  item,\n}: {\n  anchorElem: HTMLElement\n  editor: LexicalEditor\n  item: ToolbarGroupItem\n}): React.ReactNode {\n  if (item.Component) {\n    return (\n      item?.Component && (\n        <item.Component anchorElem={anchorElem} editor={editor} item={item} key={item.key} />\n      )\n    )\n  }\n\n  if (!item.ChildComponent) {\n    return null\n  }\n\n  return (\n    <ToolbarButton editor={editor} item={item} key={item.key}>\n      <item.ChildComponent />\n    </ToolbarButton>\n  )\n}\n\nfunction ToolbarGroupComponent({\n  anchorElem,\n  editor,\n  editorConfig,\n  group,\n  index,\n}: {\n  anchorElem: HTMLElement\n  editor: LexicalEditor\n  editorConfig: SanitizedClientEditorConfig\n  group: ToolbarGroup\n  index: number\n}): React.ReactNode {\n  const { i18n } = useTranslation<{}, string>()\n  const {\n    fieldProps: { featureClientSchemaMap, schemaPath },\n  } = useEditorConfigContext()\n\n  const [dropdownLabel, setDropdownLabel] = React.useState<string | undefined>(undefined)\n  const [DropdownIcon, setDropdownIcon] = React.useState<React.FC | undefined>(undefined)\n\n  React.useEffect(() => {\n    if (group?.type === 'dropdown' && group.items.length && group.ChildComponent) {\n      setDropdownIcon(() => group.ChildComponent!)\n    } else {\n      setDropdownIcon(undefined)\n    }\n  }, [group])\n\n  const onActiveChange = React.useCallback(\n    ({ activeItems }: { activeItems: ToolbarGroupItem[] }) => {\n      if (!activeItems.length) {\n        if (group?.type === 'dropdown' && group.items.length && group.ChildComponent) {\n          setDropdownIcon(() => group.ChildComponent!)\n          setDropdownLabel(undefined)\n        } else {\n          setDropdownIcon(undefined)\n          setDropdownLabel(undefined)\n        }\n        return\n      }\n      const item = activeItems[0]!\n\n      let label = item.key\n      if (item.label) {\n        label =\n          typeof item.label === 'function'\n            ? item.label({ featureClientSchemaMap, i18n, schemaPath })\n            : item.label\n      }\n      // Crop title to max. 25 characters\n      if (label.length > 25) {\n        label = label.substring(0, 25) + '...'\n      }\n      if (activeItems.length === 1) {\n        setDropdownLabel(label)\n        setDropdownIcon(() => item.ChildComponent)\n      } else {\n        setDropdownLabel(\n          i18n.t('lexical:general:toolbarItemsActive', { count: activeItems.length }),\n        )\n        if (group?.type === 'dropdown' && group.items.length && group.ChildComponent) {\n          setDropdownIcon(() => group.ChildComponent!)\n        } else {\n          setDropdownIcon(undefined)\n        }\n      }\n    },\n    [group, i18n, featureClientSchemaMap, schemaPath],\n  )\n\n  return (\n    <div\n      className={`fixed-toolbar__group fixed-toolbar__group-${group.key}`}\n      data-toolbar-group-key={group.key}\n      key={group.key}\n    >\n      {group.type === 'dropdown' && group.items.length ? (\n        DropdownIcon ? (\n          <ToolbarDropdown\n            anchorElem={anchorElem}\n            editor={editor}\n            group={group}\n            Icon={DropdownIcon}\n            itemsContainerClassNames={['fixed-toolbar__dropdown-items']}\n            label={dropdownLabel}\n            maxActiveItems={group.maxActiveItems ?? 1}\n            onActiveChange={onActiveChange}\n          />\n        ) : (\n          <ToolbarDropdown\n            anchorElem={anchorElem}\n            editor={editor}\n            group={group}\n            itemsContainerClassNames={['fixed-toolbar__dropdown-items']}\n            label={dropdownLabel}\n            maxActiveItems={group.maxActiveItems ?? 1}\n            onActiveChange={onActiveChange}\n          />\n        )\n      ) : null}\n      {group.type === 'buttons' && group.items.length\n        ? group.items.map((item) => {\n            return (\n              <ButtonGroupItem anchorElem={anchorElem} editor={editor} item={item} key={item.key} />\n            )\n          })\n        : null}\n      {index < editorConfig.features.toolbarFixed?.groups.length - 1 && <div className=\"divider\" />}\n    </div>\n  )\n}\n\nfunction FixedToolbar({\n  anchorElem,\n  clientProps,\n  editor,\n  editorConfig,\n  parentWithFixedToolbar,\n}: {\n  anchorElem: HTMLElement\n  clientProps?: FixedToolbarFeatureProps\n  editor: LexicalEditor\n  editorConfig: SanitizedClientEditorConfig\n  parentWithFixedToolbar: EditorConfigContextType | false\n}): React.ReactNode {\n  const currentToolbarRef = React.useRef<HTMLDivElement>(null)\n  const isEditable = useLexicalEditable()\n\n  const { y } = useScrollInfo()\n\n  // Memoize the parent toolbar element\n  const parentToolbarElem = useMemo(() => {\n    if (!parentWithFixedToolbar || clientProps?.disableIfParentHasFixedToolbar) {\n      return null\n    }\n\n    const parentEditorElem = parentWithFixedToolbar.editorContainerRef.current\n    let sibling = parentEditorElem.previousElementSibling\n    while (sibling) {\n      if (sibling.classList.contains('fixed-toolbar')) {\n        return sibling\n      }\n      sibling = sibling.previousElementSibling\n    }\n    return null\n  }, [clientProps?.disableIfParentHasFixedToolbar, parentWithFixedToolbar])\n\n  useThrottledEffect(\n    () => {\n      if (!parentToolbarElem) {\n        // this also checks for clientProps?.disableIfParentHasFixedToolbar indirectly, see the parentToolbarElem useMemo\n        return\n      }\n      const currentToolbarElem = currentToolbarRef.current\n      if (!currentToolbarElem) {\n        return\n      }\n\n      const currentRect = currentToolbarElem.getBoundingClientRect()\n      const parentRect = parentToolbarElem.getBoundingClientRect()\n\n      // we only need to check for vertical overlap\n      const overlapping = !(\n        currentRect.bottom < parentRect.top || currentRect.top > parentRect.bottom\n      )\n\n      if (overlapping) {\n        currentToolbarElem.classList.remove('fixed-toolbar')\n        currentToolbarElem.classList.add('fixed-toolbar', 'fixed-toolbar--overlapping')\n        parentToolbarElem.classList.remove('fixed-toolbar')\n        parentToolbarElem.classList.add('fixed-toolbar', 'fixed-toolbar--hide')\n      } else {\n        if (!currentToolbarElem.classList.contains('fixed-toolbar--overlapping')) {\n          return\n        }\n        currentToolbarElem.classList.remove('fixed-toolbar--overlapping')\n        currentToolbarElem.classList.add('fixed-toolbar')\n        parentToolbarElem.classList.remove('fixed-toolbar--hide')\n        parentToolbarElem.classList.add('fixed-toolbar')\n      }\n    },\n    50,\n    [currentToolbarRef, parentToolbarElem, y],\n  )\n\n  return (\n    <div\n      className=\"fixed-toolbar\"\n      onFocus={(event) => {\n        // Prevent other focus events being triggered. Otherwise, if this was to be clicked while in a child editor,\n        // the parent editor will be focused, and the child editor will lose focus.\n        event.stopPropagation()\n      }}\n      ref={currentToolbarRef}\n    >\n      {isEditable && (\n        <React.Fragment>\n          {editorConfig?.features &&\n            editorConfig.features?.toolbarFixed?.groups.map((group, i) => {\n              return (\n                <ToolbarGroupComponent\n                  anchorElem={anchorElem}\n                  editor={editor}\n                  editorConfig={editorConfig}\n                  group={group}\n                  index={i}\n                  key={group.key}\n                />\n              )\n            })}\n        </React.Fragment>\n      )}\n    </div>\n  )\n}\n\nconst getParentEditorWithFixedToolbar = (\n  editorConfigContext: EditorConfigContextType,\n): EditorConfigContextType | false => {\n  if (editorConfigContext.parentEditor?.editorConfig) {\n    if (editorConfigContext.parentEditor?.editorConfig.resolvedFeatureMap.has('toolbarFixed')) {\n      return editorConfigContext.parentEditor\n    } else {\n      if (editorConfigContext.parentEditor) {\n        return getParentEditorWithFixedToolbar(editorConfigContext.parentEditor)\n      }\n    }\n  }\n  return false\n}\n\nexport const FixedToolbarPlugin: PluginComponent<FixedToolbarFeatureProps> = ({ clientProps }) => {\n  const [currentEditor] = useLexicalComposerContext()\n  const editorConfigContext = useEditorConfigContext()\n  const isEditable = useLexicalEditable()\n  if (!isEditable) {\n    return null\n  }\n\n  const { editorConfig: currentEditorConfig } = editorConfigContext\n\n  const editor = clientProps.applyToFocusedEditor\n    ? editorConfigContext.focusedEditor?.editor || currentEditor\n    : currentEditor\n\n  const editorConfig = clientProps.applyToFocusedEditor\n    ? editorConfigContext.focusedEditor?.editorConfig || currentEditorConfig\n    : currentEditorConfig\n\n  const parentWithFixedToolbar = getParentEditorWithFixedToolbar(editorConfigContext)\n\n  if (clientProps?.disableIfParentHasFixedToolbar) {\n    if (parentWithFixedToolbar) {\n      return null\n    }\n  }\n\n  if (!editorConfig?.features?.toolbarFixed?.groups?.length) {\n    return null\n  }\n\n  return (\n    <FixedToolbar\n      anchorElem={document.body}\n      editor={editor}\n      editorConfig={editorConfig}\n      parentWithFixedToolbar={parentWithFixedToolbar}\n    />\n  )\n}\n","'use client'\nimport type { LexicalEditor } from 'lexical'\n\nimport { mergeRegister } from '@lexical/utils'\nimport { $addUpdateTag, $getSelection } from 'lexical'\nimport React, { useCallback, useDeferredValue, useEffect, useMemo, useState } from 'react'\n\nimport type { ToolbarGroupItem } from '../../types.js'\n\nimport { useEditorConfigContext } from '../../../../lexical/config/client/EditorConfigProvider.js'\nimport './index.scss'\nimport { useRunDeprioritized } from '../../../../utilities/useRunDeprioritized.js'\n\nconst baseClass = 'toolbar-popup__button'\n\nexport const ToolbarButton = ({\n  children,\n  editor,\n  item,\n}: {\n  children: React.JSX.Element\n  editor: LexicalEditor\n  item: ToolbarGroupItem\n}) => {\n  const [_state, setState] = useState({ active: false, enabled: true })\n  const deferredState = useDeferredValue(_state)\n\n  const editorConfigContext = useEditorConfigContext()\n\n  const className = useMemo(() => {\n    return [\n      baseClass,\n      !deferredState.enabled ? 'disabled' : '',\n      deferredState.active ? 'active' : '',\n      item.key ? `${baseClass}-${item.key}` : '',\n    ]\n      .filter(Boolean)\n      .join(' ')\n  }, [deferredState, item.key])\n  const updateStates = useCallback(() => {\n    editor.getEditorState().read(() => {\n      const selection = $getSelection()\n      if (!selection) {\n        return\n      }\n      const newActive = item.isActive\n        ? item.isActive({ editor, editorConfigContext, selection })\n        : false\n\n      const newEnabled = item.isEnabled\n        ? item.isEnabled({ editor, editorConfigContext, selection })\n        : true\n\n      setState((prev) => {\n        if (prev.active === newActive && prev.enabled === newEnabled) {\n          return prev\n        }\n        return { active: newActive, enabled: newEnabled }\n      })\n    })\n  }, [editor, editorConfigContext, item])\n\n  const runDeprioritized = useRunDeprioritized()\n\n  useEffect(() => {\n    // Run on mount\n    void runDeprioritized(updateStates)\n\n    const listener = () => runDeprioritized(updateStates)\n\n    const cleanup = mergeRegister(editor.registerUpdateListener(listener))\n    document.addEventListener('mouseup', listener)\n\n    return () => {\n      cleanup()\n      document.removeEventListener('mouseup', listener)\n    }\n  }, [editor, runDeprioritized, updateStates])\n\n  const handleClick = useCallback(() => {\n    if (!_state.enabled) {\n      return\n    }\n\n    editor.focus(() => {\n      editor.update(() => {\n        $addUpdateTag('toolbar')\n      })\n      // We need to wrap the onSelect in the callback, so the editor is properly focused before the onSelect is called.\n      item.onSelect?.({\n        editor,\n        isActive: _state.active,\n      })\n    })\n  }, [editor, item, _state])\n\n  const handleMouseDown = useCallback((e: React.MouseEvent) => {\n    // This fixes a bug where you are unable to click the button if you are in a NESTED editor (editor in blocks field in editor).\n    // Thus only happens if you click on the SVG of the button. Clicking on the outside works. Related issue: https://github.com/payloadcms/payload/issues/4025\n    // TODO: Find out why exactly it happens and why e.preventDefault() on the mouseDown fixes it. Write that down here, or potentially fix a root cause, if there is any.\n    e.preventDefault()\n  }, [])\n\n  return (\n    <button\n      className={className}\n      data-button-key={item.key}\n      onClick={handleClick}\n      onMouseDown={handleMouseDown}\n      type=\"button\"\n    >\n      {children}\n    </button>\n  )\n}\n","'use client'\nimport React, { useCallback, useDeferredValue, useEffect, useMemo } from 'react'\n\nconst baseClass = 'toolbar-popup__dropdown'\n\nimport type { LexicalEditor } from 'lexical'\n\nimport { mergeRegister } from '@lexical/utils'\nimport { useTranslation } from '@payloadcms/ui'\nimport { $getSelection } from 'lexical'\n\nimport type { ToolbarDropdownGroup, ToolbarGroupItem } from '../../types.js'\n\nimport { useEditorConfigContext } from '../../../../lexical/config/client/EditorConfigProvider.js'\nimport { useRunDeprioritized } from '../../../../utilities/useRunDeprioritized.js'\nimport './index.scss'\nimport { DropDown, DropDownItem } from './DropDown.js'\n\nconst ToolbarItem = ({\n  active,\n  anchorElem,\n  editor,\n  enabled,\n  item,\n}: {\n  active?: boolean\n  anchorElem: HTMLElement\n  editor: LexicalEditor\n  enabled?: boolean\n  item: ToolbarGroupItem\n}) => {\n  const { i18n } = useTranslation<{}, string>()\n  const {\n    fieldProps: { featureClientSchemaMap, schemaPath },\n  } = useEditorConfigContext()\n\n  if (item.Component) {\n    return (\n      item?.Component && (\n        <item.Component\n          active={active}\n          anchorElem={anchorElem}\n          editor={editor}\n          enabled={enabled}\n          item={item}\n          key={item.key}\n        />\n      )\n    )\n  }\n\n  let title = item.key\n  let croppedTitle = item.key\n  if (item.label) {\n    title =\n      typeof item.label === 'function'\n        ? item.label({ featureClientSchemaMap, i18n, schemaPath })\n        : item.label\n  }\n  // Crop title to max. 25 characters\n  if (title.length > 25) {\n    croppedTitle = title.substring(0, 25) + '...'\n  } else {\n    croppedTitle = title\n  }\n\n  return (\n    <DropDownItem\n      active={active}\n      editor={editor}\n      enabled={enabled}\n      Icon={item?.ChildComponent ? <item.ChildComponent /> : undefined}\n      item={item}\n      itemKey={item.key}\n      key={item.key}\n      tooltip={title}\n    >\n      <span className=\"text\">{croppedTitle}</span>\n    </DropDownItem>\n  )\n}\n\nconst MemoToolbarItem = React.memo(ToolbarItem)\n\nexport const ToolbarDropdown = ({\n  anchorElem,\n  classNames,\n  editor,\n  group,\n  Icon,\n  itemsContainerClassNames,\n  label,\n  maxActiveItems,\n  onActiveChange,\n}: {\n  anchorElem: HTMLElement\n  classNames?: string[]\n  editor: LexicalEditor\n  group: ToolbarDropdownGroup\n  Icon?: React.FC\n  itemsContainerClassNames?: string[]\n  label?: string\n  /**\n   * Maximum number of active items allowed. This is a performance optimization to prevent\n   * unnecessary item active checks when the maximum number of active items is reached.\n   */\n  maxActiveItems?: number\n  onActiveChange?: ({ activeItems }: { activeItems: ToolbarGroupItem[] }) => void\n}) => {\n  const [toolbarState, setToolbarState] = React.useState<{\n    activeItemKeys: string[]\n    enabledGroup: boolean\n    enabledItemKeys: string[]\n  }>({\n    activeItemKeys: [],\n    enabledGroup: true,\n    enabledItemKeys: [],\n  })\n  const deferredToolbarState = useDeferredValue(toolbarState)\n\n  const editorConfigContext = useEditorConfigContext()\n  const { items, key: groupKey } = group\n\n  const runDeprioritized = useRunDeprioritized()\n\n  const updateStates = useCallback(() => {\n    editor.getEditorState().read(() => {\n      const selection = $getSelection()\n      if (!selection) {\n        return\n      }\n\n      const _activeItemKeys: string[] = []\n      const _activeItems: ToolbarGroupItem[] = []\n      const _enabledItemKeys: string[] = []\n\n      for (const item of items) {\n        if (item.isActive && (!maxActiveItems || _activeItemKeys.length < maxActiveItems)) {\n          const isActive = item.isActive({ editor, editorConfigContext, selection })\n          if (isActive) {\n            _activeItemKeys.push(item.key)\n            _activeItems.push(item)\n          }\n        }\n        if (item.isEnabled) {\n          const isEnabled = item.isEnabled({ editor, editorConfigContext, selection })\n          if (isEnabled) {\n            _enabledItemKeys.push(item.key)\n          }\n        } else {\n          _enabledItemKeys.push(item.key)\n        }\n      }\n\n      setToolbarState({\n        activeItemKeys: _activeItemKeys,\n        enabledGroup: group.isEnabled\n          ? group.isEnabled({ editor, editorConfigContext, selection })\n          : true,\n        enabledItemKeys: _enabledItemKeys,\n      })\n\n      if (onActiveChange) {\n        onActiveChange({ activeItems: _activeItems })\n      }\n    })\n  }, [editor, editorConfigContext, group, items, maxActiveItems, onActiveChange])\n\n  useEffect(() => {\n    // Run on mount in order to update states when dropdown is opened\n    void runDeprioritized(updateStates)\n\n    return mergeRegister(\n      editor.registerUpdateListener(async () => {\n        await runDeprioritized(updateStates)\n      }),\n    )\n  }, [editor, runDeprioritized, updateStates])\n\n  const renderedItems = useMemo(() => {\n    return items?.length\n      ? items.map((item) => (\n          <MemoToolbarItem\n            active={deferredToolbarState.activeItemKeys.includes(item.key)}\n            anchorElem={anchorElem}\n            editor={editor}\n            enabled={deferredToolbarState.enabledItemKeys.includes(item.key)}\n            item={item}\n            key={item.key}\n          />\n        ))\n      : null\n  }, [items, deferredToolbarState, anchorElem, editor])\n\n  return (\n    <DropDown\n      buttonAriaLabel={`${groupKey} dropdown`}\n      buttonClassName={[baseClass, `${baseClass}-${groupKey}`, ...(classNames || [])]\n        .filter(Boolean)\n        .join(' ')}\n      disabled={!deferredToolbarState.enabledGroup}\n      dropdownKey={groupKey}\n      Icon={Icon}\n      itemsContainerClassNames={[`${baseClass}-items`, ...(itemsContainerClassNames || [])]}\n      key={groupKey}\n      label={label}\n    >\n      {renderedItems}\n    </DropDown>\n  )\n}\n","'use client'\nimport { Button } from '@payloadcms/ui'\nimport { $addUpdateTag, isDOMNode, type LexicalEditor } from 'lexical'\nimport React, { type ReactNode, useCallback, useEffect, useMemo, useRef, useState } from 'react'\nimport { createPortal } from 'react-dom'\n\nimport type { ToolbarGroupItem } from '../../types.js'\n\nconst baseClass = 'toolbar-popup__dropdown-item'\n\ninterface DropDownContextType {\n  registerItem: (ref: React.RefObject<HTMLButtonElement | null>) => void\n}\n\nconst DropDownContext = React.createContext<DropDownContextType | null>(null)\n\nexport function DropDownItem({\n  active,\n  children,\n  editor,\n  enabled,\n  Icon,\n  item,\n  itemKey,\n  tooltip,\n}: {\n  active?: boolean\n  children: React.ReactNode\n  editor: LexicalEditor\n  enabled?: boolean\n  Icon: React.ReactNode\n  item: ToolbarGroupItem\n  itemKey: string\n  tooltip?: string\n}): React.ReactNode {\n  const className = useMemo(() => {\n    return [\n      baseClass,\n      enabled === false ? 'disabled' : '',\n      active ? 'active' : '',\n      item?.key ? `${baseClass}-${item.key}` : '',\n    ]\n      .filter(Boolean)\n      .join(' ')\n  }, [enabled, active, item.key])\n\n  const ref = useRef<HTMLButtonElement>(null)\n\n  const dropDownContext = React.use(DropDownContext)\n\n  if (dropDownContext === null) {\n    throw new Error('DropDownItem must be used within a DropDown')\n  }\n\n  const { registerItem } = dropDownContext\n\n  useEffect(() => {\n    if (ref?.current != null) {\n      registerItem(ref)\n    }\n  }, [ref, registerItem])\n\n  return (\n    <Button\n      aria-label={tooltip}\n      buttonStyle=\"none\"\n      className={className}\n      disabled={enabled === false}\n      extraButtonProps={{\n        'data-item-key': itemKey,\n      }}\n      icon={Icon}\n      iconPosition=\"left\"\n      iconStyle=\"none\"\n      onClick={() => {\n        if (enabled !== false) {\n          editor.focus(() => {\n            editor.update(() => {\n              $addUpdateTag('toolbar')\n            })\n            // We need to wrap the onSelect in the callback, so the editor is properly focused before the onSelect is called.\n            item.onSelect?.({\n              editor,\n              isActive: active!,\n            })\n          })\n        }\n      }}\n      onMouseDown={(e) => {\n        // This is required for Firefox compatibility. Without it, the dropdown will disappear without the onClick being called.\n        // This only happens in Firefox. Must be something about how Firefox handles focus events differently.\n        e.preventDefault()\n      }}\n      ref={ref}\n      tooltip={tooltip}\n      type=\"button\"\n    >\n      {children}\n    </Button>\n  )\n}\n\nfunction DropDownItems({\n  children,\n  dropDownRef,\n  itemsContainerClassNames,\n  onClose,\n}: {\n  children: React.ReactNode\n  dropDownRef: React.Ref<HTMLDivElement>\n  itemsContainerClassNames?: string[]\n  onClose: () => void\n}): React.ReactElement {\n  const [items, setItems] = useState<Array<React.RefObject<HTMLButtonElement | null>>>()\n  const [highlightedItem, setHighlightedItem] =\n    useState<React.RefObject<HTMLButtonElement | null>>()\n\n  const registerItem = useCallback(\n    (itemRef: React.RefObject<HTMLButtonElement | null>) => {\n      setItems((prev) => (prev != null ? [...prev, itemRef] : [itemRef]))\n    },\n    [setItems],\n  )\n\n  const handleKeyDown = (event: React.KeyboardEvent<HTMLDivElement>): void => {\n    if (items == null) {\n      return\n    }\n\n    const { key } = event\n\n    if (['ArrowDown', 'ArrowUp', 'Escape', 'Tab'].includes(key)) {\n      event.preventDefault()\n    }\n\n    if (key === 'Escape' || key === 'Tab') {\n      onClose()\n    } else if (key === 'ArrowUp') {\n      setHighlightedItem((prev) => {\n        if (prev == null) {\n          return items[0]\n        }\n        const index = items.indexOf(prev) - 1\n        return items[index === -1 ? items.length - 1 : index]\n      })\n    } else if (key === 'ArrowDown') {\n      setHighlightedItem((prev) => {\n        if (prev == null) {\n          return items[0]\n        }\n        return items[items.indexOf(prev) + 1]\n      })\n    }\n  }\n\n  const contextValue = useMemo(\n    () => ({\n      registerItem,\n    }),\n    [registerItem],\n  )\n\n  useEffect(() => {\n    if (items != null && highlightedItem == null) {\n      setHighlightedItem(items[0])\n    }\n\n    if (highlightedItem != null && highlightedItem?.current != null) {\n      highlightedItem.current.focus()\n    }\n  }, [items, highlightedItem])\n\n  return (\n    <DropDownContext value={contextValue}>\n      <div\n        className={(itemsContainerClassNames ?? ['toolbar-popup__dropdown-items']).join(' ')}\n        onKeyDown={handleKeyDown}\n        ref={dropDownRef}\n      >\n        {children}\n      </div>\n    </DropDownContext>\n  )\n}\n\nexport function DropDown({\n  buttonAriaLabel,\n  buttonClassName,\n  children,\n  disabled = false,\n  dropdownKey,\n  Icon,\n  itemsContainerClassNames,\n  label,\n  stopCloseOnClickSelf,\n}: {\n  buttonAriaLabel?: string\n  buttonClassName: string\n  children: ReactNode\n  disabled?: boolean\n  dropdownKey: string\n  Icon?: React.FC\n  itemsContainerClassNames?: string[]\n  label?: string\n  stopCloseOnClickSelf?: boolean\n}): React.ReactNode {\n  const dropDownRef = useRef<HTMLDivElement>(null)\n  const buttonRef = useRef<HTMLButtonElement>(null)\n  const [showDropDown, setShowDropDown] = useState(false)\n\n  const handleClose = (): void => {\n    setShowDropDown(false)\n    if (buttonRef?.current != null) {\n      buttonRef.current.focus()\n    }\n  }\n\n  useEffect(() => {\n    const button = buttonRef.current\n    const dropDown = dropDownRef.current\n\n    if (showDropDown && button !== null && dropDown !== null) {\n      const { left, top } = button.getBoundingClientRect()\n      const scrollTopOffset = window.scrollY || document.documentElement.scrollTop\n      dropDown.style.top = `${top + scrollTopOffset + button.offsetHeight + 5}px`\n      dropDown.style.left = `${Math.min(left - 5, window.innerWidth - dropDown.offsetWidth - 20)}px`\n    }\n  }, [dropDownRef, buttonRef, showDropDown])\n\n  useEffect(() => {\n    const button = buttonRef.current\n\n    if (button !== null && showDropDown) {\n      const handle = (event: MouseEvent): void => {\n        const target = event.target\n        if (!isDOMNode(target)) {\n          return\n        }\n        if (stopCloseOnClickSelf) {\n          if (dropDownRef.current && dropDownRef.current.contains(target)) {\n            return\n          }\n        }\n        if (!button.contains(target)) {\n          setShowDropDown(false)\n        }\n      }\n      document.addEventListener('click', handle)\n\n      return () => {\n        document.removeEventListener('click', handle)\n      }\n    }\n  }, [dropDownRef, buttonRef, showDropDown, stopCloseOnClickSelf])\n\n  const portal = createPortal(\n    <DropDownItems\n      dropDownRef={dropDownRef}\n      itemsContainerClassNames={itemsContainerClassNames}\n      onClose={handleClose}\n    >\n      {children}\n    </DropDownItems>,\n    document.body,\n  )\n\n  return (\n    <React.Fragment>\n      <button\n        aria-label={buttonAriaLabel}\n        className={buttonClassName + (showDropDown ? ' active' : '')}\n        data-dropdown-key={dropdownKey}\n        disabled={disabled}\n        onClick={(event) => {\n          event.preventDefault()\n          setShowDropDown(!showDropDown)\n        }}\n        onMouseDown={(e) => {\n          // This fixes a bug where you are unable to click the button if you are in a NESTED editor (editor in blocks field in editor).\n          // Thus only happens if you click on the SVG of the button. Clicking on the outside works. Related issue: https://github.com/payloadcms/payload/issues/4025\n          // TODO: Find out why exactly it happens and why e.preventDefault() on the mouseDown fixes it. Write that down here, or potentially fix a root cause, if there is any.\n          e.preventDefault()\n        }}\n        ref={buttonRef}\n        type=\"button\"\n      >\n        {Icon && <Icon />}\n        {label && <span className=\"toolbar-popup__dropdown-label\">{label}</span>}\n        <i className=\"toolbar-popup__dropdown-caret\" />\n      </button>\n\n      {showDropDown && <React.Fragment>{portal}</React.Fragment>}\n    </React.Fragment>\n  )\n}\n","'use client'\n\nimport type { FixedToolbarFeatureProps } from '../server/index.js'\n\nimport { createClientFeature } from '../../../../utilities/createClientFeature.js'\nimport { FixedToolbarPlugin } from './Toolbar/index.js'\n\nexport const FixedToolbarFeatureClient = createClientFeature<FixedToolbarFeatureProps>({\n  plugins: [\n    {\n      Component: FixedToolbarPlugin,\n      position: 'aboveContainer',\n    },\n  ],\n})\n","'use client'\nimport type { LexicalEditor } from 'lexical'\n\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext.js'\nimport { useLexicalEditable } from '@lexical/react/useLexicalEditable'\nimport { mergeRegister } from '@lexical/utils'\nimport {\n  $getSelection,\n  $isRangeSelection,\n  $isTextNode,\n  COMMAND_PRIORITY_LOW,\n  getDOMSelection,\n  SELECTION_CHANGE_COMMAND,\n} from 'lexical'\nimport { useCallback, useEffect, useRef, useState } from 'react'\nimport * as React from 'react'\nimport { createPortal } from 'react-dom'\n\nimport type { PluginComponentWithAnchor } from '../../../../typesClient.js'\nimport type { ToolbarGroup, ToolbarGroupItem } from '../../../types.js'\n\nimport { useEditorConfigContext } from '../../../../../lexical/config/client/EditorConfigProvider.js'\nimport { getDOMRangeRect } from '../../../../../lexical/utils/getDOMRangeRect.js'\nimport { setFloatingElemPosition } from '../../../../../lexical/utils/setFloatingElemPosition.js'\nimport { ToolbarButton } from '../../../shared/ToolbarButton/index.js'\nimport './index.scss'\nimport { ToolbarDropdown } from '../../../shared/ToolbarDropdown/index.js'\n\nfunction ButtonGroupItem({\n  anchorElem,\n  editor,\n  item,\n}: {\n  anchorElem: HTMLElement\n  editor: LexicalEditor\n  item: ToolbarGroupItem\n}): React.ReactNode {\n  if (item.Component) {\n    return (\n      item?.Component && (\n        <item.Component anchorElem={anchorElem} editor={editor} item={item} key={item.key} />\n      )\n    )\n  }\n  if (!item.ChildComponent) {\n    return null\n  }\n\n  return (\n    <ToolbarButton editor={editor} item={item} key={item.key}>\n      <item.ChildComponent />\n    </ToolbarButton>\n  )\n}\n\nfunction ToolbarGroupComponent({\n  anchorElem,\n  editor,\n  group,\n  index,\n}: {\n  anchorElem: HTMLElement\n  editor: LexicalEditor\n  group: ToolbarGroup\n  index: number\n}): React.ReactNode {\n  const { editorConfig } = useEditorConfigContext()\n\n  const [DropdownIcon, setDropdownIcon] = React.useState<React.FC | undefined>()\n\n  React.useEffect(() => {\n    if (group?.type === 'dropdown' && group.items.length && group.ChildComponent) {\n      setDropdownIcon(() => group.ChildComponent)\n    } else {\n      setDropdownIcon(undefined)\n    }\n  }, [group])\n\n  const onActiveChange = useCallback(\n    ({ activeItems }: { activeItems: ToolbarGroupItem[] }) => {\n      if (!activeItems.length) {\n        if (group?.type === 'dropdown' && group.items.length && group.ChildComponent) {\n          setDropdownIcon(() => group.ChildComponent)\n        } else {\n          setDropdownIcon(undefined)\n        }\n        return\n      }\n      const item = activeItems[0]\n      setDropdownIcon(() => item?.ChildComponent)\n    },\n    [group],\n  )\n\n  return (\n    <div\n      className={`inline-toolbar-popup__group inline-toolbar-popup__group-${group.key}`}\n      data-toolbar-group-key={group.key}\n      key={group.key}\n    >\n      {group.type === 'dropdown' && group.items.length ? (\n        DropdownIcon ? (\n          <ToolbarDropdown\n            anchorElem={anchorElem}\n            editor={editor}\n            group={group}\n            Icon={DropdownIcon}\n            maxActiveItems={group.maxActiveItems ?? 1}\n            onActiveChange={onActiveChange}\n          />\n        ) : (\n          <ToolbarDropdown\n            anchorElem={anchorElem}\n            editor={editor}\n            group={group}\n            maxActiveItems={group.maxActiveItems ?? 1}\n            onActiveChange={onActiveChange}\n          />\n        )\n      ) : null}\n      {group.type === 'buttons' && group.items.length\n        ? group.items.map((item) => {\n            return (\n              <ButtonGroupItem anchorElem={anchorElem} editor={editor} item={item} key={item.key} />\n            )\n          })\n        : null}\n      {index < editorConfig.features.toolbarInline?.groups.length - 1 && (\n        <div className=\"divider\" />\n      )}\n    </div>\n  )\n}\n\nfunction InlineToolbar({\n  anchorElem,\n  editor,\n}: {\n  anchorElem: HTMLElement\n  editor: LexicalEditor\n}): React.ReactNode {\n  const floatingToolbarRef = useRef<HTMLDivElement | null>(null)\n  const caretRef = useRef<HTMLDivElement | null>(null)\n\n  const { editorConfig } = useEditorConfigContext()\n\n  const closeFloatingToolbar = useCallback(() => {\n    if (floatingToolbarRef?.current) {\n      const isOpacityZero = floatingToolbarRef.current.style.opacity === '0'\n      const isPointerEventsNone = floatingToolbarRef.current.style.pointerEvents === 'none'\n\n      if (!isOpacityZero) {\n        floatingToolbarRef.current.style.opacity = '0'\n      }\n      if (!isPointerEventsNone) {\n        floatingToolbarRef.current.style.pointerEvents = 'none'\n      }\n    }\n  }, [floatingToolbarRef])\n\n  const mouseMoveListener = useCallback(\n    (e: MouseEvent) => {\n      if (floatingToolbarRef?.current && (e.buttons === 1 || e.buttons === 3)) {\n        const isOpacityZero = floatingToolbarRef.current.style.opacity === '0'\n        const isPointerEventsNone = floatingToolbarRef.current.style.pointerEvents === 'none'\n        if (!isOpacityZero || !isPointerEventsNone) {\n          // Check if the mouse is not over the popup\n          const x = e.clientX\n          const y = e.clientY\n          const elementUnderMouse = document.elementFromPoint(x, y)\n          if (!floatingToolbarRef.current.contains(elementUnderMouse)) {\n            // Mouse is not over the target element => not a normal click, but probably a drag\n            closeFloatingToolbar()\n          }\n        }\n      }\n    },\n    [closeFloatingToolbar],\n  )\n\n  const mouseUpListener = useCallback(() => {\n    if (floatingToolbarRef?.current) {\n      if (floatingToolbarRef.current.style.opacity !== '1') {\n        floatingToolbarRef.current.style.opacity = '1'\n      }\n      if (floatingToolbarRef.current.style.pointerEvents !== 'auto') {\n        floatingToolbarRef.current.style.pointerEvents = 'auto'\n      }\n    }\n  }, [])\n\n  useEffect(() => {\n    document.addEventListener('mousemove', mouseMoveListener)\n    document.addEventListener('mouseup', mouseUpListener)\n\n    return () => {\n      document.removeEventListener('mousemove', mouseMoveListener)\n      document.removeEventListener('mouseup', mouseUpListener)\n    }\n  }, [floatingToolbarRef, mouseMoveListener, mouseUpListener])\n\n  const $updateTextFormatFloatingToolbar = useCallback(() => {\n    const selection = $getSelection()\n\n    const nativeSelection = getDOMSelection(editor._window)\n\n    if (floatingToolbarRef.current === null) {\n      return\n    }\n\n    const possibleLinkEditor = anchorElem.querySelector(':scope > .link-editor')\n    const isLinkEditorVisible =\n      possibleLinkEditor !== null &&\n      'style' in possibleLinkEditor &&\n      possibleLinkEditor?.style?.['opacity' as keyof typeof possibleLinkEditor.style] === '1'\n\n    const rootElement = editor.getRootElement()\n    if (\n      selection !== null &&\n      nativeSelection !== null &&\n      !nativeSelection.isCollapsed &&\n      rootElement !== null &&\n      rootElement.contains(nativeSelection.anchorNode)\n    ) {\n      const rangeRect = getDOMRangeRect(nativeSelection, rootElement)\n\n      // Position floating toolbar\n      const offsetIfFlipped = setFloatingElemPosition({\n        alwaysDisplayOnTop: isLinkEditorVisible,\n        anchorElem,\n        floatingElem: floatingToolbarRef.current,\n        horizontalPosition: 'center',\n        targetRect: rangeRect,\n      })\n\n      // Position caret\n      if (caretRef.current) {\n        setFloatingElemPosition({\n          anchorElem: floatingToolbarRef.current,\n          anchorFlippedOffset: offsetIfFlipped,\n          floatingElem: caretRef.current,\n          horizontalOffset: 5,\n          horizontalPosition: 'center',\n          specialHandlingForCaret: true,\n          targetRect: rangeRect,\n          verticalGap: 8,\n        })\n      }\n    } else {\n      closeFloatingToolbar()\n    }\n  }, [editor, closeFloatingToolbar, anchorElem])\n\n  useEffect(() => {\n    const scrollerElem = anchorElem.parentElement\n\n    const update = () => {\n      editor.getEditorState().read(() => {\n        $updateTextFormatFloatingToolbar()\n      })\n    }\n\n    window.addEventListener('resize', update)\n    if (scrollerElem) {\n      scrollerElem.addEventListener('scroll', update)\n    }\n\n    return () => {\n      window.removeEventListener('resize', update)\n      if (scrollerElem) {\n        scrollerElem.removeEventListener('scroll', update)\n      }\n    }\n  }, [editor, $updateTextFormatFloatingToolbar, anchorElem])\n\n  useEffect(() => {\n    editor.getEditorState().read(() => {\n      $updateTextFormatFloatingToolbar()\n    })\n    return mergeRegister(\n      editor.registerUpdateListener(({ editorState }) => {\n        editorState.read(() => {\n          $updateTextFormatFloatingToolbar()\n        })\n      }),\n\n      editor.registerCommand(\n        SELECTION_CHANGE_COMMAND,\n        () => {\n          $updateTextFormatFloatingToolbar()\n          return false\n        },\n        COMMAND_PRIORITY_LOW,\n      ),\n    )\n  }, [editor, $updateTextFormatFloatingToolbar])\n\n  return (\n    <div className=\"inline-toolbar-popup\" ref={floatingToolbarRef}>\n      <div className=\"caret\" ref={caretRef} />\n      {editorConfig?.features &&\n        editorConfig.features?.toolbarInline?.groups.map((group, i) => {\n          return (\n            <ToolbarGroupComponent\n              anchorElem={anchorElem}\n              editor={editor}\n              group={group}\n              index={i}\n              key={group.key}\n            />\n          )\n        })}\n    </div>\n  )\n}\n\nfunction useInlineToolbar(\n  editor: LexicalEditor,\n  anchorElem: HTMLElement,\n): null | React.ReactElement {\n  const [isText, setIsText] = useState(false)\n  const isEditable = useLexicalEditable()\n\n  const updatePopup = useCallback(() => {\n    editor.getEditorState().read(() => {\n      // Should not to pop up the floating toolbar when using IME input\n      if (editor.isComposing()) {\n        return\n      }\n      const selection = $getSelection()\n      const nativeSelection = getDOMSelection(editor._window)\n      const rootElement = editor.getRootElement()\n\n      if (\n        nativeSelection !== null &&\n        (!$isRangeSelection(selection) ||\n          rootElement === null ||\n          !rootElement.contains(nativeSelection.anchorNode))\n      ) {\n        setIsText(false)\n        return\n      }\n\n      if (!$isRangeSelection(selection)) {\n        return\n      }\n\n      if (selection.getTextContent() !== '') {\n        const nodes = selection.getNodes()\n        let foundNodeWithText = false\n        for (const node of nodes) {\n          if ($isTextNode(node)) {\n            setIsText(true)\n            foundNodeWithText = true\n            break\n          }\n        }\n        if (!foundNodeWithText) {\n          setIsText(false)\n        }\n      } else {\n        setIsText(false)\n      }\n\n      const rawTextContent = selection.getTextContent().replace(/\\n/g, '')\n      if (!selection.isCollapsed() && rawTextContent === '') {\n        setIsText(false)\n        return\n      }\n    })\n  }, [editor])\n\n  useEffect(() => {\n    document.addEventListener('selectionchange', updatePopup)\n    document.addEventListener('mouseup', updatePopup)\n    return () => {\n      document.removeEventListener('selectionchange', updatePopup)\n      document.removeEventListener('mouseup', updatePopup)\n    }\n  }, [updatePopup])\n\n  useEffect(() => {\n    return mergeRegister(\n      editor.registerUpdateListener(() => {\n        updatePopup()\n      }),\n      editor.registerRootListener(() => {\n        if (editor.getRootElement() === null) {\n          setIsText(false)\n        }\n      }),\n    )\n  }, [editor, updatePopup])\n\n  if (!isText || !isEditable) {\n    return null\n  }\n\n  return createPortal(<InlineToolbar anchorElem={anchorElem} editor={editor} />, anchorElem)\n}\n\nexport const InlineToolbarPlugin: PluginComponentWithAnchor<undefined> = ({ anchorElem }) => {\n  const [editor] = useLexicalComposerContext()\n\n  return useInlineToolbar(editor, anchorElem)\n}\n","'use client'\nexport function getDOMRangeRect(nativeSelection: Selection, rootElement: HTMLElement): DOMRect {\n  const domRange = nativeSelection.getRangeAt(0)\n\n  let rect\n\n  if (nativeSelection.anchorNode === rootElement) {\n    let inner = rootElement\n    while (inner.firstElementChild != null) {\n      inner = inner.firstElementChild as HTMLElement\n    }\n    rect = inner.getBoundingClientRect()\n  } else {\n    rect = domRange.getBoundingClientRect()\n  }\n\n  return rect\n}\n","'use client'\nconst VERTICAL_GAP = 10\nconst HORIZONTAL_OFFSET = 32\n\n// TODO: needs refactoring\n// This is supposed to position the floatingElem based on the parent (anchorElem) and the target (targetRect) which is usually the selected text.\n// So basically, it positions the floatingElem either below or above the target (targetRect) and aligns it to the left or center of the target (targetRect).\n// This is used for positioning the floating toolbar (anchor: richtext editor) and its caret (anchor: floating toolbar)\nexport function setFloatingElemPosition(args: {\n  alwaysDisplayOnTop?: boolean\n  anchorElem: HTMLElement\n  anchorFlippedOffset?: number // Offset which was added to the anchor (for caret, floating toolbar) if it was flipped\n  floatingElem: HTMLElement\n  horizontalOffset?: number\n  horizontalPosition?: 'center' | 'left'\n  specialHandlingForCaret?: boolean\n  targetRect: ClientRect | null\n  verticalGap?: number\n}): number | undefined {\n  const {\n    alwaysDisplayOnTop = false,\n    anchorElem,\n    anchorFlippedOffset = 0, // Offset which was added to the anchor (for caret, floating toolbar) if it was flipped\n    floatingElem,\n    horizontalOffset = HORIZONTAL_OFFSET,\n    horizontalPosition = 'left',\n    specialHandlingForCaret = false,\n    targetRect,\n    verticalGap = VERTICAL_GAP,\n  } = args\n  // Returns the top offset if the target was flipped\n  const scrollerElem = anchorElem.parentElement\n\n  if (targetRect === null || scrollerElem == null) {\n    floatingElem.style.opacity = '0'\n    floatingElem.style.transform = 'translate(-10000px, -10000px)'\n    return\n  }\n\n  const floatingElemRect = floatingElem.getBoundingClientRect()\n  const anchorElementRect = anchorElem.getBoundingClientRect()\n  const editorScrollerRect = scrollerElem.getBoundingClientRect()\n\n  let top = targetRect.top - floatingElemRect.height - verticalGap\n  let left = targetRect.left - horizontalOffset\n\n  if (horizontalPosition === 'center') {\n    // Calculate left to position floatingElem to the horizontal middle of targetRect\n    left = targetRect.left + targetRect.width / 2 - floatingElemRect.width / 2\n  }\n\n  let addedToTop = 0\n  if (!alwaysDisplayOnTop && top < editorScrollerRect.top && !specialHandlingForCaret) {\n    addedToTop = floatingElemRect.height + targetRect.height + verticalGap * 2\n\n    top += addedToTop\n  }\n\n  if (horizontalPosition === 'center') {\n    if (left + floatingElemRect.width > editorScrollerRect.right) {\n      left = editorScrollerRect.right - floatingElemRect.width - horizontalOffset\n    } else if (left < editorScrollerRect.left) {\n      left = editorScrollerRect.left + horizontalOffset\n    }\n  } else {\n    if (left + floatingElemRect.width > editorScrollerRect.right) {\n      left = editorScrollerRect.right - floatingElemRect.width - horizontalOffset\n    }\n  }\n\n  left -= anchorElementRect.left\n\n  floatingElem.style.opacity = '1'\n\n  if (specialHandlingForCaret && anchorFlippedOffset !== 0) {\n    // Floating select toolbar was flipped (positioned below text rather than above). Thus, the caret now needs to be positioned\n    // on the other side and rotated.\n    top -= anchorElementRect.bottom - anchorFlippedOffset + floatingElemRect.height - 3\n    // top += anchorFlippedOffset - anchorElementRect.height - floatingElemRect.height + 2\n    floatingElem.style.transform = `translate(${left}px, ${top}px) rotate(180deg)`\n  } else {\n    top -= anchorElementRect.top\n\n    floatingElem.style.transform = `translate(${left}px, ${top}px)`\n  }\n\n  return addedToTop\n}\n","'use client'\n\nimport { createClientFeature } from '../../../../utilities/createClientFeature.js'\nimport { InlineToolbarPlugin } from './Toolbar/index.js'\n\nexport const InlineToolbarFeatureClient = createClientFeature({\n  plugins: [\n    {\n      Component: InlineToolbarPlugin,\n      position: 'floatingAnchorElem',\n    },\n  ],\n})\n","'use client'\n\nimport { TableCellNode, TableNode, TableRowNode } from '@lexical/table'\n\nimport { TableIcon } from '../../../lexical/ui/icons/Table/index.js'\nimport { createClientFeature } from '../../../utilities/createClientFeature.js'\nimport { slashMenuBasicGroupWithItems } from '../../shared/slashMenu/basicGroup.js'\nimport { toolbarAddDropdownGroupWithItems } from '../../shared/toolbar/addDropdownGroup.js'\nimport { TableMarkdownTransformer } from '../markdownTransformer.js'\nimport { TableActionMenuPlugin } from './plugins/TableActionMenuPlugin/index.js'\nimport { TableCellResizerPlugin } from './plugins/TableCellResizerPlugin/index.js'\nimport { TableHoverActionsPlugin } from './plugins/TableHoverActionsPlugin/index.js'\nimport {\n  OPEN_TABLE_DRAWER_COMMAND,\n  TableContext,\n  TablePlugin,\n} from './plugins/TablePlugin/index.js'\n\nexport const TableFeatureClient = createClientFeature({\n  markdownTransformers: [TableMarkdownTransformer],\n  nodes: [TableNode, TableCellNode, TableRowNode],\n  plugins: [\n    {\n      Component: TablePlugin,\n      position: 'normal',\n    },\n    {\n      Component: TableCellResizerPlugin,\n      position: 'normal',\n    },\n    {\n      Component: TableActionMenuPlugin,\n      position: 'floatingAnchorElem',\n    },\n    {\n      Component: TableHoverActionsPlugin,\n      position: 'floatingAnchorElem',\n    },\n  ],\n  providers: [TableContext],\n  slashMenu: {\n    groups: [\n      slashMenuBasicGroupWithItems([\n        {\n          Icon: TableIcon,\n          key: 'table',\n          keywords: ['table'],\n          label: 'Table',\n          onSelect: ({ editor }) => {\n            editor.dispatchCommand(OPEN_TABLE_DRAWER_COMMAND, {})\n          },\n        },\n      ]),\n    ],\n  },\n  toolbarFixed: {\n    groups: [\n      toolbarAddDropdownGroupWithItems([\n        {\n          ChildComponent: TableIcon,\n          key: 'table',\n          label: 'Table',\n          onSelect: ({ editor }) => {\n            editor.dispatchCommand(OPEN_TABLE_DRAWER_COMMAND, {})\n          },\n        },\n      ]),\n    ],\n  },\n})\n","'use client'\nimport React from 'react'\n\nexport const TableIcon: React.FC = () => {\n  return (\n    <svg\n      className=\"icon\"\n      fill=\"none\"\n      height=\"20\"\n      viewBox=\"0 0 20 20\"\n      width=\"20\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        clipRule=\"evenodd\"\n        d=\"M5.33333 4.5C4.8731 4.5 4.5 4.8731 4.5 5.33333V7.5H9.5V4.5H5.33333ZM5.33333 3.5C4.32081 3.5 3.5 4.32081 3.5 5.33333V14.6667C3.5 15.6792 4.32081 16.5 5.33333 16.5H14.6667C15.6792 16.5 16.5 15.6792 16.5 14.6667V5.33333C16.5 4.32081 15.6792 3.5 14.6667 3.5H5.33333ZM10.5 4.5V7.5H15.5V5.33333C15.5 4.8731 15.1269 4.5 14.6667 4.5H10.5ZM15.5 8.5H10.5V11.5H15.5V8.5ZM15.5 12.5H10.5V15.5H14.6667C15.1269 15.5 15.5 15.1269 15.5 14.6667V12.5ZM9.5 15.5V12.5H4.5V14.6667C4.5 15.1269 4.8731 15.5 5.33333 15.5H9.5ZM4.5 11.5H9.5V8.5H4.5V11.5Z\"\n        fill=\"currentColor\"\n        fillRule=\"evenodd\"\n      />\n    </svg>\n  )\n}\n","import type { LexicalNode } from 'lexical'\n\nimport {\n  $createTableCellNode,\n  $createTableNode,\n  $createTableRowNode,\n  $isTableCellNode,\n  $isTableNode,\n  $isTableRowNode,\n  TableCellHeaderStates,\n  TableCellNode,\n  TableNode,\n  TableRowNode,\n} from '@lexical/table'\nimport { $isParagraphNode, $isTextNode } from 'lexical'\n\nimport {\n  $convertFromMarkdownString,\n  $convertToMarkdownString,\n  type ElementTransformer,\n  type Transformer,\n} from '../../packages/@lexical/markdown/index.js'\n\n// Very primitive table setup\nconst TABLE_ROW_REG_EXP = /^\\|(.+)\\|\\s?$/\n// eslint-disable-next-line regexp/no-unused-capturing-group\nconst TABLE_ROW_DIVIDER_REG_EXP = /^(\\| ?:?-*:? ?)+\\|\\s?$/\n\nexport const TableMarkdownTransformer: (props: {\n  allTransformers: Transformer[]\n}) => ElementTransformer = ({ allTransformers }) => ({\n  type: 'element',\n  dependencies: [TableNode, TableRowNode, TableCellNode],\n  export: (node: LexicalNode) => {\n    if (!$isTableNode(node)) {\n      return null\n    }\n\n    const output: string[] = []\n\n    for (const row of node.getChildren()) {\n      const rowOutput: string[] = []\n      if (!$isTableRowNode(row)) {\n        continue\n      }\n\n      let isHeaderRow = false\n      for (const cell of row.getChildren()) {\n        // It's TableCellNode, so it's just to make flow happy\n        if ($isTableCellNode(cell)) {\n          rowOutput.push(\n            $convertToMarkdownString(allTransformers, cell).replace(/\\n/g, '\\\\n').trim(),\n          )\n\n          if (cell.__headerState === TableCellHeaderStates.ROW) {\n            isHeaderRow = true\n          }\n        }\n      }\n\n      output.push(`| ${rowOutput.join(' | ')} |`)\n      if (isHeaderRow) {\n        output.push(`| ${rowOutput.map((_) => '---').join(' | ')} |`)\n      }\n    }\n\n    return output.join('\\n')\n  },\n  regExp: TABLE_ROW_REG_EXP,\n  replace: (parentNode, _1, match) => {\n    const match0 = match[0]\n    if (!match0) {\n      return\n    }\n    // Header row\n    if (TABLE_ROW_DIVIDER_REG_EXP.test(match0)) {\n      const table = parentNode.getPreviousSibling()\n      if (!table || !$isTableNode(table)) {\n        return\n      }\n\n      const rows = table.getChildren()\n      const lastRow = rows[rows.length - 1]\n      if (!lastRow || !$isTableRowNode(lastRow)) {\n        return\n      }\n\n      // Add header state to row cells\n      lastRow.getChildren().forEach((cell) => {\n        if (!$isTableCellNode(cell)) {\n          return\n        }\n        cell.setHeaderStyles(TableCellHeaderStates.ROW, TableCellHeaderStates.ROW)\n      })\n\n      // Remove line\n      parentNode.remove()\n      return\n    }\n\n    const matchCells = mapToTableCells(match0, allTransformers)\n\n    if (matchCells == null) {\n      return\n    }\n\n    const rows = [matchCells]\n    let sibling = parentNode.getPreviousSibling()\n    let maxCells = matchCells.length\n\n    while (sibling) {\n      if (!$isParagraphNode(sibling)) {\n        break\n      }\n\n      if (sibling.getChildrenSize() !== 1) {\n        break\n      }\n\n      const firstChild = sibling.getFirstChild()\n\n      if (!$isTextNode(firstChild)) {\n        break\n      }\n\n      const cells = mapToTableCells(firstChild.getTextContent(), allTransformers)\n\n      if (cells == null) {\n        break\n      }\n\n      maxCells = Math.max(maxCells, cells.length)\n      rows.unshift(cells)\n      const previousSibling = sibling.getPreviousSibling()\n      sibling.remove()\n      sibling = previousSibling\n    }\n\n    const table = $createTableNode()\n\n    for (const cells of rows) {\n      const tableRow = $createTableRowNode()\n      table.append(tableRow)\n\n      for (let i = 0; i < maxCells; i++) {\n        tableRow.append(i < cells.length ? cells[i]! : $createTableCell('', allTransformers))\n      }\n    }\n\n    const previousSibling = parentNode.getPreviousSibling()\n    if ($isTableNode(previousSibling) && getTableColumnsSize(previousSibling) === maxCells) {\n      previousSibling.append(...table.getChildren())\n      parentNode.remove()\n    } else {\n      parentNode.replace(table)\n    }\n\n    table.selectEnd()\n  },\n})\n\nfunction getTableColumnsSize(table: TableNode) {\n  const row = table.getFirstChild()\n  return $isTableRowNode(row) ? row.getChildrenSize() : 0\n}\n\nconst $createTableCell = (textContent: string, allTransformers: Transformer[]): TableCellNode => {\n  textContent = textContent.replace(/\\\\n/g, '\\n')\n  const cell = $createTableCellNode(TableCellHeaderStates.NO_STATUS)\n  $convertFromMarkdownString(textContent, allTransformers, cell)\n  return cell\n}\n\nconst mapToTableCells = (\n  textContent: string,\n  allTransformers: Transformer[],\n): Array<TableCellNode> | null => {\n  const match = textContent.match(TABLE_ROW_REG_EXP)\n  if (!match || !match[1]) {\n    return null\n  }\n  return match[1].split('|').map((text) => $createTableCell(text, allTransformers))\n}\n","'use client'\n\nimport type { TableObserver, TableSelection } from '@lexical/table'\nimport type { ElementNode } from 'lexical'\nimport type { JSX } from 'react'\n\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext'\nimport { useLexicalEditable } from '@lexical/react/useLexicalEditable'\nimport {\n  $computeTableMapSkipCellCheck,\n  $deleteTableColumnAtSelection,\n  $deleteTableRowAtSelection,\n  $getNodeTriplet,\n  $getTableCellNodeFromLexicalNode,\n  $getTableColumnIndexFromTableCellNode,\n  $getTableNodeFromLexicalNodeOrThrow,\n  $getTableRowIndexFromTableCellNode,\n  $insertTableColumnAtSelection,\n  $insertTableRowAtSelection,\n  $isTableCellNode,\n  $isTableSelection,\n  $mergeCells,\n  $unmergeCell,\n  getTableElement,\n  getTableObserverFromTableElement,\n  TableCellHeaderStates,\n  TableCellNode,\n} from '@lexical/table'\nimport { mergeRegister } from '@lexical/utils'\nimport { useScrollInfo } from '@payloadcms/ui'\nimport {\n  $getSelection,\n  $isElementNode,\n  $isRangeSelection,\n  $isTextNode,\n  $setSelection,\n  COMMAND_PRIORITY_CRITICAL,\n  getDOMSelection,\n  isDOMNode,\n  SELECTION_CHANGE_COMMAND,\n} from 'lexical'\nimport * as React from 'react'\nimport { useCallback, useEffect, useRef, useState } from 'react'\nimport { createPortal } from 'react-dom'\n\nimport type { PluginComponentWithAnchor } from '../../../../typesClient.js'\n\nimport './index.scss'\nimport { MeatballsIcon } from '../../../../../lexical/ui/icons/Meatballs/index.js'\n\nfunction computeSelectionCount(selection: TableSelection): {\n  columns: number\n  rows: number\n} {\n  const selectionShape = selection.getShape()\n  return {\n    columns: selectionShape.toX - selectionShape.fromX + 1,\n    rows: selectionShape.toY - selectionShape.fromY + 1,\n  }\n}\n\nfunction $canUnmerge(): boolean {\n  const selection = $getSelection()\n  if (\n    ($isRangeSelection(selection) && !selection.isCollapsed()) ||\n    ($isTableSelection(selection) && !selection.anchor.is(selection.focus)) ||\n    (!$isRangeSelection(selection) && !$isTableSelection(selection))\n  ) {\n    return false\n  }\n  const [cell] = $getNodeTriplet(selection.anchor)\n  return cell.__colSpan > 1 || cell.__rowSpan > 1\n}\n\nfunction $selectLastDescendant(node: ElementNode): void {\n  const lastDescendant = node.getLastDescendant()\n  if ($isTextNode(lastDescendant)) {\n    lastDescendant.select()\n  } else if ($isElementNode(lastDescendant)) {\n    lastDescendant.selectEnd()\n  } else if (lastDescendant !== null) {\n    lastDescendant.selectNext()\n  }\n}\n\ntype TableCellActionMenuProps = Readonly<{\n  cellMerge: boolean\n  contextRef: { current: HTMLElement | null }\n  onClose: () => void\n  setIsMenuOpen: (isOpen: boolean) => void\n  tableCellNode: TableCellNode\n}>\n\nfunction TableActionMenu({\n  cellMerge,\n  contextRef,\n  onClose,\n  setIsMenuOpen,\n  tableCellNode: _tableCellNode,\n}: TableCellActionMenuProps) {\n  const [editor] = useLexicalComposerContext()\n  const dropDownRef = useRef<HTMLDivElement | null>(null)\n  const [tableCellNode, updateTableCellNode] = useState(_tableCellNode)\n  const [selectionCounts, updateSelectionCounts] = useState({\n    columns: 1,\n    rows: 1,\n  })\n  const [canMergeCells, setCanMergeCells] = useState(false)\n  const [canUnmergeCell, setCanUnmergeCell] = useState(false)\n  const { y } = useScrollInfo()\n\n  useEffect(() => {\n    return editor.registerMutationListener(\n      TableCellNode,\n      (nodeMutations) => {\n        const nodeUpdated = nodeMutations.get(tableCellNode.getKey()) === 'updated'\n\n        if (nodeUpdated) {\n          editor.getEditorState().read(() => {\n            updateTableCellNode(tableCellNode.getLatest())\n          })\n        }\n      },\n      { skipInitialization: true },\n    )\n  }, [editor, tableCellNode])\n\n  useEffect(() => {\n    editor.getEditorState().read(() => {\n      const selection = $getSelection()\n      // Merge cells\n      if ($isTableSelection(selection)) {\n        const currentSelectionCounts = computeSelectionCount(selection)\n        updateSelectionCounts(computeSelectionCount(selection))\n\n        setCanMergeCells(currentSelectionCounts.columns > 1 || currentSelectionCounts.rows > 1)\n      }\n      // Unmerge cell\n      setCanUnmergeCell($canUnmerge())\n    })\n  }, [editor])\n\n  useEffect(() => {\n    const menuButtonElement = contextRef.current\n    const dropDownElement = dropDownRef.current\n    const rootElement = editor.getRootElement()\n\n    if (menuButtonElement != null && dropDownElement != null && rootElement != null) {\n      const rootEleRect = rootElement.getBoundingClientRect()\n      const menuButtonRect = menuButtonElement.getBoundingClientRect()\n      dropDownElement.style.opacity = '1'\n      const dropDownElementRect = dropDownElement.getBoundingClientRect()\n      const margin = 5\n      let leftPosition = menuButtonRect.right + margin\n      if (\n        leftPosition + dropDownElementRect.width > window.innerWidth ||\n        leftPosition + dropDownElementRect.width > rootEleRect.right\n      ) {\n        const position = menuButtonRect.left - dropDownElementRect.width - margin\n        leftPosition = (position < 0 ? margin : position) + window.pageXOffset\n      }\n      dropDownElement.style.left = `${leftPosition + window.pageXOffset}px`\n\n      let topPosition = menuButtonRect.top\n      if (topPosition + dropDownElementRect.height > window.innerHeight) {\n        const position = menuButtonRect.bottom - dropDownElementRect.height\n        topPosition = position < 0 ? margin : position\n      }\n      dropDownElement.style.top = `${topPosition}px`\n    }\n  }, [contextRef, dropDownRef, editor, y])\n\n  useEffect(() => {\n    function handleClickOutside(event: MouseEvent) {\n      if (\n        dropDownRef.current != null &&\n        contextRef.current != null &&\n        isDOMNode(event.target) &&\n        !dropDownRef.current.contains(event.target) &&\n        !contextRef.current.contains(event.target)\n      ) {\n        setIsMenuOpen(false)\n      }\n    }\n\n    window.addEventListener('click', handleClickOutside)\n\n    return () => window.removeEventListener('click', handleClickOutside)\n  }, [setIsMenuOpen, contextRef])\n\n  const clearTableSelection = useCallback(() => {\n    editor.update(() => {\n      if (tableCellNode.isAttached()) {\n        const tableNode = $getTableNodeFromLexicalNodeOrThrow(tableCellNode)\n        const tableElement = getTableElement(tableNode, editor.getElementByKey(tableNode.getKey()))\n\n        if (tableElement === null) {\n          throw new Error('Expected to find tableElement in DOM')\n        }\n\n        const tableObserver = getTableObserverFromTableElement(tableElement)\n        if (tableObserver !== null) {\n          tableObserver.$clearHighlight()\n        }\n\n        tableNode.markDirty()\n        updateTableCellNode(tableCellNode.getLatest())\n      }\n\n      $setSelection(null)\n    })\n  }, [editor, tableCellNode])\n\n  const mergeTableCellsAtSelection = () => {\n    editor.update(() => {\n      const selection = $getSelection()\n      if (!$isTableSelection(selection)) {\n        return\n      }\n      const nodes = selection.getNodes()\n      const tableCells = nodes.filter($isTableCellNode)\n      const targetCell = $mergeCells(tableCells)\n\n      if (targetCell) {\n        $selectLastDescendant(targetCell)\n        onClose()\n      }\n    })\n  }\n\n  const unmergeTableCellsAtSelection = () => {\n    editor.update(() => {\n      $unmergeCell()\n    })\n  }\n\n  const insertTableRowAtSelection = useCallback(\n    (shouldInsertAfter: boolean) => {\n      editor.update(() => {\n        for (let i = 0; i < selectionCounts.rows; i++) {\n          $insertTableRowAtSelection(shouldInsertAfter)\n        }\n        onClose()\n      })\n    },\n    [editor, onClose, selectionCounts.rows],\n  )\n\n  const insertTableColumnAtSelection = useCallback(\n    (shouldInsertAfter: boolean) => {\n      editor.update(() => {\n        for (let i = 0; i < selectionCounts.columns; i++) {\n          $insertTableColumnAtSelection(shouldInsertAfter)\n        }\n        onClose()\n      })\n    },\n    [editor, onClose, selectionCounts.columns],\n  )\n\n  const deleteTableRowAtSelection = useCallback(() => {\n    editor.update(() => {\n      $deleteTableRowAtSelection()\n      onClose()\n    })\n  }, [editor, onClose])\n\n  const deleteTableAtSelection = useCallback(() => {\n    editor.update(() => {\n      const tableNode = $getTableNodeFromLexicalNodeOrThrow(tableCellNode)\n      tableNode.remove()\n\n      clearTableSelection()\n      onClose()\n    })\n  }, [editor, tableCellNode, clearTableSelection, onClose])\n\n  const deleteTableColumnAtSelection = useCallback(() => {\n    editor.update(() => {\n      $deleteTableColumnAtSelection()\n      onClose()\n    })\n  }, [editor, onClose])\n\n  const toggleTableRowIsHeader = useCallback(() => {\n    editor.update(() => {\n      const tableNode = $getTableNodeFromLexicalNodeOrThrow(tableCellNode)\n\n      const tableRowIndex = $getTableRowIndexFromTableCellNode(tableCellNode)\n\n      const [gridMap] = $computeTableMapSkipCellCheck(tableNode, null, null)\n\n      const rowCells = new Set<TableCellNode>()\n\n      const newStyle = tableCellNode.getHeaderStyles() ^ TableCellHeaderStates.ROW\n      if (gridMap[tableRowIndex]) {\n        for (let col = 0; col < gridMap[tableRowIndex].length; col++) {\n          const mapCell = gridMap[tableRowIndex][col]\n\n          if (!mapCell?.cell) {\n            continue\n          }\n\n          if (!rowCells.has(mapCell.cell)) {\n            rowCells.add(mapCell.cell)\n            mapCell.cell.setHeaderStyles(newStyle, TableCellHeaderStates.ROW)\n          }\n        }\n      }\n\n      clearTableSelection()\n      onClose()\n    })\n  }, [editor, tableCellNode, clearTableSelection, onClose])\n\n  const toggleTableColumnIsHeader = useCallback(() => {\n    editor.update(() => {\n      const tableNode = $getTableNodeFromLexicalNodeOrThrow(tableCellNode)\n\n      const tableColumnIndex = $getTableColumnIndexFromTableCellNode(tableCellNode)\n\n      const [gridMap] = $computeTableMapSkipCellCheck(tableNode, null, null)\n\n      const columnCells = new Set<TableCellNode>()\n\n      const newStyle = tableCellNode.getHeaderStyles() ^ TableCellHeaderStates.COLUMN\n      if (gridMap) {\n        for (let row = 0; row < gridMap.length; row++) {\n          const mapCell = gridMap?.[row]?.[tableColumnIndex]\n\n          if (!mapCell?.cell) {\n            continue\n          }\n\n          if (!columnCells.has(mapCell.cell)) {\n            columnCells.add(mapCell.cell)\n            mapCell.cell.setHeaderStyles(newStyle, TableCellHeaderStates.COLUMN)\n          }\n        }\n      }\n\n      clearTableSelection()\n      onClose()\n    })\n  }, [editor, tableCellNode, clearTableSelection, onClose])\n\n  const toggleRowStriping = useCallback(() => {\n    editor.update(() => {\n      if (tableCellNode.isAttached()) {\n        const tableNode = $getTableNodeFromLexicalNodeOrThrow(tableCellNode)\n        if (tableNode) {\n          tableNode.setRowStriping(!tableNode.getRowStriping())\n        }\n      }\n\n      clearTableSelection()\n      onClose()\n    })\n  }, [editor, tableCellNode, clearTableSelection, onClose])\n\n  const toggleFirstColumnFreeze = useCallback(() => {\n    editor.update(() => {\n      if (tableCellNode.isAttached()) {\n        const tableNode = $getTableNodeFromLexicalNodeOrThrow(tableCellNode)\n        if (tableNode) {\n          tableNode.setFrozenColumns(tableNode.getFrozenColumns() === 0 ? 1 : 0)\n        }\n      }\n      clearTableSelection()\n      onClose()\n    })\n  }, [editor, tableCellNode, clearTableSelection, onClose])\n\n  let mergeCellButton: JSX.Element | null = null\n  if (cellMerge) {\n    if (canMergeCells) {\n      mergeCellButton = (\n        <button\n          className=\"item\"\n          data-test-id=\"table-merge-cells\"\n          onClick={() => mergeTableCellsAtSelection()}\n          type=\"button\"\n        >\n          <span className=\"text\">Merge cells</span>\n        </button>\n      )\n    } else if (canUnmergeCell) {\n      mergeCellButton = (\n        <button\n          className=\"item\"\n          data-test-id=\"table-unmerge-cells\"\n          onClick={() => unmergeTableCellsAtSelection()}\n          type=\"button\"\n        >\n          <span className=\"text\">Unmerge cells</span>\n        </button>\n      )\n    }\n  }\n\n  return createPortal(\n    // eslint-disable-next-line jsx-a11y/no-static-element-interactions,jsx-a11y/click-events-have-key-events\n    <div\n      className=\"table-action-menu-dropdown\"\n      onClick={(e) => {\n        e.stopPropagation()\n      }}\n      ref={dropDownRef}\n    >\n      {mergeCellButton ? (\n        <React.Fragment>\n          {mergeCellButton}\n          <hr />\n        </React.Fragment>\n      ) : null}\n\n      <button\n        className=\"item\"\n        data-test-id=\"table-row-striping\"\n        onClick={() => toggleRowStriping()}\n        type=\"button\"\n      >\n        <span className=\"text\">Toggle Row Striping</span>\n      </button>\n      <button\n        className=\"item\"\n        data-test-id=\"table-freeze-first-column\"\n        onClick={() => toggleFirstColumnFreeze()}\n        type=\"button\"\n      >\n        <span className=\"text\">Toggle First Column Freeze</span>\n      </button>\n      <button\n        className=\"item\"\n        data-test-id=\"table-insert-row-above\"\n        onClick={() => insertTableRowAtSelection(false)}\n        type=\"button\"\n      >\n        <span className=\"text\">\n          Insert {selectionCounts.rows === 1 ? 'row' : `${selectionCounts.rows} rows`} above\n        </span>\n      </button>\n      <button\n        className=\"item\"\n        data-test-id=\"table-insert-row-below\"\n        onClick={() => insertTableRowAtSelection(true)}\n        type=\"button\"\n      >\n        <span className=\"text\">\n          Insert {selectionCounts.rows === 1 ? 'row' : `${selectionCounts.rows} rows`} below\n        </span>\n      </button>\n      <hr />\n      <button\n        className=\"item\"\n        data-test-id=\"table-insert-column-before\"\n        onClick={() => insertTableColumnAtSelection(false)}\n        type=\"button\"\n      >\n        <span className=\"text\">\n          Insert {selectionCounts.columns === 1 ? 'column' : `${selectionCounts.columns} columns`}{' '}\n          left\n        </span>\n      </button>\n      <button\n        className=\"item\"\n        data-test-id=\"table-insert-column-after\"\n        onClick={() => insertTableColumnAtSelection(true)}\n        type=\"button\"\n      >\n        <span className=\"text\">\n          Insert {selectionCounts.columns === 1 ? 'column' : `${selectionCounts.columns} columns`}{' '}\n          right\n        </span>\n      </button>\n      <hr />\n      <button\n        className=\"item\"\n        data-test-id=\"table-delete-columns\"\n        onClick={() => deleteTableColumnAtSelection()}\n        type=\"button\"\n      >\n        <span className=\"text\">Delete column</span>\n      </button>\n      <button\n        className=\"item\"\n        data-test-id=\"table-delete-rows\"\n        onClick={() => deleteTableRowAtSelection()}\n        type=\"button\"\n      >\n        <span className=\"text\">Delete row</span>\n      </button>\n      <button\n        className=\"item\"\n        data-test-id=\"table-delete\"\n        onClick={() => deleteTableAtSelection()}\n        type=\"button\"\n      >\n        <span className=\"text\">Delete table</span>\n      </button>\n      <hr />\n      <button\n        className=\"item\"\n        data-test-id=\"table-row-header\"\n        onClick={() => toggleTableRowIsHeader()}\n        type=\"button\"\n      >\n        <span className=\"text\">\n          {(tableCellNode.__headerState & TableCellHeaderStates.ROW) === TableCellHeaderStates.ROW\n            ? 'Remove'\n            : 'Add'}{' '}\n          row header\n        </span>\n      </button>\n      <button\n        className=\"item\"\n        data-test-id=\"table-column-header\"\n        onClick={() => toggleTableColumnIsHeader()}\n        type=\"button\"\n      >\n        <span className=\"text\">\n          {(tableCellNode.__headerState & TableCellHeaderStates.COLUMN) ===\n          TableCellHeaderStates.COLUMN\n            ? 'Remove'\n            : 'Add'}{' '}\n          column header\n        </span>\n      </button>\n    </div>,\n    document.body,\n  )\n}\n\nfunction TableCellActionMenuContainer({\n  anchorElem,\n  cellMerge,\n}: {\n  anchorElem: HTMLElement\n  cellMerge: boolean\n}): JSX.Element {\n  const [editor] = useLexicalComposerContext()\n\n  const menuButtonRef = useRef<HTMLDivElement | null>(null)\n  const menuRootRef = useRef<HTMLButtonElement | null>(null)\n  const [isMenuOpen, setIsMenuOpen] = useState(false)\n\n  const [tableCellNode, setTableMenuCellNode] = useState<null | TableCellNode>(null)\n\n  const $moveMenu = useCallback(() => {\n    const menu = menuButtonRef.current\n    const selection = $getSelection()\n    const nativeSelection = getDOMSelection(editor._window)\n    const activeElement = document.activeElement\n    function disable() {\n      if (menu) {\n        menu.classList.remove('table-cell-action-button-container--active')\n        menu.classList.add('table-cell-action-button-container--inactive')\n      }\n      setTableMenuCellNode(null)\n    }\n\n    if (selection == null || menu == null) {\n      return disable()\n    }\n\n    const rootElement = editor.getRootElement()\n    let tableObserver: null | TableObserver = null\n    let tableCellParentNodeDOM: HTMLElement | null = null\n\n    if (\n      $isRangeSelection(selection) &&\n      rootElement !== null &&\n      nativeSelection !== null &&\n      rootElement.contains(nativeSelection.anchorNode)\n    ) {\n      const tableCellNodeFromSelection = $getTableCellNodeFromLexicalNode(\n        selection.anchor.getNode(),\n      )\n\n      if (tableCellNodeFromSelection == null) {\n        return disable()\n      }\n\n      tableCellParentNodeDOM = editor.getElementByKey(tableCellNodeFromSelection.getKey())\n\n      if (tableCellParentNodeDOM == null || !tableCellNodeFromSelection.isAttached()) {\n        return disable()\n      }\n\n      const tableNode = $getTableNodeFromLexicalNodeOrThrow(tableCellNodeFromSelection)\n      const tableElement = getTableElement(tableNode, editor.getElementByKey(tableNode.getKey()))\n\n      if (tableElement === null) {\n        throw new Error('TableActionMenu: Expected to find tableElement in DOM')\n      }\n\n      tableObserver = getTableObserverFromTableElement(tableElement)\n      setTableMenuCellNode(tableCellNodeFromSelection)\n    } else if ($isTableSelection(selection)) {\n      const anchorNode = $getTableCellNodeFromLexicalNode(selection.anchor.getNode())\n      if (!$isTableCellNode(anchorNode)) {\n        throw new Error('TableSelection anchorNode must be a TableCellNode')\n      }\n      const tableNode = $getTableNodeFromLexicalNodeOrThrow(anchorNode)\n      const tableElement = getTableElement(tableNode, editor.getElementByKey(tableNode.getKey()))\n\n      if (tableElement === null) {\n        throw new Error('TableActionMenu: Expected to find tableElement in DOM')\n      }\n\n      tableObserver = getTableObserverFromTableElement(tableElement)\n      tableCellParentNodeDOM = editor.getElementByKey(anchorNode.getKey())\n    } else if (!activeElement) {\n      return disable()\n    }\n    if (tableObserver === null || tableCellParentNodeDOM === null) {\n      return disable()\n    }\n    const enabled = !tableObserver || !tableObserver.isSelecting\n    menu.classList.toggle('table-cell-action-button-container--active', enabled)\n    menu.classList.toggle('table-cell-action-button-container--inactive', !enabled)\n    if (enabled) {\n      const tableCellRect = tableCellParentNodeDOM.getBoundingClientRect()\n      const anchorRect = anchorElem.getBoundingClientRect()\n      const top = tableCellRect.top - anchorRect.top\n      const left = tableCellRect.right - anchorRect.left\n      menu.style.transform = `translate(${left}px, ${top}px)`\n    }\n  }, [editor, anchorElem])\n\n  useEffect(() => {\n    // We call the $moveMenu callback every time the selection changes,\n    // once up front, and once after each pointerup\n    let timeoutId: ReturnType<typeof setTimeout> | undefined = undefined\n    const callback = () => {\n      timeoutId = undefined\n      editor.getEditorState().read($moveMenu)\n    }\n    const delayedCallback = () => {\n      if (timeoutId === undefined) {\n        timeoutId = setTimeout(callback, 0)\n      }\n      return false\n    }\n    return mergeRegister(\n      editor.registerUpdateListener(delayedCallback),\n      editor.registerCommand(SELECTION_CHANGE_COMMAND, delayedCallback, COMMAND_PRIORITY_CRITICAL),\n      editor.registerRootListener((rootElement, prevRootElement) => {\n        if (prevRootElement) {\n          prevRootElement.removeEventListener('pointerup', delayedCallback)\n        }\n        if (rootElement) {\n          rootElement.addEventListener('pointerup', delayedCallback)\n          delayedCallback()\n        }\n      }),\n      () => clearTimeout(timeoutId),\n    )\n  })\n\n  const prevTableCellDOM = useRef(tableCellNode)\n\n  useEffect(() => {\n    if (prevTableCellDOM.current !== tableCellNode) {\n      setIsMenuOpen(false)\n    }\n\n    prevTableCellDOM.current = tableCellNode\n  }, [prevTableCellDOM, tableCellNode])\n\n  return (\n    <div className=\"table-cell-action-button-container\" ref={menuButtonRef}>\n      {tableCellNode != null && (\n        <React.Fragment>\n          <button\n            className=\"table-cell-action-button\"\n            onClick={(e) => {\n              e.stopPropagation()\n              setIsMenuOpen(!isMenuOpen)\n            }}\n            ref={menuRootRef}\n            type=\"button\"\n          >\n            <MeatballsIcon />\n          </button>\n          {isMenuOpen && (\n            <TableActionMenu\n              cellMerge={cellMerge}\n              contextRef={menuRootRef}\n              onClose={() => setIsMenuOpen(false)}\n              setIsMenuOpen={setIsMenuOpen}\n              tableCellNode={tableCellNode}\n            />\n          )}\n        </React.Fragment>\n      )}\n    </div>\n  )\n}\n\nexport const TableActionMenuPlugin: PluginComponentWithAnchor = ({ anchorElem }) => {\n  const isEditable = useLexicalEditable()\n  return createPortal(\n    isEditable ? (\n      <TableCellActionMenuContainer anchorElem={anchorElem ?? document.body} cellMerge />\n    ) : null,\n    anchorElem ?? document.body,\n  )\n}\n","'use client'\nimport React from 'react'\n\nexport const MeatballsIcon: React.FC = () => (\n  <svg fill=\"none\" height=\"18\" viewBox=\"0 0 20 20\" width=\"18\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path\n      d=\"M5 11C5.55228 11 6 10.5523 6 10C6 9.44772 5.55228 9 5 9C4.44772 9 4 9.44772 4 10C4 10.5523 4.44772 11 5 11Z\"\n      fill=\"currentColor\"\n    />\n    <path\n      d=\"M10 11C10.5523 11 11 10.5523 11 10C11 9.44772 10.5523 9 10 9C9.44772 9 9 9.44772 9 10C9 10.5523 9.44772 11 10 11Z\"\n      fill=\"currentColor\"\n    />\n    <path\n      d=\"M15 11C15.5523 11 16 10.5523 16 10C16 9.44772 15.5523 9 15 9C14.4477 9 14 9.44772 14 10C14 10.5523 14.4477 11 15 11Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n)\n","'use client'\n\nimport type { TableCellNode, TableDOMCell, TableMapType } from '@lexical/table'\nimport type { LexicalEditor, NodeKey } from 'lexical'\nimport type { JSX, MouseEventHandler } from 'react'\n\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext'\nimport { useLexicalEditable } from '@lexical/react/useLexicalEditable'\nimport {\n  $computeTableMapSkipCellCheck,\n  $getTableNodeFromLexicalNodeOrThrow,\n  $getTableRowIndexFromTableCellNode,\n  $isTableCellNode,\n  $isTableRowNode,\n  getDOMCellFromTarget,\n  getTableElement,\n  TableNode,\n} from '@lexical/table'\nimport { calculateZoomLevel, mergeRegister } from '@lexical/utils'\nimport { $getNearestNodeFromDOMNode, isHTMLElement, SKIP_SCROLL_INTO_VIEW_TAG } from 'lexical'\nimport * as React from 'react'\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react'\nimport { createPortal } from 'react-dom'\n\nimport type { PluginComponent } from '../../../../typesClient.js'\n\nimport './index.scss'\nimport { useEditorConfigContext } from '../../../../../lexical/config/client/EditorConfigProvider.js'\n\ntype MousePosition = {\n  x: number\n  y: number\n}\n\ntype MouseDraggingDirection = 'bottom' | 'right'\n\nconst MIN_ROW_HEIGHT = 33\nconst MIN_COLUMN_WIDTH = 92\n\nfunction TableCellResizer({ editor }: { editor: LexicalEditor }): JSX.Element {\n  const targetRef = useRef<HTMLElement | null>(null)\n  const resizerRef = useRef<HTMLDivElement | null>(null)\n  const tableRectRef = useRef<ClientRect | null>(null)\n  const [hasTable, setHasTable] = useState(false)\n  const editorConfig = useEditorConfigContext()\n\n  const mouseStartPosRef = useRef<MousePosition | null>(null)\n  const [mouseCurrentPos, updateMouseCurrentPos] = useState<MousePosition | null>(null)\n\n  const [activeCell, updateActiveCell] = useState<null | TableDOMCell>(null)\n  const [isMouseDown, updateIsMouseDown] = useState<boolean>(false)\n  const [draggingDirection, updateDraggingDirection] = useState<MouseDraggingDirection | null>(null)\n\n  const resetState = useCallback(() => {\n    updateActiveCell(null)\n    targetRef.current = null\n    updateDraggingDirection(null)\n    mouseStartPosRef.current = null\n    tableRectRef.current = null\n  }, [])\n\n  const isMouseDownOnEvent = (event: MouseEvent) => {\n    return (event.buttons & 1) === 1\n  }\n\n  useEffect(() => {\n    const tableKeys = new Set<NodeKey>()\n    return mergeRegister(\n      editor.registerMutationListener(TableNode, (nodeMutations) => {\n        for (const [nodeKey, mutation] of nodeMutations) {\n          if (mutation === 'destroyed') {\n            tableKeys.delete(nodeKey)\n          } else {\n            tableKeys.add(nodeKey)\n          }\n        }\n        setHasTable(tableKeys.size > 0)\n      }),\n      editor.registerNodeTransform(TableNode, (tableNode) => {\n        if (tableNode.getColWidths()) {\n          return tableNode\n        }\n\n        const numColumns = tableNode.getColumnCount()\n        const columnWidth = MIN_COLUMN_WIDTH\n\n        tableNode.setColWidths(Array(numColumns).fill(columnWidth))\n        return tableNode\n      }),\n    )\n  }, [editor])\n\n  useEffect(() => {\n    if (!hasTable) {\n      return\n    }\n\n    const onMouseMove = (event: MouseEvent) => {\n      const target = event.target\n      if (!isHTMLElement(target)) {\n        return\n      }\n\n      if (draggingDirection) {\n        updateMouseCurrentPos({\n          x: event.clientX,\n          y: event.clientY,\n        })\n        return\n      }\n      updateIsMouseDown(isMouseDownOnEvent(event))\n      if (resizerRef.current && resizerRef.current.contains(target)) {\n        return\n      }\n\n      if (targetRef.current !== target) {\n        targetRef.current = target\n        const cell = getDOMCellFromTarget(target)\n\n        if (cell && activeCell !== cell) {\n          editor.getEditorState().read(\n            () => {\n              const tableCellNode = $getNearestNodeFromDOMNode(cell.elem)\n\n              if (!tableCellNode) {\n                throw new Error('TableCellResizer: Table cell node not found.')\n              }\n\n              const tableNode = $getTableNodeFromLexicalNodeOrThrow(tableCellNode)\n              const tableElement = getTableElement(\n                tableNode,\n                editor.getElementByKey(tableNode.getKey()),\n              )\n              if (!tableElement) {\n                throw new Error('TableCellResizer: Table element not found.')\n              }\n\n              targetRef.current = target\n              tableRectRef.current = tableElement.getBoundingClientRect()\n              updateActiveCell(cell)\n            },\n            { editor },\n          )\n        } else if (cell == null) {\n          resetState()\n        }\n      }\n    }\n\n    const onMouseDown = (event: MouseEvent) => {\n      updateIsMouseDown(true)\n    }\n\n    const onMouseUp = (event: MouseEvent) => {\n      updateIsMouseDown(false)\n    }\n\n    const removeRootListener = editor.registerRootListener((rootElement, prevRootElement) => {\n      prevRootElement?.removeEventListener('mousemove', onMouseMove)\n      prevRootElement?.removeEventListener('mousedown', onMouseDown)\n      prevRootElement?.removeEventListener('mouseup', onMouseUp)\n      rootElement?.addEventListener('mousemove', onMouseMove)\n      rootElement?.addEventListener('mousedown', onMouseDown)\n      rootElement?.addEventListener('mouseup', onMouseUp)\n    })\n\n    return () => {\n      removeRootListener()\n    }\n  }, [activeCell, draggingDirection, editor, hasTable, resetState])\n\n  const isHeightChanging = (direction: MouseDraggingDirection) => {\n    if (direction === 'bottom') {\n      return true\n    }\n    return false\n  }\n\n  const updateRowHeight = useCallback(\n    (heightChange: number) => {\n      if (!activeCell) {\n        throw new Error('TableCellResizer: Expected active cell.')\n      }\n\n      editor.update(\n        () => {\n          const tableCellNode = $getNearestNodeFromDOMNode(activeCell.elem)\n          if (!$isTableCellNode(tableCellNode)) {\n            throw new Error('TableCellResizer: Table cell node not found.')\n          }\n\n          const tableNode = $getTableNodeFromLexicalNodeOrThrow(tableCellNode)\n\n          const baseRowIndex = $getTableRowIndexFromTableCellNode(tableCellNode)\n          const tableRows = tableNode.getChildren()\n\n          // Determine if this is a full row merge by checking colspan\n          const isFullRowMerge = tableCellNode.getColSpan() === tableNode.getColumnCount()\n\n          // For full row merges, apply to first row. For partial merges, apply to last row\n          const tableRowIndex = isFullRowMerge\n            ? baseRowIndex\n            : baseRowIndex + tableCellNode.getRowSpan() - 1\n\n          if (tableRowIndex >= tableRows.length || tableRowIndex < 0) {\n            throw new Error('Expected table cell to be inside of table row.')\n          }\n\n          const tableRow = tableRows[tableRowIndex]\n\n          if (!$isTableRowNode(tableRow)) {\n            throw new Error('Expected table row')\n          }\n\n          let height = tableRow.getHeight()\n          if (height === undefined) {\n            const rowCells = tableRow.getChildren<TableCellNode>()\n            height = Math.min(\n              ...rowCells.map((cell) => getCellNodeHeight(cell, editor) ?? Infinity),\n            )\n          }\n\n          const newHeight = Math.max(height + heightChange, MIN_ROW_HEIGHT)\n          tableRow.setHeight(newHeight)\n        },\n        { tag: SKIP_SCROLL_INTO_VIEW_TAG },\n      )\n    },\n    [activeCell, editor],\n  )\n\n  const getCellNodeHeight = (\n    cell: TableCellNode,\n    activeEditor: LexicalEditor,\n  ): number | undefined => {\n    const domCellNode = activeEditor.getElementByKey(cell.getKey())\n    return domCellNode?.clientHeight\n  }\n\n  const getCellColumnIndex = (tableCellNode: TableCellNode, tableMap: TableMapType) => {\n    let columnIndex: number | undefined\n    tableMap.forEach((row) => {\n      row.forEach((cell, columnIndexInner) => {\n        if (cell.cell === tableCellNode) {\n          columnIndex = columnIndexInner\n        }\n      })\n    })\n    return columnIndex\n  }\n\n  const updateColumnWidth = useCallback(\n    (widthChange: number) => {\n      if (!activeCell) {\n        throw new Error('TableCellResizer: Expected active cell.')\n      }\n      editor.update(\n        () => {\n          const tableCellNode = $getNearestNodeFromDOMNode(activeCell.elem)\n          if (!$isTableCellNode(tableCellNode)) {\n            throw new Error('TableCellResizer: Table cell node not found.')\n          }\n\n          const tableNode = $getTableNodeFromLexicalNodeOrThrow(tableCellNode)\n          const [tableMap] = $computeTableMapSkipCellCheck(tableNode, null, null)\n          const columnIndex = getCellColumnIndex(tableCellNode, tableMap)\n          if (columnIndex === undefined) {\n            throw new Error('TableCellResizer: Table column not found.')\n          }\n\n          const colWidths = tableNode.getColWidths()\n          if (!colWidths) {\n            return\n          }\n          const width = colWidths[columnIndex]\n          if (width === undefined) {\n            return\n          }\n          const newColWidths = [...colWidths]\n          const newWidth = Math.max(width + widthChange, MIN_COLUMN_WIDTH)\n          newColWidths[columnIndex] = newWidth\n          tableNode.setColWidths(newColWidths)\n        },\n        { tag: SKIP_SCROLL_INTO_VIEW_TAG },\n      )\n    },\n    [activeCell, editor],\n  )\n\n  const mouseUpHandler = useCallback(\n    (direction: MouseDraggingDirection) => {\n      const handler = (event: MouseEvent) => {\n        event.preventDefault()\n        event.stopPropagation()\n\n        if (!activeCell) {\n          throw new Error('TableCellResizer: Expected active cell.')\n        }\n\n        if (mouseStartPosRef.current) {\n          const { x, y } = mouseStartPosRef.current\n\n          if (activeCell === null) {\n            return\n          }\n          const zoom = calculateZoomLevel(event.target as Element)\n\n          if (isHeightChanging(direction)) {\n            const heightChange = (event.clientY - y) / zoom\n            updateRowHeight(heightChange)\n          } else {\n            const widthChange = (event.clientX - x) / zoom\n            updateColumnWidth(widthChange)\n          }\n\n          resetState()\n          document.removeEventListener('mouseup', handler)\n        }\n      }\n      return handler\n    },\n    [activeCell, resetState, updateColumnWidth, updateRowHeight],\n  )\n\n  const toggleResize = useCallback(\n    (direction: MouseDraggingDirection): MouseEventHandler<HTMLDivElement> =>\n      (event) => {\n        event.preventDefault()\n        event.stopPropagation()\n\n        if (!activeCell) {\n          throw new Error('TableCellResizer: Expected active cell.')\n        }\n\n        mouseStartPosRef.current = {\n          x: event.clientX,\n          y: event.clientY,\n        }\n        updateMouseCurrentPos(mouseStartPosRef.current)\n        updateDraggingDirection(direction)\n\n        document.addEventListener('mouseup', mouseUpHandler(direction))\n      },\n    [activeCell, mouseUpHandler],\n  )\n\n  const [resizerStyles, setResizerStyles] = useState<{\n    bottom?: null | React.CSSProperties\n    left?: null | React.CSSProperties\n    right?: null | React.CSSProperties\n    top?: null | React.CSSProperties\n  }>({\n    bottom: null,\n    left: null,\n    right: null,\n    top: null,\n  })\n\n  useEffect(() => {\n    if (activeCell) {\n      const { height, left, top, width } = activeCell.elem.getBoundingClientRect()\n      const zoom = calculateZoomLevel(activeCell.elem)\n      const zoneWidth = 10 // Pixel width of the zone where you can drag the edge\n      const styles = {\n        bottom: {\n          backgroundColor: 'none',\n          cursor: 'row-resize',\n          height: `${zoneWidth}px`,\n          left: `${window.scrollX + left}px`,\n          top: `${window.scrollY + top + height - zoneWidth / 2}px`,\n          width: `${width}px`,\n        },\n        right: {\n          backgroundColor: 'none',\n          cursor: 'col-resize',\n          height: `${height}px`,\n          left: `${window.scrollX + left + width - zoneWidth / 2}px`,\n          top: `${window.scrollY + top}px`,\n          width: `${zoneWidth}px`,\n        },\n      }\n\n      const tableRect = tableRectRef.current\n\n      if (draggingDirection && mouseCurrentPos && tableRect) {\n        if (isHeightChanging(draggingDirection)) {\n          styles[draggingDirection].left = `${window.scrollX + tableRect.left}px`\n          styles[draggingDirection].top = `${window.scrollY + mouseCurrentPos.y / zoom}px`\n          styles[draggingDirection].height = '3px'\n          styles[draggingDirection].width = `${tableRect.width}px`\n        } else {\n          styles[draggingDirection].top = `${window.scrollY + tableRect.top}px`\n          styles[draggingDirection].left = `${window.scrollX + mouseCurrentPos.x / zoom}px`\n          styles[draggingDirection].width = '3px'\n          styles[draggingDirection].height = `${tableRect.height}px`\n        }\n\n        styles[draggingDirection].backgroundColor = '#adf'\n      }\n\n      setResizerStyles(styles)\n    } else {\n      setResizerStyles({\n        bottom: null,\n        left: null,\n        right: null,\n        top: null,\n      })\n    }\n  }, [activeCell, draggingDirection, mouseCurrentPos])\n\n  return (\n    <div ref={resizerRef}>\n      {activeCell != null && !isMouseDown && (\n        <React.Fragment>\n          <div\n            className={`${editorConfig.editorConfig.lexical.theme.tableCellResizer} TableCellResizer__ui`}\n            onMouseDown={toggleResize('right')}\n            style={resizerStyles.right || undefined}\n          />\n          <div\n            className={`${editorConfig.editorConfig.lexical.theme.tableCellResizer} TableCellResizer__ui`}\n            onMouseDown={toggleResize('bottom')}\n            style={resizerStyles.bottom || undefined}\n          />\n        </React.Fragment>\n      )}\n    </div>\n  )\n}\n\nexport const TableCellResizerPlugin: PluginComponent = () => {\n  const [editor] = useLexicalComposerContext()\n  const isEditable = useLexicalEditable()\n\n  return useMemo(\n    () => (isEditable ? createPortal(<TableCellResizer editor={editor} />, document.body) : null),\n    [editor, isEditable],\n  )\n}\n","'use client'\n\nimport type { TableCellNode, TableRowNode } from '@lexical/table'\nimport type { EditorConfig, NodeKey } from 'lexical'\nimport type { JSX } from 'react'\n\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext'\nimport { useLexicalEditable } from '@lexical/react/useLexicalEditable'\nimport {\n  $getTableAndElementByKey,\n  $getTableColumnIndexFromTableCellNode,\n  $getTableRowIndexFromTableCellNode,\n  $insertTableColumnAtSelection,\n  $insertTableRowAtSelection,\n  $isTableCellNode,\n  $isTableNode,\n  getTableElement,\n  TableNode,\n} from '@lexical/table'\nimport { $findMatchingParent, mergeRegister } from '@lexical/utils'\nimport { $getNearestNodeFromDOMNode, isHTMLElement } from 'lexical'\nimport { useEffect, useMemo, useRef, useState } from 'react'\nimport * as React from 'react'\nimport { createPortal } from 'react-dom'\n\nimport { useEditorConfigContext } from '../../../../../lexical/config/client/EditorConfigProvider.js'\nimport { useDebounce } from '../../utils/useDebounce.js'\n\nconst BUTTON_WIDTH_PX = 20\n\nfunction TableHoverActionsContainer({\n  anchorElem,\n}: {\n  anchorElem: HTMLElement\n}): JSX.Element | null {\n  const [editor] = useLexicalComposerContext()\n  const isEditable = useLexicalEditable()\n\n  const editorConfig = useEditorConfigContext()\n  const [isShownRow, setShownRow] = useState<boolean>(false)\n  const [isShownColumn, setShownColumn] = useState<boolean>(false)\n  const [shouldListenMouseMove, setShouldListenMouseMove] = useState<boolean>(false)\n  const [position, setPosition] = useState({})\n  const tableSetRef = useRef<Set<NodeKey>>(new Set())\n  const tableCellDOMNodeRef = useRef<HTMLElement | null>(null)\n\n  const debouncedOnMouseMove = useDebounce(\n    (event: MouseEvent) => {\n      const { isOutside, tableDOMNode } = getMouseInfo(event, editorConfig.editorConfig?.lexical)\n\n      if (isOutside) {\n        setShownRow(false)\n        setShownColumn(false)\n        return\n      }\n\n      if (!tableDOMNode) {\n        return\n      }\n\n      tableCellDOMNodeRef.current = tableDOMNode\n\n      let hoveredRowNode: null | TableCellNode = null\n      let hoveredColumnNode: null | TableCellNode = null\n      let tableDOMElement: HTMLElement | null = null\n\n      editor.getEditorState().read(\n        () => {\n          const maybeTableCell = $getNearestNodeFromDOMNode(tableDOMNode)\n\n          if ($isTableCellNode(maybeTableCell)) {\n            const table = $findMatchingParent(maybeTableCell, (node) => $isTableNode(node))\n            if (!$isTableNode(table)) {\n              return\n            }\n\n            tableDOMElement = getTableElement(table, editor.getElementByKey(table.getKey()))\n\n            if (tableDOMElement) {\n              const rowCount = table.getChildrenSize()\n              const colCount = (table.getChildAtIndex(0) as TableRowNode)?.getChildrenSize()\n\n              const rowIndex = $getTableRowIndexFromTableCellNode(maybeTableCell)\n              const colIndex = $getTableColumnIndexFromTableCellNode(maybeTableCell)\n\n              if (rowIndex === rowCount - 1) {\n                hoveredRowNode = maybeTableCell\n              } else if (colIndex === colCount - 1) {\n                hoveredColumnNode = maybeTableCell\n              }\n            }\n          }\n        },\n        { editor },\n      )\n\n      if (!tableDOMElement) {\n        return\n      }\n\n      // this is the scrollable div container of the table (in case of overflow)\n      const tableContainerElement = (tableDOMElement as HTMLTableElement).parentElement\n\n      if (!tableContainerElement) {\n        return\n      }\n\n      const {\n        bottom: tableElemBottom,\n        height: tableElemHeight,\n        left: tableElemLeft,\n        right: tableElemRight,\n        width: tableElemWidth,\n        y: tableElemY,\n      } = (tableDOMElement as HTMLTableElement).getBoundingClientRect()\n\n      let tableHasScroll = false\n      if (\n        tableContainerElement &&\n        tableContainerElement.classList.contains('LexicalEditorTheme__tableScrollableWrapper')\n      ) {\n        tableHasScroll = tableContainerElement.scrollWidth > tableContainerElement.clientWidth\n      }\n\n      const { left: editorElemLeft, y: editorElemY } = anchorElem.getBoundingClientRect()\n\n      if (hoveredRowNode) {\n        setShownColumn(false)\n        setShownRow(true)\n        setPosition({\n          height: BUTTON_WIDTH_PX,\n          left:\n            tableHasScroll && tableContainerElement\n              ? tableContainerElement.offsetLeft\n              : tableElemLeft - editorElemLeft,\n          top: tableElemBottom - editorElemY + 5,\n          width:\n            tableHasScroll && tableContainerElement\n              ? tableContainerElement.offsetWidth\n              : tableElemWidth,\n        })\n      } else if (hoveredColumnNode) {\n        setShownColumn(true)\n        setShownRow(false)\n        setPosition({\n          height: tableElemHeight,\n          left: tableElemRight - editorElemLeft + 5,\n          top: tableElemY - editorElemY,\n          width: BUTTON_WIDTH_PX,\n        })\n      }\n    },\n    50,\n    250,\n  )\n\n  // Hide the buttons on any table dimensions change to prevent last row cells\n  // overlap behind the 'Add Row' button when text entry changes cell height\n  const tableResizeObserver = useMemo(() => {\n    return new ResizeObserver(() => {\n      setShownRow(false)\n      setShownColumn(false)\n    })\n  }, [])\n\n  useEffect(() => {\n    if (!shouldListenMouseMove) {\n      return\n    }\n\n    document.addEventListener('mousemove', debouncedOnMouseMove)\n\n    return () => {\n      setShownRow(false)\n      setShownColumn(false)\n\n      document.removeEventListener('mousemove', debouncedOnMouseMove)\n    }\n  }, [shouldListenMouseMove, debouncedOnMouseMove])\n\n  useEffect(() => {\n    return mergeRegister(\n      editor.registerMutationListener(\n        TableNode,\n        (mutations) => {\n          editor.getEditorState().read(\n            () => {\n              let resetObserver = false\n              for (const [key, type] of mutations) {\n                switch (type) {\n                  case 'created': {\n                    tableSetRef.current.add(key)\n                    resetObserver = true\n                    break\n                  }\n                  case 'destroyed': {\n                    tableSetRef.current.delete(key)\n                    resetObserver = true\n                    break\n                  }\n                  default:\n                    break\n                }\n              }\n              if (resetObserver) {\n                // Reset resize observers\n                tableResizeObserver.disconnect()\n                for (const tableKey of tableSetRef.current) {\n                  const { tableElement } = $getTableAndElementByKey(tableKey)\n                  tableResizeObserver.observe(tableElement)\n                }\n                setShouldListenMouseMove(tableSetRef.current.size > 0)\n              }\n            },\n            { editor },\n          )\n        },\n        { skipInitialization: false },\n      ),\n    )\n  }, [editor, tableResizeObserver])\n\n  const insertAction = (insertRow: boolean) => {\n    editor.update(() => {\n      if (tableCellDOMNodeRef.current) {\n        const maybeTableNode = $getNearestNodeFromDOMNode(tableCellDOMNodeRef.current)\n        maybeTableNode?.selectEnd()\n        if (insertRow) {\n          $insertTableRowAtSelection()\n          setShownRow(false)\n        } else {\n          $insertTableColumnAtSelection()\n          setShownColumn(false)\n        }\n      }\n    })\n  }\n\n  if (!isEditable) {\n    return null\n  }\n\n  return (\n    <>\n      {isShownRow && (\n        <button\n          aria-label=\"Add Row\"\n          className={editorConfig.editorConfig.lexical.theme.tableAddRows}\n          onClick={() => insertAction(true)}\n          style={{ ...position }}\n          type=\"button\"\n        />\n      )}\n      {isShownColumn && (\n        <button\n          aria-label=\"Add Column\"\n          className={editorConfig.editorConfig.lexical.theme.tableAddColumns}\n          onClick={() => insertAction(false)}\n          style={{ ...position }}\n          type=\"button\"\n        />\n      )}\n    </>\n  )\n}\n\nfunction getMouseInfo(\n  event: MouseEvent,\n  editorConfig: EditorConfig,\n): {\n  isOutside: boolean\n  tableDOMNode: HTMLElement | null\n} {\n  const target = event.target\n\n  if (isHTMLElement(target)) {\n    const tableDOMNode = target.closest<HTMLElement>(\n      `td.${editorConfig.theme.tableCell}, th.${editorConfig.theme.tableCell}`,\n    )\n\n    const isOutside = !(\n      tableDOMNode ||\n      target.closest<HTMLElement>(`button.${editorConfig.theme.tableAddRows}`) ||\n      target.closest<HTMLElement>(`button.${editorConfig.theme.tableAddColumns}`) ||\n      target.closest<HTMLElement>(`div.${editorConfig.theme.tableCellResizer}`)\n    )\n\n    return { isOutside, tableDOMNode }\n  } else {\n    return { isOutside: true, tableDOMNode: null }\n  }\n}\n\nexport function TableHoverActionsPlugin({\n  anchorElem = document.body,\n}: {\n  anchorElem?: HTMLElement\n}): null | React.ReactPortal {\n  const isEditable = useLexicalEditable()\n\n  if (!isEditable) {\n    return null\n  }\n\n  return createPortal(<TableHoverActionsContainer anchorElem={anchorElem} />, anchorElem)\n}\n","'use client'\nimport { useCallback, useEffect, useRef } from 'react'\n\nimport debounce from './debounce.js'\n\n// Define the type for debounced function that includes cancel method\ninterface DebouncedFunction<T extends (...args: any[]) => any> {\n  (...args: Parameters<T>): ReturnType<T>\n  cancel: () => void\n}\n\nexport function useDebounce<T extends (...args: never[]) => void>(\n  fn: T,\n  ms: number,\n  maxWait?: number,\n) {\n  // Update the ref type to include cancel method\n  const debouncedRef = useRef<DebouncedFunction<T> | null>(null)\n\n  useEffect(() => {\n    debouncedRef.current = debounce(fn, ms, { maxWait }) as DebouncedFunction<T>\n\n    return () => {\n      debouncedRef.current?.cancel()\n    }\n  }, [fn, ms, maxWait])\n\n  const callback = useCallback((...args: Parameters<T>) => {\n    if (debouncedRef.current) {\n      debouncedRef.current(...args)\n    }\n  }, [])\n\n  return callback\n}\n","// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-nocheck - not worth it migrate jsdoc to tsdoc\n'use client'\n// Copied & modified from https://github.com/lodash/lodash/blob/main/src/debounce.ts\n/*\nThe MIT License\n\nCopyright JS Foundation and other contributors <https://js.foundation/>\n\nBased on Underscore.js, copyright Jeremy Ashkenas,\nDocumentCloud and Investigative Reporters & Editors <http://underscorejs.org/>\n\nThis software consists of voluntary contributions made by many\nindividuals. For exact contribution history, see the revision history\navailable at https://github.com/lodash/lodash\n\nThe following license applies to all parts of this software except as\ndocumented below:\n\n====\n\nPermission is hereby granted, free of charge, to any person obtaining\na copy of this software and associated documentation files (the\n\"Software\"), to deal in the Software without restriction, including\nwithout limitation the rights to use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so, subject to\nthe following conditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\nLIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\nOF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\nWITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n====\n\nCopyright and related rights for sample code are waived via CC0. Sample\ncode is defined as all source code displayed within the prose of the\ndocumentation.\n\nCC0: http://creativecommons.org/publicdomain/zero/1.0/\n\n====\n\nFiles located in the node_modules and vendor directories are externally\nmaintained libraries used by this software which have their own\nlicenses; we recommend you read them, as their terms may differ from the\nterms above.\n */\n\n/** Error message constants. */\nconst FUNC_ERROR_TEXT = 'Expected a function'\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nconst nativeMax = Math.max,\n  nativeMin = Math.min\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [sortOnOptions={}] The options object.\n * @param {boolean} [sortOnOptions.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [sortOnOptions.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [sortOnOptions.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  let lastArgs,\n    lastCallTime,\n    lastInvokeTime = 0,\n    lastThis,\n    leading = false,\n    maxing = false,\n    maxWait,\n    result,\n    timerID,\n    trailing = true\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT)\n  }\n  wait = wait || 0\n  if (typeof options === 'object') {\n    leading = !!options.leading\n    maxing = 'maxWait' in options\n    maxWait = maxing ? nativeMax(options.maxWait || 0, wait) : maxWait\n    trailing = 'trailing' in options ? !!options.trailing : trailing\n  }\n\n  function invokeFunc(time) {\n    const args = lastArgs,\n      thisArg = lastThis\n\n    lastArgs = lastThis = undefined\n    lastInvokeTime = time\n    result = func.apply(thisArg, args)\n    return result\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time\n    // Start the timer for the trailing edge.\n    timerID = setTimeout(timerExpired, wait)\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result\n  }\n\n  function remainingWait(time) {\n    const timeSinceLastCall = time - lastCallTime,\n      timeSinceLastInvoke = time - lastInvokeTime,\n      timeWaiting = wait - timeSinceLastCall\n\n    return maxing ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke) : timeWaiting\n  }\n\n  function shouldInvoke(time) {\n    const timeSinceLastCall = time - lastCallTime,\n      timeSinceLastInvoke = time - lastInvokeTime\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (\n      lastCallTime === undefined ||\n      timeSinceLastCall >= wait ||\n      timeSinceLastCall < 0 ||\n      (maxing && timeSinceLastInvoke >= maxWait)\n    )\n  }\n\n  function timerExpired() {\n    const time = Date.now()\n    if (shouldInvoke(time)) {\n      return trailingEdge(time)\n    }\n    // Restart the timer.\n    timerID = setTimeout(timerExpired, remainingWait(time))\n  }\n\n  function trailingEdge(time) {\n    timerID = undefined\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time)\n    }\n    lastArgs = lastThis = undefined\n    return result\n  }\n\n  function cancel() {\n    if (timerID !== undefined) {\n      clearTimeout(timerID)\n    }\n    lastInvokeTime = 0\n    lastArgs = lastCallTime = lastThis = timerID = undefined\n  }\n\n  function flush() {\n    return timerID === undefined ? result : trailingEdge(Date.now())\n  }\n\n  function debounced() {\n    const time = Date.now(),\n      isInvoking = shouldInvoke(time)\n\n    // eslint-disable-next-line prefer-rest-params\n    lastArgs = arguments\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    lastThis = this\n    lastCallTime = time\n\n    if (isInvoking) {\n      if (timerID === undefined) {\n        return leadingEdge(lastCallTime)\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerID)\n        timerID = setTimeout(timerExpired, wait)\n        return invokeFunc(lastCallTime)\n      }\n    }\n    if (timerID === undefined) {\n      timerID = setTimeout(timerExpired, wait)\n    }\n    return result\n  }\n  debounced.cancel = cancel\n  debounced.flush = flush\n  return debounced\n}\n\n// eslint-disable-next-line no-restricted-exports\nexport default debounce\n","'use client'\n\nimport type {\n  EditorThemeClasses,\n  Klass,\n  LexicalCommand,\n  LexicalEditor,\n  LexicalNode,\n  RangeSelection,\n} from 'lexical'\nimport type { JSX } from 'react'\n\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext'\nimport { TablePlugin as LexicalReactTablePlugin } from '@lexical/react/LexicalTablePlugin'\nimport { INSERT_TABLE_COMMAND, TableCellNode, TableNode, TableRowNode } from '@lexical/table'\nimport { mergeRegister } from '@lexical/utils'\nimport { formatDrawerSlug, useEditDepth } from '@payloadcms/ui'\nimport { $getSelection, $isRangeSelection, COMMAND_PRIORITY_EDITOR, createCommand } from 'lexical'\nimport { createContext, use, useEffect, useMemo, useState } from 'react'\nimport * as React from 'react'\n\nimport type { PluginComponent } from '../../../../typesClient.js'\n\nimport { useEditorConfigContext } from '../../../../../lexical/config/client/EditorConfigProvider.js'\nimport { FieldsDrawer } from '../../../../../utilities/fieldsDrawer/Drawer.js'\nimport { useLexicalDrawer } from '../../../../../utilities/fieldsDrawer/useLexicalDrawer.js'\nimport './index.scss'\n\nexport type CellContextShape = {\n  cellEditorConfig: CellEditorConfig | null\n  cellEditorPlugins: Array<JSX.Element> | JSX.Element | null\n  set: (\n    cellEditorConfig: CellEditorConfig | null,\n    cellEditorPlugins: Array<JSX.Element> | JSX.Element | null,\n  ) => void\n}\n\nexport type CellEditorConfig = Readonly<{\n  namespace: string\n  nodes?: ReadonlyArray<Klass<LexicalNode>>\n  onError: (error: Error, editor: LexicalEditor) => void\n  readOnly?: boolean\n  theme?: EditorThemeClasses\n}>\n\nexport const OPEN_TABLE_DRAWER_COMMAND: LexicalCommand<{}> = createCommand(\n  'OPEN_EMBED_DRAWER_COMMAND',\n)\n\nexport const CellContext = createContext<CellContextShape>({\n  cellEditorConfig: null,\n  cellEditorPlugins: null,\n  set: () => {\n    // Empty\n  },\n})\n\nexport function TableContext({ children }: { children: JSX.Element }) {\n  const [contextValue, setContextValue] = useState<{\n    cellEditorConfig: CellEditorConfig | null\n    cellEditorPlugins: Array<JSX.Element> | JSX.Element | null\n  }>({\n    cellEditorConfig: null,\n    cellEditorPlugins: null,\n  })\n  return (\n    <CellContext\n      value={useMemo(\n        () => ({\n          cellEditorConfig: contextValue.cellEditorConfig,\n          cellEditorPlugins: contextValue.cellEditorPlugins,\n          set: (cellEditorConfig, cellEditorPlugins) => {\n            setContextValue({ cellEditorConfig, cellEditorPlugins })\n          },\n        }),\n        [contextValue.cellEditorConfig, contextValue.cellEditorPlugins],\n      )}\n    >\n      {children}\n    </CellContext>\n  )\n}\n\nexport const TablePlugin: PluginComponent = () => {\n  const [editor] = useLexicalComposerContext()\n  const cellContext = use(CellContext)\n  const editDepth = useEditDepth()\n  const {\n    fieldProps: { schemaPath },\n    uuid,\n  } = useEditorConfigContext()\n\n  const drawerSlug = formatDrawerSlug({\n    slug: 'lexical-table-create-' + uuid,\n    depth: editDepth,\n  })\n  const { toggleDrawer } = useLexicalDrawer(drawerSlug, true)\n\n  useEffect(() => {\n    if (!editor.hasNodes([TableNode, TableRowNode, TableCellNode])) {\n      throw new Error(\n        'TablePlugin: TableNode, TableRowNode, or TableCellNode is not registered on editor',\n      )\n    }\n\n    return mergeRegister(\n      editor.registerCommand(\n        OPEN_TABLE_DRAWER_COMMAND,\n        () => {\n          let rangeSelection: null | RangeSelection = null\n\n          editor.getEditorState().read(() => {\n            const selection = $getSelection()\n            if ($isRangeSelection(selection)) {\n              rangeSelection = selection\n            }\n          })\n\n          if (rangeSelection) {\n            toggleDrawer()\n          }\n          return true\n        },\n        COMMAND_PRIORITY_EDITOR,\n      ),\n    )\n  }, [cellContext, editor, toggleDrawer])\n\n  return (\n    <React.Fragment>\n      <FieldsDrawer\n        drawerSlug={drawerSlug}\n        drawerTitle=\"Create Table\"\n        featureKey=\"experimental_table\"\n        handleDrawerSubmit={(_fields, data) => {\n          if (!data.columns || !data.rows) {\n            return\n          }\n\n          editor.dispatchCommand(INSERT_TABLE_COMMAND, {\n            columns: String(data.columns),\n            rows: String(data.rows),\n          })\n        }}\n        schemaPath={schemaPath}\n        schemaPathSuffix=\"fields\"\n      />\n      <LexicalReactTablePlugin\n        hasCellBackgroundColor={false}\n        hasCellMerge\n        hasHorizontalScroll={true}\n      />\n    </React.Fragment>\n  )\n}\n","'use client'\n\nimport { $isNodeSelection } from 'lexical'\n\nimport type { ExclusiveUploadFeatureProps } from '../server/index.js'\n\nimport { UploadIcon } from '../../../lexical/ui/icons/Upload/index.js'\nimport { createClientFeature } from '../../../utilities/createClientFeature.js'\nimport { slashMenuBasicGroupWithItems } from '../../shared/slashMenu/basicGroup.js'\nimport { toolbarAddDropdownGroupWithItems } from '../../shared/toolbar/addDropdownGroup.js'\nimport { INSERT_UPLOAD_WITH_DRAWER_COMMAND } from './drawer/commands.js'\nimport { $isUploadNode, UploadNode } from './nodes/UploadNode.js'\nimport { UploadPlugin } from './plugin/index.js'\n\nexport type UploadFeaturePropsClient = {\n  collections: {\n    [collection: string]: {\n      hasExtraFields: boolean\n    }\n  }\n} & ExclusiveUploadFeatureProps\n\nexport const UploadFeatureClient = createClientFeature<UploadFeaturePropsClient>({\n  nodes: [UploadNode],\n  plugins: [\n    {\n      Component: UploadPlugin,\n      position: 'normal',\n    },\n  ],\n  slashMenu: {\n    groups: [\n      slashMenuBasicGroupWithItems([\n        {\n          Icon: UploadIcon,\n          key: 'upload',\n          keywords: ['upload', 'image', 'file', 'img', 'picture', 'photo', 'media'],\n          label: ({ i18n }) => {\n            return i18n.t('lexical:upload:label')\n          },\n          onSelect: ({ editor }) => {\n            editor.dispatchCommand(INSERT_UPLOAD_WITH_DRAWER_COMMAND, {\n              replace: false,\n            })\n          },\n        },\n      ]),\n    ],\n  },\n  toolbarFixed: {\n    groups: [\n      toolbarAddDropdownGroupWithItems([\n        {\n          ChildComponent: UploadIcon,\n          isActive: ({ selection }) => {\n            if (!$isNodeSelection(selection) || !selection.getNodes().length) {\n              return false\n            }\n\n            const firstNode = selection.getNodes()[0]\n            return $isUploadNode(firstNode)\n          },\n          key: 'upload',\n          label: ({ i18n }) => {\n            return i18n.t('lexical:upload:label')\n          },\n          onSelect: ({ editor }) => {\n            editor.dispatchCommand(INSERT_UPLOAD_WITH_DRAWER_COMMAND, {\n              replace: false,\n            })\n          },\n        },\n      ]),\n    ],\n  },\n})\n","'use client'\nimport React from 'react'\n\nexport const UploadIcon: React.FC = () => (\n  <svg\n    aria-hidden=\"true\"\n    className=\"icon\"\n    fill=\"none\"\n    focusable=\"false\"\n    height=\"20\"\n    viewBox=\"0 0 20 20\"\n    width=\"20\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M14.6667 4H5.33333C4.59695 4 4 4.59695 4 5.33333V14.6667C4 15.403 4.59695 16 5.33333 16H14.6667C15.403 16 16 15.403 16 14.6667V5.33333C16 4.59695 15.403 4 14.6667 4Z\"\n      stroke=\"currentColor\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    />\n    <path\n      d=\"M7.99984 9.33366C8.73622 9.33366 9.33317 8.73671 9.33317 8.00033C9.33317 7.26395 8.73622 6.66699 7.99984 6.66699C7.26346 6.66699 6.6665 7.26395 6.6665 8.00033C6.6665 8.73671 7.26346 9.33366 7.99984 9.33366Z\"\n      stroke=\"currentColor\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    />\n    <path\n      d=\"M16 11.9995L13.9427 9.94214C13.6926 9.69218 13.3536 9.55176 13 9.55176C12.6464 9.55176 12.3074 9.69218 12.0573 9.94214L6 15.9995\"\n      stroke=\"currentColor\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    />\n  </svg>\n)\n","'use client'\nimport type { DOMConversionMap, EditorConfig, LexicalEditor, LexicalNode } from 'lexical'\nimport type { JSX } from 'react'\n\nimport ObjectID from 'bson-objectid'\nimport { $applyNodeReplacement } from 'lexical'\nimport * as React from 'react'\n\nimport type {\n  Internal_UploadData,\n  SerializedUploadNode,\n  UploadData,\n} from '../../server/nodes/UploadNode.js'\n\nimport { $convertUploadElement } from '../../server/nodes/conversions.js'\nimport { UploadServerNode } from '../../server/nodes/UploadNode.js'\nimport { PendingUploadComponent } from '../component/pending/index.js'\n\nconst RawUploadComponent = React.lazy(() =>\n  import('../../client/component/index.js').then((module) => ({ default: module.UploadComponent })),\n)\n\nexport class UploadNode extends UploadServerNode {\n  static override clone(node: UploadServerNode): UploadServerNode {\n    return super.clone(node)\n  }\n\n  static override getType(): string {\n    return super.getType()\n  }\n\n  static override importDOM(): DOMConversionMap<HTMLImageElement> {\n    return {\n      img: (node) => ({\n        conversion: (domNode) => $convertUploadElement(domNode, $createUploadNode),\n        priority: 0,\n      }),\n    }\n  }\n\n  static override importJSON(serializedNode: SerializedUploadNode): UploadNode {\n    if (serializedNode.version === 1 && (serializedNode?.value as unknown as { id: string })?.id) {\n      serializedNode.value = (serializedNode.value as unknown as { id: string }).id\n    }\n    if (serializedNode.version === 2 && !serializedNode?.id) {\n      serializedNode.id = new ObjectID.default().toHexString()\n      serializedNode.version = 3\n    }\n\n    const importedData: Internal_UploadData = {\n      id: serializedNode.id,\n      fields: serializedNode.fields,\n      pending: (serializedNode as Internal_UploadData).pending,\n      relationTo: serializedNode.relationTo,\n      value: serializedNode.value,\n    }\n\n    const node = $createUploadNode({ data: importedData })\n    node.setFormat(serializedNode.format)\n\n    return node\n  }\n\n  override decorate(editor?: LexicalEditor, config?: EditorConfig): JSX.Element {\n    if ((this.__data as Internal_UploadData).pending) {\n      return <PendingUploadComponent />\n    }\n    return (\n      <RawUploadComponent\n        className={config?.theme?.upload ?? 'LexicalEditorTheme__upload'}\n        data={this.__data}\n        format={this.__format}\n        nodeKey={this.getKey()}\n      />\n    )\n  }\n\n  override exportJSON(): SerializedUploadNode {\n    return super.exportJSON()\n  }\n}\n\nexport function $createUploadNode({\n  data,\n}: {\n  data: Omit<UploadData, 'id'> & Partial<Pick<UploadData, 'id'>>\n}): UploadNode {\n  if (!data?.id) {\n    data.id = new ObjectID.default().toHexString()\n  }\n\n  return $applyNodeReplacement(new UploadNode({ data: data as UploadData }))\n}\n\nexport function $isUploadNode(node: LexicalNode | null | undefined): node is UploadNode {\n  return node instanceof UploadNode\n}\n","// This file contains functions used to convert dom elements to upload or pending upload lexical nodes. It requires the actual node\n// creation functions to be passed in to stay compatible with both client and server code.\nimport type { DOMConversionOutput } from 'lexical'\n\nimport ObjectID from 'bson-objectid'\n\nimport type { $createUploadNode } from '../../client/nodes/UploadNode.js'\nimport type { $createUploadServerNode, Internal_UploadData } from './UploadNode.js'\n\nexport function isGoogleDocCheckboxImg(img: HTMLImageElement): boolean {\n  return (\n    img.parentElement != null &&\n    img.parentElement.tagName === 'LI' &&\n    img.previousSibling === null &&\n    img.getAttribute('aria-roledescription') === 'checkbox'\n  )\n}\n\nexport function $convertUploadElement(\n  domNode: HTMLImageElement,\n  $createNode: typeof $createUploadNode | typeof $createUploadServerNode,\n): DOMConversionOutput | null {\n  if (domNode.hasAttribute('data-lexical-pending-upload-form-id')) {\n    const formID = domNode.getAttribute('data-lexical-pending-upload-form-id')\n\n    if (formID != null) {\n      const node = $createNode({\n        data: {\n          pending: {\n            formID,\n            src: domNode.getAttribute('src') || '',\n          },\n        } as Internal_UploadData,\n      })\n      return { node }\n    }\n  }\n  if (\n    domNode.hasAttribute('data-lexical-upload-relation-to') &&\n    domNode.hasAttribute('data-lexical-upload-id')\n  ) {\n    const id = domNode.getAttribute('data-lexical-upload-id')\n    const relationTo = domNode.getAttribute('data-lexical-upload-relation-to')\n\n    if (id != null && relationTo != null) {\n      const node = $createNode({\n        data: {\n          fields: {},\n          relationTo,\n          value: id,\n        },\n      })\n      return { node }\n    }\n  }\n\n  // Create pending UploadNode. Auto-Upload functionality will then be handled by the node transform\n  const node = $createNode({\n    data: {\n      pending: {\n        formID: new ObjectID.default().toHexString(),\n        src: domNode.getAttribute('src') || '',\n      },\n    } as Internal_UploadData,\n  })\n\n  return { node }\n}\n","import type { SerializedDecoratorBlockNode } from '@lexical/react/LexicalDecoratorBlockNode.js'\nimport type {\n  DOMConversionMap,\n  DOMExportOutput,\n  EditorConfig,\n  ElementFormatType,\n  LexicalNode,\n  NodeKey,\n} from 'lexical'\nimport type {\n  CollectionSlug,\n  DataFromCollectionSlug,\n  JsonObject,\n  TypedUploadCollection,\n  UploadCollectionSlug,\n} from 'payload'\nimport type { JSX } from 'react'\n\nimport { DecoratorBlockNode } from '@lexical/react/LexicalDecoratorBlockNode.js'\nimport { addClassNamesToElement } from '@lexical/utils'\nimport ObjectID from 'bson-objectid'\nimport { $applyNodeReplacement } from 'lexical'\n\nimport type { StronglyTypedLeafNode } from '../../../../nodeTypes.js'\n\nimport { $convertUploadElement } from './conversions.js'\n\nexport type UploadData<TUploadExtraFieldsData extends JsonObject = JsonObject> = {\n  [TCollectionSlug in CollectionSlug]: {\n    fields: TUploadExtraFieldsData\n    /**\n     * Every lexical node that has sub-fields needs to have a unique ID. This is the ID of this upload node, not the ID of the linked upload document\n     */\n    id: string\n    relationTo: TCollectionSlug\n    /**\n     * Value can be just the document ID, or the full, populated document\n     */\n    value: DataFromCollectionSlug<TCollectionSlug> | number | string\n  }\n}[CollectionSlug]\n\n/**\n * Internal use only - UploadData type that can contain a pending state\n * @internal\n */\nexport type Internal_UploadData<TUploadExtraFieldsData extends JsonObject = JsonObject> = {\n  pending?: {\n    /**\n     * ID that corresponds to the bulk upload form ID\n     */\n    formID: string\n    /**\n     * src value of the image dom element\n     */\n    src: string\n  }\n} & UploadData<TUploadExtraFieldsData>\n\n/**\n * UploadDataImproved is a more precise type, and will replace UploadData in Payload v4.\n * This type is for internal use only as it will be deprecated in the future.\n * @internal\n *\n * @todo Replace UploadData with UploadDataImproved in 4.0\n */\nexport type UploadDataImproved<TUploadExtraFieldsData extends JsonObject = JsonObject> = {\n  [TCollectionSlug in UploadCollectionSlug]: {\n    fields: TUploadExtraFieldsData\n    /**\n     * Every lexical node that has sub-fields needs to have a unique ID. This is the ID of this upload node, not the ID of the linked upload document\n     */\n    id: string\n    relationTo: TCollectionSlug\n    /**\n     * Value can be just the document ID, or the full, populated document\n     */\n    value: number | string | TypedUploadCollection[TCollectionSlug]\n  }\n}[UploadCollectionSlug]\n\nexport type SerializedUploadNode = StronglyTypedLeafNode<SerializedDecoratorBlockNode, 'upload'> &\n  UploadData\n\nexport class UploadServerNode extends DecoratorBlockNode {\n  __data: UploadData\n\n  constructor({\n    data,\n    format,\n    key,\n  }: {\n    data: UploadData\n    format?: ElementFormatType\n    key?: NodeKey\n  }) {\n    super(format, key)\n    this.__data = data\n  }\n\n  static override clone(node: UploadServerNode): UploadServerNode {\n    return new this({\n      data: node.__data,\n      format: node.__format,\n      key: node.__key,\n    })\n  }\n\n  static override getType(): string {\n    return 'upload'\n  }\n\n  static override importDOM(): DOMConversionMap<HTMLImageElement> {\n    return {\n      img: (node) => ({\n        conversion: (domNode) => $convertUploadElement(domNode, $createUploadServerNode),\n        priority: 0,\n      }),\n    }\n  }\n\n  static override importJSON(serializedNode: SerializedUploadNode): UploadServerNode {\n    if (serializedNode.version === 1 && (serializedNode?.value as unknown as { id: string })?.id) {\n      serializedNode.value = (serializedNode.value as unknown as { id: string }).id\n    }\n    if (serializedNode.version === 2 && !serializedNode?.id) {\n      serializedNode.id = new ObjectID.default().toHexString()\n      serializedNode.version = 3\n    }\n\n    const importedData: Internal_UploadData = {\n      id: serializedNode.id,\n      fields: serializedNode.fields,\n      pending: (serializedNode as Internal_UploadData).pending,\n      relationTo: serializedNode.relationTo,\n      value: serializedNode.value,\n    }\n\n    const node = $createUploadServerNode({ data: importedData })\n    node.setFormat(serializedNode.format)\n\n    return node\n  }\n\n  static isInline(): false {\n    return false\n  }\n\n  override createDOM(config?: EditorConfig): HTMLElement {\n    const element = document.createElement('div')\n    addClassNamesToElement(element, config?.theme?.upload)\n    return element\n  }\n\n  override decorate(): JSX.Element {\n    return null as unknown as JSX.Element\n  }\n\n  override exportDOM(): DOMExportOutput {\n    const element = document.createElement('img')\n    const data = this.__data as Internal_UploadData\n    if (data.pending) {\n      element.setAttribute('data-lexical-pending-upload-form-id', String(data?.pending?.formID))\n      element.setAttribute('src', data?.pending?.src || '')\n    } else {\n      element.setAttribute('data-lexical-upload-id', String(data?.value))\n      element.setAttribute('data-lexical-upload-relation-to', data?.relationTo)\n    }\n\n    return { element }\n  }\n\n  override exportJSON(): SerializedUploadNode {\n    return {\n      ...super.exportJSON(),\n      ...this.getData(),\n      type: 'upload',\n      version: 3,\n    }\n  }\n\n  getData(): UploadData {\n    return this.getLatest().__data\n  }\n\n  setData(data: UploadData): void {\n    const writable = this.getWritable()\n    writable.__data = data\n  }\n\n  override updateDOM(): false {\n    return false\n  }\n}\n\nexport function $createUploadServerNode({\n  data,\n}: {\n  data: Omit<UploadData, 'id'> & Partial<Pick<UploadData, 'id'>>\n}): UploadServerNode {\n  if (!data?.id) {\n    data.id = new ObjectID.default().toHexString()\n  }\n  return $applyNodeReplacement(new UploadServerNode({ data: data as UploadData }))\n}\n\nexport function $isUploadServerNode(\n  node: LexicalNode | null | undefined,\n): node is UploadServerNode {\n  return node instanceof UploadServerNode\n}\n","'use client'\n\nimport { ShimmerEffect } from '@payloadcms/ui'\n\nimport '../index.scss'\n\nexport const PendingUploadComponent = (): React.ReactNode => {\n  return (\n    <div className={'lexical-upload'}>\n      <ShimmerEffect height={'95px'} width={'203px'} />\n    </div>\n  )\n}\n","'use client'\nimport type { LexicalCommand } from 'lexical'\n\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext.js'\nimport { $dfsIterator, $insertNodeToNearestRoot, mergeRegister } from '@lexical/utils'\nimport { useBulkUpload, useEffectEvent, useModal } from '@payloadcms/ui'\nimport ObjectID from 'bson-objectid'\nimport {\n  $createRangeSelection,\n  $getPreviousSelection,\n  $getSelection,\n  $isParagraphNode,\n  $isRangeSelection,\n  $setSelection,\n  COMMAND_PRIORITY_EDITOR,\n  COMMAND_PRIORITY_LOW,\n  createCommand,\n  DROP_COMMAND,\n  getDOMSelectionFromTarget,\n  isHTMLElement,\n  PASTE_COMMAND,\n} from 'lexical'\nimport React, { useEffect } from 'react'\n\nimport type { PluginComponent } from '../../../typesClient.js'\nimport type { Internal_UploadData, UploadData } from '../../server/nodes/UploadNode.js'\nimport type { UploadFeaturePropsClient } from '../index.js'\n\nimport { useEnabledRelationships } from '../../../relationship/client/utils/useEnabledRelationships.js'\nimport { UploadDrawer } from '../drawer/index.js'\nimport { $createUploadNode, $isUploadNode, UploadNode } from '../nodes/UploadNode.js'\n\nexport type InsertUploadPayload = Readonly<Omit<UploadData, 'id'> & Partial<Pick<UploadData, 'id'>>>\n\ndeclare global {\n  interface DragEvent {\n    rangeOffset?: number\n    rangeParent?: Node\n  }\n}\n\nfunction canDropImage(event: DragEvent): boolean {\n  const target = event.target\n  return !!(\n    isHTMLElement(target) &&\n    !target.closest('code, span.editor-image') &&\n    isHTMLElement(target.parentElement) &&\n    target.parentElement.closest('div.ContentEditable__root')\n  )\n}\n\nfunction getDragSelection(event: DragEvent): null | Range | undefined {\n  // Source: https://github.com/AlessioGr/lexical/blob/main/packages/lexical-playground/src/plugins/ImagesPlugin/index.tsx\n  let range\n  const domSelection = getDOMSelectionFromTarget(event.target)\n  if (document.caretRangeFromPoint) {\n    range = document.caretRangeFromPoint(event.clientX, event.clientY)\n  } else if (event.rangeParent && domSelection !== null) {\n    domSelection.collapse(event.rangeParent, event.rangeOffset || 0)\n    range = domSelection.getRangeAt(0)\n  } else {\n    throw Error(`Cannot get the selection when dragging`)\n  }\n\n  return range\n}\n\nexport const INSERT_UPLOAD_COMMAND: LexicalCommand<InsertUploadPayload> =\n  createCommand('INSERT_UPLOAD_COMMAND')\n\ntype FileToUpload = {\n  alt?: string\n  file: File\n  /**\n   * Bulk Upload Form ID that should be created, which can then be matched\n   * against the node formID if the upload is successful\n   */\n  formID: string\n}\n\nexport const UploadPlugin: PluginComponent<UploadFeaturePropsClient> = ({ clientProps }) => {\n  const [editor] = useLexicalComposerContext()\n\n  const { enabledCollectionSlugs } = useEnabledRelationships({\n    collectionSlugsBlacklist: clientProps?.disabledCollections,\n    collectionSlugsWhitelist: clientProps?.enabledCollections,\n    uploads: true,\n  })\n\n  const {\n    drawerSlug: bulkUploadDrawerSlug,\n    setCollectionSlug,\n    setInitialForms,\n    setOnCancel,\n    setOnSuccess,\n    setSelectableCollections,\n  } = useBulkUpload()\n\n  const { isModalOpen, openModal } = useModal()\n\n  const openBulkUpload = useEffectEvent(({ files }: { files: FileToUpload[] }) => {\n    if (files?.length === 0) {\n      return\n    }\n\n    setInitialForms((initialForms) => [\n      ...(initialForms ?? []),\n      ...files.map((file) => ({\n        file: file.file,\n        formID: file.formID,\n      })),\n    ])\n\n    if (!isModalOpen(bulkUploadDrawerSlug)) {\n      if (!enabledCollectionSlugs.length || !enabledCollectionSlugs[0]) {\n        return\n      }\n\n      setCollectionSlug(enabledCollectionSlugs[0])\n      setSelectableCollections(enabledCollectionSlugs)\n\n      setOnCancel(() => {\n        // Remove all the pending upload nodes that were added but not uploaded\n        editor.update(() => {\n          for (const dfsNode of $dfsIterator()) {\n            const node = dfsNode.node\n\n            if ($isUploadNode(node)) {\n              const nodeData = node.getData()\n              if ((nodeData as Internal_UploadData)?.pending) {\n                node.remove()\n              }\n            }\n          }\n        })\n      })\n\n      setOnSuccess((newDocs) => {\n        const newDocsMap = new Map(newDocs.map((doc) => [doc.formID, doc]))\n        editor.update(() => {\n          for (const dfsNode of $dfsIterator()) {\n            const node = dfsNode.node\n            if ($isUploadNode(node)) {\n              const nodeData: Internal_UploadData = node.getData()\n\n              if (nodeData?.pending) {\n                const newDoc = newDocsMap.get(nodeData.pending?.formID)\n                if (newDoc) {\n                  node.replace(\n                    $createUploadNode({\n                      data: {\n                        id: new ObjectID.default().toHexString(),\n                        fields: {},\n                        relationTo: newDoc.collectionSlug,\n                        value: newDoc.doc.id,\n                      } as UploadData,\n                    }),\n                  )\n                }\n              }\n            }\n          }\n        })\n      })\n\n      openModal(bulkUploadDrawerSlug)\n    }\n  })\n\n  useEffect(() => {\n    if (!editor.hasNodes([UploadNode])) {\n      throw new Error('UploadPlugin: UploadNode not registered on editor')\n    }\n\n    return mergeRegister(\n      /**\n       * Handle auto-uploading files if you copy & paste an image dom element from the clipboard\n       */\n      editor.registerNodeTransform(UploadNode, (node) => {\n        const nodeData: Internal_UploadData = node.getData()\n        if (!nodeData?.pending) {\n          return\n        }\n\n        async function upload() {\n          let transformedImage: FileToUpload | null = null\n\n          const src = nodeData?.pending?.src\n          const formID = nodeData?.pending?.formID as string\n\n          if (src?.startsWith('data:')) {\n            // It's a base64-encoded image\n            const mimeMatch = src.match(/data:(image\\/[a-zA-Z]+);base64,/)\n            const mimeType = mimeMatch ? mimeMatch[1] : 'image/png' // Default to PNG if MIME type not found\n            const base64Data = src.replace(/^data:image\\/[a-zA-Z]+;base64,/, '')\n            const byteCharacters = atob(base64Data)\n            const byteNumbers = new Array(byteCharacters.length)\n            for (let i = 0; i < byteCharacters.length; i++) {\n              byteNumbers[i] = byteCharacters.charCodeAt(i)\n            }\n            const byteArray = new Uint8Array(byteNumbers)\n            const file = new File([byteArray], 'pasted-image.' + mimeType?.split('/', 2)[1], {\n              type: mimeType,\n            })\n            transformedImage = { alt: undefined, file, formID }\n          } else if (src?.startsWith('http') || src?.startsWith('https')) {\n            // It's an image URL\n            const res = await fetch(src)\n            const blob = await res.blob()\n            const inferredFileName =\n              src.split('/').pop() || 'pasted-image' + blob.type.split('/', 2)[1]\n            const file = new File([blob], inferredFileName, {\n              type: blob.type,\n            })\n\n            transformedImage = { alt: undefined, file, formID }\n          }\n\n          if (!transformedImage) {\n            return\n          }\n\n          openBulkUpload({ files: [transformedImage] })\n        }\n        void upload()\n      }),\n      editor.registerCommand<InsertUploadPayload>(\n        INSERT_UPLOAD_COMMAND,\n        (payload: InsertUploadPayload) => {\n          editor.update(() => {\n            const selection = $getSelection() || $getPreviousSelection()\n\n            if ($isRangeSelection(selection)) {\n              const uploadNode = $createUploadNode({\n                data: {\n                  id: payload.id,\n                  fields: payload.fields,\n                  relationTo: payload.relationTo,\n                  value: payload.value,\n                },\n              })\n              // we need to get the focus node before inserting the block node, as $insertNodeToNearestRoot can change the focus node\n              const { focus } = selection\n              const focusNode = focus.getNode()\n              // Insert upload node BEFORE potentially removing focusNode, as $insertNodeToNearestRoot errors if the focusNode doesn't exist\n              $insertNodeToNearestRoot(uploadNode)\n\n              // Delete the node it it's an empty paragraph\n              if ($isParagraphNode(focusNode) && !focusNode.__first) {\n                focusNode.remove()\n              }\n            }\n          })\n\n          return true\n        },\n        COMMAND_PRIORITY_EDITOR,\n      ),\n      editor.registerCommand(\n        PASTE_COMMAND,\n        (event) => {\n          // Pending UploadNodes are automatically created when importDOM is called. However, if you paste a file from your computer\n          // directly, importDOM won't be called, as it's not a HTML dom element. So we need to handle that case here.\n\n          if (!(event instanceof ClipboardEvent)) {\n            return false\n          }\n          const clipboardData = event.clipboardData\n\n          if (!clipboardData?.types?.length || clipboardData?.types?.includes('text/html')) {\n            // HTML is handled through importDOM => registerNodeTransform for pending UploadNode\n            return false\n          }\n\n          const files: FileToUpload[] = []\n          if (clipboardData?.files?.length) {\n            Array.from(clipboardData.files).forEach((file) => {\n              files.push({\n                alt: '',\n                file,\n                formID: new ObjectID.default().toHexString(),\n              })\n            })\n          }\n\n          if (files.length) {\n            // Insert a pending UploadNode for each image\n            editor.update(() => {\n              const selection = $getSelection() || $getPreviousSelection()\n\n              if ($isRangeSelection(selection)) {\n                for (const file of files) {\n                  const pendingUploadNode = $createUploadNode({\n                    data: {\n                      pending: {\n                        formID: file.formID,\n                        src: URL.createObjectURL(file.file),\n                      },\n                    } as Internal_UploadData,\n                  })\n                  // we need to get the focus node before inserting the upload node, as $insertNodeToNearestRoot can change the focus node\n                  const { focus } = selection\n                  const focusNode = focus.getNode()\n                  // Insert upload node BEFORE potentially removing focusNode, as $insertNodeToNearestRoot errors if the focusNode doesn't exist\n                  $insertNodeToNearestRoot(pendingUploadNode)\n\n                  // Delete the node it it's an empty paragraph\n                  if ($isParagraphNode(focusNode) && !focusNode.__first) {\n                    focusNode.remove()\n                  }\n                }\n              }\n            })\n\n            // Open the bulk drawer - the node transform will not open it for us, as it does not handle blob/file uploads\n            openBulkUpload({ files })\n\n            return true\n          }\n\n          return false\n        },\n        COMMAND_PRIORITY_LOW,\n      ),\n      // Handle drag & drop of files from the desktop into the editor\n      editor.registerCommand(\n        DROP_COMMAND,\n        (event) => {\n          if (!(event instanceof DragEvent)) {\n            return false\n          }\n\n          const dt = event.dataTransfer\n\n          if (!dt?.types?.length) {\n            return false\n          }\n\n          const files: FileToUpload[] = []\n          if (dt?.files?.length) {\n            Array.from(dt.files).forEach((file) => {\n              files.push({\n                alt: '',\n                file,\n                formID: new ObjectID.default().toHexString(),\n              })\n            })\n          }\n\n          if (files.length) {\n            // Prevent the default browser drop handling, which would open the file in the browser\n            event.preventDefault()\n            event.stopPropagation()\n\n            // Insert a PendingUploadNode for each image\n            editor.update(() => {\n              if (canDropImage(event)) {\n                const range = getDragSelection(event)\n                const selection = $createRangeSelection()\n                if (range !== null && range !== undefined) {\n                  selection.applyDOMRange(range)\n                }\n                $setSelection(selection)\n\n                for (const file of files) {\n                  const pendingUploadNode = $createUploadNode({\n                    data: {\n                      pending: {\n                        formID: file.formID,\n                        src: URL.createObjectURL(file.file),\n                      },\n                    } as Internal_UploadData,\n                  })\n                  // we need to get the focus node before inserting the upload node, as $insertNodeToNearestRoot can change the focus node\n                  const { focus } = selection\n                  const focusNode = focus.getNode()\n                  // Insert upload node BEFORE potentially removing focusNode, as $insertNodeToNearestRoot errors if the focusNode doesn't exist\n                  $insertNodeToNearestRoot(pendingUploadNode)\n\n                  // Delete the node it it's an empty paragraph\n                  if ($isParagraphNode(focusNode) && !focusNode.__first) {\n                    focusNode.remove()\n                  }\n                }\n              }\n            })\n\n            // Open the bulk drawer - the node transform will not open it for us, as it does not handle blob/file uploads\n            openBulkUpload({ files })\n\n            return true\n          }\n\n          return false\n        },\n        COMMAND_PRIORITY_LOW,\n      ),\n    )\n  }, [editor])\n\n  return <UploadDrawer enabledCollectionSlugs={enabledCollectionSlugs} />\n}\n","'use client'\nimport type { ListDrawerProps } from '@payloadcms/ui'\nimport type { LexicalEditor } from 'lexical'\nimport type { UploadCollectionSlug } from 'payload'\n\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext.js'\nimport { toast } from '@payloadcms/ui'\nimport { $getNodeByKey, COMMAND_PRIORITY_EDITOR } from 'lexical'\nimport React, { useCallback, useEffect, useState } from 'react'\n\nimport { useLexicalListDrawer } from '../../../../utilities/fieldsDrawer/useLexicalListDrawer.js'\nimport { $createUploadNode } from '../nodes/UploadNode.js'\nimport { INSERT_UPLOAD_COMMAND } from '../plugin/index.js'\nimport { INSERT_UPLOAD_WITH_DRAWER_COMMAND } from './commands.js'\n\nconst insertUpload = ({\n  editor,\n  relationTo,\n  replaceNodeKey,\n  value,\n}: {\n  editor: LexicalEditor\n  relationTo: string\n  replaceNodeKey: null | string\n  value: number | string\n}) => {\n  if (!replaceNodeKey) {\n    editor.dispatchCommand(INSERT_UPLOAD_COMMAND, {\n      // @ts-expect-error - TODO: fix this\n      fields: null,\n      relationTo,\n      value,\n    })\n  } else {\n    editor.update(() => {\n      const node = $getNodeByKey(replaceNodeKey)\n      if (node) {\n        node.replace(\n          $createUploadNode({\n            data: {\n              // @ts-expect-error - TODO: fix this\n              fields: null,\n              relationTo,\n              value,\n            },\n          }),\n        )\n      }\n    })\n  }\n}\n\ntype Props = {\n  enabledCollectionSlugs: UploadCollectionSlug[]\n}\n\nconst UploadDrawerComponent: React.FC<Props> = ({ enabledCollectionSlugs }) => {\n  const [editor] = useLexicalComposerContext()\n\n  const [replaceNodeKey, setReplaceNodeKey] = useState<null | string>(null)\n\n  const { closeListDrawer, ListDrawer, openListDrawer } = useLexicalListDrawer({\n    collectionSlugs: enabledCollectionSlugs,\n    uploads: true,\n  })\n\n  useEffect(() => {\n    return editor.registerCommand<{\n      replace: { nodeKey: string } | false\n    }>(\n      INSERT_UPLOAD_WITH_DRAWER_COMMAND,\n      (payload) => {\n        setReplaceNodeKey(payload?.replace ? payload?.replace.nodeKey : null)\n        openListDrawer()\n        return true\n      },\n      COMMAND_PRIORITY_EDITOR,\n    )\n  }, [editor, openListDrawer])\n\n  const onSelect = useCallback<NonNullable<ListDrawerProps['onSelect']>>(\n    ({ collectionSlug, doc }) => {\n      closeListDrawer()\n      insertUpload({\n        editor,\n        relationTo: collectionSlug,\n        replaceNodeKey,\n        value: doc.id,\n      })\n    },\n    [editor, closeListDrawer, replaceNodeKey],\n  )\n\n  return <ListDrawer onSelect={onSelect} />\n}\n\nconst UploadDrawerComponentFallback: React.FC = () => {\n  const [editor] = useLexicalComposerContext()\n\n  useEffect(() => {\n    return editor.registerCommand<{\n      replace: { nodeKey: string } | false\n    }>(\n      INSERT_UPLOAD_WITH_DRAWER_COMMAND,\n      () => {\n        toast.error('No upload collections enabled')\n        return true\n      },\n      COMMAND_PRIORITY_EDITOR,\n    )\n  }, [editor])\n\n  return null\n}\n\nexport const UploadDrawer = ({ enabledCollectionSlugs }: Props): React.ReactNode => {\n  if (!enabledCollectionSlugs?.length) {\n    return <UploadDrawerComponentFallback />\n  }\n\n  return <UploadDrawerComponent enabledCollectionSlugs={enabledCollectionSlugs} />\n}\n","'use client'\n\nimport type { RichTextFieldClient } from 'payload'\n\nimport { ShimmerEffect, useConfig } from '@payloadcms/ui'\nimport React, { lazy, Suspense, useEffect, useState } from 'react'\n\nimport type { FeatureProviderClient } from '../features/typesClient.js'\nimport type { SanitizedClientEditorConfig } from '../lexical/config/types.js'\nimport type { LexicalRichTextFieldProps } from '../types.js'\n\nimport { defaultEditorLexicalConfig } from '../lexical/config/client/default.js'\nimport { loadClientFeatures } from '../lexical/config/client/loader.js'\nimport { sanitizeClientEditorConfig } from '../lexical/config/client/sanitize.js'\n\nconst RichTextEditor = lazy(() =>\n  import('./Field.js').then((module) => ({ default: module.RichText })),\n)\n\nexport const RichTextField: React.FC<LexicalRichTextFieldProps> = (props) => {\n  const {\n    admin = {},\n    clientFeatures,\n    featureClientImportMap = {},\n    featureClientSchemaMap,\n    field,\n    lexicalEditorConfig = defaultEditorLexicalConfig,\n    schemaPath,\n  } = props\n\n  const { config } = useConfig()\n\n  const [finalSanitizedEditorConfig, setFinalSanitizedEditorConfig] =\n    useState<null | SanitizedClientEditorConfig>(null)\n\n  useEffect(() => {\n    if (finalSanitizedEditorConfig) {\n      return\n    }\n\n    const featureProvidersLocal: FeatureProviderClient<any, any>[] = []\n    for (const clientFeature of Object.values(clientFeatures)) {\n      if (!clientFeature.clientFeatureProvider) {\n        continue\n      }\n      featureProvidersLocal.push(\n        clientFeature.clientFeatureProvider(clientFeature.clientFeatureProps),\n      ) // Execute the clientFeatureProvider function here, as the server cannot execute functions imported from use client files\n    }\n\n    const resolvedClientFeatures = loadClientFeatures({\n      config,\n      featureClientImportMap,\n      featureClientSchemaMap,\n      field: field as RichTextFieldClient,\n      schemaPath: schemaPath ?? field.name,\n      unSanitizedEditorConfig: {\n        features: featureProvidersLocal,\n        lexical: lexicalEditorConfig,\n      },\n    })\n\n    setFinalSanitizedEditorConfig(\n      sanitizeClientEditorConfig(resolvedClientFeatures, lexicalEditorConfig, admin),\n    )\n  }, [\n    admin,\n    clientFeatures,\n    config,\n    featureClientImportMap,\n    featureClientSchemaMap,\n    field,\n    finalSanitizedEditorConfig,\n    lexicalEditorConfig,\n    schemaPath,\n  ]) // TODO: Optimize this and use useMemo for this in the future. This might break sub-richtext-blocks from the blocks feature. Need to investigate\n\n  return (\n    <Suspense fallback={<ShimmerEffect height=\"35vh\" />}>\n      {finalSanitizedEditorConfig && (\n        <RichTextEditor {...props} editorConfig={finalSanitizedEditorConfig} />\n      )}\n    </Suspense>\n  )\n}\n","import type { EditorThemeClasses } from 'lexical'\n\nexport const LexicalEditorTheme: EditorThemeClasses = {\n  block: 'LexicalEditorTheme__block',\n  blockCursor: 'LexicalEditorTheme__blockCursor',\n  characterLimit: 'LexicalEditorTheme__characterLimit',\n  code: 'LexicalEditorTheme__code',\n  inlineBlock: 'LexicalEditorTheme__inlineBlock',\n\n  heading: {\n    h1: 'LexicalEditorTheme__h1',\n    h2: 'LexicalEditorTheme__h2',\n    h3: 'LexicalEditorTheme__h3',\n    h4: 'LexicalEditorTheme__h4',\n    h5: 'LexicalEditorTheme__h5',\n    h6: 'LexicalEditorTheme__h6',\n  },\n  hr: 'LexicalEditorTheme__hr',\n  hrSelected: 'LexicalEditorTheme__hrSelected',\n  indent: 'LexicalEditorTheme__indent',\n  link: 'LexicalEditorTheme__link',\n  list: {\n    checklist: 'LexicalEditorTheme__checklist',\n    listitem: 'LexicalEditorTheme__listItem',\n    listitemChecked: 'LexicalEditorTheme__listItemChecked',\n    listitemUnchecked: 'LexicalEditorTheme__listItemUnchecked',\n    nested: {\n      listitem: 'LexicalEditorTheme__nestedListItem',\n    },\n    olDepth: [\n      'LexicalEditorTheme__ol1',\n      'LexicalEditorTheme__ol2',\n      'LexicalEditorTheme__ol3',\n      'LexicalEditorTheme__ol4',\n      'LexicalEditorTheme__ol5',\n    ],\n    ul: 'LexicalEditorTheme__ul',\n  },\n  ltr: 'LexicalEditorTheme__ltr',\n  mark: 'LexicalEditorTheme__mark',\n  markOverlap: 'LexicalEditorTheme__markOverlap',\n  paragraph: 'LexicalEditorTheme__paragraph',\n  placeholder: 'LexicalEditorTheme__placeholder',\n  quote: 'LexicalEditorTheme__quote',\n  relationship: 'LexicalEditorTheme__relationship',\n  rtl: 'LexicalEditorTheme__rtl',\n  tab: 'LexicalEditorTheme__tabNode',\n  table: 'LexicalEditorTheme__table',\n  tableAddColumns: 'LexicalEditorTheme__tableAddColumns',\n  tableAddRows: 'LexicalEditorTheme__tableAddRows',\n  tableAlignment: {\n    center: 'LexicalEditorTheme__tableAlignmentCenter',\n    right: 'LexicalEditorTheme__tableAlignmentRight',\n  },\n  tableCell: 'LexicalEditorTheme__tableCell',\n  tableCellActionButton: 'LexicalEditorTheme__tableCellActionButton',\n  tableCellActionButtonContainer: 'LexicalEditorTheme__tableCellActionButtonContainer',\n  tableCellHeader: 'LexicalEditorTheme__tableCellHeader',\n  tableCellResizer: 'LexicalEditorTheme__tableCellResizer',\n  tableCellSelected: 'LexicalEditorTheme__tableCellSelected',\n  tableFrozenColumn: 'LexicalEditorTheme__tableFrozenColumn',\n  tableRowStriping: 'LexicalEditorTheme__tableRowStriping',\n  tableScrollableWrapper: 'LexicalEditorTheme__tableScrollableWrapper',\n  tableSelected: 'LexicalEditorTheme__tableSelected',\n  tableSelection: 'LexicalEditorTheme__tableSelection',\n  text: {\n    bold: 'LexicalEditorTheme__textBold',\n    code: 'LexicalEditorTheme__textCode',\n    italic: 'LexicalEditorTheme__textItalic',\n    strikethrough: 'LexicalEditorTheme__textStrikethrough',\n    subscript: 'LexicalEditorTheme__textSubscript',\n    superscript: 'LexicalEditorTheme__textSuperscript',\n    underline: 'LexicalEditorTheme__textUnderline',\n    underlineStrikethrough: 'LexicalEditorTheme__textUnderlineStrikethrough',\n  },\n  upload: 'LexicalEditorTheme__upload',\n}\n","'use client'\nimport type { EditorConfig as LexicalEditorConfig } from 'lexical'\n\nimport { LexicalEditorTheme } from '../../theme/EditorTheme.js'\n\nexport const defaultEditorLexicalConfig: LexicalEditorConfig = {\n  namespace: 'lexical',\n  theme: LexicalEditorTheme,\n}\n","'use client'\n\nimport type { ClientConfig, RichTextFieldClient } from 'payload'\n\nimport type {\n  ClientFeatureProviderMap,\n  ResolvedClientFeature,\n  ResolvedClientFeatureMap,\n} from '../../../features/typesClient.js'\nimport type { FeatureClientSchemaMap } from '../../../types.js'\nimport type { ClientEditorConfig } from '../types.js'\n\n/**\n * This function expects client functions to ALREADY be ordered & dependencies checked on the server\n * @param unSanitizedEditorConfig\n */\nexport function loadClientFeatures({\n  config,\n  featureClientImportMap,\n  featureClientSchemaMap,\n  field,\n  schemaPath,\n  unSanitizedEditorConfig,\n}: {\n  config: ClientConfig\n  featureClientImportMap: Record<string, any>\n  featureClientSchemaMap: FeatureClientSchemaMap\n  field?: RichTextFieldClient\n  schemaPath: string\n  unSanitizedEditorConfig: ClientEditorConfig\n}): ResolvedClientFeatureMap {\n  const featureProviderMap: ClientFeatureProviderMap = new Map()\n\n  for (const featureProvider of unSanitizedEditorConfig.features) {\n    if (\n      !featureProvider?.clientFeatureProps?.featureKey ||\n      featureProvider?.clientFeatureProps?.order === undefined ||\n      featureProvider?.clientFeatureProps?.order === null\n    ) {\n      throw new Error(\n        'A Feature you have installed does not return the client props as clientFeatureProps. Please make sure to always return those props, even if they are null, as other important props like order and featureKey are later on injected.',\n      )\n    }\n    featureProviderMap.set(featureProvider.clientFeatureProps.featureKey, featureProvider)\n  }\n\n  // sort unSanitizedEditorConfig.features by order\n  unSanitizedEditorConfig.features = unSanitizedEditorConfig.features.sort(\n    (a, b) => a.clientFeatureProps.order - b.clientFeatureProps.order,\n  )\n\n  const resolvedFeatures: ResolvedClientFeatureMap = new Map()\n\n  // Make sure all dependencies declared in the respective features exist\n  let loaded = 0\n  for (const featureProvider of unSanitizedEditorConfig.features) {\n    const feature: Partial<ResolvedClientFeature<any>> =\n      typeof featureProvider.feature === 'function'\n        ? featureProvider.feature({\n            config,\n            featureClientImportMap,\n            featureClientSchemaMap,\n            featureProviderMap,\n            field,\n            resolvedFeatures,\n            schemaPath,\n            unSanitizedEditorConfig,\n          })\n        : featureProvider.feature\n\n    feature.key = featureProvider.clientFeatureProps.featureKey\n    feature.order = loaded\n\n    resolvedFeatures.set(\n      featureProvider.clientFeatureProps.featureKey,\n      feature as ResolvedClientFeature<any>,\n    )\n\n    loaded++\n  }\n\n  return resolvedFeatures\n}\n","'use client'\n\nimport type { EditorConfig as LexicalEditorConfig } from 'lexical'\n\nimport { deepMerge } from 'payload/shared'\n\nimport type { ToolbarGroup } from '../../../features/toolbars/types.js'\nimport type {\n  ResolvedClientFeatureMap,\n  SanitizedClientFeatures,\n} from '../../../features/typesClient.js'\nimport type { LexicalFieldAdminClientProps } from '../../../types.js'\nimport type { SanitizedClientEditorConfig } from '../types.js'\n\nexport const sanitizeClientFeatures = (\n  features: ResolvedClientFeatureMap,\n): SanitizedClientFeatures => {\n  const sanitized: SanitizedClientFeatures = {\n    enabledFeatures: [],\n    enabledFormats: [],\n    markdownTransformers: [],\n    nodes: [],\n    plugins: [],\n    providers: [],\n    slashMenu: {\n      dynamicGroups: [],\n      groups: [],\n    },\n    toolbarFixed: {\n      groups: [],\n    },\n    toolbarInline: {\n      groups: [],\n    },\n  }\n\n  // Allow customization of groups for toolbarFixed\n  let customGroups: Record<string, Partial<ToolbarGroup>> = {}\n  features.forEach((feature) => {\n    if (feature.key === 'toolbarFixed' && feature.sanitizedClientFeatureProps?.customGroups) {\n      customGroups = {\n        ...customGroups,\n        ...feature.sanitizedClientFeatureProps.customGroups,\n      }\n    }\n  })\n\n  if (!features?.size) {\n    return sanitized\n  }\n\n  features.forEach((feature) => {\n    if (feature.providers?.length) {\n      sanitized.providers = sanitized.providers.concat(feature.providers)\n    }\n\n    if (feature.enableFormats?.length) {\n      sanitized.enabledFormats.push(...feature.enableFormats)\n    }\n\n    if (feature.nodes?.length) {\n      // Important: do not use concat\n      for (const node of feature.nodes) {\n        sanitized.nodes.push(node)\n      }\n    }\n    if (feature.plugins?.length) {\n      feature.plugins.forEach((plugin, i) => {\n        sanitized.plugins?.push({\n          clientProps: feature.sanitizedClientFeatureProps,\n          Component: plugin.Component as any, // Appeases strict: true\n          key: feature.key + i,\n          position: plugin.position,\n        })\n      })\n    }\n\n    if (feature.toolbarInline?.groups?.length) {\n      for (const group of feature.toolbarInline.groups) {\n        // 1. find the group with the same key or create new one\n        let foundGroup = sanitized.toolbarInline.groups.find(\n          (sanitizedGroup) => sanitizedGroup.key === group.key,\n        )\n        if (!foundGroup) {\n          foundGroup = {\n            ...group,\n            items: [],\n          }\n        } else {\n          sanitized.toolbarInline.groups = sanitized.toolbarInline.groups.filter(\n            (sanitizedGroup) => sanitizedGroup.key !== group.key,\n          )\n        }\n\n        // 2. Add options to group options array and add to sanitized.slashMenu.groupsWithOptions\n        if (group?.items?.length) {\n          foundGroup.items = foundGroup.items.concat(group.items)\n        }\n        sanitized.toolbarInline?.groups.push(foundGroup)\n      }\n    }\n\n    if (feature.toolbarFixed?.groups?.length) {\n      for (const group of feature.toolbarFixed.groups) {\n        // 1. find the group with the same key or create new one\n        let foundGroup = sanitized.toolbarFixed.groups.find(\n          (sanitizedGroup) => sanitizedGroup.key === group.key,\n        )\n        if (!foundGroup) {\n          foundGroup = {\n            ...group,\n            items: [],\n          }\n        } else {\n          sanitized.toolbarFixed.groups = sanitized.toolbarFixed.groups.filter(\n            (sanitizedGroup) => sanitizedGroup.key !== group.key,\n          )\n        }\n\n        // 2. Add options to group options array and add to sanitized.slashMenu.groupsWithOptions\n        if (group?.items?.length) {\n          foundGroup.items = foundGroup.items.concat(group.items)\n        }\n        sanitized.toolbarFixed?.groups.push(foundGroup)\n      }\n    }\n\n    if (feature.slashMenu?.groups) {\n      if (feature.slashMenu.dynamicGroups?.length) {\n        sanitized.slashMenu.dynamicGroups = sanitized.slashMenu.dynamicGroups.concat(\n          feature.slashMenu.dynamicGroups,\n        )\n      }\n\n      for (const optionGroup of feature.slashMenu.groups) {\n        // 1. find the group with the same name or create new one\n        let group = sanitized.slashMenu.groups.find((group) => group.key === optionGroup.key)\n        if (!group) {\n          group = {\n            ...optionGroup,\n            items: [],\n          }\n        } else {\n          sanitized.slashMenu.groups = sanitized.slashMenu.groups.filter(\n            (group) => group.key !== optionGroup.key,\n          )\n        }\n\n        // 2. Add options to group options array and add to sanitized.slashMenu.groupsWithOptions\n        if (optionGroup?.items?.length) {\n          group.items = group.items.concat(optionGroup.items)\n        }\n        sanitized.slashMenu.groups.push(group)\n      }\n    }\n\n    if (feature.markdownTransformers?.length) {\n      // Important: do not use concat\n      for (const transformer of feature.markdownTransformers) {\n        if (typeof transformer === 'function') {\n          sanitized.markdownTransformers.push(\n            transformer({\n              allNodes: sanitized.nodes,\n              allTransformers: sanitized.markdownTransformers,\n            }),\n          )\n        } else {\n          sanitized.markdownTransformers.push(transformer)\n        }\n      }\n    }\n    sanitized.enabledFeatures.push(feature.key)\n  })\n\n  // Apply custom group configurations to toolbarFixed groups\n  if (Object.keys(customGroups).length > 0) {\n    sanitized.toolbarFixed.groups = sanitized.toolbarFixed.groups.map((group) => {\n      const customConfig = customGroups[group.key]\n      if (customConfig) {\n        return deepMerge(group, customConfig)\n      }\n      return group\n    })\n  }\n\n  // Sort sanitized.toolbarInline.groups by order property\n  sanitized.toolbarInline.groups.sort((a, b) => {\n    if (a.order && b.order) {\n      return a.order - b.order\n    } else if (a.order) {\n      return -1\n    } else if (b.order) {\n      return 1\n    } else {\n      return 0\n    }\n  })\n  // Sort sanitized.toolbarFixed.groups by order property\n  sanitized.toolbarFixed.groups.sort((a, b) => {\n    if (a.order && b.order) {\n      return a.order - b.order\n    } else if (a.order) {\n      return -1\n    } else if (b.order) {\n      return 1\n    } else {\n      return 0\n    }\n  })\n\n  // Sort sanitized.toolbarInline.groups.[group].entries by order property\n  for (const group of sanitized.toolbarInline.groups) {\n    group.items.sort((a, b) => {\n      if (a.order && b.order) {\n        return a.order - b.order\n      } else if (a.order) {\n        return -1\n      } else if (b.order) {\n        return 1\n      } else {\n        return 0\n      }\n    })\n  }\n\n  // Sort sanitized.toolbarFixed.groups.[group].entries by order property\n  for (const group of sanitized.toolbarFixed.groups) {\n    group.items.sort((a, b) => {\n      if (a.order && b.order) {\n        return a.order - b.order\n      } else if (a.order) {\n        return -1\n      } else if (b.order) {\n        return 1\n      } else {\n        return 0\n      }\n    })\n  }\n\n  return sanitized\n}\n\nexport function sanitizeClientEditorConfig(\n  resolvedClientFeatureMap: ResolvedClientFeatureMap,\n  lexical?: LexicalEditorConfig,\n  admin?: LexicalFieldAdminClientProps,\n): SanitizedClientEditorConfig {\n  return {\n    admin,\n    features: sanitizeClientFeatures(resolvedClientFeatureMap),\n    lexical: lexical!,\n    resolvedFeatureMap: resolvedClientFeatureMap,\n  }\n}\n","'use client'\n\n/**\n * @deprecated - remove in 4.0. lexical already exports an isHTMLElement utility\n */\nexport function isHTMLElement(x: unknown): x is HTMLElement {\n  return x instanceof HTMLElement\n}\n","'use client'\nexport function joinClasses(...args: Array<boolean | null | string | undefined>): string {\n  return args.filter(Boolean).join(' ')\n}\n","'use client'\ntype Force = [number, number]\ntype Listener = (force: Force, e: TouchEvent) => void\ninterface ElementValues {\n  handleTouchend: (e: TouchEvent) => void\n  handleTouchstart: (e: TouchEvent) => void\n  listeners: Set<Listener>\n  start: Force | null\n}\n\nconst elements = new WeakMap<HTMLElement, ElementValues>()\n\nfunction readTouch(e: TouchEvent): [number, number] | null {\n  const touch = e.changedTouches[0]\n  if (touch === undefined) {\n    return null\n  }\n  return [touch.clientX, touch.clientY]\n}\n\nfunction addListener(element: HTMLElement, cb: Listener): () => void {\n  let elementValues = elements.get(element)\n  if (elementValues === undefined) {\n    const listeners = new Set<Listener>()\n    const handleTouchstart = (e: TouchEvent): void => {\n      if (elementValues !== undefined) {\n        elementValues.start = readTouch(e)\n      }\n    }\n    const handleTouchend = (e: TouchEvent): void => {\n      if (elementValues === undefined) {\n        return\n      }\n      const { start } = elementValues\n      if (start === null) {\n        return\n      }\n      const end = readTouch(e)\n      for (const listener of listeners) {\n        if (end !== null) {\n          listener([end[0] - start[0], end[1] - start[1]], e)\n        }\n      }\n    }\n    element.addEventListener('touchstart', handleTouchstart)\n    element.addEventListener('touchend', handleTouchend)\n\n    elementValues = {\n      handleTouchend,\n      handleTouchstart,\n      listeners,\n      start: null,\n    }\n    elements.set(element, elementValues)\n  }\n  elementValues.listeners.add(cb)\n  return () => {\n    deleteListener(element, cb)\n  }\n}\n\nfunction deleteListener(element: HTMLElement, cb: Listener): void {\n  const elementValues = elements.get(element)\n  if (elementValues === undefined) {\n    return\n  }\n  const { listeners } = elementValues\n  listeners.delete(cb)\n  if (listeners.size === 0) {\n    elements.delete(element)\n    element.removeEventListener('touchstart', elementValues.handleTouchstart)\n    element.removeEventListener('touchend', elementValues.handleTouchend)\n  }\n}\n\nexport function addSwipeLeftListener(\n  element: HTMLElement,\n  cb: (_force: number, e: TouchEvent) => void,\n): () => void {\n  return addListener(element, (force, e) => {\n    const [x, y] = force\n    if (x < 0 && -x > Math.abs(y)) {\n      cb(x, e)\n    }\n  })\n}\n\nexport function addSwipeRightListener(\n  element: HTMLElement,\n  cb: (_force: number, e: TouchEvent) => void,\n): () => void {\n  return addListener(element, (force, e) => {\n    const [x, y] = force\n    if (x > 0 && x > Math.abs(y)) {\n      cb(x, e)\n    }\n  })\n}\n\nexport function addSwipeUpListener(\n  element: HTMLElement,\n  cb: (_force: number, e: TouchEvent) => void,\n): () => void {\n  return addListener(element, (force, e) => {\n    const [x, y] = force\n    if (y < 0 && -y > Math.abs(x)) {\n      cb(x, e)\n    }\n  })\n}\n\nexport function addSwipeDownListener(\n  element: HTMLElement,\n  cb: (_force: number, e: TouchEvent) => void,\n): () => void {\n  return addListener(element, (force, e) => {\n    const [x, y] = force\n    if (y > 0 && y > Math.abs(x)) {\n      cb(x, e)\n    }\n  })\n}\n","'use client'\nimport React from 'react'\n\nimport { useInlineBlockComponentContext } from '../index.js'\n\nexport const InlineBlockEditButton = () => {\n  const { EditButton } = useInlineBlockComponentContext()\n\n  return EditButton ? <EditButton /> : null\n}\n","'use client'\nimport React from 'react'\n\nimport { useInlineBlockComponentContext } from '../index.js'\n\nexport const InlineBlockRemoveButton = () => {\n  const { RemoveButton } = useInlineBlockComponentContext()\n\n  return RemoveButton ? <RemoveButton /> : null\n}\n","'use client'\nimport React from 'react'\n\nimport { useInlineBlockComponentContext } from '../index.js'\n\nexport const InlineBlockLabel = () => {\n  const { Label } = useInlineBlockComponentContext()\n\n  return Label ? <Label /> : null\n}\n","'use client'\nimport React from 'react'\n\nimport { useInlineBlockComponentContext } from '../index.js'\n\nexport const InlineBlockContainer = ({ children }: { children: React.ReactNode }) => {\n  const { InlineBlockContainer } = useInlineBlockComponentContext()\n\n  return InlineBlockContainer ? <InlineBlockContainer>{children}</InlineBlockContainer> : null\n}\n","'use client'\nimport React from 'react'\n\nimport { type BlockCollapsibleProps, useBlockComponentContext } from '../BlockContent.js'\n\nexport const BlockCollapsible: React.FC<BlockCollapsibleProps> = (props) => {\n  const { children, ...rest } = props\n  const { BlockCollapsible } = useBlockComponentContext()\n\n  return BlockCollapsible ? <BlockCollapsible {...rest}>{children}</BlockCollapsible> : null\n}\n","'use client'\nimport React from 'react'\n\nimport { useBlockComponentContext } from '../BlockContent.js'\n\nexport const BlockEditButton = () => {\n  const { EditButton } = useBlockComponentContext()\n\n  return EditButton ? <EditButton /> : null\n}\n","'use client'\nimport React from 'react'\n\nimport { useBlockComponentContext } from '../BlockContent.js'\n\nexport const BlockRemoveButton = () => {\n  const { RemoveButton } = useBlockComponentContext()\n\n  return RemoveButton ? <RemoveButton /> : null\n}\n","import { stringify } from 'qs-esm'\n\nimport type { HTMLPopulateFn } from '../lexicalToHtml/async/types.js'\n\nexport const getRestPopulateFn: (args: {\n  /**\n   * E.g. `http://localhost:3000/api`\n   */\n  apiURL: string\n  depth?: number\n  draft?: boolean\n  locale?: string\n}) => HTMLPopulateFn = ({ apiURL, depth, draft, locale }) => {\n  const populateFn: HTMLPopulateFn = async ({ id, collectionSlug, select }) => {\n    const query = stringify(\n      { depth: depth ?? 0, draft: draft ?? false, locale, select },\n      { addQueryPrefix: true },\n    )\n\n    const res = await fetch(`${apiURL}/${collectionSlug}/${id}${query}`, {\n      credentials: 'include',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n      },\n      method: 'GET',\n    }).then((res) => res.json())\n\n    return res\n  }\n\n  return populateFn\n}\n","import type { BlockJSX } from 'payload'\n\n/**\n * @internal\n * @experimental - API may change in minor releases\n */\nexport const codeConverter: BlockJSX = {\n  customEndRegex: {\n    optional: true,\n    regExp: /[ \\t]*```$/,\n  },\n  customStartRegex: /^[ \\t]*```(\\w+)?/,\n  doNotTrimChildren: true,\n  export: ({ fields }) => {\n    const isSingleLine = !fields.code.includes('\\n') && !fields.language?.length\n    if (isSingleLine) {\n      return '```' + fields.code + '```'\n    }\n\n    return '```' + (fields.language || '') + (fields.code ? '\\n' + fields.code : '') + '\\n' + '```'\n  },\n  import: ({ children, closeMatch, openMatch }) => {\n    const language = openMatch?.[1]\n\n    // Removed first and last \\n from children if present\n    if (children.startsWith('\\n')) {\n      children = children.slice(1)\n    }\n    if (children.endsWith('\\n')) {\n      children = children.slice(0, -1)\n    }\n\n    const isSingleLineAndComplete =\n      !!closeMatch && !children.includes('\\n') && openMatch?.input?.trim() !== '```' + language\n\n    if (isSingleLineAndComplete) {\n      return {\n        code: language + (children?.length ? children : ''), // No need to add space to children as they are not trimmed\n        language: '',\n      }\n    }\n\n    return {\n      code: children,\n      language,\n    }\n  },\n}\n","'use client'\n\nimport type { CodeFieldClient, CodeFieldClientProps } from 'payload'\n\nimport { CodeField, useFormFields } from '@payloadcms/ui'\nimport React, { useId, useMemo } from 'react'\n\nimport { defaultLanguages } from './defaultLanguages.js'\n\nexport type AdditionalCodeComponentProps = {\n  /**\n   * @default first key of the `languages` prop\n   */\n  defaultLanguage?: string\n  /**\n   * @default all languages supported by Monaco Editor\n   */\n  languages?: Record<string, string>\n  /**\n   * Override the name of the block.\n   *\n   * @default 'Code'\n   */\n  slug?: string\n  /**\n   * Configure typescript settings for the editor\n   */\n  typescript?: {\n    /**\n     * By default, the editor will not perform semantic validation. This means that\n     * while syntax errors will be highlighted, other issues like missing imports or incorrect\n     * types will not be.\n     *\n     * @default false\n     */\n    enableSemanticValidation?: boolean\n    /**\n     * Additional types to fetch and include in the editor for autocompletion.\n     *\n     * For example, to include types for payload, you would set this to\n     *\n     * [{ url: 'https://unpkg.com/payload@latest/dist/index.d.ts', filePath: 'file:///node_modules/payload/index.d.ts' }]\n     */\n    fetchTypes?: Array<{\n      filePath: string\n      url: string\n    }>\n    /**\n     * @default undefined\n     */\n    paths?: Record<string, string[]>\n    /**\n     * @default \"ESNext\"\n     */\n    target?: string\n    /**\n     * @default ['node_modules/@types']\n     */\n    typeRoots?: string[]\n  }\n}\n\nexport const CodeComponent: React.FC<AdditionalCodeComponentProps & CodeFieldClientProps> = ({\n  autoComplete,\n  field,\n  forceRender,\n  languages = defaultLanguages,\n  path,\n  permissions,\n  readOnly,\n  renderedBlocks,\n  schemaPath,\n  typescript,\n  validate,\n}) => {\n  const languageField = useFormFields(([fields]) => fields['language'])\n\n  const language: string =\n    (languageField?.value as string) || (languageField?.initialValue as string) || 'typescript'\n\n  // unique id per component instance to ensure Monaco creates a distinct model\n  // for each TypeScript code block. Using React's useId is SSR-safe and builtin.\n  const instanceId = useId()\n\n  const label = languages[language]\n\n  const props: CodeFieldClient = useMemo<CodeFieldClient>(\n    () => ({\n      ...field,\n      type: 'code',\n      admin: {\n        ...field.admin,\n        editorOptions: {},\n        editorProps: {\n          // If typescript is set, @monaco-editor/react needs to set the URI to a .ts or .tsx file when it calls createModel().\n          // Provide a unique defaultPath per instance so Monaco doesn't reuse the same model\n          // across multiple code block instances. We use field.name + instanceId for debugability.\n          defaultPath: language === 'ts' ? `file-${field.name}-${instanceId}.tsx` : undefined,\n        },\n        language,\n      },\n    }),\n    [field, language, instanceId],\n  )\n\n  const key = `${field.name}-${language}-${label}`\n\n  return (\n    props && (\n      <CodeField\n        autoComplete={autoComplete}\n        field={props}\n        forceRender={forceRender}\n        key={key}\n        onMount={(_editor, monaco) => {\n          monaco.editor.defineTheme('vs-dark', {\n            base: 'vs-dark',\n            colors: {\n              'editor.background': '#222222',\n            },\n            inherit: true,\n            rules: [],\n          })\n\n          monaco.editor.defineTheme('vs', {\n            base: 'vs',\n            colors: {\n              'editor.background': '#f5f5f5',\n            },\n            inherit: true,\n            rules: [],\n          })\n          monaco.languages.typescript.typescriptDefaults.setCompilerOptions({\n            allowNonTsExtensions: true,\n            // Set module resolution to NodeJs to enable autocompletion\n            allowJs: true,\n            allowSyntheticDefaultImports: true,\n            esModuleInterop: true,\n            jsx: monaco.languages.typescript.JsxEmit.React,\n            moduleResolution: monaco.languages.typescript.ModuleResolutionKind.NodeJs,\n            noEmit: true,\n            paths: typescript?.paths,\n            reactNamespace: 'React',\n            target: monaco.languages.typescript.ScriptTarget[\n              typescript?.target ?? ('ESNext' as any)\n            ] as any,\n            typeRoots: typescript?.typeRoots ?? ['node_modules/@types'],\n          })\n\n          monaco.languages.typescript.typescriptDefaults.setDiagnosticsOptions({\n            noSemanticValidation: typescript?.enableSemanticValidation ? false : true,\n            noSyntaxValidation: false,\n          })\n\n          const run = async () => {\n            if (\n              typescript?.fetchTypes &&\n              Array.isArray(typescript.fetchTypes) &&\n              typescript.fetchTypes.length > 0\n            ) {\n              await Promise.all(\n                typescript.fetchTypes.map(async (type) => {\n                  const types = await fetch(type.url)\n                  const typesText = await types.text()\n                  monaco.languages.typescript.typescriptDefaults.addExtraLib(\n                    typesText,\n                    type.filePath,\n                  )\n                }),\n              )\n            }\n          }\n          void run()\n        }}\n        path={path}\n        permissions={permissions}\n        readOnly={readOnly}\n        renderedBlocks={renderedBlocks}\n        schemaPath={schemaPath}\n        validate={validate}\n      />\n    )\n  )\n}\n","/**\n * Source: https://github.com/microsoft/monaco-editor/tree/main/src/basic-languages\n */\nexport const defaultLanguages: Record<string, string> = {\n  abap: 'ABAP',\n  apex: 'Apex',\n  azcli: 'Azure CLI',\n  bat: 'Batch',\n  bicep: 'Bicep',\n  cameligo: 'CameLIGO',\n  clojure: 'Clojure',\n  coffee: 'CoffeeScript',\n  cpp: 'C++',\n  csharp: 'C#',\n  csp: 'CSP',\n  css: 'CSS',\n  cypher: 'Cypher',\n  dart: 'Dart',\n  dockerfile: 'Dockerfile',\n  ecl: 'ECL',\n  elixir: 'Elixir',\n  flow9: 'Flow9',\n  freemarker2: 'FreeMarker 2',\n  fsharp: 'F#',\n  go: 'Go',\n  graphql: 'GraphQL',\n  handlebars: 'Handlebars',\n  hcl: 'HCL',\n  html: 'HTML',\n  ini: 'INI',\n  java: 'Java',\n  javascript: 'JavaScript',\n  julia: 'Julia',\n  kotlin: 'Kotlin',\n  less: 'Less',\n  lexon: 'Lexon',\n  liquid: 'Liquid',\n  lua: 'Lua',\n  m3: 'M3',\n  markdown: 'Markdown',\n  mdx: 'MDX',\n  mips: 'MIPS',\n  msdax: 'DAX',\n  mysql: 'MySQL',\n  'objective-c': 'Objective-C',\n  pascal: 'Pascal',\n  pascaligo: 'PascaLIGO',\n  perl: 'Perl',\n  pgsql: 'PostgreSQL',\n  php: 'PHP',\n  pla: 'PLA',\n  plaintext: 'Plain Text',\n  postiats: 'Postiats',\n  powerquery: 'Power Query',\n  powershell: 'PowerShell',\n  protobuf: 'Protobuf',\n  pug: 'Pug',\n  python: 'Python',\n  qsharp: 'Q#',\n  r: 'R',\n  razor: 'Razor',\n  redis: 'Redis',\n  redshift: 'Amazon Redshift',\n  restructuredtext: 'reStructuredText',\n  ruby: 'Ruby',\n  rust: 'Rust',\n  sb: 'Small Basic',\n  scala: 'Scala',\n  scheme: 'Scheme',\n  scss: 'SCSS',\n  shell: 'Shell',\n  solidity: 'Solidity',\n  sophia: 'Sophia',\n  sparql: 'SPARQL',\n  sql: 'SQL',\n  st: 'Structured Text',\n  swift: 'Swift',\n  systemverilog: 'SystemVerilog',\n  tcl: 'Tcl',\n  twig: 'Twig',\n  typescript: 'TypeScript',\n  typespec: 'TypeSpec',\n  vb: 'Visual Basic',\n  wgsl: 'WGSL',\n  xml: 'XML',\n  yaml: 'YAML',\n}\n","'use client'\nimport type { ComboboxEntry } from '@payloadcms/ui'\nimport type {} from 'payload'\n\nimport './index.scss'\n\nimport { useLexicalEditable } from '@lexical/react/useLexicalEditable'\nimport {\n  ChevronIcon,\n  Combobox,\n  CopyToClipboard,\n  PopupList,\n  RenderFields,\n  useForm,\n  useFormFields,\n  useTranslation,\n} from '@payloadcms/ui'\nimport React from 'react'\n\nimport type { AdditionalCodeComponentProps } from './Code.js'\n\nimport { CodeBlockIcon } from '../../../../../lexical/ui/icons/CodeBlock/index.js'\nimport { useBlockComponentContext } from '../../../client/component/BlockContent.js'\nimport { Collapse } from './Collapse/index.js'\nimport { defaultLanguages } from './defaultLanguages.js'\nimport { FloatingCollapse } from './FloatingCollapse/index.js'\n\nconst baseClass = 'payload-richtext-code-block'\nexport const CodeBlockBlockComponent: React.FC<Pick<AdditionalCodeComponentProps, 'languages'>> = (\n  args,\n) => {\n  const { languages: languagesFromProps } = args\n  const languages = languagesFromProps || defaultLanguages\n\n  const { BlockCollapsible, formSchema, RemoveButton } = useBlockComponentContext()\n  const { setModified } = useForm()\n  const { t } = useTranslation()\n\n  const { codeField } = useFormFields(([fields]) => ({\n    codeField: fields?.code,\n  }))\n\n  const { selectedLanguageField, setSelectedLanguage } = useFormFields(([fields, dispatch]) => ({\n    selectedLanguageField: fields?.language,\n    setSelectedLanguage: (language: string) => {\n      dispatch({\n        type: 'UPDATE',\n        path: 'language',\n        value: language,\n      })\n      setModified(true)\n    },\n  }))\n\n  const selectedLanguageLabel = languages[selectedLanguageField?.value as keyof typeof languages]\n\n  const isEditable = useLexicalEditable()\n\n  const languageEntries = React.useMemo<ComboboxEntry[]>(() => {\n    return Object.entries(languages).map(([languageCode, languageLabel]) => ({\n      name: `${languageCode} ${languageLabel}`,\n      Component: (\n        <PopupList.Button\n          active={false}\n          disabled={false}\n          onClick={() => {\n            setSelectedLanguage(languageCode)\n          }}\n        >\n          <span className={`${baseClass}__language-code`} data-language={languageCode}>\n            {languageLabel}\n          </span>\n        </PopupList.Button>\n      ),\n    }))\n  }, [languages, setSelectedLanguage])\n\n  return (\n    <BlockCollapsible\n      Actions={\n        <div className={`${baseClass}__actions`}>\n          <Combobox\n            button={\n              <div\n                className={`${baseClass}__language-selector-button`}\n                data-selected-language={selectedLanguageField?.value}\n              >\n                <span>{selectedLanguageLabel}</span>\n                <ChevronIcon className={`${baseClass}__chevron`} />\n              </div>\n            }\n            buttonType=\"custom\"\n            className={`${baseClass}__language-selector`}\n            disabled={!isEditable}\n            entries={languageEntries}\n            horizontalAlign=\"right\"\n            minEntriesForSearch={8}\n            searchPlaceholder={t('fields:searchForLanguage')}\n            showScrollbar\n            size=\"large\"\n          />\n          <CopyToClipboard value={(codeField?.value as string) ?? ''} />\n\n          <Collapse />\n\n          {isEditable && <RemoveButton />}\n        </div>\n      }\n      className={baseClass}\n      collapsibleProps={{\n        AfterCollapsible: <FloatingCollapse />,\n        disableHeaderToggle: true,\n        disableToggleIndicator: true,\n      }}\n      Pill={\n        <div className={`${baseClass}__pill`}>\n          <CodeBlockIcon />\n        </div>\n      }\n    >\n      <RenderFields\n        fields={formSchema}\n        forceRender={true}\n        parentIndexPath=\"\"\n        parentPath={''}\n        parentSchemaPath=\"\"\n        permissions={true}\n        readOnly={!isEditable}\n      />\n    </BlockCollapsible>\n  )\n}\n","'use client'\nimport React from 'react'\n\nexport const CodeBlockIcon: React.FC = () => (\n  <svg fill=\"none\" height=\"12\" viewBox=\"0 0 15 12\" width=\"15\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path\n      d=\"M11.3738 8.62598L14.0404 5.95931L11.3738 3.29264M3.37376 3.29264L0.707092 5.95931L3.37376 8.62598M9.04043 0.625977L5.70709 11.2926\"\n      stroke=\"currentColor\"\n      strokeLinecap=\"square\"\n    />\n  </svg>\n)\n","import React from 'react'\n\nimport './index.scss'\n\nconst baseClass = 'code-block-collapse-button'\nimport { useCollapsible } from '@payloadcms/ui'\n\nimport { CollapseIcon } from '../../../../../../lexical/ui/icons/Collapse/index.js'\n\nexport const Collapse: React.FC = () => {\n  const { toggle } = useCollapsible()\n  return (\n    <button className={baseClass} onClick={toggle} type=\"button\">\n      <CollapseIcon />\n    </button>\n  )\n}\n","'use client'\nimport React from 'react'\n\nexport const CollapseIcon: React.FC = () => (\n  <svg fill=\"none\" height=\"15\" viewBox=\"0 0 15 15\" width=\"15\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path\n      d=\"M7.16667 13.8333V9.83333M7.16667 9.83333L9.16667 11.8333M7.16667 9.83333L5.16667 11.8333M7.16667 4.5V0.5M7.16667 4.5L9.16667 2.5M7.16667 4.5L5.16667 2.5M1.83333 7.16667H0.5M5.83333 7.16667H4.5M9.83333 7.16667H8.5M13.8333 7.16667H12.5\"\n      stroke=\"currentColor\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    />\n  </svg>\n)\n","import React from 'react'\n\nimport './index.scss'\n\nconst baseClass = 'code-block-floating-collapse-button'\nimport { useCollapsible, useTranslation } from '@payloadcms/ui'\n\nimport { CollapseIcon } from '../../../../../../lexical/ui/icons/Collapse/index.js'\n\nexport const FloatingCollapse: React.FC = () => {\n  const { isCollapsed, toggle } = useCollapsible()\n  const { t } = useTranslation()\n\n  if (!isCollapsed) {\n    return null\n  }\n\n  return (\n    <button className={baseClass} onClick={toggle} type=\"button\">\n      <span>{t('general:collapse')}</span>\n      <CollapseIcon />\n    </button>\n  )\n}\n","'use client'\nimport type { RichTextField } from 'payload'\n\nimport {\n  FieldContext,\n  FieldPathContext,\n  type FieldType,\n  type RenderFieldServerFnArgs,\n  ServerFunctionsContext,\n  type ServerFunctionsContextType,\n  ShimmerEffect,\n  useServerFunctions,\n} from '@payloadcms/ui'\nimport React, { useCallback, useEffect, useRef } from 'react'\n\nimport type { DefaultTypedEditorState } from '../../nodeTypes.js'\nimport type { LexicalRichTextField } from '../../types.js'\n\n/**\n * Utility to render a lexical editor on the client.\n *\n * @experimental - may break in minor releases\n * @todo - replace this with a general utility that works for all fields. Maybe merge with packages/ui/src/forms/RenderFields/RenderField.tsx\n */\nexport const RenderLexical: React.FC<\n  /**\n   * If value or setValue, or both, is provided, this component will manage its own value.\n   * If neither is passed, it will rely on the parent form to manage the value.\n   */\n  {\n    /**\n     * Override the loading state while the field component is being fetched and rendered.\n     */\n    Loading?: React.ReactElement\n\n    setValue?: FieldType<DefaultTypedEditorState | undefined>['setValue']\n    value?: FieldType<DefaultTypedEditorState | undefined>['value']\n  } & RenderFieldServerFnArgs<LexicalRichTextField>\n> = (args) => {\n  const { field, initialValue, Loading, path, schemaPath, setValue, value } = args\n  const [Component, setComponent] = React.useState<null | React.ReactNode>(null)\n  const serverFunctionContext = useServerFunctions()\n  const { _internal_renderField } = serverFunctionContext\n\n  const [entityType, entitySlug] = schemaPath.split('.', 2)\n\n  const fieldPath = path ?? (field && 'name' in field ? field?.name : '') ?? ''\n\n  const renderLexical = useCallback(() => {\n    async function render() {\n      const { Field } = await _internal_renderField({\n        field: {\n          ...((field as RichTextField) || {}),\n          type: 'richText',\n          admin: {\n            ...((field as RichTextField)?.admin || {}),\n            // When using \"fake\" anchor fields, hidden is often set to true. We need to override that here to ensure the field is rendered.\n            hidden: false,\n          },\n        },\n        initialValue: initialValue ?? undefined,\n        path,\n        schemaPath,\n      })\n\n      setComponent(Field)\n    }\n    void render()\n  }, [_internal_renderField, schemaPath, path, field, initialValue])\n\n  const mounted = useRef(false)\n\n  useEffect(() => {\n    if (mounted.current) {\n      return\n    }\n    mounted.current = true\n    void renderLexical()\n  }, [renderLexical])\n\n  if (!Component) {\n    return typeof Loading !== 'undefined' ? Loading : <ShimmerEffect />\n  }\n\n  /**\n   * By default, the lexical will make form state requests (e.g. to get drawer fields), passing in the arguments\n   * of the current field. However, we need to override those arguments to get it to make requests based on the\n   * *target* field. The server only knows the schema map of the target field.\n   */\n  const adjustedServerFunctionContext: ServerFunctionsContextType = {\n    ...serverFunctionContext,\n    getFormState: async (getFormStateArgs) => {\n      return serverFunctionContext.getFormState({\n        ...getFormStateArgs,\n        collectionSlug: entityType === 'collection' ? entitySlug : undefined,\n        globalSlug: entityType === 'global' ? entitySlug : undefined,\n      })\n    },\n  }\n\n  if (typeof value === 'undefined' && !setValue) {\n    return (\n      <ServerFunctionsContext value={{ ...adjustedServerFunctionContext }}>\n        <FieldPathContext key={fieldPath} value={fieldPath}>\n          {Component}\n        </FieldPathContext>\n      </ServerFunctionsContext>\n    )\n  }\n\n  const fieldValue: FieldType<DefaultTypedEditorState | undefined> = {\n    disabled: false,\n    formInitializing: false,\n    formProcessing: false,\n    formSubmitted: false,\n    initialValue: value,\n    path: fieldPath,\n    setValue: setValue ?? (() => undefined),\n    showError: false,\n    value,\n  }\n\n  return (\n    <ServerFunctionsContext value={{ ...adjustedServerFunctionContext }}>\n      <FieldPathContext key={fieldPath} value={fieldPath}>\n        <FieldContext value={fieldValue}>{Component}</FieldContext>\n      </FieldPathContext>\n    </ServerFunctionsContext>\n  )\n}\n","import type { SerializedLexicalNode } from 'lexical'\n\nimport type { DefaultNodeTypes, DefaultTypedEditorState, TypedEditorState } from '../nodeTypes.js'\n\n/**\n * Helper to build lexical editor state JSON from text and/or nodes.\n *\n * @param nodes - The nodes to include in the editor state. If you pass the `text` argument, this will append your nodes after the first paragraph node.\n * @param text - The text content to include in the editor state. This will create a paragraph node with a text node for you and set that as the first node.\n * @returns The constructed editor state JSON.\n *\n * @example\n *\n * just passing text:\n *\n * ```ts\n * const editorState = buildEditorState<DefaultNodeTypes>({ text: 'Hello world' }) // result typed as DefaultTypedEditorState\n * ```\n *\n * @example\n *\n * passing nodes:\n *\n * ```ts\n * const editorState = // result typed as TypedEditorState<DefaultNodeTypes | SerializedBlockNode> (or TypedEditorState<SerializedBlockNode>)\n * buildEditorState<DefaultNodeTypes | SerializedBlockNode>({ // or just buildEditorState<SerializedBlockNode> if you *only* want to allow block nodes\n *   nodes: [\n *     {\n *       type: 'block',\n *        fields: {\n *          id: 'id',\n *          blockName: 'Cool block',\n *          blockType: 'myBlock',\n *        },\n *        format: 'left',\n *        version: 1,\n *      }\n *   ],\n * })\n * ```\n */\nexport function buildEditorState<T extends SerializedLexicalNode>({\n  nodes,\n  text,\n}: {\n  nodes?: TypedEditorState<T>['root']['children']\n  text?: string\n}): TypedEditorState<T> {\n  const editorJSON: DefaultTypedEditorState = {\n    root: {\n      type: 'root',\n      children: [],\n      direction: 'ltr',\n      format: '',\n      indent: 0,\n      version: 1,\n    },\n  }\n\n  if (text) {\n    editorJSON.root.children.push({\n      type: 'paragraph',\n      children: [\n        {\n          type: 'text',\n          detail: 0,\n          format: 0,\n          mode: 'normal',\n          style: '',\n          text,\n          version: 1,\n        },\n      ],\n      direction: 'ltr',\n      format: '',\n      indent: 0,\n      textFormat: 0,\n      textStyle: '',\n      version: 1,\n    })\n  }\n\n  if (nodes?.length) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    editorJSON.root.children.push(...(nodes as any))\n  }\n\n  return editorJSON as TypedEditorState<T>\n}\n\n/**\n *\n * Alias for `buildEditorState<DefaultNodeTypes>`\n *\n * @experimental this API may change or be removed in a minor release\n * @internal\n */\nexport const buildDefaultEditorState: typeof buildEditorState<DefaultNodeTypes> =\n  buildEditorState<DefaultNodeTypes>\n"],"names":["slashMenuBasicGroupWithItems", "items", "key", "label", "i18n", "t", "$isElementNode", "$isRangeSelection", "FORMAT_ELEMENT_COMMAND", "AlignCenterIcon", "_jsxs", "className", "fill", "focusable", "height", "viewBox", "width", "xmlns", "_jsx", "d", "stroke", "strokeWidth", "AlignJustifyIcon", "_jsxs", "className", "fill", "focusable", "height", "viewBox", "width", "xmlns", "_jsx", "d", "stroke", "strokeWidth", "AlignLeftIcon", "_jsxs", "className", "fill", "focusable", "height", "viewBox", "width", "xmlns", "_jsx", "d", "stroke", "strokeWidth", "AlignRightIcon", "_jsxs", "className", "fill", "focusable", "height", "viewBox", "width", "xmlns", "_jsx", "d", "stroke", "strokeWidth", "createClientFeature", "feature", "props", "featureProviderClient", "clientFeatureProps", "config", "featureClientImportMap", "featureClientSchemaMap", "featureProviderMap", "field", "resolvedFeatures", "schemaPath", "unSanitizedEditorConfig", "toReturn", "sanitizedClientFeatureProps", "newFeature", "toolbarAlignGroupWithItems", "items", "type", "ChildComponent", "AlignLeftIcon", "key", "order", "toolbarGroups", "toolbarAlignGroupWithItems", "ChildComponent", "AlignLeftIcon", "isActive", "selection", "$isRangeSelection", "node", "getNodes", "$isElementNode", "getFormatType", "parent", "getParent", "key", "label", "i18n", "t", "onSelect", "editor", "dispatchCommand", "FORMAT_ELEMENT_COMMAND", "order", "AlignCenterIcon", "AlignRightIcon", "AlignJustifyIcon", "AlignFeatureClient", "createClientFeature", "toolbarFixed", "groups", "toolbarInline", "$createQuoteNode", "$isQuoteNode", "QuoteNode", "$setBlocksType", "$getSelection", "$isRangeSelection", "BlockquoteIcon", "_jsx", "className", "fill", "focusable", "height", "viewBox", "width", "xmlns", "d", "TextIcon", "_jsx", "className", "fill", "focusable", "height", "viewBox", "width", "xmlns", "d", "toolbarTextDropdownGroupWithItems", "items", "type", "ChildComponent", "TextIcon", "key", "order", "$createQuoteNode", "$isQuoteNode", "QuoteNode", "MarkdownTransformer", "type", "dependencies", "export", "node", "exportChildren", "lines", "split", "output", "line", "push", "join", "regExp", "replace", "parentNode", "children", "_match", "isImport", "previousNode", "getPreviousSibling", "splice", "getChildrenSize", "select", "remove", "append", "toolbarGroups", "toolbarTextDropdownGroupWithItems", "ChildComponent", "BlockquoteIcon", "isActive", "selection", "$isRangeSelection", "node", "getNodes", "$isQuoteNode", "getParent", "key", "label", "i18n", "t", "onSelect", "editor", "update", "$getSelection", "$setBlocksType", "$createQuoteNode", "order", "BlockquoteFeatureClient", "createClientFeature", "markdownTransformers", "MarkdownTransformer", "nodes", "QuoteNode", "slashMenu", "groups", "slashMenuBasicGroupWithItems", "Icon", "keywords", "toolbarFixed", "toolbarInline", "getTranslation", "BlockIcon", "_jsxs", "className", "fill", "focusable", "height", "viewBox", "width", "xmlns", "_jsx", "rx", "stroke", "x", "y", "InlineBlocksIcon", "_jsx", "className", "fill", "focusable", "height", "viewBox", "width", "xmlns", "clipRule", "d", "fillRule", "getBlockImageComponent", "imageURL", "imageAltText", "_jsx", "alt", "className", "src", "style", "maxHeight", "maxWidth", "BlockIcon", "$parseSerializedNode", "JSOX", "extractPropsFromJSXPropsString", "propsString", "props", "key", "collectingKey", "i", "length", "char", "result", "handleValue", "value", "newIndex", "startIndex", "handleQuotedString", "handleObject", "handleArray", "handleUnquotedString", "bracketCount", "parse", "isSingleQuoted", "parseObject", "objString", "replace", "propsToJSXString", "props", "propsArray", "key", "value", "Object", "entries", "push", "escapeQuotes", "Array", "isArray", "map", "v", "JSON", "stringify", "replacer", "join", "str", "replace", "linesFromStartToContentAndPropsString", "isEndOptional", "lines", "regexpEndRegex", "startLineIndex", "startMatch", "trimChildren", "propsString", "content", "linesCopy", "slice", "isWithinContent", "contentSubTagStartAmount", "bracketCount", "quoteChar", "isSelfClosing", "isWithinCodeBlockAmount", "beforeStartLine", "index", "endlineLastCharIndex", "endLineIndex", "mainLoop", "lineIndex", "lineCopy", "entries", "line", "trim", "amountOfBeginningSpacesRemoved", "i", "length", "charIndex", "char", "nextChar", "match", "undefined", "Error", "join", "JSON", "stringify", "afterEndLine", "ObjectID", "$applyNodeReplacement", "DecoratorBlockNode", "addClassNamesToElement", "ObjectID", "$applyNodeReplacement", "ServerBlockNode", "__cacheBuster", "__fields", "constructor", "cacheBuster", "fields", "format", "key", "clone", "node", "__format", "__key", "getType", "importDOM", "importJSON", "serializedNode", "version", "data", "$createServerBlockNode", "setFormat", "isInline", "createDOM", "config", "element", "document", "createElement", "theme", "block", "decorate", "editor", "exportDOM", "text", "createTextNode", "getTextContent", "append", "exportJSON", "type", "getFields", "getCacheBuster", "getLatest", "setFields", "preventFormStateUpdate", "writable", "getWritable", "id", "default", "toHexString", "useLexicalComposerContext", "useLexicalEditable", "getTranslation", "Button", "Collapsible", "Drawer", "EditDepthProvider", "ErrorPill", "Form", "formatDrawerSlug", "FormSubmit", "Pill", "RenderFields", "SectionTitle", "useConfig", "useDocumentForm", "useDocumentInfo", "useEditDepth", "useFormSubmitted", "useServerFunctions", "useTranslation", "abortAndIgnore", "$getNodeByKey", "deepCopyObjectSimpleWithoutReactComponents", "reduceFieldsToValues", "React", "useCallback", "useEffect", "useMemo", "useRef", "v4", "uuid", "c", "_c", "useLexicalEditable", "RenderFields", "useFormSubmitted", "React", "createContext", "BlockComponentContext", "baseClass", "BlockCollapsible", "BlockDrawer", "CustomBlock", "EditButton", "errorCount", "formSchema", "initialState", "nodeKey", "RemoveButton", "useBlockComponentContext", "use", "BlockContent", "props", "$", "Collapsible", "contextProps", "fieldHasErrors", "isEditable", "t0", "props_0", "children", "rest", "_jsx", "CollapsibleWithErrorProps", "_jsxs", "value", "fields", "forceRender", "parentIndexPath", "parentPath", "parentSchemaPath", "permissions", "readOnly", "removeEmptyArrayValues", "fields", "key", "field", "Array", "isArray", "rows", "disableFormData", "BlockComponent", "props", "cacheBuster", "className", "baseClass", "formData", "nodeKey", "submitted", "useFormSubmitted", "id", "collectionSlug", "globalSlug", "useDocumentInfo", "fieldProps", "featureClientSchemaMap", "field", "parentLexicalRichTextField", "initialLexicalFormState", "schemaPath", "uuid", "uuidFromContext", "useEditorConfigContext", "fields", "parentDocumentFields", "useDocumentForm", "onChangeAbortControllerRef", "useRef", "AbortController", "editDepth", "useEditDepth", "errorCount", "setErrorCount", "React", "useState", "config", "useConfig", "drawerSlug", "formatDrawerSlug", "slug", "depth", "toggleDrawer", "useLexicalDrawer", "getDocPreferences", "setDocFieldPreferences", "editor", "useLexicalComposerContext", "isEditable", "useLexicalEditable", "blockType", "getFormState", "useServerFunctions", "schemaFieldsPath", "initialState", "setInitialState", "cachedFormState", "formState", "Object", "fromEntries", "entries", "map", "fieldName", "fieldState", "initialValue", "value", "hasMounted", "prevCacheBuster", "useEffect", "current", "CustomLabel", "setCustomLabel", "customComponents", "BlockLabel", "undefined", "CustomBlock", "setCustomBlock", "Block", "abortController", "state", "data", "docPermissions", "docPreferences", "documentFormState", "deepCopyObjectSimpleWithoutReactComponents", "initialBlockData", "operation", "readOnly", "renderAllFields", "signal", "blockName", "passesCondition", "valid", "newFormStateData", "reduceFieldsToValues", "update", "node", "$getNodeByKey", "$isBlockNode", "newData", "setFields", "_components", "abortAndIgnore", "isCollapsed", "setIsCollapsed", "collapsed", "componentMapRenderedBlockPath", "blocksField", "clientBlock", "blockReferences", "blocksMap", "blocks", "i18n", "t", "useTranslation", "onChange", "useCallback", "prevFormState", "submit", "controller", "newFormState", "initialBlockFormState", "removeEmptyArrayValues", "setTimeout", "rowErrorCount", "formField", "values", "removeBlock", "remove", "blockDisplayName", "labels", "singular", "getTranslation", "onCollapsedChange", "changedCollapsed", "then", "currentDocPreferences", "collapsedArray", "name", "newCollapsed", "length", "includes", "push", "splice", "indexOf", "hello", "EditButton", "useMemo", "_jsx", "Button", "buttonStyle", "disabled", "el", "icon", "onClick", "e", "preventDefault", "stopPropagation", "onMouseDown", "round", "size", "tooltip", "label", "RemoveButton", "BlockCollapsible", "Actions", "children", "collapsibleProps", "disableBlockName", "editButton", "fieldHasErrors", "Label", "Pill", "CustomPill", "removeButton", "Collapsible", "filter", "Boolean", "join", "collapsibleStyle", "header", "_jsxs", "pillStyle", "admin", "SectionTitle", "path", "ErrorPill", "count", "withMessage", "_Fragment", "onToggle", "incomingCollapsedState", "blockID", "BlockDrawer", "EditDepthProvider", "Drawer", "title", "RenderFields", "forceRender", "parentIndexPath", "parentPath", "parentSchemaPath", "permissions", "FormSubmit", "programmaticSubmit", "Form", "beforeSubmit", "onSubmit", "BlockContent", "formSchema", "BlockNode", "ServerBlockNode", "clone", "node", "getType", "importJSON", "serializedNode", "version", "fields", "data", "$createBlockNode", "setFormat", "format", "decorate", "_editor", "config", "_jsx", "BlockComponent", "cacheBuster", "getCacheBuster", "className", "theme", "block", "formData", "getFields", "nodeKey", "getKey", "exportJSON", "$applyNodeReplacement", "id", "ObjectID", "default", "toHexString", "$isBlockNode", "createHeadlessEditor", "getLexicalToMarkdown", "allNodes", "allTransformers", "lexicalToMarkdown", "editorState", "headlessEditor", "createHeadlessEditor", "nodes", "setEditorState", "parseEditorState", "e", "console", "error", "markdown", "getEditorState", "read", "$convertToMarkdownString", "createHeadlessEditor", "getMarkdownToLexical", "allNodes", "allTransformers", "markdownToLexical", "markdown", "headlessEditor", "createHeadlessEditor", "nodes", "update", "$convertFromMarkdownString", "discrete", "getEditorState", "toJSON", "createTagRegexes", "tagName", "escapedTagName", "replace", "regExpEnd", "RegExp", "regExpStart", "getBlockMarkdownTransformers", "blocks", "inlineBlocks", "length", "transformers", "block", "transformer", "getMarkdownTransformerForBlock", "concat", "isInlineBlock", "jsx", "regex", "slug", "toReturn", "push", "allNodes", "allTransformers", "type", "dependencies", "InlineBlockNode", "export", "node", "$isInlineBlockNode", "getFields", "blockType", "toLowerCase", "nodeFields", "lexicalToMarkdown", "getLexicalToMarkdown", "exportResult", "fields", "hasProps", "props", "Object", "keys", "children", "propsToJSXString", "getEndIndex", "match", "endlineLastCharIndex", "linesFromStartToContentAndPropsString", "isEndOptional", "lines", "getTextContent", "regexpEndRegex", "startLineIndex", "startMatch", "trimChildren", "importRegExp", "customStartRegex", "regExp", "content", "propsString", "index", "import", "markdownToLexical", "getMarkdownToLexical", "blockFields", "closeMatch", "htmlToLexical", "openMatch", "extractPropsFromJSXPropsString", "inlineBlockNode", "$createInlineBlockNode", "BlockNode", "$isBlockNode", "sanitizedChildren", "includes", "child", "split", "sanitizedChild", "doNotTrimChildren", "handleImportAfterStartMatch", "customEndRegex", "undefined", "rootNode", "optional", "afterEndLine", "beforeStartLine", "unsanitizedContent", "endLineIndex", "endsWith", "slice", "startsWith", "$createBlockNode", "prevNodes", "nextNodes", "markdown", "root", "firstPrevNode", "append", "$parseSerializedNode", "lastChild", "getChildren", "linesInBetween", "line", "childrenString", "join", "trim", "createCommand", "INSERT_BLOCK_COMMAND", "INSERT_INLINE_BLOCK_COMMAND", "c", "_c", "useLexicalComposerContext", "$insertNodeToNearestRoot", "$wrapNodeInElement", "mergeRegister", "formatDrawerSlug", "useEditDepth", "$createParagraphNode", "$getNodeByKey", "$getPreviousSelection", "$getSelection", "$insertNodes", "$isParagraphNode", "$isRangeSelection", "$isRootOrShadowRoot", "COMMAND_PRIORITY_EDITOR", "useEffect", "useState", "BlocksPlugin", "$", "_c", "editor", "useLexicalComposerContext", "targetNodeKey", "setTargetNodeKey", "useState", "setCreatedInlineBlock", "uuid", "useEditorConfigContext", "editDepth", "useEditDepth", "t0", "t1", "formatDrawerSlug", "slug", "depth", "drawerSlug", "toggleDrawer", "useLexicalDrawer", "t2", "hasNodes", "BlockNode", "Error", "mergeRegister", "registerCommand", "INSERT_BLOCK_COMMAND", "payload", "update", "selection", "$getSelection", "$getPreviousSelection", "$isRangeSelection", "blockNode", "$createBlockNode", "focus", "focusNode", "getNode", "$insertNodeToNearestRoot", "$isParagraphNode", "__first", "remove", "COMMAND_PRIORITY_EDITOR", "INSERT_INLINE_BLOCK_COMMAND", "fields", "node", "$getNodeByKey", "$isInlineBlockNode", "setFields", "inlineBlockNode", "$createInlineBlockNode", "$insertNodes", "$isRootOrShadowRoot", "getParentOrThrow", "$wrapNodeInElement", "$createParagraphNode", "selectEnd", "t3", "useEffect", "BlocksFeatureClient", "createClientFeature", "config", "featureClientSchemaMap", "props", "schemaPath", "schemaMapRenderedBlockPathPrefix", "schemaMapRenderedInlineBlockPathPrefix", "clientSchema", "blocksFields", "Object", "entries", "filter", "key", "startsWith", "replace", "includes", "map", "value", "inlineBlocksFields", "clientBlocks", "field", "blockReferences", "blocksMap", "blocks", "block", "undefined", "clientInlineBlocks", "markdownTransformers", "getBlockMarkdownTransformers", "inlineBlocks", "nodes", "BlockNode", "InlineBlockNode", "plugins", "Component", "BlocksPlugin", "position", "sanitizedClientFeatureProps", "slashMenu", "groups", "length", "items", "Icon", "getBlockImageComponent", "imageURL", "imageAltText", "slug", "keywords", "label", "i18n", "labels", "singular", "getTranslation", "onSelect", "editor", "dispatchCommand", "INSERT_BLOCK_COMMAND", "blockName", "blockType", "t", "inlineBlock", "InlineBlocksIcon", "INSERT_INLINE_BLOCK_COMMAND", "Boolean", "toolbarFixed", "type", "ChildComponent", "BlockIcon", "index", "isActive", "order", "c", "_c", "useLexicalComposerContext", "$createParagraphNode", "$createTextNode", "$getRoot", "getDOMSelection", "React", "useCallback", "useEffect", "useLayoutEffect", "useRef", "useState", "documentMode", "CAN_USE_DOM", "document", "IS_APPLE", "test", "navigator", "platform", "IS_FIREFOX", "userAgent", "CAN_USE_BEFORE_INPUT", "window", "InputEvent", "IS_SAFARI", "IS_IOS", "MSStream", "IS_ANDROID", "IS_WINDOWS", "IS_CHROME", "IS_APPLE_WEBKIT", "copy", "text", "textArea", "document", "createElement", "value", "style", "position", "opacity", "body", "appendChild", "focus", "select", "result", "execCommand", "console", "log", "error", "removeChild", "download", "filename", "a", "setAttribute", "encodeURIComponent", "display", "click", "formatStep", "step", "formattedStep", "formatOneStep", "name", "x", "y", "anchorPath", "toString", "anchorOffset", "focusPath", "focusOffset", "count", "join", "isSelectAll", "event", "key", "toLowerCase", "IS_APPLE", "metaKey", "ctrlKey", "sanitizeSelection", "selection", "anchorNode", "focusNode", "getPathFromNodeToEditor", "node", "rootElement", "currentNode", "path", "unshift", "Array", "from", "parentNode", "childNodes", "indexOf", "keyPresses", "Set", "useTestRecorder", "editor", "steps", "setSteps", "useState", "isRecording", "setIsRecording", "setCurrentInnerHTML", "templatedTest", "setTemplatedTest", "previousSelectionRef", "useRef", "skipNextSelectionChangeRef", "preRef", "getCurrentEditor", "useCallback", "generateTestContent", "getRootElement", "browserSelection", "getDOMSelection", "_window", "contains", "map", "pushStep", "currentSteps", "currentIndex", "length", "lastStep", "slice", "useLayoutEffect", "onKeyDown", "has", "onKeyUp", "registerRootListener", "prevRootElement", "removeEventListener", "addEventListener", "current", "scrollTo", "scrollHeight", "useEffect", "testContent", "registerUpdateListener", "dirtyElements", "dirtyLeaves", "editorState", "currentSelection", "_selection", "previousSelection", "skipNextSelectionChange", "size", "innerHTML", "toggleEditorSelection", "currentEditor", "update", "root", "$getRoot", "clear", "$createTextNode", "append", "$createParagraphNode", "currentIsRecording", "onSnapshotClick", "onCopyClick", "onDownloadClick", "_jsx", "className", "id", "onClick", "e", "preventDefault", "title", "type", "_jsxs", "ref", "TestRecorderPlugin", "$", "_c", "useLexicalComposerContext", "testRecorderButton", "testRecorderOutput", "t0", "Fragment", "children", "TestRecorderFeatureClient", "createClientFeature", "plugins", "Component", "TestRecorderPlugin", "position", "c", "_c", "useLexicalComposerContext", "TreeView", "TreeViewPlugin", "$", "editor", "t0", "_jsx", "timeTravelButtonClassName", "timeTravelPanelButtonClassName", "timeTravelPanelClassName", "timeTravelPanelSliderClassName", "treeTypeButtonClassName", "viewClassName", "TreeViewFeatureClient", "createClientFeature", "plugins", "Component", "TreeViewPlugin", "position", "$isTableSelection", "$isRangeSelection", "FORMAT_TEXT_COMMAND", "BoldIcon", "_jsx", "className", "fill", "focusable", "height", "viewBox", "width", "xmlns", "d", "toolbarFormatGroupWithItems", "items", "type", "key", "order", "BOLD_ITALIC_STAR", "type", "format", "tag", "BOLD_ITALIC_UNDERSCORE", "intraword", "BOLD_STAR", "BOLD_UNDERSCORE", "toolbarGroups", "toolbarFormatGroupWithItems", "ChildComponent", "BoldIcon", "isActive", "selection", "$isRangeSelection", "$isTableSelection", "hasFormat", "key", "onSelect", "editor", "dispatchCommand", "FORMAT_TEXT_COMMAND", "order", "BoldFeatureClient", "createClientFeature", "featureProviderMap", "markdownTransformers", "BOLD_STAR", "BOLD_UNDERSCORE", "get", "push", "BOLD_ITALIC_UNDERSCORE", "BOLD_ITALIC_STAR", "enableFormats", "toolbarFixed", "groups", "toolbarInline", "$isTableSelection", "$isRangeSelection", "FORMAT_TEXT_COMMAND", "CodeIcon", "_jsxs", "className", "fill", "focusable", "height", "viewBox", "width", "xmlns", "_jsx", "d", "stroke", "INLINE_CODE", "type", "format", "tag", "toolbarGroups", "toolbarFormatGroupWithItems", "ChildComponent", "CodeIcon", "isActive", "selection", "$isRangeSelection", "$isTableSelection", "hasFormat", "key", "onSelect", "editor", "dispatchCommand", "FORMAT_TEXT_COMMAND", "order", "InlineCodeFeatureClient", "createClientFeature", "enableFormats", "markdownTransformers", "INLINE_CODE", "toolbarFixed", "groups", "toolbarInline", "$isTableSelection", "$isRangeSelection", "FORMAT_TEXT_COMMAND", "ItalicIcon", "_jsx", "className", "fill", "focusable", "height", "viewBox", "width", "xmlns", "d", "ITALIC_STAR", "type", "format", "tag", "ITALIC_UNDERSCORE", "intraword", "toolbarGroups", "toolbarFormatGroupWithItems", "ChildComponent", "ItalicIcon", "isActive", "selection", "$isRangeSelection", "$isTableSelection", "hasFormat", "key", "onSelect", "editor", "dispatchCommand", "FORMAT_TEXT_COMMAND", "order", "ItalicFeatureClient", "createClientFeature", "enableFormats", "markdownTransformers", "ITALIC_STAR", "ITALIC_UNDERSCORE", "toolbarFixed", "groups", "toolbarInline", "$isTableSelection", "$isRangeSelection", "FORMAT_TEXT_COMMAND", "StrikethroughIcon", "_jsxs", "className", "fill", "focusable", "height", "viewBox", "width", "xmlns", "_jsx", "d", "STRIKETHROUGH", "type", "format", "tag", "toolbarGroups", "toolbarFormatGroupWithItems", "ChildComponent", "StrikethroughIcon", "isActive", "selection", "$isRangeSelection", "$isTableSelection", "hasFormat", "key", "onSelect", "editor", "dispatchCommand", "FORMAT_TEXT_COMMAND", "order", "StrikethroughFeatureClient", "createClientFeature", "enableFormats", "markdownTransformers", "STRIKETHROUGH", "toolbarFixed", "groups", "toolbarInline", "$isTableSelection", "$isRangeSelection", "FORMAT_TEXT_COMMAND", "SubscriptIcon", "_jsx", "className", "fill", "focusable", "height", "viewBox", "width", "xmlns", "d", "toolbarGroups", "toolbarFormatGroupWithItems", "ChildComponent", "SubscriptIcon", "isActive", "selection", "$isRangeSelection", "$isTableSelection", "hasFormat", "key", "onSelect", "editor", "dispatchCommand", "FORMAT_TEXT_COMMAND", "order", "SubscriptFeatureClient", "createClientFeature", "enableFormats", "toolbarFixed", "groups", "toolbarInline", "$isTableSelection", "$isRangeSelection", "FORMAT_TEXT_COMMAND", "SuperscriptIcon", "_jsx", "className", "fill", "focusable", "height", "viewBox", "width", "xmlns", "d", "toolbarGroups", "toolbarFormatGroupWithItems", "ChildComponent", "SuperscriptIcon", "isActive", "selection", "$isRangeSelection", "$isTableSelection", "hasFormat", "key", "onSelect", "editor", "dispatchCommand", "FORMAT_TEXT_COMMAND", "order", "SuperscriptFeatureClient", "createClientFeature", "enableFormats", "toolbarFixed", "groups", "toolbarInline", "$isTableSelection", "$isRangeSelection", "FORMAT_TEXT_COMMAND", "UnderlineIcon", "_jsxs", "className", "fill", "focusable", "height", "viewBox", "width", "xmlns", "_jsx", "d", "toolbarGroups", "toolbarFormatGroupWithItems", "ChildComponent", "UnderlineIcon", "isActive", "selection", "$isRangeSelection", "$isTableSelection", "hasFormat", "key", "onSelect", "editor", "dispatchCommand", "FORMAT_TEXT_COMMAND", "order", "UnderlineFeatureClient", "createClientFeature", "enableFormats", "toolbarFixed", "groups", "toolbarInline", "kebabToCamelCase", "str", "replace", "_", "letter", "toUpperCase", "TextStateIcon", "css", "convertedCss", "Object", "fromEntries", "entries", "map", "key", "value", "_jsx", "style", "alignItems", "borderRadius", "display", "fontSize", "height", "justifyContent", "width", "useLexicalComposerContext", "$forEachSelectedTextNode", "$getNodeByKey", "$getState", "$setState", "createState", "TextNode", "useEffect", "registerTextStates", "state", "stateMap", "Map", "stateKey", "stateValues", "stateConfig", "parse", "value", "Object", "keys", "includes", "undefined", "set", "setTextState", "editor", "update", "textNode", "stateMapEntry", "get", "Error", "StatePlugin", "registerMutationListener", "mutatedNodes", "getEditorState", "read", "nodeKey", "mutation", "node", "dom", "getElementByKey", "mergedStyles", "create", "forEach", "stateEntry", "stateValue", "dataset", "css", "assign", "style", "cssText", "toolbarGroups", "props", "stateMap", "items", "stateKey", "state", "key", "stateValue", "meta", "push", "ChildComponent", "_jsx", "TextStateIcon", "css", "label", "onSelect", "editor", "setTextState", "type", "color", "i18n", "t", "undefined", "order", "TextStateFeatureClient", "createClientFeature", "registerTextStates", "plugins", "Component", "StatePlugin", "position", "toolbarFixed", "groups", "toolbarInline", "c", "_c", "useLexicalComposerContext", "$createHeadingNode", "$isHeadingNode", "HeadingNode", "$setBlocksType", "$getSelection", "$isRangeSelection", "useEffect", "H1Icon", "_jsx", "className", "fill", "focusable", "height", "viewBox", "width", "xmlns", "d", "H2Icon", "_jsx", "className", "fill", "focusable", "height", "viewBox", "width", "xmlns", "d", "H3Icon", "_jsx", "className", "fill", "focusable", "height", "viewBox", "width", "xmlns", "d", "H4Icon", "_jsx", "className", "fill", "focusable", "height", "viewBox", "width", "xmlns", "d", "H5Icon", "_jsx", "className", "fill", "focusable", "height", "viewBox", "width", "xmlns", "d", "H6Icon", "_jsx", "className", "fill", "focusable", "height", "viewBox", "width", "xmlns", "d", "$createHeadingNode", "$isHeadingNode", "HeadingNode", "createBlockNode", "createNode", "parentNode", "children", "match", "node", "append", "replace", "select", "MarkdownTransformer", "enabledHeadingSizes", "pattern", "map", "tag", "Number", "slice", "size", "join", "regExp", "RegExp", "type", "dependencies", "HeadingNode", "export", "node", "exportChildren", "$isHeadingNode", "level", "getTag", "repeat", "replace", "createBlockNode", "match", "length", "$createHeadingNode", "$setHeading", "headingSize", "selection", "$getSelection", "$setBlocksType", "$createHeadingNode", "iconImports", "h1", "H1Icon", "h2", "H2Icon", "h3", "H3Icon", "h4", "H4Icon", "h5", "H5Icon", "h6", "H6Icon", "HeadingFeatureClient", "createClientFeature", "props", "enabledHeadingSizes", "toolbarGroups", "toolbarTextDropdownGroupWithItems", "map", "i", "ChildComponent", "isActive", "$isRangeSelection", "node", "getNodes", "$isHeadingNode", "getTag", "parent", "getParent", "key", "label", "i18n", "t", "headingLevel", "charAt", "onSelect", "editor", "update", "order", "markdownTransformers", "MarkdownTransformer", "nodes", "HeadingNode", "plugins", "Component", "HeadingPlugin", "position", "sanitizedClientFeatureProps", "slashMenu", "groups", "length", "slashMenuBasicGroupWithItems", "Icon", "keywords", "toolbarFixed", "toolbarInline", "t0", "$", "_c", "clientProps", "t1", "t2", "undefined", "t3", "at", "lowestAllowed", "useLexicalComposerContext", "t4", "t5", "registerNodeTransform", "includes", "setTag", "useEffect", "$isNodeSelection", "HorizontalRuleIcon", "_jsx", "className", "fill", "focusable", "height", "viewBox", "width", "xmlns", "x", "y", "AddIcon", "_jsxs", "fill", "height", "viewBox", "width", "xmlns", "_jsx", "d", "stroke", "toolbarAddDropdownGroupWithItems", "items", "type", "ChildComponent", "AddIcon", "key", "order", "addClassNamesToElement", "$applyNodeReplacement", "createCommand", "DecoratorNode", "INSERT_HORIZONTAL_RULE_COMMAND", "HorizontalRuleServerNode", "clone", "node", "__key", "getType", "importDOM", "hr", "conversion", "$convertHorizontalRuleElement", "priority", "importJSON", "serializedNode", "$createHorizontalRuleServerNode", "createDOM", "config", "element", "document", "createElement", "theme", "decorate", "exportDOM", "exportJSON", "type", "version", "getTextContent", "isInline", "updateDOM", "$applyNodeReplacement", "HorizontalRuleNode", "HorizontalRuleServerNode", "clone", "node", "getType", "importJSON", "serializedNode", "$createHorizontalRuleNode", "decorate", "exportJSON", "$createHorizontalRuleNode", "$applyNodeReplacement", "HorizontalRuleNode", "$isHorizontalRuleNode", "node", "MarkdownTransformer", "type", "dependencies", "HorizontalRuleNode", "export", "node", "exportChildren", "$isHorizontalRuleNode", "regExp", "replace", "parentNode", "$createHorizontalRuleNode", "c", "_c", "useLexicalComposerContext", "$insertNodeToNearestRoot", "$getSelection", "$isRangeSelection", "COMMAND_PRIORITY_EDITOR", "useEffect", "HorizontalRulePlugin", "$", "_c", "editor", "useLexicalComposerContext", "t0", "t1", "registerCommand", "INSERT_HORIZONTAL_RULE_COMMAND", "_temp", "COMMAND_PRIORITY_EDITOR", "useEffect", "type", "selection", "$getSelection", "$isRangeSelection", "focus", "getNode", "horizontalRuleNode", "$createHorizontalRuleNode", "$insertNodeToNearestRoot", "HorizontalRuleFeatureClient", "createClientFeature", "markdownTransformers", "MarkdownTransformer", "nodes", "HorizontalRuleNode", "plugins", "Component", "HorizontalRulePlugin", "position", "slashMenu", "groups", "slashMenuBasicGroupWithItems", "Icon", "HorizontalRuleIcon", "key", "keywords", "label", "i18n", "t", "onSelect", "editor", "dispatchCommand", "INSERT_HORIZONTAL_RULE_COMMAND", "undefined", "toolbarFixed", "toolbarAddDropdownGroupWithItems", "ChildComponent", "isActive", "selection", "$isNodeSelection", "getNodes", "length", "firstNode", "$isHorizontalRuleNode", "$findMatchingParent", "$isElementNode", "INDENT_CONTENT_COMMAND", "OUTDENT_CONTENT_COMMAND", "IndentDecreaseIcon", "_jsxs", "className", "fill", "focusable", "height", "viewBox", "width", "xmlns", "_jsx", "d", "stroke", "strokeWidth", "IndentIncreaseIcon", "_jsxs", "className", "fill", "focusable", "height", "viewBox", "width", "xmlns", "_jsx", "d", "stroke", "strokeWidth", "useLexicalComposerContext", "TabIndentationPlugin", "$findMatchingParent", "mergeRegister", "$getSelection", "$isElementNode", "$isRangeSelection", "COMMAND_PRIORITY_LOW", "INDENT_CONTENT_COMMAND", "KEY_TAB_COMMAND", "OUTDENT_CONTENT_COMMAND", "TabNode", "useEffect", "IndentPlugin", "clientProps", "editor", "disabledNodes", "disableTabNode", "length", "registerCommand", "$handleIndentAndOutdent", "block", "includes", "getType", "indent", "getIndent", "setIndent", "registerUpdateListener", "dirtyElements", "editorState", "update", "nodeKey", "node", "_nodeMap", "get", "event", "preventDefault", "dispatchCommand", "shiftKey", "undefined", "registerNodeTransform", "remove", "_jsx", "indentOrOutdent", "selection", "alreadyHandled", "Set", "nodes", "getNodes", "i", "key", "getKey", "has", "parentBlock", "parentNode", "isInline", "parentKey", "canIndent", "add", "size", "toolbarIndentGroupWithItems", "items", "type", "key", "order", "toolbarGroups", "disabledNodes", "toolbarIndentGroupWithItems", "ChildComponent", "IndentDecreaseIcon", "isActive", "isEnabled", "selection", "nodes", "getNodes", "isOutdentable", "node", "isIndentable", "getIndent", "some", "Boolean", "$findMatchingParent", "key", "label", "i18n", "t", "onSelect", "editor", "dispatchCommand", "OUTDENT_CONTENT_COMMAND", "undefined", "order", "IndentIncreaseIcon", "isIndentableAndNotDisabled", "includes", "getType", "INDENT_CONTENT_COMMAND", "IndentFeatureClient", "createClientFeature", "props", "plugins", "Component", "IndentPlugin", "position", "sanitizedClientFeatureProps", "toolbarFixed", "groups", "toolbarInline", "$isElementNode", "canIndent", "$findMatchingParent", "$getSelection", "$isRangeSelection", "LinkIcon", "_jsx", "className", "fill", "height", "viewBox", "width", "xmlns", "d", "stroke", "strokeLinecap", "strokeLinejoin", "$isAtNodeEnd", "getSelectedNode", "selection", "anchor", "focus", "anchorNode", "getNode", "focusNode", "isBackward", "toolbarFeatureButtonsGroupWithItems", "items", "type", "key", "order", "$createTextNode", "addClassNamesToElement", "isHTMLAnchorElement", "ObjectID", "$applyNodeReplacement", "$createTextNode", "$getSelection", "$isElementNode", "$isRangeSelection", "createCommand", "ElementNode", "SUPPORTED_URL_PROTOCOLS", "Set", "LinkNode", "__fields", "__id", "constructor", "id", "fields", "linkType", "newTab", "key", "clone", "node", "__key", "getType", "importDOM", "a", "conversion", "$convertAnchorElement", "priority", "importJSON", "serializedNode", "$createLinkNode", "updateFromJSON", "version", "doc", "value", "default", "toHexString", "canBeEmpty", "canInsertTextAfter", "canInsertTextBefore", "createDOM", "config", "element", "document", "createElement", "href", "sanitizeUrl", "url", "target", "rel", "manageRel", "theme", "link", "exportJSON", "getFields", "returnObject", "type", "getID", "extractWithChild", "child", "selection", "destination", "anchorNode", "anchor", "getNode", "focusNode", "focus", "isParentOf", "getTextContent", "length", "getLatest", "insertNewAfter", "restoreSelection", "getParentOrThrow", "linkNode", "append", "isInline", "parsedUrl", "URL", "has", "protocol", "setFields", "writable", "getWritable", "setID", "updateDOM", "prevNode", "removeAttribute", "domNode", "content", "textContent", "getAttribute", "$isLinkNode", "TOGGLE_LINK_COMMAND", "$toggleLink", "payload", "selectedNodes", "nodes", "extract", "forEach", "parent", "getParent", "getChildren", "insertBefore", "remove", "firstNode", "$getLinkAncestor", "text", "getLastChild", "prevParent", "is", "getPreviousSibling", "insertAfter", "children", "$getAncestor", "ancestor", "predicate", "input", "action", "result", "mutableInput", "includes", "re", "RegExp", "replace", "trim", "LinkMarkdownTransformer", "type", "dependencies", "LinkNode", "export", "_node", "exportChildren", "$isLinkNode", "node", "url", "getFields", "importRegExp", "regExp", "replace", "textNode", "match", "linkText", "linkUrl", "linkNode", "$createLinkNode", "fields", "doc", "linkType", "newTab", "linkTextNode", "$createTextNode", "setFormat", "getFormat", "append", "trigger", "$applyNodeReplacement", "$isElementNode", "AutoLinkNode", "LinkNode", "clone", "node", "id", "fields", "__fields", "key", "__key", "getType", "importDOM", "importJSON", "serializedNode", "$createAutoLinkNode", "updateFromJSON", "version", "doc", "value", "exportJSON", "serialized", "type", "children", "direction", "format", "indent", "insertNewAfter", "selection", "restoreSelection", "element", "getParentOrThrow", "$isElementNode", "linkNode", "append", "setFields", "$applyNodeReplacement", "$isAutoLinkNode", "c", "_c", "useLexicalComposerContext", "mergeRegister", "$createTextNode", "$getSelection", "$isElementNode", "$isLineBreakNode", "$isNodeSelection", "$isRangeSelection", "$isTextNode", "TextNode", "TextNodeValue", "useEffect", "createLinkMatcherWithRegExp", "regExp", "urlTransformer", "text", "match", "exec", "index", "length", "url", "findFirstMatch", "matchers", "matcher", "PUNCTUATION_OR_SPACE", "isSeparator", "char", "undefined", "test", "endsWithSeparator", "textContent", "startsWithSeparator", "startsWithTLD", "isEmail", "isPreviousNodeValid", "node", "previousNode", "getPreviousSibling", "$isElementNode", "getLastDescendant", "$isLineBreakNode", "$isTextNode", "getTextContent", "isNextNodeValid", "nextNode", "getNextSibling", "getFirstDescendant", "isContentAroundIsValid", "matchStart", "matchEnd", "nodes", "extractMatchingNodes", "startIndex", "endIndex", "unmodifiedBeforeNodes", "matchingNodes", "unmodifiedAfterNodes", "matchingOffset", "currentOffset", "currentNodes", "currentNode", "currentNodeLength", "currentNodeStart", "push", "shift", "$createAutoLinkNode_", "fields", "linkType", "linkNode", "$createAutoLinkNode", "remainingTextNode", "linkTextNode", "splitText", "textNode", "$createTextNode", "setFormat", "getFormat", "setDetail", "getDetail", "setStyle", "getStyle", "append", "replace", "firstTextNode", "offset", "firstLinkTextNode", "linkNodes", "forEach", "currentNodeEnd", "endNode", "selection", "$getSelection", "selectedTextNode", "getNodes", "find", "$isRangeSelection", "select", "anchor", "focus", "$isNodeSelection", "$handleLinkCreation", "onChange", "initialText", "map", "join", "invalidMatchEnd", "matchLength", "actualMatchStart", "actualMatchEnd", "substring", "handleLinkEdit", "children", "getChildren", "childrenLength", "i", "child", "isSimpleText", "replaceWithChildren", "getFields", "flds", "setFields", "handleBadNeighbors", "previousSibling", "nextSibling", "$isAutoLinkNode", "isEmailURI", "startsWith", "j", "insertAfter", "remove", "getLatest", "getTextNodesToMatch", "textNodesToMatch", "useAutoLink", "editor", "$", "_c", "t0", "t1", "hasNodes", "AutoLinkNode", "Error", "onChangeWrapped", "prevUrl", "mergeRegister", "registerNodeTransform", "TextNodeValue", "parent", "getParentOrThrow", "previous", "$isLinkNode", "useEffect", "URL_REGEX", "EMAIL_REGEX", "MATCHERS", "AutoLinkPlugin", "useLexicalComposerContext", "ClickableLinkPlugin", "LexicalClickableLinkPlugin", "_jsx", "createPortal", "useLexicalComposerContext", "useLexicalEditable", "$findMatchingParent", "mergeRegister", "getTranslation", "CloseMenuIcon", "EditIcon", "ExternalLinkIcon", "formatDrawerSlug", "useConfig", "useEditDepth", "useLocale", "useTranslation", "requests", "$getSelection", "$isLineBreakNode", "$isRangeSelection", "COMMAND_PRIORITY_HIGH", "COMMAND_PRIORITY_LOW", "getDOMSelection", "KEY_ESCAPE_COMMAND", "SELECTION_CHANGE_COMMAND", "React", "useCallback", "useEffect", "useRef", "useState", "setFloatingElemPositionForLinkEditor", "targetRect", "floatingElem", "anchorElem", "verticalGap", "VERTICAL_GAP", "horizontalOffset", "HORIZONTAL_OFFSET", "scrollerElem", "parentElement", "style", "opacity", "transform", "floatingElemRect", "getBoundingClientRect", "anchorElementRect", "editorScrollerRect", "top", "left", "height", "width", "right", "createCommand", "TOGGLE_LINK_WITH_MODAL_COMMAND", "preventDefault", "event", "LinkEditor", "anchorElem", "editor", "useLexicalComposerContext", "linkNode", "setLinkNode", "useState", "editorRef", "useRef", "linkUrl", "setLinkUrl", "linkLabel", "setLinkLabel", "fieldProps", "schemaPath", "uuid", "useEditorConfigContext", "isEditable", "useLexicalEditable", "config", "getEntityConfig", "useConfig", "i18n", "t", "useTranslation", "stateData", "setStateData", "editDepth", "useEditDepth", "isLink", "setIsLink", "selectedNodes", "setSelectedNodes", "locale", "useLocale", "isAutoLink", "setIsAutoLink", "drawerSlug", "formatDrawerSlug", "slug", "depth", "toggleDrawer", "useLexicalDrawer", "setNotLink", "useCallback", "current", "style", "opacity", "transform", "undefined", "$updateLinkEditor", "selection", "$getSelection", "selectedNodeDomRect", "$isRangeSelection", "focusNode", "getSelectedNode", "getElementByKey", "getKey", "getBoundingClientRect", "focusLinkParent", "$findMatchingParent", "$isLinkNode", "badNode", "getNodes", "filter", "node", "$isLineBreakNode", "find", "is", "fields", "getFields", "data", "id", "getID", "text", "getTextContent", "linkType", "url", "routes", "admin", "doc", "relationTo", "value", "relatedField", "collectionSlug", "label", "String", "collection", "Error", "loadingLabel", "getTranslation", "labels", "singular", "replace", "requests", "get", "serverURL", "api", "headers", "language", "params", "code", "then", "res", "ok", "status", "json", "useAsTitle", "title", "catch", "$isAutoLinkNode", "editorElem", "nativeSelection", "getDOMSelection", "_window", "activeElement", "document", "rootElement", "getRootElement", "contains", "anchorNode", "getRangeAt", "y", "setFloatingElemPositionForLinkEditor", "className", "useEffect", "mergeRegister", "registerCommand", "TOGGLE_LINK_WITH_MODAL_COMMAND", "payload", "dispatchCommand", "TOGGLE_LINK_COMMAND", "COMMAND_PRIORITY_LOW", "scrollerElem", "parentElement", "update", "getEditorState", "read", "window", "addEventListener", "removeEventListener", "registerUpdateListener", "editorState", "SELECTION_CHANGE_COMMAND", "KEY_ESCAPE_COMMAND", "COMMAND_PRIORITY_HIGH", "_jsxs", "React", "Fragment", "_jsx", "ref", "length", "href", "rel", "target", "__fields", "newTab", "ExternalLinkIcon", "_Fragment", "onClick", "onMouseDown", "tabIndex", "type", "EditIcon", "CloseMenuIcon", "FieldsDrawer", "drawerTitle", "featureKey", "handleDrawerSubmit", "newLinkPayload", "bareLinkFields", "linkParent", "getParent", "$createLinkNode", "schemaPathSuffix", "FloatingLinkEditorPlugin", "props", "anchorElem", "document", "body", "createPortal", "_jsx", "LinkEditor", "c", "_c", "useLexicalComposerContext", "mergeRegister", "$getSelection", "$isElementNode", "$isRangeSelection", "COMMAND_PRIORITY_LOW", "PASTE_COMMAND", "useEffect", "absoluteRegExp", "relativeOrAnchorRegExp", "validateUrl", "url", "includes", "test", "absoluteRegExp", "relativeOrAnchorRegExp", "urlObj", "URL", "protocol", "hostname", "LinkPlugin", "t0", "$", "_c", "clientProps", "editor", "useLexicalComposerContext", "t1", "t2", "defaultLinkType", "defaultLinkURL", "hasNodes", "LinkNode", "Error", "mergeRegister", "registerCommand", "TOGGLE_LINK_COMMAND", "payload", "$toggleLink", "fields", "linkType", "url", "COMMAND_PRIORITY_LOW", "PASTE_COMMAND", "event", "selection", "$getSelection", "$isRangeSelection", "isCollapsed", "ClipboardEvent", "clipboardData", "clipboardText", "getData", "validateUrl", "getNodes", "some", "_temp", "linkFields", "doc", "newTab", "dispatchCommand", "text", "preventDefault", "useEffect", "node", "$isElementNode", "toolbarGroups", "toolbarFeatureButtonsGroupWithItems", "ChildComponent", "LinkIcon", "isActive", "selection", "$isRangeSelection", "selectedNode", "getSelectedNode", "$findMatchingParent", "$isLinkNode", "isEnabled", "$getSelection", "getTextContent", "length", "key", "label", "i18n", "t", "onSelect", "editor", "dispatchCommand", "TOGGLE_LINK_COMMAND", "selectedText", "selectedNodes", "getEditorState", "read", "getNodes", "linkFields", "doc", "TOGGLE_LINK_WITH_MODAL_COMMAND", "fields", "text", "order", "LinkFeatureClient", "createClientFeature", "props", "markdownTransformers", "LinkMarkdownTransformer", "nodes", "LinkNode", "disableAutoLinks", "AutoLinkNode", "filter", "Boolean", "plugins", "Component", "LinkPlugin", "position", "AutoLinkPlugin", "ClickableLinkPlugin", "FloatingLinkEditorPlugin", "sanitizedClientFeatureProps", "toolbarFixed", "groups", "toolbarInline", "$isListNode", "INSERT_CHECK_LIST_COMMAND", "ListItemNode", "ListNode", "$isRangeSelection", "ChecklistIcon", "_jsxs", "className", "fill", "focusable", "height", "viewBox", "width", "xmlns", "_jsx", "rx", "stroke", "x", "y", "d", "strokeWidth", "ListPlugin", "LexicalListPlugin", "_jsx", "shouldRegisterListBaseNodes", "type", "featureProviderMap", "has", "slashMenuListGroupWithItems", "items", "key", "label", "i18n", "t", "$isListNode", "ListItemNode", "ListNode", "$createListItemNode", "$createListNode", "$isListItemNode", "$isListNode", "LIST_INDENT_SIZE", "listReplace", "listType", "parentNode", "children", "match", "previousNode", "getPreviousSibling", "nextNode", "getNextSibling", "listItem", "undefined", "getListType", "firstChild", "getFirstChild", "insertBefore", "append", "remove", "list", "Number", "replace", "select", "indent", "Math", "floor", "length", "setIndent", "listExport", "listNode", "exportChildren", "depth", "output", "getChildren", "index", "listItemNode", "getChildrenSize", "push", "repeat", "prefix", "getStart", "getChecked", "join", "CHECK_LIST", "type", "dependencies", "ListNode", "ListItemNode", "export", "node", "exportChildren", "$isListNode", "listExport", "regExp", "replace", "listReplace", "CheckListPlugin", "LexicalCheckListPlugin", "_jsx", "toolbarGroups", "toolbarTextDropdownGroupWithItems", "ChildComponent", "ChecklistIcon", "isActive", "selection", "$isRangeSelection", "node", "getNodes", "$isListNode", "getListType", "parent", "getParent", "parentParent", "key", "label", "i18n", "t", "onSelect", "editor", "dispatchCommand", "INSERT_CHECK_LIST_COMMAND", "undefined", "order", "ChecklistFeatureClient", "createClientFeature", "featureProviderMap", "plugins", "Component", "LexicalCheckListPlugin", "position", "shouldRegister", "shouldRegisterListBaseNodes", "push", "LexicalListPlugin", "markdownTransformers", "CHECK_LIST", "nodes", "ListNode", "ListItemNode", "slashMenu", "groups", "slashMenuListGroupWithItems", "Icon", "keywords", "toolbarFixed", "toolbarInline", "$isListNode", "INSERT_ORDERED_LIST_COMMAND", "ListItemNode", "ListNode", "$isRangeSelection", "OrderedListIcon", "_jsxs", "className", "fill", "focusable", "height", "viewBox", "width", "xmlns", "_jsx", "d", "stroke", "strokeWidth", "$isListNode", "ListItemNode", "ListNode", "ORDERED_LIST", "type", "dependencies", "ListNode", "ListItemNode", "export", "node", "exportChildren", "$isListNode", "listExport", "regExp", "replace", "listReplace", "toolbarGroups", "toolbarTextDropdownGroupWithItems", "ChildComponent", "OrderedListIcon", "isActive", "selection", "$isRangeSelection", "node", "getNodes", "$isListNode", "getListType", "parent", "getParent", "parentParent", "key", "label", "i18n", "t", "onSelect", "editor", "dispatchCommand", "INSERT_ORDERED_LIST_COMMAND", "undefined", "order", "OrderedListFeatureClient", "createClientFeature", "featureProviderMap", "shouldRegister", "shouldRegisterListBaseNodes", "markdownTransformers", "ORDERED_LIST", "nodes", "ListNode", "ListItemNode", "plugins", "Component", "LexicalListPlugin", "position", "slashMenu", "groups", "slashMenuListGroupWithItems", "Icon", "keywords", "toolbarFixed", "toolbarInline", "$isListNode", "INSERT_UNORDERED_LIST_COMMAND", "ListItemNode", "ListNode", "$isRangeSelection", "UnorderedListIcon", "_jsxs", "className", "fill", "focusable", "height", "viewBox", "width", "xmlns", "_jsx", "cx", "cy", "r", "stroke", "strokeWidth", "d", "$isListNode", "ListItemNode", "ListNode", "UNORDERED_LIST", "type", "dependencies", "ListNode", "ListItemNode", "export", "node", "exportChildren", "$isListNode", "listExport", "regExp", "replace", "listReplace", "toolbarGroups", "toolbarTextDropdownGroupWithItems", "ChildComponent", "UnorderedListIcon", "isActive", "selection", "$isRangeSelection", "node", "getNodes", "$isListNode", "getListType", "parent", "getParent", "parentParent", "key", "label", "i18n", "t", "onSelect", "editor", "dispatchCommand", "INSERT_UNORDERED_LIST_COMMAND", "undefined", "order", "UnorderedListFeatureClient", "createClientFeature", "markdownTransformers", "UNORDERED_LIST", "nodes", "ListNode", "ListItemNode", "plugins", "Component", "LexicalListPlugin", "position", "slashMenu", "groups", "slashMenuListGroupWithItems", "Icon", "keywords", "toolbarFixed", "toolbarInline", "addClassNamesToElement", "$applyNodeReplacement", "DecoratorNode", "React", "Component", "lazy", "then", "module", "default", "UnknownConvertedNodeComponent", "UnknownConvertedNode", "__data", "constructor", "data", "key", "clone", "node", "__key", "getType", "importJSON", "serializedNode", "$createUnknownConvertedNode", "canInsertTextAfter", "canInsertTextBefore", "createDOM", "config", "element", "document", "createElement", "decorate", "_jsx", "exportJSON", "type", "version", "isInline", "updateDOM", "prevNode", "dom", "LexicalPluginToLexicalFeatureClient", "createClientFeature", "nodes", "UnknownConvertedNode", "addClassNamesToElement", "$applyNodeReplacement", "DecoratorNode", "React", "Component", "lazy", "then", "module", "default", "UnknownConvertedNodeComponent", "UnknownConvertedNode", "__data", "constructor", "data", "key", "clone", "node", "__key", "getType", "importJSON", "serializedNode", "$createUnknownConvertedNode", "canInsertTextAfter", "canInsertTextBefore", "createDOM", "config", "element", "document", "createElement", "decorate", "_jsx", "exportJSON", "type", "version", "isInline", "updateDOM", "prevNode", "dom", "SlateToLexicalFeatureClient", "createClientFeature", "nodes", "UnknownConvertedNode", "$setBlocksType", "$createParagraphNode", "$getSelection", "$isParagraphNode", "$isRangeSelection", "toolbarGroups", "toolbarTextDropdownGroupWithItems", "ChildComponent", "TextIcon", "isActive", "selection", "$isRangeSelection", "node", "getNodes", "$isParagraphNode", "getParent", "key", "label", "i18n", "t", "onSelect", "editor", "update", "$getSelection", "$setBlocksType", "$createParagraphNode", "order", "ParagraphFeatureClient", "createClientFeature", "slashMenu", "groups", "slashMenuBasicGroupWithItems", "Icon", "keywords", "toolbarFixed", "toolbarInline", "c", "_c", "useLexicalComposerContext", "useEffect", "useState", "BlockquoteJSXConverter", "quote", "node", "nodesToJSX", "children", "nodes", "_jsx", "HeadingJSXConverter", "heading", "node", "nodesToJSX", "children", "nodes", "NodeTag", "tag", "_jsx", "HorizontalRuleJSXConverter", "horizontalrule", "_jsx", "LinebreakJSXConverter", "linebreak", "_jsx", "LinkJSXConverter", "internalDocToHref", "autolink", "node", "nodesToJSX", "children", "nodes", "rel", "fields", "newTab", "undefined", "target", "_jsx", "href", "url", "link", "linkType", "linkNode", "console", "error", "v4", "uuidv4", "ListJSXConverter", "list", "node", "nodesToJSX", "children", "nodes", "NodeTag", "tag", "_jsx", "className", "listType", "listitem", "parent", "hasSubLists", "some", "child", "type", "uuid", "checked", "role", "style", "listStyleType", "tabIndex", "value", "_jsxs", "_Fragment", "id", "readOnly", "htmlFor", "undefined", "ParagraphJSXConverter", "paragraph", "node", "nodesToJSX", "children", "nodes", "length", "_jsx", "TabJSXConverter", "tab", "TableJSXConverter", "table", "node", "nodesToJSX", "children", "nodes", "_jsx", "className", "style", "borderCollapse", "tablecell", "TagName", "headerState", "headerStateClass", "backgroundColor", "undefined", "border", "padding", "colSpan", "rowSpan", "tablerow", "NodeFormat", "DOM_ELEMENT_TYPE", "DOM_TEXT_TYPE", "NO_DIRTY_NODES", "HAS_DIRTY_NODES", "FULL_RECONCILE", "IS_NORMAL", "IS_TOKEN", "IS_SEGMENTED", "IS_INERT", "IS_BOLD", "IS_ITALIC", "IS_STRIKETHROUGH", "IS_UNDERLINE", "IS_CODE", "IS_SUBSCRIPT", "IS_SUPERSCRIPT", "IS_HIGHLIGHT", "IS_DIRECTIONLESS", "IS_UNMERGEABLE", "IS_ALIGN_LEFT", "IS_ALIGN_CENTER", "IS_ALIGN_RIGHT", "IS_ALIGN_JUSTIFY", "IS_ALIGN_START", "IS_ALIGN_END", "IS_ALL_FORMATTING", "NON_BREAKING_SPACE", "DOUBLE_LINE_BREAK", "RTL", "LTR", "RTL_REGEX", "RegExp", "LTR_REGEX", "TEXT_TYPE_TO_FORMAT", "bold", "code", "highlight", "italic", "strikethrough", "subscript", "superscript", "underline", "DETAIL_TYPE_TO_DETAIL", "directionless", "unmergeable", "ELEMENT_TYPE_TO_FORMAT", "center", "end", "justify", "left", "right", "start", "ELEMENT_FORMAT_TO_TYPE", "TEXT_MODE_TO_TYPE", "normal", "segmented", "token", "TEXT_TYPE_TO_MODE", "TextJSXConverter", "text", "node", "format", "NodeFormat", "IS_BOLD", "_jsx", "IS_ITALIC", "IS_STRIKETHROUGH", "style", "textDecoration", "IS_UNDERLINE", "IS_CODE", "IS_SUBSCRIPT", "IS_SUPERSCRIPT", "UploadJSXConverter", "upload", "node", "uploadNode", "value", "uploadDoc", "url", "mimeType", "startsWith", "_jsx", "href", "rel", "filename", "sizes", "Object", "keys", "length", "alt", "height", "src", "width", "pictureJSX", "size", "imageSize", "filesize", "imageSizeURL", "push", "media", "srcSet", "type", "defaultJSXConverters", "ParagraphJSXConverter", "TextJSXConverter", "LinebreakJSXConverter", "BlockquoteJSXConverter", "TableJSXConverter", "HeadingJSXConverter", "HorizontalRuleJSXConverter", "ListJSXConverter", "LinkJSXConverter", "UploadJSXConverter", "TabJSXConverter", "jsx", "_jsx", "Fragment", "_Fragment", "React", "hasText", "value", "hasChildren", "root", "children", "length", "hasOnlyEmptyParagraph", "type", "paragraphNode", "paragraphNodeChild", "convertLexicalToJSX", "converters", "data", "disableIndent", "disableTextAlign", "hasText", "convertLexicalNodesToJSX", "nodes", "root", "children", "parent", "_jsx", "_Fragment", "unknownConverter", "unknown", "map", "node", "i", "converterForNode", "type", "blocks", "fields", "blockType", "console", "error", "inlineBlocks", "reactNode", "childIndex", "nodesToJSX", "args", "style", "Array", "isArray", "includes", "format", "textAlign", "indent", "paddingInlineStart", "Number", "React", "isValidElement", "newStyle", "props", "cloneElement", "key", "filter", "Boolean", "RichText", "className", "converters", "data", "editorState", "disableContainer", "disableIndent", "disableTextAlign", "finalConverters", "defaultConverters", "defaultJSXConverters", "content", "Array", "isArray", "convertLexicalToJSX", "_jsx", "_Fragment", "RichTextPlugin", "$", "_c", "editor", "useLexicalComposerContext", "t0", "getEditorState", "toJSON", "editorState", "setEditorState", "useState", "t1", "t2", "registerUpdateListener", "t3", "editorState_0", "useEffect", "_jsx", "className", "children", "RichText", "converters", "defaultJSXConverters", "data", "DebugJsxConverterFeatureClient", "createClientFeature", "plugins", "Component", "RichTextPlugin", "position", "tailwindColors", "amber", "black", "blue", "current", "cyan", "emerald", "fuchsia", "gray", "green", "indigo", "inherit", "lime", "neutral", "orange", "pink", "purple", "red", "rose", "sky", "slate", "stone", "teal", "transparent", "violet", "white", "yellow", "zinc", "defaultColors", "text", "css", "label", "background", "$isNodeSelection", "RelationshipIcon", "_jsxs", "className", "fill", "focusable", "height", "viewBox", "width", "xmlns", "_jsx", "clipPath", "d", "stroke", "strokeLinecap", "strokeLinejoin", "id", "transform", "$applyNodeReplacement", "React", "DecoratorBlockNode", "addClassNamesToElement", "$applyNodeReplacement", "$relationshipElementToServerNode", "domNode", "id", "getAttribute", "relationTo", "node", "$createServerRelationshipNode", "value", "RelationshipServerNode", "__data", "constructor", "data", "format", "key", "clone", "__format", "__key", "getType", "importDOM", "div", "hasAttribute", "conversion", "priority", "importJSON", "serializedNode", "version", "importedData", "setFormat", "isInline", "createDOM", "config", "element", "document", "createElement", "theme", "relationship", "decorate", "_editor", "_config", "exportDOM", "setAttribute", "String", "text", "createTextNode", "getTextContent", "append", "exportJSON", "getData", "type", "getLatest", "setData", "writable", "getWritable", "RelationshipComponent", "lazy", "then", "module", "default", "$relationshipElementToNode", "domNode", "id", "getAttribute", "relationTo", "node", "$createRelationshipNode", "value", "RelationshipNode", "RelationshipServerNode", "clone", "getType", "importDOM", "div", "hasAttribute", "conversion", "priority", "importJSON", "serializedNode", "version", "importedData", "setFormat", "format", "decorate", "editor", "config", "_jsx", "className", "theme", "relationship", "data", "__data", "__format", "nodeKey", "getKey", "exportJSON", "$applyNodeReplacement", "$isRelationshipNode", "c", "_c", "useLexicalComposerContext", "$insertNodeToNearestRoot", "$getPreviousSelection", "$getSelection", "$isParagraphNode", "$isRangeSelection", "COMMAND_PRIORITY_EDITOR", "createCommand", "useEffect", "c", "_c", "useLexicalComposerContext", "toast", "$getNodeByKey", "COMMAND_PRIORITY_EDITOR", "useEffect", "useState", "c", "_c", "useLexicalComposerContext", "useListDrawer", "useModal", "$getNodeByKey", "$getPreviousSelection", "$getRoot", "$getSelection", "$isRangeSelection", "$setSelection", "useEffect", "useState", "useLexicalListDrawer", "args", "$", "editor", "selectionState", "setSelectionState", "wasOpen", "setWasOpen", "BaseListDrawer", "BaseListDrawerToggler", "t0", "closeDrawer", "baseCloseDrawer", "drawerSlug", "listDrawerSlug", "isDrawerOpen", "openDrawer", "baseOpenDrawer", "modalState", "t1", "Symbol", "for", "selection", "$storeSelection", "t2", "update", "anchor", "focus", "key", "clone", "selectEnd", "discrete", "skipTransforms", "restoreSelection", "t3", "closeListDrawer", "t4", "t5", "thisModalState", "isOpen", "setTimeout", "t6", "props", "_jsx", "onClick", "t7", "t8", "isListDrawerOpen", "ListDrawer", "ListDrawerToggler", "insertRelationship", "editor", "relationTo", "replaceNodeKey", "value", "update", "node", "$getNodeByKey", "replace", "$createRelationshipNode", "dispatchCommand", "INSERT_RELATIONSHIP_COMMAND", "RelationshipDrawerComponent", "t0", "$", "_c", "enabledCollectionSlugs", "useLexicalComposerContext", "setReplaceNodeKey", "useState", "t1", "t2", "collectionSlugs", "selectedCollection", "closeListDrawer", "ListDrawer", "openListDrawer", "useLexicalListDrawer", "t3", "t4", "registerCommand", "INSERT_RELATIONSHIP_WITH_DRAWER_COMMAND", "payload", "nodeKey", "COMMAND_PRIORITY_EDITOR", "useEffect", "t5", "t6", "collectionSlug", "doc", "id", "onSelect", "_jsx", "RelationshipDrawerComponentFallback", "_temp", "RelationshipDrawer", "length", "toast", "error", "useConfig", "useEntityVisibility", "React", "useEnabledRelationships", "options", "collectionSlugsBlacklist", "collectionSlugsWhitelist", "uploads", "config", "collections", "visibleEntities", "useMemo", "enabledCollectionSlugs", "enabledCollections", "whitelistSet", "Set", "blacklistSet", "collection", "slug", "admin", "enableRichTextRelationship", "upload", "includes", "has", "push", "INSERT_RELATIONSHIP_COMMAND", "createCommand", "RelationshipPlugin", "t0", "$", "_c", "clientProps", "editor", "useLexicalComposerContext", "t1", "disabledCollections", "t2", "enabledCollections", "t3", "collectionSlugsBlacklist", "collectionSlugsWhitelist", "enabledCollectionSlugs", "useEnabledRelationships", "t4", "t5", "hasNodes", "RelationshipNode", "Error", "registerCommand", "_temp", "COMMAND_PRIORITY_EDITOR", "useEffect", "t6", "_jsx", "RelationshipDrawer", "payload", "selection", "$getSelection", "$getPreviousSelection", "$isRangeSelection", "relationshipNode", "$createRelationshipNode", "focus", "focusNode", "getNode", "$insertNodeToNearestRoot", "$isParagraphNode", "__first", "remove", "RelationshipFeatureClient", "createClientFeature", "nodes", "RelationshipNode", "plugins", "Component", "RelationshipPlugin", "position", "slashMenu", "groups", "slashMenuBasicGroupWithItems", "Icon", "RelationshipIcon", "key", "keywords", "label", "i18n", "t", "onSelect", "editor", "dispatchCommand", "INSERT_RELATIONSHIP_WITH_DRAWER_COMMAND", "replace", "toolbarFixed", "toolbarAddDropdownGroupWithItems", "ChildComponent", "isActive", "selection", "$isNodeSelection", "getNodes", "length", "firstNode", "$isRelationshipNode", "c", "_c", "useLexicalComposerContext", "useLexicalEditable", "useScrollInfo", "useThrottledEffect", "useTranslation", "React", "useMemo", "c", "_c", "mergeRegister", "$addUpdateTag", "$getSelection", "useDeferredValue", "useEffect", "useState", "baseClass", "ToolbarButton", "t0", "$", "_c", "children", "editor", "item", "t1", "Symbol", "for", "active", "enabled", "_state", "setState", "useState", "deferredState", "useDeferredValue", "editorConfigContext", "useEditorConfigContext", "t2", "t3", "t4", "key", "t5", "filter", "Boolean", "className", "join", "t6", "getEditorState", "read", "selection", "$getSelection", "newActive", "isActive", "newEnabled", "isEnabled", "prev", "updateStates", "runDeprioritized", "useRunDeprioritized", "t7", "t8", "listener", "cleanup", "mergeRegister", "registerUpdateListener", "document", "addEventListener", "removeEventListener", "useEffect", "t9", "focus", "update", "_temp", "onSelect", "handleClick", "handleMouseDown", "_temp2", "t10", "_jsx", "onClick", "onMouseDown", "type", "$addUpdateTag", "e", "preventDefault", "c", "_c", "React", "useCallback", "useDeferredValue", "useEffect", "useMemo", "mergeRegister", "useTranslation", "$getSelection", "Button", "$addUpdateTag", "isDOMNode", "React", "useCallback", "useEffect", "useMemo", "useRef", "useState", "createPortal", "baseClass", "DropDownContext", "createContext", "DropDownItem", "active", "children", "editor", "enabled", "Icon", "item", "itemKey", "tooltip", "className", "key", "filter", "Boolean", "join", "ref", "dropDownContext", "use", "Error", "registerItem", "current", "_jsx", "buttonStyle", "disabled", "extraButtonProps", "icon", "iconPosition", "iconStyle", "onClick", "focus", "update", "onSelect", "isActive", "onMouseDown", "e", "preventDefault", "type", "DropDownItems", "dropDownRef", "itemsContainerClassNames", "onClose", "items", "setItems", "highlightedItem", "setHighlightedItem", "itemRef", "prev", "handleKeyDown", "event", "includes", "index", "indexOf", "length", "contextValue", "value", "onKeyDown", "DropDown", "buttonAriaLabel", "buttonClassName", "dropdownKey", "label", "stopCloseOnClickSelf", "buttonRef", "showDropDown", "setShowDropDown", "handleClose", "button", "dropDown", "left", "top", "getBoundingClientRect", "scrollTopOffset", "window", "scrollY", "document", "documentElement", "scrollTop", "style", "offsetHeight", "Math", "min", "innerWidth", "offsetWidth", "handle", "target", "contains", "addEventListener", "removeEventListener", "portal", "body", "_jsxs", "Fragment", "baseClass", "ToolbarItem", "t0", "$", "_c", "active", "anchorElem", "editor", "enabled", "item", "i18n", "useTranslation", "fieldProps", "t1", "useEditorConfigContext", "featureClientSchemaMap", "schemaPath", "Component", "t2", "_jsx", "key", "title", "croppedTitle", "label", "length", "substring", "DropDownItem", "Icon", "ChildComponent", "undefined", "itemKey", "tooltip", "children", "className", "MemoToolbarItem", "React", "memo", "ToolbarDropdown", "classNames", "group", "itemsContainerClassNames", "maxActiveItems", "onActiveChange", "toolbarState", "setToolbarState", "useState", "activeItemKeys", "enabledGroup", "enabledItemKeys", "deferredToolbarState", "useDeferredValue", "editorConfigContext", "items", "groupKey", "runDeprioritized", "useRunDeprioritized", "updateStates", "useCallback", "getEditorState", "read", "selection", "$getSelection", "_activeItemKeys", "_activeItems", "_enabledItemKeys", "isActive", "push", "isEnabled", "activeItems", "useEffect", "mergeRegister", "registerUpdateListener", "renderedItems", "useMemo", "map", "includes", "DropDown", "buttonAriaLabel", "buttonClassName", "filter", "Boolean", "join", "disabled", "dropdownKey", "ButtonGroupItem", "anchorElem", "editor", "item", "Component", "_jsx", "key", "ChildComponent", "ToolbarButton", "ToolbarGroupComponent", "t0", "$", "_c", "editorConfig", "group", "index", "i18n", "useTranslation", "fieldProps", "t1", "useEditorConfigContext", "featureClientSchemaMap", "schemaPath", "dropdownLabel", "setDropdownLabel", "useState", "undefined", "DropdownIcon", "setDropdownIcon", "t2", "items", "type", "length", "t3", "useEffect", "t4", "t5", "activeItems", "label", "substring", "t", "count", "onActiveChange", "t6", "features", "toolbarFixed", "groups", "_jsxs", "className", "children", "ToolbarDropdown", "Icon", "itemsContainerClassNames", "maxActiveItems", "map", "item_0", "FixedToolbar", "clientProps", "parentWithFixedToolbar", "currentToolbarRef", "useRef", "isEditable", "useLexicalEditable", "y", "useScrollInfo", "parentToolbarElem", "useMemo", "disableIfParentHasFixedToolbar", "sibling", "editorContainerRef", "current", "previousElementSibling", "classList", "contains", "useThrottledEffect", "currentToolbarElem", "currentRect", "getBoundingClientRect", "parentRect", "bottom", "top", "remove", "add", "onFocus", "event", "stopPropagation", "ref", "Fragment", "i", "getParentEditorWithFixedToolbar", "editorConfigContext", "parentEditor", "resolvedFeatureMap", "has", "FixedToolbarPlugin", "currentEditor", "useLexicalComposerContext", "currentEditorConfig", "applyToFocusedEditor", "focusedEditor", "Symbol", "for", "bb0", "document", "body", "FixedToolbarFeatureClient", "createClientFeature", "plugins", "Component", "FixedToolbarPlugin", "position", "c", "_c", "useLexicalComposerContext", "useLexicalEditable", "mergeRegister", "$getSelection", "$isRangeSelection", "$isTextNode", "COMMAND_PRIORITY_LOW", "getDOMSelection", "SELECTION_CHANGE_COMMAND", "useCallback", "useEffect", "useRef", "useState", "React", "createPortal", "getDOMRangeRect", "nativeSelection", "rootElement", "domRange", "getRangeAt", "rect", "anchorNode", "inner", "firstElementChild", "getBoundingClientRect", "setFloatingElemPosition", "args", "alwaysDisplayOnTop", "anchorElem", "anchorFlippedOffset", "floatingElem", "horizontalOffset", "HORIZONTAL_OFFSET", "horizontalPosition", "specialHandlingForCaret", "targetRect", "verticalGap", "VERTICAL_GAP", "scrollerElem", "parentElement", "style", "opacity", "transform", "floatingElemRect", "getBoundingClientRect", "anchorElementRect", "editorScrollerRect", "top", "height", "left", "width", "addedToTop", "right", "bottom", "ButtonGroupItem", "anchorElem", "editor", "item", "Component", "_jsx", "key", "ChildComponent", "ToolbarButton", "ToolbarGroupComponent", "t0", "$", "_c", "group", "index", "editorConfig", "useEditorConfigContext", "DropdownIcon", "setDropdownIcon", "useState", "t1", "items", "type", "length", "undefined", "t2", "useEffect", "t3", "t4", "activeItems", "onActiveChange", "t5", "features", "toolbarInline", "groups", "_jsxs", "className", "children", "ToolbarDropdown", "Icon", "maxActiveItems", "map", "item_0", "InlineToolbar", "floatingToolbarRef", "useRef", "caretRef", "closeFloatingToolbar", "useCallback", "current", "isOpacityZero", "style", "opacity", "isPointerEventsNone", "pointerEvents", "mouseMoveListener", "e", "buttons", "x", "clientX", "y", "clientY", "elementUnderMouse", "document", "elementFromPoint", "contains", "mouseUpListener", "addEventListener", "removeEventListener", "$updateTextFormatFloatingToolbar", "selection", "$getSelection", "nativeSelection", "getDOMSelection", "_window", "possibleLinkEditor", "querySelector", "isLinkEditorVisible", "rootElement", "getRootElement", "isCollapsed", "anchorNode", "rangeRect", "getDOMRangeRect", "offsetIfFlipped", "setFloatingElemPosition", "alwaysDisplayOnTop", "floatingElem", "horizontalPosition", "targetRect", "anchorFlippedOffset", "horizontalOffset", "specialHandlingForCaret", "verticalGap", "scrollerElem", "parentElement", "update", "getEditorState", "read", "window", "mergeRegister", "registerUpdateListener", "editorState", "registerCommand", "SELECTION_CHANGE_COMMAND", "COMMAND_PRIORITY_LOW", "ref", "i", "useInlineToolbar", "isText", "setIsText", "isEditable", "useLexicalEditable", "isComposing", "$isRangeSelection", "getTextContent", "nodes", "getNodes", "foundNodeWithText", "node", "$isTextNode", "rawTextContent", "replace", "updatePopup", "registerRootListener", "createPortal", "InlineToolbarPlugin", "useLexicalComposerContext", "InlineToolbarFeatureClient", "createClientFeature", "plugins", "Component", "InlineToolbarPlugin", "position", "TableCellNode", "TableNode", "TableRowNode", "TableIcon", "_jsx", "className", "fill", "height", "viewBox", "width", "xmlns", "clipRule", "d", "fillRule", "$createTableCellNode", "$createTableNode", "$createTableRowNode", "$isTableCellNode", "$isTableNode", "$isTableRowNode", "TableCellHeaderStates", "TableCellNode", "TableNode", "TableRowNode", "$isParagraphNode", "$isTextNode", "TABLE_ROW_REG_EXP", "TABLE_ROW_DIVIDER_REG_EXP", "TableMarkdownTransformer", "allTransformers", "type", "dependencies", "TableNode", "TableRowNode", "TableCellNode", "export", "node", "$isTableNode", "output", "row", "getChildren", "rowOutput", "$isTableRowNode", "isHeaderRow", "cell", "$isTableCellNode", "push", "$convertToMarkdownString", "replace", "trim", "__headerState", "TableCellHeaderStates", "ROW", "join", "map", "_", "regExp", "parentNode", "_1", "match", "match0", "test", "table", "getPreviousSibling", "rows", "lastRow", "length", "forEach", "setHeaderStyles", "remove", "matchCells", "mapToTableCells", "sibling", "maxCells", "$isParagraphNode", "getChildrenSize", "firstChild", "getFirstChild", "$isTextNode", "cells", "getTextContent", "Math", "max", "unshift", "previousSibling", "$createTableNode", "tableRow", "$createTableRowNode", "append", "i", "$createTableCell", "getTableColumnsSize", "selectEnd", "textContent", "$createTableCellNode", "NO_STATUS", "$convertFromMarkdownString", "split", "text", "c", "_c", "useLexicalComposerContext", "useLexicalEditable", "$computeTableMapSkipCellCheck", "$deleteTableColumnAtSelection", "$deleteTableRowAtSelection", "$getNodeTriplet", "$getTableCellNodeFromLexicalNode", "$getTableColumnIndexFromTableCellNode", "$getTableNodeFromLexicalNodeOrThrow", "$getTableRowIndexFromTableCellNode", "$insertTableColumnAtSelection", "$insertTableRowAtSelection", "$isTableCellNode", "$isTableSelection", "$mergeCells", "$unmergeCell", "getTableElement", "getTableObserverFromTableElement", "TableCellHeaderStates", "TableCellNode", "mergeRegister", "useScrollInfo", "$getSelection", "$isElementNode", "$isRangeSelection", "$isTextNode", "$setSelection", "COMMAND_PRIORITY_CRITICAL", "getDOMSelection", "isDOMNode", "SELECTION_CHANGE_COMMAND", "React", "useCallback", "useEffect", "useRef", "useState", "createPortal", "MeatballsIcon", "_jsxs", "fill", "height", "viewBox", "width", "xmlns", "_jsx", "d", "computeSelectionCount", "selection", "selectionShape", "getShape", "columns", "toX", "fromX", "rows", "toY", "fromY", "$canUnmerge", "$getSelection", "$isRangeSelection", "isCollapsed", "$isTableSelection", "anchor", "is", "focus", "cell", "$getNodeTriplet", "__colSpan", "__rowSpan", "$selectLastDescendant", "node", "lastDescendant", "getLastDescendant", "$isTextNode", "select", "$isElementNode", "selectEnd", "selectNext", "TableActionMenu", "cellMerge", "contextRef", "onClose", "setIsMenuOpen", "tableCellNode", "_tableCellNode", "editor", "useLexicalComposerContext", "dropDownRef", "useRef", "updateTableCellNode", "useState", "selectionCounts", "updateSelectionCounts", "canMergeCells", "setCanMergeCells", "canUnmergeCell", "setCanUnmergeCell", "y", "useScrollInfo", "useEffect", "registerMutationListener", "TableCellNode", "nodeMutations", "get", "getKey", "getEditorState", "read", "getLatest", "skipInitialization", "currentSelectionCounts", "menuButtonElement", "current", "dropDownElement", "rootElement", "getRootElement", "rootEleRect", "getBoundingClientRect", "menuButtonRect", "style", "opacity", "dropDownElementRect", "margin", "leftPosition", "right", "width", "window", "innerWidth", "position", "left", "pageXOffset", "topPosition", "top", "height", "innerHeight", "bottom", "handleClickOutside", "event", "isDOMNode", "target", "contains", "addEventListener", "removeEventListener", "clearTableSelection", "useCallback", "update", "isAttached", "tableNode", "$getTableNodeFromLexicalNodeOrThrow", "tableElement", "getTableElement", "getElementByKey", "Error", "tableObserver", "getTableObserverFromTableElement", "$clearHighlight", "markDirty", "$setSelection", "mergeTableCellsAtSelection", "tableCells", "getNodes", "filter", "$isTableCellNode", "targetCell", "$mergeCells", "unmergeTableCellsAtSelection", "$unmergeCell", "insertTableRowAtSelection", "shouldInsertAfter", "i", "$insertTableRowAtSelection", "insertTableColumnAtSelection", "$insertTableColumnAtSelection", "deleteTableRowAtSelection", "$deleteTableRowAtSelection", "deleteTableAtSelection", "remove", "deleteTableColumnAtSelection", "$deleteTableColumnAtSelection", "toggleTableRowIsHeader", "tableRowIndex", "$getTableRowIndexFromTableCellNode", "gridMap", "$computeTableMapSkipCellCheck", "rowCells", "Set", "newStyle", "getHeaderStyles", "TableCellHeaderStates", "ROW", "col", "length", "mapCell", "has", "add", "setHeaderStyles", "toggleTableColumnIsHeader", "tableColumnIndex", "$getTableColumnIndexFromTableCellNode", "columnCells", "COLUMN", "row", "toggleRowStriping", "setRowStriping", "getRowStriping", "toggleFirstColumnFreeze", "setFrozenColumns", "getFrozenColumns", "mergeCellButton", "_jsx", "className", "onClick", "type", "createPortal", "_jsxs", "e", "stopPropagation", "ref", "Fragment", "__headerState", "document", "body", "TableCellActionMenuContainer", "anchorElem", "menuButtonRef", "menuRootRef", "isMenuOpen", "setTableMenuCellNode", "$moveMenu", "menu", "nativeSelection", "getDOMSelection", "_window", "activeElement", "disable", "classList", "tableCellParentNodeDOM", "anchorNode", "tableCellNodeFromSelection", "$getTableCellNodeFromLexicalNode", "getNode", "enabled", "isSelecting", "toggle", "tableCellRect", "anchorRect", "transform", "timeoutId", "callback", "undefined", "delayedCallback", "setTimeout", "mergeRegister", "registerUpdateListener", "registerCommand", "SELECTION_CHANGE_COMMAND", "COMMAND_PRIORITY_CRITICAL", "registerRootListener", "prevRootElement", "clearTimeout", "prevTableCellDOM", "MeatballsIcon", "TableActionMenuPlugin", "t0", "$", "_c", "isEditable", "useLexicalEditable", "t1", "c", "_c", "useLexicalComposerContext", "useLexicalEditable", "$computeTableMapSkipCellCheck", "$getTableNodeFromLexicalNodeOrThrow", "$getTableRowIndexFromTableCellNode", "$isTableCellNode", "$isTableRowNode", "getDOMCellFromTarget", "getTableElement", "TableNode", "calculateZoomLevel", "mergeRegister", "$getNearestNodeFromDOMNode", "isHTMLElement", "SKIP_SCROLL_INTO_VIEW_TAG", "React", "useCallback", "useEffect", "useRef", "useState", "createPortal", "MIN_ROW_HEIGHT", "MIN_COLUMN_WIDTH", "TableCellResizer", "editor", "targetRef", "useRef", "resizerRef", "tableRectRef", "hasTable", "setHasTable", "useState", "editorConfig", "useEditorConfigContext", "mouseStartPosRef", "mouseCurrentPos", "updateMouseCurrentPos", "activeCell", "updateActiveCell", "isMouseDown", "updateIsMouseDown", "draggingDirection", "updateDraggingDirection", "resetState", "useCallback", "current", "isMouseDownOnEvent", "event", "buttons", "useEffect", "tableKeys", "Set", "mergeRegister", "registerMutationListener", "TableNode", "nodeMutations", "nodeKey", "mutation", "delete", "add", "size", "registerNodeTransform", "tableNode", "getColWidths", "numColumns", "getColumnCount", "columnWidth", "setColWidths", "Array", "fill", "onMouseMove", "target", "isHTMLElement", "x", "clientX", "y", "clientY", "contains", "cell", "getDOMCellFromTarget", "getEditorState", "read", "tableCellNode", "$getNearestNodeFromDOMNode", "elem", "Error", "$getTableNodeFromLexicalNodeOrThrow", "tableElement", "getTableElement", "getElementByKey", "getKey", "getBoundingClientRect", "onMouseDown", "onMouseUp", "removeRootListener", "registerRootListener", "rootElement", "prevRootElement", "removeEventListener", "addEventListener", "isHeightChanging", "direction", "updateRowHeight", "heightChange", "update", "$isTableCellNode", "baseRowIndex", "$getTableRowIndexFromTableCellNode", "tableRows", "getChildren", "tableRowIndex", "getColSpan", "getRowSpan", "length", "tableRow", "$isTableRowNode", "height", "getHeight", "undefined", "rowCells", "Math", "min", "map", "getCellNodeHeight", "Infinity", "newHeight", "max", "setHeight", "tag", "SKIP_SCROLL_INTO_VIEW_TAG", "activeEditor", "clientHeight", "getCellColumnIndex", "tableMap", "columnIndex", "forEach", "row", "columnIndexInner", "updateColumnWidth", "widthChange", "$computeTableMapSkipCellCheck", "colWidths", "width", "newColWidths", "newWidth", "mouseUpHandler", "handler", "preventDefault", "stopPropagation", "zoom", "calculateZoomLevel", "document", "toggleResize", "resizerStyles", "setResizerStyles", "bottom", "left", "right", "top", "zoneWidth", "styles", "backgroundColor", "cursor", "window", "scrollX", "scrollY", "tableRect", "_jsx", "ref", "_jsxs", "Fragment", "className", "lexical", "theme", "tableCellResizer", "style", "TableCellResizerPlugin", "$", "_c", "useLexicalComposerContext", "isEditable", "useLexicalEditable", "t0", "createPortal", "c", "_c", "useLexicalComposerContext", "useLexicalEditable", "$getTableAndElementByKey", "$getTableColumnIndexFromTableCellNode", "$getTableRowIndexFromTableCellNode", "$insertTableColumnAtSelection", "$insertTableRowAtSelection", "$isTableCellNode", "$isTableNode", "getTableElement", "TableNode", "$findMatchingParent", "mergeRegister", "$getNearestNodeFromDOMNode", "isHTMLElement", "useEffect", "useMemo", "useRef", "useState", "createPortal", "c", "_c", "useEffect", "useRef", "FUNC_ERROR_TEXT", "nativeMax", "Math", "max", "nativeMin", "min", "debounce", "func", "wait", "options", "lastArgs", "lastCallTime", "lastInvokeTime", "lastThis", "leading", "maxing", "maxWait", "result", "timerID", "trailing", "TypeError", "invokeFunc", "time", "args", "thisArg", "undefined", "apply", "leadingEdge", "setTimeout", "timerExpired", "remainingWait", "timeSinceLastCall", "timeSinceLastInvoke", "timeWaiting", "shouldInvoke", "Date", "now", "trailingEdge", "cancel", "clearTimeout", "flush", "debounced", "isInvoking", "arguments", "debounce_default", "useDebounce", "fn", "ms", "maxWait", "$", "_c", "debouncedRef", "useRef", "t0", "t1", "current", "debounce", "cancel", "useEffect", "t2", "Symbol", "for", "t3", "args", "BUTTON_WIDTH_PX", "TableHoverActionsContainer", "anchorElem", "editor", "useLexicalComposerContext", "isEditable", "useLexicalEditable", "editorConfig", "useEditorConfigContext", "isShownRow", "setShownRow", "useState", "isShownColumn", "setShownColumn", "shouldListenMouseMove", "setShouldListenMouseMove", "position", "setPosition", "tableSetRef", "useRef", "Set", "tableCellDOMNodeRef", "debouncedOnMouseMove", "useDebounce", "event", "isOutside", "tableDOMNode", "getMouseInfo", "lexical", "current", "hoveredRowNode", "hoveredColumnNode", "tableDOMElement", "getEditorState", "read", "maybeTableCell", "$getNearestNodeFromDOMNode", "$isTableCellNode", "table", "$findMatchingParent", "node", "$isTableNode", "getTableElement", "getElementByKey", "getKey", "rowCount", "getChildrenSize", "colCount", "getChildAtIndex", "rowIndex", "$getTableRowIndexFromTableCellNode", "colIndex", "$getTableColumnIndexFromTableCellNode", "tableContainerElement", "parentElement", "bottom", "tableElemBottom", "height", "tableElemHeight", "left", "tableElemLeft", "right", "tableElemRight", "width", "tableElemWidth", "y", "tableElemY", "getBoundingClientRect", "tableHasScroll", "classList", "contains", "scrollWidth", "clientWidth", "editorElemLeft", "editorElemY", "offsetLeft", "top", "offsetWidth", "tableResizeObserver", "useMemo", "ResizeObserver", "useEffect", "document", "addEventListener", "removeEventListener", "mergeRegister", "registerMutationListener", "TableNode", "mutations", "resetObserver", "key", "type", "add", "delete", "disconnect", "tableKey", "tableElement", "$getTableAndElementByKey", "observe", "size", "skipInitialization", "insertAction", "insertRow", "update", "selectEnd", "$insertTableRowAtSelection", "$insertTableColumnAtSelection", "_jsxs", "_Fragment", "_jsx", "className", "theme", "tableAddRows", "onClick", "style", "tableAddColumns", "target", "isHTMLElement", "closest", "tableCell", "tableCellResizer", "TableHoverActionsPlugin", "t0", "$", "_c", "t1", "undefined", "body", "t2", "createPortal", "c", "_c", "useLexicalComposerContext", "TablePlugin", "LexicalReactTablePlugin", "INSERT_TABLE_COMMAND", "TableCellNode", "TableNode", "TableRowNode", "mergeRegister", "formatDrawerSlug", "useEditDepth", "$getSelection", "$isRangeSelection", "COMMAND_PRIORITY_EDITOR", "createCommand", "createContext", "use", "useEffect", "useMemo", "useState", "React", "OPEN_TABLE_DRAWER_COMMAND", "createCommand", "CellContext", "createContext", "cellEditorConfig", "cellEditorPlugins", "set", "TableContext", "children", "contextValue", "setContextValue", "useState", "_jsx", "value", "useMemo", "TablePlugin", "$", "_c", "editor", "useLexicalComposerContext", "cellContext", "use", "editDepth", "useEditDepth", "fieldProps", "t0", "uuid", "useEditorConfigContext", "schemaPath", "t1", "t2", "formatDrawerSlug", "slug", "depth", "drawerSlug", "toggleDrawer", "useLexicalDrawer", "t3", "hasNodes", "TableNode", "TableRowNode", "TableCellNode", "Error", "mergeRegister", "registerCommand", "rangeSelection", "getEditorState", "read", "selection", "$getSelection", "$isRangeSelection", "COMMAND_PRIORITY_EDITOR", "t4", "useEffect", "t5", "_fields", "data", "columns", "rows", "dispatchCommand", "INSERT_TABLE_COMMAND", "String", "t6", "_jsxs", "Fragment", "FieldsDrawer", "drawerTitle", "featureKey", "handleDrawerSubmit", "schemaPathSuffix", "LexicalReactTablePlugin", "hasCellBackgroundColor", "hasCellMerge", "hasHorizontalScroll", "TableFeatureClient", "createClientFeature", "markdownTransformers", "TableMarkdownTransformer", "nodes", "TableNode", "TableCellNode", "TableRowNode", "plugins", "Component", "TablePlugin", "position", "TableCellResizerPlugin", "TableActionMenuPlugin", "TableHoverActionsPlugin", "providers", "TableContext", "slashMenu", "groups", "slashMenuBasicGroupWithItems", "Icon", "TableIcon", "key", "keywords", "label", "onSelect", "editor", "dispatchCommand", "OPEN_TABLE_DRAWER_COMMAND", "toolbarFixed", "toolbarAddDropdownGroupWithItems", "ChildComponent", "$isNodeSelection", "UploadIcon", "_jsxs", "className", "fill", "focusable", "height", "viewBox", "width", "xmlns", "_jsx", "d", "stroke", "strokeLinecap", "strokeLinejoin", "ObjectID", "$applyNodeReplacement", "React", "ObjectID", "$convertUploadElement", "domNode", "$createNode", "hasAttribute", "formID", "getAttribute", "node", "data", "pending", "src", "id", "relationTo", "fields", "value", "ObjectID", "default", "toHexString", "DecoratorBlockNode", "addClassNamesToElement", "ObjectID", "$applyNodeReplacement", "UploadServerNode", "DecoratorBlockNode", "__data", "constructor", "data", "format", "key", "clone", "node", "__format", "__key", "getType", "importDOM", "img", "conversion", "domNode", "$convertUploadElement", "$createUploadServerNode", "priority", "importJSON", "serializedNode", "version", "value", "id", "ObjectID", "default", "toHexString", "importedData", "fields", "pending", "relationTo", "setFormat", "isInline", "createDOM", "config", "element", "document", "createElement", "addClassNamesToElement", "theme", "upload", "decorate", "exportDOM", "setAttribute", "String", "formID", "src", "exportJSON", "getData", "type", "getLatest", "setData", "writable", "getWritable", "updateDOM", "$applyNodeReplacement", "ShimmerEffect", "PendingUploadComponent", "_jsx", "className", "height", "width", "RawUploadComponent", "lazy", "then", "module", "default", "UploadComponent", "UploadNode", "UploadServerNode", "clone", "node", "getType", "importDOM", "img", "conversion", "domNode", "$convertUploadElement", "$createUploadNode", "priority", "importJSON", "serializedNode", "version", "value", "id", "ObjectID", "toHexString", "importedData", "fields", "pending", "relationTo", "data", "setFormat", "format", "decorate", "editor", "config", "__data", "_jsx", "PendingUploadComponent", "className", "theme", "upload", "__format", "nodeKey", "getKey", "exportJSON", "$applyNodeReplacement", "$isUploadNode", "c", "_c", "useLexicalComposerContext", "$dfsIterator", "$insertNodeToNearestRoot", "mergeRegister", "useBulkUpload", "useEffectEvent", "useModal", "ObjectID", "$createRangeSelection", "$getPreviousSelection", "$getSelection", "$isParagraphNode", "$isRangeSelection", "$setSelection", "COMMAND_PRIORITY_EDITOR", "COMMAND_PRIORITY_LOW", "createCommand", "DROP_COMMAND", "getDOMSelectionFromTarget", "isHTMLElement", "PASTE_COMMAND", "useEffect", "c", "_c", "useLexicalComposerContext", "toast", "$getNodeByKey", "COMMAND_PRIORITY_EDITOR", "useEffect", "useState", "insertUpload", "editor", "relationTo", "replaceNodeKey", "value", "update", "node", "$getNodeByKey", "replace", "$createUploadNode", "data", "fields", "dispatchCommand", "INSERT_UPLOAD_COMMAND", "UploadDrawerComponent", "t0", "$", "_c", "enabledCollectionSlugs", "useLexicalComposerContext", "setReplaceNodeKey", "useState", "t1", "collectionSlugs", "uploads", "closeListDrawer", "ListDrawer", "openListDrawer", "useLexicalListDrawer", "t2", "t3", "registerCommand", "INSERT_UPLOAD_WITH_DRAWER_COMMAND", "payload", "nodeKey", "COMMAND_PRIORITY_EDITOR", "useEffect", "t4", "t5", "collectionSlug", "doc", "id", "onSelect", "_jsx", "UploadDrawerComponentFallback", "_temp", "UploadDrawer", "length", "toast", "error", "canDropImage", "event", "target", "isHTMLElement", "closest", "parentElement", "getDragSelection", "range", "domSelection", "getDOMSelectionFromTarget", "document", "caretRangeFromPoint", "clientX", "clientY", "rangeParent", "collapse", "rangeOffset", "getRangeAt", "Error", "INSERT_UPLOAD_COMMAND", "createCommand", "UploadPlugin", "t0", "$", "_c", "clientProps", "editor", "useLexicalComposerContext", "t1", "disabledCollections", "t2", "enabledCollections", "t3", "collectionSlugsBlacklist", "collectionSlugsWhitelist", "uploads", "enabledCollectionSlugs", "useEnabledRelationships", "drawerSlug", "bulkUploadDrawerSlug", "setCollectionSlug", "setInitialForms", "setOnCancel", "setOnSuccess", "setSelectableCollections", "useBulkUpload", "isModalOpen", "openModal", "useModal", "t4", "t5", "files", "length", "initialForms", "map", "_temp", "update", "_temp2", "newDocs", "newDocsMap", "Map", "_temp3", "dfsNode_0", "$dfsIterator", "node_0", "dfsNode", "node", "$isUploadNode", "nodeData_0", "getData", "nodeData", "pending", "newDoc", "get", "formID", "replace", "$createUploadNode", "data", "id", "ObjectID", "default", "toHexString", "fields", "relationTo", "collectionSlug", "value", "doc", "openBulkUpload", "useEffectEvent", "hasNodes", "UploadNode", "mergeRegister", "registerNodeTransform", "node_1", "nodeData_1", "transformedImage", "src", "startsWith", "mimeMatch", "match", "mimeType", "base64Data", "byteCharacters", "atob", "byteNumbers", "Array", "i", "charCodeAt", "byteArray", "Uint8Array", "File", "split", "type", "blob", "fetch", "inferredFileName", "pop", "registerCommand", "payload", "selection", "$getSelection", "$getPreviousSelection", "$isRangeSelection", "uploadNode", "focus", "focusNode", "getNode", "$insertNodeToNearestRoot", "$isParagraphNode", "__first", "remove", "COMMAND_PRIORITY_EDITOR", "PASTE_COMMAND", "ClipboardEvent", "clipboardData", "types", "includes", "files_0", "from", "forEach", "file_2", "push", "alt", "file", "selection_0", "file_3", "pendingUploadNode", "URL", "createObjectURL", "focus_0", "focusNode_0", "COMMAND_PRIORITY_LOW", "DROP_COMMAND", "event_0", "DragEvent", "dt", "dataTransfer", "files_1", "file_4", "preventDefault", "stopPropagation", "selection_1", "$createRangeSelection", "applyDOMRange", "$setSelection", "file_5", "pendingUploadNode_0", "focus_1", "focusNode_1", "t6", "useEffect", "t7", "_jsx", "UploadDrawer", "UploadFeatureClient", "createClientFeature", "nodes", "UploadNode", "plugins", "Component", "UploadPlugin", "position", "slashMenu", "groups", "slashMenuBasicGroupWithItems", "Icon", "UploadIcon", "key", "keywords", "label", "i18n", "t", "onSelect", "editor", "dispatchCommand", "INSERT_UPLOAD_WITH_DRAWER_COMMAND", "replace", "toolbarFixed", "toolbarAddDropdownGroupWithItems", "ChildComponent", "isActive", "selection", "$isNodeSelection", "getNodes", "length", "firstNode", "$isUploadNode", "c", "_c", "ShimmerEffect", "useConfig", "lazy", "Suspense", "useEffect", "useState", "LexicalEditorTheme", "block", "blockCursor", "characterLimit", "code", "inlineBlock", "heading", "h1", "h2", "h3", "h4", "h5", "h6", "hr", "hrSelected", "indent", "link", "list", "checklist", "listitem", "listitemChecked", "listitemUnchecked", "nested", "olDepth", "ul", "ltr", "mark", "markOverlap", "paragraph", "placeholder", "quote", "relationship", "rtl", "tab", "table", "tableAddColumns", "tableAddRows", "tableAlignment", "center", "right", "tableCell", "tableCellActionButton", "tableCellActionButtonContainer", "tableCellHeader", "tableCellResizer", "tableCellSelected", "tableFrozenColumn", "tableRowStriping", "tableScrollableWrapper", "tableSelected", "tableSelection", "text", "bold", "italic", "strikethrough", "subscript", "superscript", "underline", "underlineStrikethrough", "upload", "defaultEditorLexicalConfig", "namespace", "theme", "LexicalEditorTheme", "loadClientFeatures", "config", "featureClientImportMap", "featureClientSchemaMap", "field", "schemaPath", "unSanitizedEditorConfig", "featureProviderMap", "Map", "featureProvider", "features", "clientFeatureProps", "featureKey", "order", "undefined", "Error", "set", "sort", "a", "b", "resolvedFeatures", "loaded", "feature", "key", "deepMerge", "sanitizeClientFeatures", "features", "sanitized", "enabledFeatures", "enabledFormats", "markdownTransformers", "nodes", "plugins", "providers", "slashMenu", "dynamicGroups", "groups", "toolbarFixed", "toolbarInline", "customGroups", "forEach", "feature", "key", "sanitizedClientFeatureProps", "size", "length", "concat", "enableFormats", "push", "node", "plugin", "i", "clientProps", "Component", "position", "group", "foundGroup", "find", "sanitizedGroup", "filter", "items", "optionGroup", "transformer", "allNodes", "allTransformers", "Object", "keys", "map", "customConfig", "sort", "a", "b", "order", "sanitizeClientEditorConfig", "resolvedClientFeatureMap", "lexical", "admin", "resolvedFeatureMap", "RichTextEditor", "lazy", "then", "module", "default", "RichText", "RichTextField", "props", "$", "_c", "admin", "t0", "clientFeatures", "featureClientImportMap", "t1", "featureClientSchemaMap", "field", "lexicalEditorConfig", "t2", "schemaPath", "t3", "undefined", "t4", "defaultEditorLexicalConfig", "config", "useConfig", "finalSanitizedEditorConfig", "setFinalSanitizedEditorConfig", "useState", "t5", "t6", "featureProvidersLocal", "clientFeature", "Object", "values", "clientFeatureProvider", "push", "clientFeatureProps", "resolvedClientFeatures", "loadClientFeatures", "name", "unSanitizedEditorConfig", "features", "lexical", "sanitizeClientEditorConfig", "useEffect", "t7", "_jsx", "Suspense", "fallback", "ShimmerEffect", "height", "editorConfig", "isHTMLElement", "x", "HTMLElement", "joinClasses", "args", "filter", "Boolean", "join", "elements", "WeakMap", "readTouch", "e", "touch", "changedTouches", "undefined", "clientX", "clientY", "addListener", "element", "cb", "elementValues", "get", "listeners", "Set", "handleTouchstart", "start", "handleTouchend", "end", "listener", "addEventListener", "set", "add", "deleteListener", "delete", "size", "removeEventListener", "addSwipeLeftListener", "force", "x", "y", "Math", "abs", "addSwipeRightListener", "addSwipeUpListener", "addSwipeDownListener", "c", "_c", "InlineBlockEditButton", "$", "_c", "EditButton", "useInlineBlockComponentContext", "t0", "_jsx", "c", "_c", "InlineBlockRemoveButton", "$", "_c", "RemoveButton", "useInlineBlockComponentContext", "t0", "_jsx", "c", "_c", "InlineBlockLabel", "$", "_c", "Label", "useInlineBlockComponentContext", "t0", "_jsx", "c", "_c", "InlineBlockContainer", "t0", "$", "_c", "children", "useInlineBlockComponentContext", "t1", "_jsx", "BlockCollapsible", "props", "children", "rest", "useBlockComponentContext", "_jsx", "c", "_c", "BlockEditButton", "$", "_c", "EditButton", "useBlockComponentContext", "t0", "_jsx", "c", "_c", "BlockRemoveButton", "$", "_c", "RemoveButton", "useBlockComponentContext", "t0", "_jsx", "stringify", "getRestPopulateFn", "apiURL", "depth", "draft", "locale", "id", "collectionSlug", "select", "query", "addQueryPrefix", "fetch", "credentials", "headers", "Accept", "method", "then", "res", "json", "codeConverter", "customEndRegex", "optional", "regExp", "customStartRegex", "doNotTrimChildren", "export", "fields", "code", "includes", "language", "length", "import", "children", "closeMatch", "openMatch", "startsWith", "slice", "endsWith", "input", "trim", "CodeField", "useFormFields", "useId", "useMemo", "defaultLanguages", "abap", "apex", "azcli", "bat", "bicep", "cameligo", "clojure", "coffee", "cpp", "csharp", "csp", "css", "cypher", "dart", "dockerfile", "ecl", "elixir", "flow9", "freemarker2", "fsharp", "go", "graphql", "handlebars", "hcl", "html", "ini", "java", "javascript", "julia", "kotlin", "less", "lexon", "liquid", "lua", "m3", "markdown", "mdx", "mips", "msdax", "mysql", "pascal", "pascaligo", "perl", "pgsql", "php", "pla", "plaintext", "postiats", "powerquery", "powershell", "protobuf", "pug", "python", "qsharp", "r", "razor", "redis", "redshift", "restructuredtext", "ruby", "rust", "sb", "scala", "scheme", "scss", "shell", "solidity", "sophia", "sparql", "sql", "st", "swift", "systemverilog", "tcl", "twig", "typescript", "typespec", "vb", "wgsl", "xml", "yaml", "CodeComponent", "autoComplete", "field", "forceRender", "languages", "defaultLanguages", "path", "permissions", "readOnly", "renderedBlocks", "schemaPath", "typescript", "validate", "languageField", "useFormFields", "fields", "language", "value", "initialValue", "instanceId", "useId", "label", "props", "useMemo", "type", "admin", "editorOptions", "editorProps", "defaultPath", "name", "undefined", "key", "_jsx", "CodeField", "onMount", "_editor", "monaco", "editor", "defineTheme", "base", "colors", "inherit", "rules", "typescriptDefaults", "setCompilerOptions", "allowNonTsExtensions", "allowJs", "allowSyntheticDefaultImports", "esModuleInterop", "jsx", "JsxEmit", "React", "moduleResolution", "ModuleResolutionKind", "NodeJs", "noEmit", "paths", "reactNamespace", "target", "ScriptTarget", "typeRoots", "setDiagnosticsOptions", "noSemanticValidation", "enableSemanticValidation", "noSyntaxValidation", "fetchTypes", "Array", "isArray", "length", "Promise", "all", "map", "typesText", "fetch", "url", "text", "addExtraLib", "filePath", "useLexicalEditable", "ChevronIcon", "Combobox", "CopyToClipboard", "PopupList", "RenderFields", "useForm", "useFormFields", "useTranslation", "React", "CodeBlockIcon", "_jsx", "fill", "height", "viewBox", "width", "xmlns", "d", "stroke", "strokeLinecap", "useCollapsible", "CollapseIcon", "_jsx", "fill", "height", "viewBox", "width", "xmlns", "d", "stroke", "strokeLinecap", "strokeLinejoin", "baseClass", "Collapse", "toggle", "useCollapsible", "_jsx", "className", "onClick", "type", "CollapseIcon", "useCollapsible", "useTranslation", "baseClass", "FloatingCollapse", "isCollapsed", "toggle", "useCollapsible", "t", "useTranslation", "_jsxs", "className", "onClick", "type", "_jsx", "CollapseIcon", "baseClass", "CodeBlockBlockComponent", "args", "languages", "languagesFromProps", "defaultLanguages", "BlockCollapsible", "formSchema", "RemoveButton", "useBlockComponentContext", "setModified", "useForm", "t", "useTranslation", "codeField", "useFormFields", "fields", "code", "selectedLanguageField", "setSelectedLanguage", "dispatch", "language", "type", "path", "value", "selectedLanguageLabel", "isEditable", "useLexicalEditable", "languageEntries", "React", "useMemo", "Object", "entries", "map", "languageCode", "languageLabel", "name", "Component", "_jsx", "PopupList", "Button", "active", "disabled", "onClick", "className", "Actions", "_jsxs", "Combobox", "button", "ChevronIcon", "buttonType", "horizontalAlign", "minEntriesForSearch", "searchPlaceholder", "showScrollbar", "size", "CopyToClipboard", "Collapse", "collapsibleProps", "AfterCollapsible", "FloatingCollapse", "disableHeaderToggle", "disableToggleIndicator", "Pill", "CodeBlockIcon", "RenderFields", "forceRender", "parentIndexPath", "parentPath", "parentSchemaPath", "permissions", "readOnly", "c", "_c", "FieldContext", "FieldPathContext", "ServerFunctionsContext", "ShimmerEffect", "useServerFunctions", "React", "useEffect", "useRef", "RenderLexical", "args", "$", "field", "initialValue", "Loading", "path", "schemaPath", "setValue", "value", "Component", "setComponent", "useState", "serverFunctionContext", "_internal_renderField", "entityType", "entitySlug", "split", "fieldPath", "name", "t0", "Field", "type", "admin", "hidden", "undefined", "renderLexical", "mounted", "t1", "t2", "current", "_jsx", "adjustedServerFunctionContext", "getFormState", "getFormStateArgs", "collectionSlug", "globalSlug", "children", "fieldValue", "disabled", "formInitializing", "formProcessing", "formSubmitted", "_temp", "showError", "buildEditorState", "nodes", "text", "editorJSON", "root", "type", "children", "direction", "format", "indent", "version", "push", "detail", "mode", "style", "textFormat", "textStyle", "length", "buildDefaultEditorState"],"mappings":"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O;QACP,KAAO;QACP,KAAO;IACT;IACAC,OAAO;IACPC,MAAM;QACJ,IAAM;QACN,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;IACT;IACAC,SAAS;IACTC,MAAM;QACJ,IAAM;QACN,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;IACT;IACAC,SAAS;QACP,IAAM;QACN,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;IACT;IACAC,SAAS;QACP,IAAM;QACN,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;IACT;IACAC,MAAM;QACJ,IAAM;QACN,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;IACT;IACAC,OAAO;QACL,IAAM;QACN,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;IACT;IACAC,QAAQ;QACN,IAAM;QACN,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;IACT;IACAC,SAAS;IACTC,MAAM;QACJ,IAAM;QACN,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;IACT;IACAC,SAAS;QACP,IAAM;QACN,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;IACT;IACAC,QAAQ;QACN,IAAM;QACN,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;IACT;IACAC,MAAM;QACJ,IAAM;QACN,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;IACT;IACAC,QAAQ;QACN,IAAM;QACN,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;IACT;IACAC,KAAK;QACH,IAAM;QACN,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;IACT;IACAC,MAAM;QACJ,IAAM;QACN,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;IACT;IACAC,KAAK;QACH,IAAM;QACN,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;IACT;IACAC,OAAO;QACL,IAAM;QACN,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;IACT;IACAC,OAAO;QACL,IAAM;QACN,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;IACT;IACAC,MAAM;QACJ,IAAM;QACN,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;IACT;IACAC,aAAa;IACbC,QAAQ;QACN,IAAM;QACN,KAAO;QACP,KAAO;QACP,KAAO;QACP,KAAO;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"}}]
}