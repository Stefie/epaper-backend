{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/src/components/RenderPage/index.tsx"],"sourcesContent":["import type { Page } from '@payload-types'\n\nimport React from 'react'\n\nexport const RenderPage = ({ data }: { data: Page }) => {\n  return (\n    <React.Fragment>\n      <form action=\"/api/users/logout\" method=\"post\">\n        <button type=\"submit\">Logout</button>\n      </form>\n      <h2>Here you can decide how you would like to render the page data!</h2>\n\n      <code>{JSON.stringify(data)}</code>\n    </React.Fragment>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;;;AAEO,MAAM,aAAa,CAAC,EAAE,IAAI,EAAkB;IACjD,qBACE,iZAAC,mXAAK,CAAC,QAAQ;;0BACb,iZAAC;gBAAK,QAAO;gBAAoB,QAAO;0BACtC,cAAA,iZAAC;oBAAO,MAAK;8BAAS;;;;;;;;;;;0BAExB,iZAAC;0BAAG;;;;;;0BAEJ,iZAAC;0BAAM,KAAK,SAAS,CAAC;;;;;;;;;;;;AAG5B"}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/src/app/%28app%29/tenant-domains/%5Btenant%5D/%5B...slug%5D/page.tsx"],"sourcesContent":["import type { Where } from 'payload'\n\nimport configPromise from '@payload-config'\nimport { headers as getHeaders } from 'next/headers'\nimport { notFound, redirect } from 'next/navigation'\nimport { getPayload } from 'payload'\nimport React from 'react'\n\nimport { RenderPage } from '../../../../../components/RenderPage'\n\n// eslint-disable-next-line no-restricted-exports\nexport default async function Page({\n  params: paramsPromise,\n}: {\n  params: Promise<{ slug?: string[]; tenant: string }>\n}) {\n  const params = await paramsPromise\n  let slug = undefined\n  if (params?.slug) {\n    // remove the domain route param\n    params.slug.splice(0, 1)\n    slug = params.slug\n  }\n\n  const headers = await getHeaders()\n  const payload = await getPayload({ config: configPromise })\n  const { user } = await payload.auth({ headers })\n\n  try {\n    const tenantsQuery = await payload.find({\n      collection: 'tenants',\n      overrideAccess: false,\n      user,\n      where: {\n        domain: {\n          equals: params.tenant,\n        },\n      },\n    })\n\n    // If no tenant is found, the user does not have access\n    // Show the login view\n    if (tenantsQuery.docs.length === 0) {\n      redirect(\n        `/tenant-domains/login?redirect=${encodeURIComponent(\n          `/tenant-domains${slug ? `/${slug.join('/')}` : ''}`,\n        )}`,\n      )\n    }\n  } catch (e) {\n    // If the query fails, it means the user did not have access to query on the domain field\n    // Show the login view\n    redirect(\n      `/tenant-domains/login?redirect=${encodeURIComponent(\n        `/tenant-domains${slug ? `/${slug.join('/')}` : ''}`,\n      )}`,\n    )\n  }\n\n  const slugConstraint: Where = slug\n    ? {\n        slug: {\n          equals: slug.join('/'),\n        },\n      }\n    : {\n        or: [\n          {\n            slug: {\n              equals: '',\n            },\n          },\n          {\n            slug: {\n              equals: 'home',\n            },\n          },\n          {\n            slug: {\n              exists: false,\n            },\n          },\n        ],\n      }\n\n  const pageQuery = await payload.find({\n    collection: 'pages',\n    overrideAccess: false,\n    user,\n    where: {\n      and: [\n        {\n          'tenant.domain': {\n            equals: params.tenant,\n          },\n        },\n        slugConstraint,\n      ],\n    },\n  })\n\n  console.log(\"pageQuery>>> \", pageQuery)\n\n  const pageData = pageQuery.docs?.[0]\n\n  // The page with the provided slug could not be found\n  if (!pageData) {\n    return notFound()\n  }\n\n  // The page was found, render the page with data\n  return <RenderPage data={pageData} />\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AACA;AAGA;;;;;;;;;;;AAGe,eAAe,KAAK,EACjC,QAAQ,aAAa,EAGtB;IACC,MAAM,SAAS,MAAM;IACrB,IAAI,OAAO;IACX,IAAI,QAAQ,MAAM;QAChB,gCAAgC;QAChC,OAAO,IAAI,CAAC,MAAM,CAAC,GAAG;QACtB,OAAO,OAAO,IAAI;IACpB;IAEA,MAAM,UAAU,MAAM,IAAA,6SAAU;IAChC,MAAM,UAAU,MAAM,IAAA,8QAAU,EAAC;QAAE,QAAQ,mIAAa;IAAC;IACzD,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,QAAQ,IAAI,CAAC;QAAE;IAAQ;IAE9C,IAAI;QACF,MAAM,eAAe,MAAM,QAAQ,IAAI,CAAC;YACtC,YAAY;YACZ,gBAAgB;YAChB;YACA,OAAO;gBACL,QAAQ;oBACN,QAAQ,OAAO,MAAM;gBACvB;YACF;QACF;QAEA,uDAAuD;QACvD,sBAAsB;QACtB,IAAI,aAAa,IAAI,CAAC,MAAM,KAAK,GAAG;YAClC,IAAA,oWAAQ,EACN,CAAC,+BAA+B,EAAE,mBAChC,CAAC,eAAe,EAAE,OAAO,CAAC,CAAC,EAAE,KAAK,IAAI,CAAC,MAAM,GAAG,IAAI,GACnD;QAEP;IACF,EAAE,OAAO,GAAG;QACV,yFAAyF;QACzF,sBAAsB;QACtB,IAAA,oWAAQ,EACN,CAAC,+BAA+B,EAAE,mBAChC,CAAC,eAAe,EAAE,OAAO,CAAC,CAAC,EAAE,KAAK,IAAI,CAAC,MAAM,GAAG,IAAI,GACnD;IAEP;IAEA,MAAM,iBAAwB,OAC1B;QACE,MAAM;YACJ,QAAQ,KAAK,IAAI,CAAC;QACpB;IACF,IACA;QACE,IAAI;YACF;gBACE,MAAM;oBACJ,QAAQ;gBACV;YACF;YACA;gBACE,MAAM;oBACJ,QAAQ;gBACV;YACF;YACA;gBACE,MAAM;oBACJ,QAAQ;gBACV;YACF;SACD;IACH;IAEJ,MAAM,YAAY,MAAM,QAAQ,IAAI,CAAC;QACnC,YAAY;QACZ,gBAAgB;QAChB;QACA,OAAO;YACL,KAAK;gBACH;oBACE,iBAAiB;wBACf,QAAQ,OAAO,MAAM;oBACvB;gBACF;gBACA;aACD;QACH;IACF;IAEA,QAAQ,GAAG,CAAC,iBAAiB;IAE7B,MAAM,WAAW,UAAU,IAAI,EAAE,CAAC,EAAE;IAEpC,qDAAqD;IACrD,IAAI,CAAC,UAAU;QACb,OAAO,IAAA,oWAAQ;IACjB;IAEA,gDAAgD;IAChD,qBAAO,iZAAC,uJAAU;QAAC,MAAM;;;;;;AAC3B"}},
    {"offset": {"line": 185, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/src/app/%28app%29/tenant-domains/%5Btenant%5D/page.tsx"],"sourcesContent":["import Page from './[...slug]/page'\n\nexport default Page\n"],"names":[],"mappings":";;;;AAAA;;;;;;uCAEe,8LAAI"}}]
}