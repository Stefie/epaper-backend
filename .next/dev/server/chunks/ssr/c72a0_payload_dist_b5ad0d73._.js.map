{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/errors/APIError.ts"],"sourcesContent":["import { status as httpStatus } from 'http-status'\n\n// This gets dynamically reassigned during compilation\nexport let APIErrorName = 'APIError'\n\nclass ExtendableError<TData extends object = { [key: string]: unknown }> extends Error {\n  data: TData\n\n  isOperational: boolean\n\n  isPublic: boolean\n\n  status: number\n\n  constructor(message: string, status: number, data: TData, isPublic: boolean) {\n    super(message, {\n      // show data in cause\n      cause: data,\n    })\n    APIErrorName = this.constructor.name\n    this.name = this.constructor.name\n    this.message = message\n    this.status = status\n    this.data = data\n    this.isPublic = isPublic\n    this.isOperational = true // This is required since bluebird 4 doesn't append it anymore.\n    Error.captureStackTrace(this, this.constructor)\n  }\n}\n\n/**\n * Class representing an API error.\n * @extends ExtendableError\n */\nexport class APIError<\n  TData extends null | object = { [key: string]: unknown } | null,\n  // @ts-expect-error - vestiges of when tsconfig was not strict. Feel free to improve\n> extends ExtendableError<TData> {\n  /**\n   * Creates an API error.\n   * @param {string} message - Error message.\n   * @param {number} status - HTTP status code of error.\n   * @param {object} data - response data to be returned.\n   * @param {boolean} isPublic - Whether the message should be visible to user or not.\n   */\n  constructor(\n    message: string,\n    status: number = httpStatus.INTERNAL_SERVER_ERROR,\n    data: TData = null!,\n    isPublic = false,\n  ) {\n    super(message, status, data, isPublic)\n  }\n}\n"],"names":["status","httpStatus","APIErrorName","ExtendableError","Error","data","isOperational","isPublic","constructor","message","cause","name","captureStackTrace","APIError","INTERNAL_SERVER_ERROR"],"mappings":";;;;;;;AAAA,SAASA,UAAUC,UAAU,QAAQ,cAAa;;AAG3C,IAAIC,eAAe,WAAU;AAEpC,MAAMC,wBAA2EC;IAC/EC,KAAW;IAEXC,cAAsB;IAEtBC,SAAiB;IAEjBP,OAAc;IAEdQ,YAAYC,OAAe,EAAET,MAAc,EAAEK,IAAW,EAAEE,QAAiB,CAAE;QAC3E,KAAK,CAACE,SAAS;YACb,qBAAqB;YACrBC,OAAOL;QACT;QACAH,eAAe,IAAI,CAACM,WAAW,CAACG,IAAI;QACpC,IAAI,CAACA,IAAI,GAAG,IAAI,CAACH,WAAW,CAACG,IAAI;QACjC,IAAI,CAACF,OAAO,GAAGA;QACf,IAAI,CAACT,MAAM,GAAGA;QACd,IAAI,CAACK,IAAI,GAAGA;QACZ,IAAI,CAACE,QAAQ,GAAGA;QAChB,IAAI,CAACD,aAAa,GAAG,KAAK,+DAA+D;;QACzFF,MAAMQ,iBAAiB,CAAC,IAAI,EAAE,IAAI,CAACJ,WAAW;IAChD;AACF;AAMO,MAAMK,iBAGHV;IACR;;;;;;GAMC,GACDK,YACEC,OAAe,EACfT,SAAiBC,+PAAAA,CAAWa,qBAAqB,EACjDT,OAAc,IAAK,EACnBE,WAAW,KAAK,CAChB;QACA,KAAK,CAACE,SAAST,QAAQK,MAAME;IAC/B;AACF"}},
    {"offset": {"line": 50, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/errors/MissingEditorProp.ts"],"sourcesContent":["import type { Field } from '../fields/config/types.js'\n\nimport { fieldAffectsData } from '../fields/config/types.js'\nimport { APIError } from './APIError.js'\n\nexport class MissingEditorProp extends APIError {\n  constructor(field: Field) {\n    super(\n      `RichText field${fieldAffectsData(field) ? ` \"${field.name}\"` : ''} is missing the editor prop. For sub-richText fields, the editor props is required, as it would otherwise create infinite recursion.`,\n    )\n  }\n}\n"],"names":["fieldAffectsData","APIError","MissingEditorProp","constructor","field","name"],"mappings":";;;;AAEA,SAASA,gBAAgB,QAAQ,4BAA2B;AAC5D,SAASC,QAAQ,QAAQ,gBAAe;;;AAEjC,MAAMC,0BAA0BD,yQAAAA;IACrCE,YAAYC,KAAY,CAAE;QACxB,KAAK,CACH,CAAC,cAAc,MAAEJ,wRAAAA,EAAiBI,SAAS,CAAC,EAAE,EAAEA,MAAMC,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,oIAAoI,CAAC;IAE5M;AACF"}},
    {"offset": {"line": 67, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/errors/DuplicateFieldName.ts"],"sourcesContent":["import { APIError } from './APIError.js'\n\nexport class DuplicateFieldName extends APIError {\n  constructor(fieldName: string) {\n    super(\n      `A field with the name '${fieldName}' was found multiple times on the same level. Field names must be unique.`,\n    )\n  }\n}\n"],"names":["APIError","DuplicateFieldName","constructor","fieldName"],"mappings":";;;;AAAA,SAASA,QAAQ,QAAQ,gBAAe;;AAEjC,MAAMC,2BAA2BD,yQAAAA;IACtCE,YAAYC,SAAiB,CAAE;QAC7B,KAAK,CACH,CAAC,uBAAuB,EAAEA,UAAU,yEAAyE,CAAC;IAElH;AACF"}},
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/errors/InvalidConfiguration.ts"],"sourcesContent":["import { status as httpStatus } from 'http-status'\n\nimport { APIError } from './APIError.js'\n\nexport class InvalidConfiguration extends APIError {\n  constructor(message: string) {\n    super(message, httpStatus.INTERNAL_SERVER_ERROR)\n  }\n}\n"],"names":["status","httpStatus","APIError","InvalidConfiguration","constructor","message","INTERNAL_SERVER_ERROR"],"mappings":";;;;;AAAA,SAASA,UAAUC,UAAU,QAAQ,cAAa;AAElD,SAASC,QAAQ,QAAQ,gBAAe;;;AAEjC,MAAMC,6BAA6BD,yQAAAA;IACxCE,YAAYC,OAAe,CAAE;QAC3B,KAAK,CAACA,SAASJ,+PAAAA,CAAWK,qBAAqB;IACjD;AACF"}},
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/errors/InvalidFieldName.ts"],"sourcesContent":["import type { FieldAffectingData } from '../fields/config/types.js'\n\nimport { APIError } from './APIError.js'\n\nexport class InvalidFieldName extends APIError {\n  constructor(field: FieldAffectingData, fieldName: string) {\n    super(\n      `Field ${field.label} has invalid name '${fieldName}'. Field names can not include periods (.) and must be alphanumeric.`,\n    )\n  }\n}\n"],"names":["APIError","InvalidFieldName","constructor","field","fieldName","label"],"mappings":";;;;AAEA,SAASA,QAAQ,QAAQ,gBAAe;;AAEjC,MAAMC,yBAAyBD,yQAAAA;IACpCE,YAAYC,KAAyB,EAAEC,SAAiB,CAAE;QACxD,KAAK,CACH,CAAC,MAAM,EAAED,MAAME,KAAK,CAAC,mBAAmB,EAAED,UAAU,oEAAoE,CAAC;IAE7H;AACF"}},
    {"offset": {"line": 115, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/errors/InvalidFieldRelationship.ts"],"sourcesContent":["import type { RelationshipField, UploadField } from '../fields/config/types.js'\n\nimport { APIError } from './APIError.js'\n\nexport class InvalidFieldRelationship extends APIError {\n  constructor(field: RelationshipField | UploadField, relationship: string) {\n    super(`Field ${field.label} has invalid relationship '${relationship}'.`)\n  }\n}\n"],"names":["APIError","InvalidFieldRelationship","constructor","field","relationship","label"],"mappings":";;;;AAEA,SAASA,QAAQ,QAAQ,gBAAe;;AAEjC,MAAMC,iCAAiCD,yQAAAA;IAC5CE,YAAYC,KAAsC,EAAEC,YAAoB,CAAE;QACxE,KAAK,CAAC,CAAC,MAAM,EAAED,MAAME,KAAK,CAAC,2BAA2B,EAAED,aAAa,EAAE,CAAC;IAC1E;AACF"}},
    {"offset": {"line": 130, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/errors/MissingFieldType.ts"],"sourcesContent":["import type { Field } from '../fields/config/types.js'\n\nimport { fieldAffectsData } from '../fields/config/types.js'\nimport { APIError } from './APIError.js'\n\nexport class MissingFieldType extends APIError {\n  constructor(field: Field) {\n    super(\n      `Field${\n        fieldAffectsData(field) ? ` \"${field.name}\"` : ''\n      } is either missing a field type or it does not match an available field type`,\n    )\n  }\n}\n"],"names":["fieldAffectsData","APIError","MissingFieldType","constructor","field","name"],"mappings":";;;;AAEA,SAASA,gBAAgB,QAAQ,4BAA2B;AAC5D,SAASC,QAAQ,QAAQ,gBAAe;;;AAEjC,MAAMC,yBAAyBD,yQAAAA;IACpCE,YAAYC,KAAY,CAAE;QACxB,KAAK,CACH,CAAC,KAAK,MACJJ,wRAAAA,EAAiBI,SAAS,CAAC,EAAE,EAAEA,MAAMC,IAAI,CAAC,CAAC,CAAC,GAAG,GAChD,4EAA4E,CAAC;IAElF;AACF"}},
    {"offset": {"line": 147, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/errors/ReservedFieldName.ts"],"sourcesContent":["import type { FieldAffectingData } from '../fields/config/types.js'\n\nimport { APIError } from './APIError.js'\n\nexport class ReservedFieldName extends APIError {\n  constructor(field: FieldAffectingData, fieldName: string) {\n    super(`Field ${field.label} has reserved name '${fieldName}'.`)\n  }\n}\n"],"names":["APIError","ReservedFieldName","constructor","field","fieldName","label"],"mappings":";;;;AAEA,SAASA,QAAQ,QAAQ,gBAAe;;AAEjC,MAAMC,0BAA0BD,yQAAAA;IACrCE,YAAYC,KAAyB,EAAEC,SAAiB,CAAE;QACxD,KAAK,CAAC,CAAC,MAAM,EAAED,MAAME,KAAK,CAAC,oBAAoB,EAAED,UAAU,EAAE,CAAC;IAChE;AACF"}},
    {"offset": {"line": 162, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/errors/InvalidFieldJoin.ts"],"sourcesContent":["import type { JoinField } from '../fields/config/types.js'\n\nimport { APIError } from './APIError.js'\n\nexport class InvalidFieldJoin extends APIError {\n  constructor(field: JoinField) {\n    super(\n      `Invalid join field ${field.name}. The config does not have a field '${field.on}' in collection '${field.collection}'.`,\n    )\n  }\n}\n"],"names":["APIError","InvalidFieldJoin","constructor","field","name","on","collection"],"mappings":";;;;AAEA,SAASA,QAAQ,QAAQ,gBAAe;;AAEjC,MAAMC,yBAAyBD,yQAAAA;IACpCE,YAAYC,KAAgB,CAAE;QAC5B,KAAK,CACH,CAAC,mBAAmB,EAAEA,MAAMC,IAAI,CAAC,oCAAoC,EAAED,MAAME,EAAE,CAAC,iBAAiB,EAAEF,MAAMG,UAAU,CAAC,EAAE,CAAC;IAE3H;AACF"}},
    {"offset": {"line": 177, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/errors/Forbidden.ts"],"sourcesContent":["import type { TFunction } from '@payloadcms/translations'\n\nimport { en } from '@payloadcms/translations/languages/en'\nimport { status as httpStatus } from 'http-status'\n\nimport { APIError } from './APIError.js'\n\nexport class Forbidden extends APIError {\n  constructor(t?: TFunction) {\n    super(\n      t ? t('error:notAllowedToPerformAction') : en.translations.error.notAllowedToPerformAction,\n      httpStatus.FORBIDDEN,\n    )\n  }\n}\n"],"names":["en","status","httpStatus","APIError","Forbidden","constructor","t","translations","error","notAllowedToPerformAction","FORBIDDEN"],"mappings":";;;;AAEA,SAASA,EAAE,QAAQ,wCAAuC;;AAC1D,SAASC,UAAUC,UAAU,QAAQ,cAAa;AAElD,SAASC,QAAQ,QAAQ,gBAAe;;;;AAEjC,MAAMC,kBAAkBD,yQAAAA;IAC7BE,YAAYC,CAAa,CAAE;QACzB,KAAK,CACHA,IAAIA,EAAE,qCAAqCN,uPAAAA,CAAGO,YAAY,CAACC,KAAK,CAACC,yBAAyB,EAC1FP,+PAAAA,CAAWQ,SAAS;IAExB;AACF"}},
    {"offset": {"line": 197, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/errors/AuthenticationError.ts"],"sourcesContent":["import type { TFunction } from '@payloadcms/translations'\n\nimport { en } from '@payloadcms/translations/languages/en'\nimport { status as httpStatus } from 'http-status'\n\nimport { APIError } from './APIError.js'\n\nexport class AuthenticationError extends APIError {\n  constructor(t?: TFunction, loginWithUsername?: boolean) {\n    super(\n      t\n        ? `${loginWithUsername ? t('error:usernameOrPasswordIncorrect') : t('error:emailOrPasswordIncorrect')}`\n        : en.translations.error.emailOrPasswordIncorrect,\n      httpStatus.UNAUTHORIZED,\n    )\n  }\n}\n"],"names":["en","status","httpStatus","APIError","AuthenticationError","constructor","t","loginWithUsername","translations","error","emailOrPasswordIncorrect","UNAUTHORIZED"],"mappings":";;;;AAEA,SAASA,EAAE,QAAQ,wCAAuC;;AAC1D,SAASC,UAAUC,UAAU,QAAQ,cAAa;AAElD,SAASC,QAAQ,QAAQ,gBAAe;;;;AAEjC,MAAMC,4BAA4BD,yQAAAA;IACvCE,YAAYC,CAAa,EAAEC,iBAA2B,CAAE;QACtD,KAAK,CACHD,IACI,GAAGC,oBAAoBD,EAAE,uCAAuCA,EAAE,mCAAmC,GACrGN,uPAAAA,CAAGQ,YAAY,CAACC,KAAK,CAACC,wBAAwB,EAClDR,+PAAAA,CAAWS,YAAY;IAE3B;AACF"}},
    {"offset": {"line": 217, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/errors/LockedAuth.ts"],"sourcesContent":["import type { TFunction } from '@payloadcms/translations'\n\nimport { en } from '@payloadcms/translations/languages/en'\nimport { status as httpStatus } from 'http-status'\n\nimport { APIError } from './APIError.js'\n\nexport class LockedAuth extends APIError {\n  constructor(t?: TFunction) {\n    super(t ? t('error:userLocked') : en.translations.error.userLocked, httpStatus.UNAUTHORIZED)\n  }\n}\n"],"names":["en","status","httpStatus","APIError","LockedAuth","constructor","t","translations","error","userLocked","UNAUTHORIZED"],"mappings":";;;;AAEA,SAASA,EAAE,QAAQ,wCAAuC;;AAC1D,SAASC,UAAUC,UAAU,QAAQ,cAAa;AAElD,SAASC,QAAQ,QAAQ,gBAAe;;;;AAEjC,MAAMC,mBAAmBD,yQAAAA;IAC9BE,YAAYC,CAAa,CAAE;QACzB,KAAK,CAACA,IAAIA,EAAE,sBAAsBN,uPAAAA,CAAGO,YAAY,CAACC,KAAK,CAACC,UAAU,EAAEP,+PAAAA,CAAWQ,YAAY;IAC7F;AACF"}},
    {"offset": {"line": 237, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/errors/UnverifiedEmail.ts"],"sourcesContent":["import type { TFunction } from '@payloadcms/translations'\n\nimport { en } from '@payloadcms/translations/languages/en'\nimport { status as httpStatus } from 'http-status'\n\nimport { APIError } from './APIError.js'\n\nexport class UnverifiedEmail extends APIError {\n  constructor({ t }: { t?: TFunction }) {\n    super(\n      t ? t('error:unverifiedEmail') : en.translations.error.unverifiedEmail,\n      httpStatus.FORBIDDEN,\n    )\n  }\n}\n"],"names":["en","status","httpStatus","APIError","UnverifiedEmail","constructor","t","translations","error","unverifiedEmail","FORBIDDEN"],"mappings":";;;;AAEA,SAASA,EAAE,QAAQ,wCAAuC;;AAC1D,SAASC,UAAUC,UAAU,QAAQ,cAAa;AAElD,SAASC,QAAQ,QAAQ,gBAAe;;;;AAEjC,MAAMC,wBAAwBD,yQAAAA;IACnCE,YAAY,EAAEC,CAAC,EAAqB,CAAE;QACpC,KAAK,CACHA,IAAIA,EAAE,2BAA2BN,uPAAAA,CAAGO,YAAY,CAACC,KAAK,CAACC,eAAe,EACtEP,+PAAAA,CAAWQ,SAAS;IAExB;AACF"}},
    {"offset": {"line": 257, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/errors/ValidationError.ts"],"sourcesContent":["import type { TFunction } from '@payloadcms/translations'\n\nimport { en } from '@payloadcms/translations/languages/en'\nimport { status as httpStatus } from 'http-status'\n\nimport type { LabelFunction, StaticLabel } from '../config/types.js'\nimport type { PayloadRequest } from '../types/index.js'\n\nimport { APIError } from './APIError.js'\n\n// This gets dynamically reassigned during compilation\nexport let ValidationErrorName = 'ValidationError'\n\nexport type ValidationFieldError = {\n  label?: LabelFunction | StaticLabel\n  // The error message to display for this field\n  message: string\n  path: string\n}\n\nexport class ValidationError extends APIError<{\n  collection?: string\n  errors: ValidationFieldError[]\n  global?: string\n}> {\n  constructor(\n    results: {\n      collection?: string\n      errors: ValidationFieldError[]\n      global?: string\n      id?: number | string\n      /**\n       *  req needs to be passed through (if you have one) in order to resolve label functions that may be part of the errors array\n       */\n      req?: Partial<PayloadRequest>\n    },\n    t?: TFunction,\n  ) {\n    const message = t\n      ? t('error:followingFieldsInvalid', { count: results.errors.length })\n      : results.errors.length === 1\n        ? en.translations.error.followingFieldsInvalid_one\n        : en.translations.error.followingFieldsInvalid_other\n\n    const req = results.req\n    // delete to avoid logging the whole req\n    delete results['req']\n\n    super(\n      `${message} ${results.errors\n        .map((f) => {\n          if (f.label) {\n            if (typeof f.label === 'function') {\n              if (!req || !req.i18n || !req.t) {\n                return f.path\n              }\n\n              return f.label({ i18n: req.i18n, t: req.t })\n            }\n\n            if (typeof f.label === 'object') {\n              if (req?.i18n?.language) {\n                return f.label[req.i18n.language]\n              }\n\n              return f.label[Object.keys(f.label)[0]!]\n            }\n\n            return f.label\n          }\n\n          return f.path\n        })\n        .join(', ')}`,\n      httpStatus.BAD_REQUEST,\n      results,\n    )\n\n    ValidationErrorName = this.constructor.name\n  }\n}\n"],"names":["en","status","httpStatus","APIError","ValidationErrorName","ValidationError","constructor","results","t","message","count","errors","length","translations","error","followingFieldsInvalid_one","followingFieldsInvalid_other","req","map","f","label","i18n","path","language","Object","keys","join","BAD_REQUEST","name"],"mappings":";;;;;;AAEA,SAASA,EAAE,QAAQ,wCAAuC;;AAC1D,SAASC,UAAUC,UAAU,QAAQ,cAAa;AAKlD,SAASC,QAAQ,QAAQ,gBAAe;;;;AAGjC,IAAIC,sBAAsB,kBAAiB;AAS3C,MAAMC,wBAAwBF,yQAAAA;IAKnCG,YACEC,OASC,EACDC,CAAa,CACb;QACA,MAAMC,UAAUD,IACZA,EAAE,gCAAgC;YAAEE,OAAOH,QAAQI,MAAM,CAACC,MAAM;QAAC,KACjEL,QAAQI,MAAM,CAACC,MAAM,KAAK,IACxBZ,uPAAAA,CAAGa,YAAY,CAACC,KAAK,CAACC,0BAA0B,GAChDf,uPAAAA,CAAGa,YAAY,CAACC,KAAK,CAACE,4BAA4B;QAExD,MAAMC,MAAMV,QAAQU,GAAG;QACvB,wCAAwC;QACxC,OAAOV,OAAO,CAAC,MAAM;QAErB,KAAK,CACH,GAAGE,QAAQ,CAAC,EAAEF,QAAQI,MAAM,CACzBO,GAAG,CAAC,CAACC;YACJ,IAAIA,EAAEC,KAAK,EAAE;gBACX,IAAI,OAAOD,EAAEC,KAAK,KAAK,YAAY;oBACjC,IAAI,CAACH,OAAO,CAACA,IAAII,IAAI,IAAI,CAACJ,IAAIT,CAAC,EAAE;wBAC/B,OAAOW,EAAEG,IAAI;oBACf;oBAEA,OAAOH,EAAEC,KAAK,CAAC;wBAAEC,MAAMJ,IAAII,IAAI;wBAAEb,GAAGS,IAAIT,CAAC;oBAAC;gBAC5C;gBAEA,IAAI,OAAOW,EAAEC,KAAK,KAAK,UAAU;oBAC/B,IAAIH,KAAKI,MAAME,UAAU;wBACvB,OAAOJ,EAAEC,KAAK,CAACH,IAAII,IAAI,CAACE,QAAQ,CAAC;oBACnC;oBAEA,OAAOJ,EAAEC,KAAK,CAACI,OAAOC,IAAI,CAACN,EAAEC,KAAK,CAAC,CAAC,EAAE,CAAE;gBAC1C;gBAEA,OAAOD,EAAEC,KAAK;YAChB;YAEA,OAAOD,EAAEG,IAAI;QACf,GACCI,IAAI,CAAC,OAAO,EACfxB,+PAAAA,CAAWyB,WAAW,EACtBpB;QAGFH,sBAAsB,IAAI,CAACE,WAAW,CAACsB,IAAI;IAC7C;AACF"}},
    {"offset": {"line": 307, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/errors/TimestampsRequired.ts"],"sourcesContent":["import type { CollectionConfig } from '../collections/config/types.js'\n\nimport { APIError } from './APIError.js'\n\nexport class TimestampsRequired extends APIError {\n  constructor(collection: CollectionConfig) {\n    super(\n      `Timestamps are required in the collection ${collection.slug} because you have opted in to Versions.`,\n    )\n  }\n}\n"],"names":["APIError","TimestampsRequired","constructor","collection","slug"],"mappings":";;;;AAEA,SAASA,QAAQ,QAAQ,gBAAe;;AAEjC,MAAMC,2BAA2BD,yQAAAA;IACtCE,YAAYC,UAA4B,CAAE;QACxC,KAAK,CACH,CAAC,0CAA0C,EAAEA,WAAWC,IAAI,CAAC,uCAAuC,CAAC;IAEzG;AACF"}},
    {"offset": {"line": 322, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/errors/QueryError.ts"],"sourcesContent":["import { status as httpStatus } from 'http-status'\n\nimport { APIError } from './APIError.js'\n\nexport class QueryError extends APIError<{ path: string }[]> {\n  constructor(results: { path: string }[]) {\n    const message = `The following path${results.length === 1 ? '' : 's'} cannot be queried:`\n\n    super(\n      `${message} ${results.map((err) => err.path).join(', ')}`,\n      httpStatus.BAD_REQUEST,\n      results,\n    )\n  }\n}\n"],"names":["status","httpStatus","APIError","QueryError","constructor","results","message","length","map","err","path","join","BAD_REQUEST"],"mappings":";;;;;AAAA,SAASA,UAAUC,UAAU,QAAQ,cAAa;AAElD,SAASC,QAAQ,QAAQ,gBAAe;;;AAEjC,MAAMC,mBAAmBD,yQAAAA;IAC9BE,YAAYC,OAA2B,CAAE;QACvC,MAAMC,UAAU,CAAC,kBAAkB,EAAED,QAAQE,MAAM,KAAK,IAAI,KAAK,IAAI,mBAAmB,CAAC;QAEzF,KAAK,CACH,GAAGD,QAAQ,CAAC,EAAED,QAAQG,GAAG,CAAC,CAACC,MAAQA,IAAIC,IAAI,EAAEC,IAAI,CAAC,OAAO,EACzDV,+PAAAA,CAAWW,WAAW,EACtBP;IAEJ;AACF"}},
    {"offset": {"line": 341, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/errors/NotFound.ts"],"sourcesContent":["import type { TFunction } from '@payloadcms/translations'\n\nimport { en } from '@payloadcms/translations/languages/en'\nimport { status as httpStatus } from 'http-status'\n\nimport { APIError } from './APIError.js'\n\nexport class NotFound extends APIError {\n  constructor(t?: TFunction) {\n    super(t ? t('general:notFound') : en.translations.general.notFound, httpStatus.NOT_FOUND)\n  }\n}\n"],"names":["en","status","httpStatus","APIError","NotFound","constructor","t","translations","general","notFound","NOT_FOUND"],"mappings":";;;;AAEA,SAASA,EAAE,QAAQ,wCAAuC;;AAC1D,SAASC,UAAUC,UAAU,QAAQ,cAAa;AAElD,SAASC,QAAQ,QAAQ,gBAAe;;;;AAEjC,MAAMC,iBAAiBD,yQAAAA;IAC5BE,YAAYC,CAAa,CAAE;QACzB,KAAK,CAACA,IAAIA,EAAE,sBAAsBN,uPAAAA,CAAGO,YAAY,CAACC,OAAO,CAACC,QAAQ,EAAEP,+PAAAA,CAAWQ,SAAS;IAC1F;AACF"}},
    {"offset": {"line": 361, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/errors/FileRetrievalError.ts"],"sourcesContent":["import type { TFunction } from '@payloadcms/translations'\n\nimport { status as httpStatus } from 'http-status'\n\nimport { APIError } from './APIError.js'\n\nexport class FileRetrievalError extends APIError {\n  constructor(t?: TFunction, message?: string) {\n    let msg = t ? t('error:problemUploadingFile') : 'There was a problem while retrieving the file.'\n\n    if (message) {\n      msg += ` ${message}`\n    }\n    super(msg, httpStatus.INTERNAL_SERVER_ERROR)\n  }\n}\n"],"names":["status","httpStatus","APIError","FileRetrievalError","constructor","t","message","msg","INTERNAL_SERVER_ERROR"],"mappings":";;;;;AAEA,SAASA,UAAUC,UAAU,QAAQ,cAAa;AAElD,SAASC,QAAQ,QAAQ,gBAAe;;;AAEjC,MAAMC,2BAA2BD,yQAAAA;IACtCE,YAAYC,CAAa,EAAEC,OAAgB,CAAE;QAC3C,IAAIC,MAAMF,IAAIA,EAAE,gCAAgC;QAEhD,IAAIC,SAAS;YACXC,OAAO,CAAC,CAAC,EAAED,SAAS;QACtB;QACA,KAAK,CAACC,KAAKN,+PAAAA,CAAWO,qBAAqB;IAC7C;AACF"}},
    {"offset": {"line": 383, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/errors/FileUploadError.ts"],"sourcesContent":["import type { TFunction } from '@payloadcms/translations'\n\nimport { en } from '@payloadcms/translations/languages/en'\nimport { status as httpStatus } from 'http-status'\n\nimport { APIError } from './APIError.js'\n\nexport class FileUploadError extends APIError {\n  constructor(t?: TFunction) {\n    super(\n      t ? t('error:problemUploadingFile') : en.translations.error.problemUploadingFile,\n      httpStatus.BAD_REQUEST,\n    )\n  }\n}\n"],"names":["en","status","httpStatus","APIError","FileUploadError","constructor","t","translations","error","problemUploadingFile","BAD_REQUEST"],"mappings":";;;;AAEA,SAASA,EAAE,QAAQ,wCAAuC;;AAC1D,SAASC,UAAUC,UAAU,QAAQ,cAAa;AAElD,SAASC,QAAQ,QAAQ,gBAAe;;;;AAEjC,MAAMC,wBAAwBD,yQAAAA;IACnCE,YAAYC,CAAa,CAAE;QACzB,KAAK,CACHA,IAAIA,EAAE,gCAAgCN,uPAAAA,CAAGO,YAAY,CAACC,KAAK,CAACC,oBAAoB,EAChFP,+PAAAA,CAAWQ,WAAW;IAE1B;AACF"}},
    {"offset": {"line": 403, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/errors/MissingFile.ts"],"sourcesContent":["import type { TFunction } from '@payloadcms/translations'\n\nimport { en } from '@payloadcms/translations/languages/en'\nimport { status as httpStatus } from 'http-status'\n\nimport { APIError } from './APIError.js'\n\nexport class MissingFile extends APIError {\n  constructor(t?: TFunction) {\n    super(\n      t ? t('error:noFilesUploaded') : en.translations.error.noFilesUploaded,\n      httpStatus.BAD_REQUEST,\n    )\n  }\n}\n"],"names":["en","status","httpStatus","APIError","MissingFile","constructor","t","translations","error","noFilesUploaded","BAD_REQUEST"],"mappings":";;;;AAEA,SAASA,EAAE,QAAQ,wCAAuC;;AAC1D,SAASC,UAAUC,UAAU,QAAQ,cAAa;AAElD,SAASC,QAAQ,QAAQ,gBAAe;;;;AAEjC,MAAMC,oBAAoBD,yQAAAA;IAC/BE,YAAYC,CAAa,CAAE;QACzB,KAAK,CACHA,IAAIA,EAAE,2BAA2BN,uPAAAA,CAAGO,YAAY,CAACC,KAAK,CAACC,eAAe,EACtEP,+PAAAA,CAAWQ,WAAW;IAE1B;AACF"}},
    {"offset": {"line": 423, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/errors/UnauthorizedError.ts"],"sourcesContent":["import type { TFunction } from '@payloadcms/translations'\n\nimport { en } from '@payloadcms/translations/languages/en'\nimport { status as httpStatus } from 'http-status'\n\nimport { APIError } from './APIError.js'\n\nexport class UnauthorizedError extends APIError {\n  constructor(t?: TFunction) {\n    super(t ? t('error:unauthorized') : en.translations.error.unauthorized, httpStatus.UNAUTHORIZED)\n  }\n}\n"],"names":["en","status","httpStatus","APIError","UnauthorizedError","constructor","t","translations","error","unauthorized","UNAUTHORIZED"],"mappings":";;;;AAEA,SAASA,EAAE,QAAQ,wCAAuC;;AAC1D,SAASC,UAAUC,UAAU,QAAQ,cAAa;AAElD,SAASC,QAAQ,QAAQ,gBAAe;;;;AAEjC,MAAMC,0BAA0BD,yQAAAA;IACrCE,YAAYC,CAAa,CAAE;QACzB,KAAK,CAACA,IAAIA,EAAE,wBAAwBN,uPAAAA,CAAGO,YAAY,CAACC,KAAK,CAACC,YAAY,EAAEP,+PAAAA,CAAWQ,YAAY;IACjG;AACF"}},
    {"offset": {"line": 443, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/errors/ErrorDeletingFile.ts"],"sourcesContent":["import type { TFunction } from '@payloadcms/translations'\n\nimport { en } from '@payloadcms/translations/languages/en'\nimport { status as httpStatus } from 'http-status'\n\nimport { APIError } from './APIError.js'\n\nexport class ErrorDeletingFile extends APIError {\n  constructor(t?: TFunction) {\n    super(\n      t ? t('error:deletingFile') : en.translations.error.deletingFile,\n      httpStatus.INTERNAL_SERVER_ERROR,\n    )\n  }\n}\n"],"names":["en","status","httpStatus","APIError","ErrorDeletingFile","constructor","t","translations","error","deletingFile","INTERNAL_SERVER_ERROR"],"mappings":";;;;AAEA,SAASA,EAAE,QAAQ,wCAAuC;;AAC1D,SAASC,UAAUC,UAAU,QAAQ,cAAa;AAElD,SAASC,QAAQ,QAAQ,gBAAe;;;;AAEjC,MAAMC,0BAA0BD,yQAAAA;IACrCE,YAAYC,CAAa,CAAE;QACzB,KAAK,CACHA,IAAIA,EAAE,wBAAwBN,uPAAAA,CAAGO,YAAY,CAACC,KAAK,CAACC,YAAY,EAChEP,+PAAAA,CAAWQ,qBAAqB;IAEpC;AACF"}},
    {"offset": {"line": 463, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/errors/Locked.ts"],"sourcesContent":["import { status as httpStatus } from 'http-status'\n\nimport { APIError } from './APIError.js'\n\nexport class Locked extends APIError {\n  constructor(message: string) {\n    super(message, httpStatus.LOCKED)\n  }\n}\n"],"names":["status","httpStatus","APIError","Locked","constructor","message","LOCKED"],"mappings":";;;;;AAAA,SAASA,UAAUC,UAAU,QAAQ,cAAa;AAElD,SAASC,QAAQ,QAAQ,gBAAe;;;AAEjC,MAAMC,eAAeD,yQAAAA;IAC1BE,YAAYC,OAAe,CAAE;QAC3B,KAAK,CAACA,SAASJ,+PAAAA,CAAWK,MAAM;IAClC;AACF"}},
    {"offset": {"line": 481, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/errors/DuplicateCollection.ts"],"sourcesContent":["import { APIError } from './APIError.js'\n\nexport class DuplicateCollection extends APIError {\n  constructor(propertyName: string, duplicate: string) {\n    super(`Collection ${propertyName} already in use: \"${duplicate}\"`)\n  }\n}\n"],"names":["APIError","DuplicateCollection","constructor","propertyName","duplicate"],"mappings":";;;;AAAA,SAASA,QAAQ,QAAQ,gBAAe;;AAEjC,MAAMC,4BAA4BD,yQAAAA;IACvCE,YAAYC,YAAoB,EAAEC,SAAiB,CAAE;QACnD,KAAK,CAAC,CAAC,WAAW,EAAED,aAAa,kBAAkB,EAAEC,UAAU,CAAC,CAAC;IACnE;AACF"}},
    {"offset": {"line": 496, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/translations/getLocalI18n.ts"],"sourcesContent":["import type { AcceptedLanguages } from '@payloadcms/translations'\n\nimport { initI18n } from '@payloadcms/translations'\n\nimport type { SanitizedConfig } from '../config/types.js'\n\nexport const getLocalI18n = async ({\n  config,\n  language,\n}: {\n  config: SanitizedConfig\n  language: AcceptedLanguages\n}) =>\n  initI18n({\n    config: config.i18n,\n    context: 'api',\n    language,\n  })\n"],"names":["initI18n","getLocalI18n","config","language","i18n","context"],"mappings":";;;;AAEA,SAASA,QAAQ,QAAQ,2BAA0B;;AAI5C,MAAMC,eAAe,OAAO,EACjCC,MAAM,EACNC,QAAQ,EAIT,OACCH,+PAAAA,EAAS;QACPE,QAAQA,OAAOE,IAAI;QACnBC,SAAS;QACTF;IACF,GAAE"}},
    {"offset": {"line": 511, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/bin/generateImportMap/iterateFields.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-unused-expressions */\nimport type { PayloadComponent, SanitizedConfig } from '../../config/types.js'\nimport type { Block, Field, Tab } from '../../fields/config/types.js'\nimport type { AddToImportMap, Imports, InternalImportMap } from './index.js'\n\nfunction hasKey<T, K extends string>(\n  obj: null | T | undefined,\n  key: K,\n): obj is { [P in K]: PayloadComponent | PayloadComponent[] } & T {\n  return obj != null && Object.prototype.hasOwnProperty.call(obj, key)\n}\n\nconst defaultUIFieldComponentKeys: Array<'Cell' | 'Description' | 'Field' | 'Filter'> = [\n  'Cell',\n  'Description',\n  'Field',\n  'Filter',\n]\nexport function genImportMapIterateFields({\n  addToImportMap,\n  baseDir,\n  config,\n  fields,\n  importMap,\n  imports,\n}: {\n  addToImportMap: AddToImportMap\n  baseDir: string\n  config: SanitizedConfig\n  fields: Block[] | Field[] | Tab[]\n  importMap: InternalImportMap\n  imports: Imports\n}) {\n  for (const field of fields) {\n    if ('fields' in field) {\n      genImportMapIterateFields({\n        addToImportMap,\n        baseDir,\n        config,\n        fields: field.fields,\n        importMap,\n        imports,\n      })\n    } else if (field.type === 'blocks') {\n      genImportMapIterateFields({\n        addToImportMap,\n        baseDir,\n        config,\n        fields: field.blocks.filter((block) => typeof block !== 'string'),\n        importMap,\n        imports,\n      })\n    } else if (field.type === 'tabs') {\n      genImportMapIterateFields({\n        addToImportMap,\n        baseDir,\n        config,\n        fields: field.tabs,\n        importMap,\n        imports,\n      })\n    } else if (field.type === 'richText') {\n      if (\n        field?.editor &&\n        typeof field.editor === 'object' &&\n        field.editor.generateImportMap &&\n        typeof field.editor.generateImportMap === 'function'\n      ) {\n        field.editor.generateImportMap({\n          addToImportMap,\n          baseDir,\n          config,\n          importMap,\n          imports,\n        })\n      }\n    } else if (field.type === 'ui') {\n      if (field?.admin?.components) {\n        // Render any extra, untyped components\n        for (const key in field.admin.components) {\n          if (key in defaultUIFieldComponentKeys) {\n            continue\n          }\n          addToImportMap(field.admin.components[key])\n        }\n      }\n    }\n\n    hasKey(field?.admin, 'jsx') && addToImportMap(field.admin.jsx) // For Blocks\n\n    hasKey(field?.admin?.components, 'Label') && addToImportMap(field.admin.components.Label)\n\n    hasKey(field?.admin?.components, 'Block') && addToImportMap(field.admin.components.Block)\n\n    hasKey(field?.admin?.components, 'Cell') && addToImportMap(field?.admin?.components?.Cell)\n\n    hasKey(field?.admin?.components, 'Description') &&\n      addToImportMap(field?.admin?.components?.Description)\n\n    hasKey(field?.admin?.components, 'Field') && addToImportMap(field?.admin?.components?.Field)\n    hasKey(field?.admin?.components, 'Filter') && addToImportMap(field?.admin?.components?.Filter)\n\n    hasKey(field?.admin?.components, 'Error') && addToImportMap(field?.admin?.components?.Error)\n\n    hasKey(field?.admin?.components, 'afterInput') &&\n      addToImportMap(field?.admin?.components?.afterInput)\n\n    hasKey(field?.admin?.components, 'beforeInput') &&\n      addToImportMap(field?.admin?.components?.beforeInput)\n\n    hasKey(field?.admin?.components, 'RowLabel') &&\n      addToImportMap(field?.admin?.components?.RowLabel)\n\n    hasKey(field?.admin?.components, 'Diff') && addToImportMap(field?.admin?.components?.Diff)\n  }\n}\n"],"names":["hasKey","obj","key","Object","prototype","hasOwnProperty","call","defaultUIFieldComponentKeys","genImportMapIterateFields","addToImportMap","baseDir","config","fields","importMap","imports","field","type","blocks","filter","block","tabs","editor","generateImportMap","admin","components","jsx","Label","Block","Cell","Description","Field","Filter","Error","afterInput","beforeInput","RowLabel","Diff"],"mappings":";;;;AAAA,2DAA2D,GAK3D,SAASA,OACPC,GAAyB,EACzBC,GAAM;IAEN,OAAOD,OAAO,QAAQE,OAAOC,SAAS,CAACC,cAAc,CAACC,IAAI,CAACL,KAAKC;AAClE;AAEA,MAAMK,8BAAkF;IACtF;IACA;IACA;IACA;CACD;AACM,SAASC,0BAA0B,EACxCC,cAAc,EACdC,OAAO,EACPC,MAAM,EACNC,MAAM,EACNC,SAAS,EACTC,OAAO,EAQR;IACC,KAAK,MAAMC,SAASH,OAAQ;QAC1B,IAAI,YAAYG,OAAO;YACrBP,0BAA0B;gBACxBC;gBACAC;gBACAC;gBACAC,QAAQG,MAAMH,MAAM;gBACpBC;gBACAC;YACF;QACF,OAAO,IAAIC,MAAMC,IAAI,KAAK,UAAU;YAClCR,0BAA0B;gBACxBC;gBACAC;gBACAC;gBACAC,QAAQG,MAAME,MAAM,CAACC,MAAM,CAAC,CAACC,QAAU,OAAOA,UAAU;gBACxDN;gBACAC;YACF;QACF,OAAO,IAAIC,MAAMC,IAAI,KAAK,QAAQ;YAChCR,0BAA0B;gBACxBC;gBACAC;gBACAC;gBACAC,QAAQG,MAAMK,IAAI;gBAClBP;gBACAC;YACF;QACF,OAAO,IAAIC,MAAMC,IAAI,KAAK,YAAY;YACpC,IACED,OAAOM,UACP,OAAON,MAAMM,MAAM,KAAK,YACxBN,MAAMM,MAAM,CAACC,iBAAiB,IAC9B,OAAOP,MAAMM,MAAM,CAACC,iBAAiB,KAAK,YAC1C;gBACAP,MAAMM,MAAM,CAACC,iBAAiB,CAAC;oBAC7Bb;oBACAC;oBACAC;oBACAE;oBACAC;gBACF;YACF;QACF,OAAO,IAAIC,MAAMC,IAAI,KAAK,MAAM;YAC9B,IAAID,OAAOQ,OAAOC,YAAY;gBAC5B,uCAAuC;gBACvC,IAAK,MAAMtB,OAAOa,MAAMQ,KAAK,CAACC,UAAU,CAAE;oBACxC,IAAItB,OAAOK,6BAA6B;wBACtC;oBACF;oBACAE,eAAeM,MAAMQ,KAAK,CAACC,UAAU,CAACtB,IAAI;gBAC5C;YACF;QACF;QAEAF,OAAOe,OAAOQ,OAAO,UAAUd,eAAeM,MAAMQ,KAAK,CAACE,GAAG,EAAE,aAAa;;QAE5EzB,OAAOe,OAAOQ,OAAOC,YAAY,YAAYf,eAAeM,MAAMQ,KAAK,CAACC,UAAU,CAACE,KAAK;QAExF1B,OAAOe,OAAOQ,OAAOC,YAAY,YAAYf,eAAeM,MAAMQ,KAAK,CAACC,UAAU,CAACG,KAAK;QAExF3B,OAAOe,OAAOQ,OAAOC,YAAY,WAAWf,eAAeM,OAAOQ,OAAOC,YAAYI;QAErF5B,OAAOe,OAAOQ,OAAOC,YAAY,kBAC/Bf,eAAeM,OAAOQ,OAAOC,YAAYK;QAE3C7B,OAAOe,OAAOQ,OAAOC,YAAY,YAAYf,eAAeM,OAAOQ,OAAOC,YAAYM;QACtF9B,OAAOe,OAAOQ,OAAOC,YAAY,aAAaf,eAAeM,OAAOQ,OAAOC,YAAYO;QAEvF/B,OAAOe,OAAOQ,OAAOC,YAAY,YAAYf,eAAeM,OAAOQ,OAAOC,YAAYQ;QAEtFhC,OAAOe,OAAOQ,OAAOC,YAAY,iBAC/Bf,eAAeM,OAAOQ,OAAOC,YAAYS;QAE3CjC,OAAOe,OAAOQ,OAAOC,YAAY,kBAC/Bf,eAAeM,OAAOQ,OAAOC,YAAYU;QAE3ClC,OAAOe,OAAOQ,OAAOC,YAAY,eAC/Bf,eAAeM,OAAOQ,OAAOC,YAAYW;QAE3CnC,OAAOe,OAAOQ,OAAOC,YAAY,WAAWf,eAAeM,OAAOQ,OAAOC,YAAYY;IACvF;AACF"}},
    {"offset": {"line": 593, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/bin/generateImportMap/iterateCollections.ts"],"sourcesContent":["import type { SanitizedCollectionConfig } from '../../collections/config/types.js'\nimport type { SanitizedConfig } from '../../config/types.js'\nimport type { AddToImportMap, Imports, InternalImportMap } from './index.js'\n\nimport { genImportMapIterateFields } from './iterateFields.js'\n\nexport function iterateCollections({\n  addToImportMap,\n  baseDir,\n  collections,\n  config,\n  importMap,\n  imports,\n}: {\n  addToImportMap: AddToImportMap\n  baseDir: string\n  collections: SanitizedCollectionConfig[]\n  config: SanitizedConfig\n  importMap: InternalImportMap\n  imports: Imports\n}) {\n  for (const collection of collections) {\n    genImportMapIterateFields({\n      addToImportMap,\n      baseDir,\n      config,\n      fields: collection.fields,\n      importMap,\n      imports,\n    })\n\n    addToImportMap(collection.admin?.components?.afterList)\n    addToImportMap(collection.admin?.components?.listMenuItems)\n    addToImportMap(collection.admin?.components?.afterListTable)\n    addToImportMap(collection.admin?.components?.beforeList)\n    addToImportMap(collection.admin?.components?.beforeListTable)\n    addToImportMap(collection.admin?.components?.Description)\n\n    addToImportMap(collection.admin?.components?.edit?.beforeDocumentControls)\n    addToImportMap(collection.admin?.components?.edit?.editMenuItems)\n    addToImportMap(collection.admin?.components?.edit?.PreviewButton)\n    addToImportMap(collection.admin?.components?.edit?.PublishButton)\n    addToImportMap(collection.admin?.components?.edit?.SaveButton)\n    addToImportMap(collection.admin?.components?.edit?.SaveDraftButton)\n    addToImportMap(collection.admin?.components?.edit?.Upload)\n\n    if (collection.upload?.admin?.components?.controls) {\n      addToImportMap(collection.upload?.admin?.components?.controls)\n    }\n\n    if (collection.admin?.components?.views?.edit) {\n      for (const editViewConfig of Object.values(collection.admin?.components?.views?.edit)) {\n        if ('Component' in editViewConfig) {\n          addToImportMap(editViewConfig?.Component)\n        }\n\n        if ('actions' in editViewConfig) {\n          addToImportMap(editViewConfig?.actions)\n        }\n\n        if ('tab' in editViewConfig) {\n          addToImportMap(editViewConfig?.tab?.Component)\n          addToImportMap(editViewConfig?.tab?.Pill)\n        }\n      }\n    }\n\n    addToImportMap(collection.admin?.components?.views?.list?.Component)\n    addToImportMap(collection.admin?.components?.views?.list?.actions)\n  }\n}\n"],"names":["genImportMapIterateFields","iterateCollections","addToImportMap","baseDir","collections","config","importMap","imports","collection","fields","admin","components","afterList","listMenuItems","afterListTable","beforeList","beforeListTable","Description","edit","beforeDocumentControls","editMenuItems","PreviewButton","PublishButton","SaveButton","SaveDraftButton","Upload","upload","controls","views","editViewConfig","Object","values","Component","actions","tab","Pill","list"],"mappings":";;;;AAIA,SAASA,yBAAyB,QAAQ,qBAAoB;;AAEvD,SAASC,mBAAmB,EACjCC,cAAc,EACdC,OAAO,EACPC,WAAW,EACXC,MAAM,EACNC,SAAS,EACTC,OAAO,EAQR;IACC,KAAK,MAAMC,cAAcJ,YAAa;YACpCJ,iTAAAA,EAA0B;YACxBE;YACAC;YACAE;YACAI,QAAQD,WAAWC,MAAM;YACzBH;YACAC;QACF;QAEAL,eAAeM,WAAWE,KAAK,EAAEC,YAAYC;QAC7CV,eAAeM,WAAWE,KAAK,EAAEC,YAAYE;QAC7CX,eAAeM,WAAWE,KAAK,EAAEC,YAAYG;QAC7CZ,eAAeM,WAAWE,KAAK,EAAEC,YAAYI;QAC7Cb,eAAeM,WAAWE,KAAK,EAAEC,YAAYK;QAC7Cd,eAAeM,WAAWE,KAAK,EAAEC,YAAYM;QAE7Cf,eAAeM,WAAWE,KAAK,EAAEC,YAAYO,MAAMC;QACnDjB,eAAeM,WAAWE,KAAK,EAAEC,YAAYO,MAAME;QACnDlB,eAAeM,WAAWE,KAAK,EAAEC,YAAYO,MAAMG;QACnDnB,eAAeM,WAAWE,KAAK,EAAEC,YAAYO,MAAMI;QACnDpB,eAAeM,WAAWE,KAAK,EAAEC,YAAYO,MAAMK;QACnDrB,eAAeM,WAAWE,KAAK,EAAEC,YAAYO,MAAMM;QACnDtB,eAAeM,WAAWE,KAAK,EAAEC,YAAYO,MAAMO;QAEnD,IAAIjB,WAAWkB,MAAM,EAAEhB,OAAOC,YAAYgB,UAAU;YAClDzB,eAAeM,WAAWkB,MAAM,EAAEhB,OAAOC,YAAYgB;QACvD;QAEA,IAAInB,WAAWE,KAAK,EAAEC,YAAYiB,OAAOV,MAAM;YAC7C,KAAK,MAAMW,kBAAkBC,OAAOC,MAAM,CAACvB,WAAWE,KAAK,EAAEC,YAAYiB,OAAOV,MAAO;gBACrF,IAAI,eAAeW,gBAAgB;oBACjC3B,eAAe2B,gBAAgBG;gBACjC;gBAEA,IAAI,aAAaH,gBAAgB;oBAC/B3B,eAAe2B,gBAAgBI;gBACjC;gBAEA,IAAI,SAASJ,gBAAgB;oBAC3B3B,eAAe2B,gBAAgBK,KAAKF;oBACpC9B,eAAe2B,gBAAgBK,KAAKC;gBACtC;YACF;QACF;QAEAjC,eAAeM,WAAWE,KAAK,EAAEC,YAAYiB,OAAOQ,MAAMJ;QAC1D9B,eAAeM,WAAWE,KAAK,EAAEC,YAAYiB,OAAOQ,MAAMH;IAC5D;AACF"}},
    {"offset": {"line": 647, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/bin/generateImportMap/iterateGlobals.ts"],"sourcesContent":["import type { SanitizedConfig } from '../../config/types.js'\nimport type { SanitizedGlobalConfig } from '../../globals/config/types.js'\nimport type { AddToImportMap, Imports, InternalImportMap } from './index.js'\n\nimport { genImportMapIterateFields } from './iterateFields.js'\n\nexport function iterateGlobals({\n  addToImportMap,\n  baseDir,\n  config,\n  globals,\n  importMap,\n  imports,\n}: {\n  addToImportMap: AddToImportMap\n  baseDir: string\n  config: SanitizedConfig\n  globals: SanitizedGlobalConfig[]\n  importMap: InternalImportMap\n  imports: Imports\n}) {\n  for (const global of globals) {\n    genImportMapIterateFields({\n      addToImportMap,\n      baseDir,\n      config,\n      fields: global.fields,\n      importMap,\n      imports,\n    })\n\n    addToImportMap(global.admin?.components?.elements?.Description)\n    addToImportMap(global.admin?.components?.elements?.PreviewButton)\n    addToImportMap(global.admin?.components?.elements?.PublishButton)\n    addToImportMap(global.admin?.components?.elements?.SaveButton)\n    addToImportMap(global.admin?.components?.elements?.SaveDraftButton)\n\n    if (global.admin?.components?.views?.edit) {\n      for (const editViewConfig of Object.values(global.admin?.components?.views?.edit)) {\n        if ('Component' in editViewConfig) {\n          addToImportMap(editViewConfig?.Component)\n        }\n\n        if ('actions' in editViewConfig) {\n          addToImportMap(editViewConfig?.actions)\n        }\n\n        if ('tab' in editViewConfig) {\n          addToImportMap(editViewConfig?.tab?.Component)\n          addToImportMap(editViewConfig?.tab?.Pill)\n        }\n      }\n    }\n  }\n}\n"],"names":["genImportMapIterateFields","iterateGlobals","addToImportMap","baseDir","config","globals","importMap","imports","global","fields","admin","components","elements","Description","PreviewButton","PublishButton","SaveButton","SaveDraftButton","views","edit","editViewConfig","Object","values","Component","actions","tab","Pill"],"mappings":";;;;AAIA,SAASA,yBAAyB,QAAQ,qBAAoB;;AAEvD,SAASC,eAAe,EAC7BC,cAAc,EACdC,OAAO,EACPC,MAAM,EACNC,OAAO,EACPC,SAAS,EACTC,OAAO,EAQR;IACC,KAAK,MAAMC,UAAUH,QAAS;YAC5BL,iTAAAA,EAA0B;YACxBE;YACAC;YACAC;YACAK,QAAQD,OAAOC,MAAM;YACrBH;YACAC;QACF;QAEAL,eAAeM,OAAOE,KAAK,EAAEC,YAAYC,UAAUC;QACnDX,eAAeM,OAAOE,KAAK,EAAEC,YAAYC,UAAUE;QACnDZ,eAAeM,OAAOE,KAAK,EAAEC,YAAYC,UAAUG;QACnDb,eAAeM,OAAOE,KAAK,EAAEC,YAAYC,UAAUI;QACnDd,eAAeM,OAAOE,KAAK,EAAEC,YAAYC,UAAUK;QAEnD,IAAIT,OAAOE,KAAK,EAAEC,YAAYO,OAAOC,MAAM;YACzC,KAAK,MAAMC,kBAAkBC,OAAOC,MAAM,CAACd,OAAOE,KAAK,EAAEC,YAAYO,OAAOC,MAAO;gBACjF,IAAI,eAAeC,gBAAgB;oBACjClB,eAAekB,gBAAgBG;gBACjC;gBAEA,IAAI,aAAaH,gBAAgB;oBAC/BlB,eAAekB,gBAAgBI;gBACjC;gBAEA,IAAI,SAASJ,gBAAgB;oBAC3BlB,eAAekB,gBAAgBK,KAAKF;oBACpCrB,eAAekB,gBAAgBK,KAAKC;gBACtC;YACF;QACF;IACF;AACF"}},
    {"offset": {"line": 688, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/bin/generateImportMap/iterateConfig.ts"],"sourcesContent":["import type { SanitizedConfig } from '../../config/types.js'\nimport type { AddToImportMap, Imports, InternalImportMap } from './index.js'\n\nimport { iterateCollections } from './iterateCollections.js'\nimport { genImportMapIterateFields } from './iterateFields.js'\nimport { iterateGlobals } from './iterateGlobals.js'\n\nexport function iterateConfig({\n  addToImportMap,\n  baseDir,\n  config,\n  importMap,\n  imports,\n}: {\n  addToImportMap: AddToImportMap\n  baseDir: string\n  config: SanitizedConfig\n  importMap: InternalImportMap\n  imports: Imports\n}) {\n  iterateCollections({\n    addToImportMap,\n    baseDir,\n    collections: config.collections,\n    config,\n    importMap,\n    imports,\n  })\n\n  iterateGlobals({\n    addToImportMap,\n    baseDir,\n    config,\n    globals: config.globals,\n    importMap,\n    imports,\n  })\n\n  if (config?.blocks) {\n    const blocks = Object.values(config.blocks)\n    if (blocks?.length) {\n      genImportMapIterateFields({\n        addToImportMap,\n        baseDir,\n        config,\n        fields: blocks,\n        importMap,\n        imports,\n      })\n    }\n  }\n\n  if (typeof config.admin?.avatar === 'object') {\n    addToImportMap(config.admin?.avatar?.Component)\n  }\n\n  addToImportMap(config.admin?.components?.Nav)\n  addToImportMap(config.admin?.components?.header)\n  addToImportMap(config.admin?.components?.logout?.Button)\n  addToImportMap(config.admin?.components?.settingsMenu)\n  addToImportMap(config.admin?.components?.graphics?.Icon)\n  addToImportMap(config.admin?.components?.graphics?.Logo)\n\n  addToImportMap(config.admin?.components?.actions)\n  addToImportMap(config.admin?.components?.afterDashboard)\n  addToImportMap(config.admin?.components?.afterLogin)\n  addToImportMap(config.admin?.components?.afterNavLinks)\n  addToImportMap(config.admin?.components?.beforeDashboard)\n  addToImportMap(config.admin?.components?.beforeLogin)\n  addToImportMap(config.admin?.components?.beforeNavLinks)\n\n  addToImportMap(config.admin?.components?.providers)\n\n  if (config.admin?.components?.views) {\n    if (Object.keys(config.admin?.components?.views)?.length) {\n      for (const key in config.admin?.components?.views) {\n        const adminViewConfig = config.admin?.components?.views[key]\n        addToImportMap(adminViewConfig?.Component)\n      }\n    }\n  }\n\n  if (config?.admin?.importMap?.generators?.length) {\n    for (const generator of config.admin.importMap.generators) {\n      generator({\n        addToImportMap,\n        baseDir,\n        config,\n        importMap,\n        imports,\n      })\n    }\n  }\n\n  if (config?.admin?.dependencies) {\n    for (const dependency of Object.values(config.admin.dependencies)) {\n      addToImportMap(dependency.path)\n    }\n  }\n\n  /*\n  if (\n    config?.editor &&\n    typeof config.editor === 'object' &&\n    config.editor.generateImportMap &&\n    typeof config.editor.generateImportMap === 'function'\n  ) {\n    config.editor.generateImportMap({\n      addToImportMap,\n      baseDir,\n      componentMap,\n      config,\n      importMap,\n    })\n  }*/ // No need to do that here since in the sanitized editor config, this root editor is already added to the field editor - and we already process that in iterateFields\n}\n"],"names":["iterateCollections","genImportMapIterateFields","iterateGlobals","iterateConfig","addToImportMap","baseDir","config","importMap","imports","collections","globals","blocks","Object","values","length","fields","admin","avatar","Component","components","Nav","header","logout","Button","settingsMenu","graphics","Icon","Logo","actions","afterDashboard","afterLogin","afterNavLinks","beforeDashboard","beforeLogin","beforeNavLinks","providers","views","keys","key","adminViewConfig","generators","generator","dependencies","dependency","path"],"mappings":";;;;AAGA,SAASA,kBAAkB,QAAQ,0BAAyB;AAC5D,SAASC,yBAAyB,QAAQ,qBAAoB;AAC9D,SAASC,cAAc,QAAQ,sBAAqB;;;;AAE7C,SAASC,cAAc,EAC5BC,cAAc,EACdC,OAAO,EACPC,MAAM,EACNC,SAAS,EACTC,OAAO,EAOR;QACCR,+SAAAA,EAAmB;QACjBI;QACAC;QACAI,aAAaH,OAAOG,WAAW;QAC/BH;QACAC;QACAC;IACF;QAEAN,uSAAAA,EAAe;QACbE;QACAC;QACAC;QACAI,SAASJ,OAAOI,OAAO;QACvBH;QACAC;IACF;IAEA,IAAIF,QAAQK,QAAQ;QAClB,MAAMA,SAASC,OAAOC,MAAM,CAACP,OAAOK,MAAM;QAC1C,IAAIA,QAAQG,QAAQ;gBAClBb,iTAAAA,EAA0B;gBACxBG;gBACAC;gBACAC;gBACAS,QAAQJ;gBACRJ;gBACAC;YACF;QACF;IACF;IAEA,IAAI,OAAOF,OAAOU,KAAK,EAAEC,WAAW,UAAU;QAC5Cb,eAAeE,OAAOU,KAAK,EAAEC,QAAQC;IACvC;IAEAd,eAAeE,OAAOU,KAAK,EAAEG,YAAYC;IACzChB,eAAeE,OAAOU,KAAK,EAAEG,YAAYE;IACzCjB,eAAeE,OAAOU,KAAK,EAAEG,YAAYG,QAAQC;IACjDnB,eAAeE,OAAOU,KAAK,EAAEG,YAAYK;IACzCpB,eAAeE,OAAOU,KAAK,EAAEG,YAAYM,UAAUC;IACnDtB,eAAeE,OAAOU,KAAK,EAAEG,YAAYM,UAAUE;IAEnDvB,eAAeE,OAAOU,KAAK,EAAEG,YAAYS;IACzCxB,eAAeE,OAAOU,KAAK,EAAEG,YAAYU;IACzCzB,eAAeE,OAAOU,KAAK,EAAEG,YAAYW;IACzC1B,eAAeE,OAAOU,KAAK,EAAEG,YAAYY;IACzC3B,eAAeE,OAAOU,KAAK,EAAEG,YAAYa;IACzC5B,eAAeE,OAAOU,KAAK,EAAEG,YAAYc;IACzC7B,eAAeE,OAAOU,KAAK,EAAEG,YAAYe;IAEzC9B,eAAeE,OAAOU,KAAK,EAAEG,YAAYgB;IAEzC,IAAI7B,OAAOU,KAAK,EAAEG,YAAYiB,OAAO;QACnC,IAAIxB,OAAOyB,IAAI,CAAC/B,OAAOU,KAAK,EAAEG,YAAYiB,QAAQtB,QAAQ;YACxD,IAAK,MAAMwB,OAAOhC,OAAOU,KAAK,EAAEG,YAAYiB,MAAO;gBACjD,MAAMG,kBAAkBjC,OAAOU,KAAK,EAAEG,YAAYiB,KAAK,CAACE,IAAI;gBAC5DlC,eAAemC,iBAAiBrB;YAClC;QACF;IACF;IAEA,IAAIZ,QAAQU,OAAOT,WAAWiC,YAAY1B,QAAQ;QAChD,KAAK,MAAM2B,aAAanC,OAAOU,KAAK,CAACT,SAAS,CAACiC,UAAU,CAAE;YACzDC,UAAU;gBACRrC;gBACAC;gBACAC;gBACAC;gBACAC;YACF;QACF;IACF;IAEA,IAAIF,QAAQU,OAAO0B,cAAc;QAC/B,KAAK,MAAMC,cAAc/B,OAAOC,MAAM,CAACP,OAAOU,KAAK,CAAC0B,YAAY,EAAG;YACjEtC,eAAeuC,WAAWC,IAAI;QAChC;IACF;AAEA;;;;;;;;;;;;;;GAcC,GAAG,qKAAqK;AAC3K"}},
    {"offset": {"line": 789, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/bin/generateImportMap/utilities/parsePayloadComponent.ts"],"sourcesContent":["import type { PayloadComponent } from '../../../config/types.js'\n\nexport function parsePayloadComponent(PayloadComponent: PayloadComponent): {\n  exportName: string\n  path: string\n} {\n  if (!PayloadComponent) {\n    return null!\n  }\n\n  const pathAndMaybeExport =\n    typeof PayloadComponent === 'string' ? PayloadComponent : PayloadComponent.path\n\n  let path: string\n  let exportName: string\n\n  if (pathAndMaybeExport.includes('#')) {\n    ;[path, exportName] = pathAndMaybeExport.split('#', 2) as [string, string]\n  } else {\n    path = pathAndMaybeExport\n    exportName = 'default'\n  }\n\n  if (typeof PayloadComponent === 'object' && PayloadComponent.exportName) {\n    exportName = PayloadComponent.exportName\n  }\n\n  return { exportName, path }\n}\n"],"names":["parsePayloadComponent","PayloadComponent","pathAndMaybeExport","path","exportName","includes","split"],"mappings":";;;;AAEO,SAASA,sBAAsBC,gBAAkC;IAItE,IAAI,CAACA,kBAAkB;QACrB,OAAO;IACT;IAEA,MAAMC,qBACJ,OAAOD,qBAAqB,WAAWA,mBAAmBA,iBAAiBE,IAAI;IAEjF,IAAIA;IACJ,IAAIC;IAEJ,IAAIF,mBAAmBG,QAAQ,CAAC,MAAM;;QACnC,CAACF,MAAMC,WAAW,GAAGF,mBAAmBI,KAAK,CAAC,KAAK;IACtD,OAAO;QACLH,OAAOD;QACPE,aAAa;IACf;IAEA,IAAI,OAAOH,qBAAqB,YAAYA,iBAAiBG,UAAU,EAAE;QACvEA,aAAaH,iBAAiBG,UAAU;IAC1C;IAEA,OAAO;QAAEA;QAAYD;IAAK;AAC5B"}},
    {"offset": {"line": 819, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/bin/generateImportMap/utilities/addPayloadComponentToImportMap.ts"],"sourcesContent":["import crypto from 'crypto'\nimport path from 'path'\n\nimport type { PayloadComponent } from '../../../config/types.js'\nimport type { Imports, InternalImportMap } from '../index.js'\n\nimport { parsePayloadComponent } from './parsePayloadComponent.js'\n\n/**\n * Normalizes the component path based on the import map's base directory path.\n */\nfunction getAdjustedComponentPath(importMapToBaseDirPath: string, componentPath: string): string {\n  // Normalize input paths to use forward slashes\n  const normalizedBasePath = importMapToBaseDirPath.replace(/\\\\/g, '/')\n  const normalizedComponentPath = componentPath.replace(/\\\\/g, '/')\n\n  // Base path starts with './' - preserve the './' prefix\n  // => import map is in a subdirectory of the base directory, or in the same directory as the base directory\n  if (normalizedBasePath.startsWith('./')) {\n    // Remove './' from component path if it exists\n    const cleanComponentPath = normalizedComponentPath.startsWith('./')\n      ? normalizedComponentPath.substring(2)\n      : normalizedComponentPath\n\n    // Join the paths to preserve the './' prefix\n    return `${normalizedBasePath}${cleanComponentPath}`\n  }\n\n  return path.posix.join(normalizedBasePath, normalizedComponentPath)\n}\n\n/**\n * Adds a payload component to the import map.\n */\nexport function addPayloadComponentToImportMap({\n  importMap,\n  importMapToBaseDirPath,\n  imports,\n  payloadComponent,\n}: {\n  importMap: InternalImportMap\n  importMapToBaseDirPath: string\n  imports: Imports\n  payloadComponent: PayloadComponent\n}): {\n  path: string\n  specifier: string\n} | null {\n  if (!payloadComponent) {\n    return null\n  }\n  const { exportName, path: componentPath } = parsePayloadComponent(payloadComponent)\n\n  if (importMap[componentPath + '#' + exportName]) {\n    return null\n  }\n\n  const importIdentifier =\n    exportName + '_' + crypto.createHash('md5').update(componentPath).digest('hex')\n\n  importMap[componentPath + '#' + exportName] = importIdentifier\n\n  const isRelativePath = componentPath.startsWith('.') || componentPath.startsWith('/')\n\n  if (isRelativePath) {\n    const adjustedComponentPath = getAdjustedComponentPath(importMapToBaseDirPath, componentPath)\n\n    imports[importIdentifier] = {\n      path: adjustedComponentPath,\n      specifier: exportName,\n    }\n    return {\n      path: adjustedComponentPath,\n      specifier: exportName,\n    }\n  } else {\n    // Tsconfig alias or package import, e.g. '@payloadcms/ui' or '@/components/MyComponent'\n    imports[importIdentifier] = {\n      path: componentPath,\n      specifier: exportName,\n    }\n    return {\n      path: componentPath,\n      specifier: exportName,\n    }\n  }\n}\n"],"names":["crypto","path","parsePayloadComponent","getAdjustedComponentPath","importMapToBaseDirPath","componentPath","normalizedBasePath","replace","normalizedComponentPath","startsWith","cleanComponentPath","substring","posix","join","addPayloadComponentToImportMap","importMap","imports","payloadComponent","exportName","importIdentifier","createHash","update","digest","isRelativePath","adjustedComponentPath","specifier"],"mappings":";;;;AAAA,OAAOA,YAAY,SAAQ;AAC3B,OAAOC,UAAU,OAAM;AAKvB,SAASC,qBAAqB,QAAQ,6BAA4B;;;;AAElE;;CAEC,GACD,SAASC,yBAAyBC,sBAA8B,EAAEC,aAAqB;IACrF,+CAA+C;IAC/C,MAAMC,qBAAqBF,uBAAuBG,OAAO,CAAC,OAAO;IACjE,MAAMC,0BAA0BH,cAAcE,OAAO,CAAC,OAAO;IAE7D,wDAAwD;IACxD,2GAA2G;IAC3G,IAAID,mBAAmBG,UAAU,CAAC,OAAO;QACvC,+CAA+C;QAC/C,MAAMC,qBAAqBF,wBAAwBC,UAAU,CAAC,QAC1DD,wBAAwBG,SAAS,CAAC,KAClCH;QAEJ,6CAA6C;QAC7C,OAAO,GAAGF,qBAAqBI,oBAAoB;IACrD;IAEA,OAAOT,4GAAAA,CAAKW,KAAK,CAACC,IAAI,CAACP,oBAAoBE;AAC7C;AAKO,SAASM,+BAA+B,EAC7CC,SAAS,EACTX,sBAAsB,EACtBY,OAAO,EACPC,gBAAgB,EAMjB;IAIC,IAAI,CAACA,kBAAkB;QACrB,OAAO;IACT;IACA,MAAM,EAAEC,UAAU,EAAEjB,MAAMI,aAAa,EAAE,OAAGH,kUAAAA,EAAsBe;IAElE,IAAIF,SAAS,CAACV,gBAAgB,MAAMa,WAAW,EAAE;QAC/C,OAAO;IACT;IAEA,MAAMC,mBACJD,aAAa,MAAMlB,gHAAAA,CAAOoB,UAAU,CAAC,OAAOC,MAAM,CAAChB,eAAeiB,MAAM,CAAC;IAE3EP,SAAS,CAACV,gBAAgB,MAAMa,WAAW,GAAGC;IAE9C,MAAMI,iBAAiBlB,cAAcI,UAAU,CAAC,QAAQJ,cAAcI,UAAU,CAAC;IAEjF,IAAIc,gBAAgB;QAClB,MAAMC,wBAAwBrB,yBAAyBC,wBAAwBC;QAE/EW,OAAO,CAACG,iBAAiB,GAAG;YAC1BlB,MAAMuB;YACNC,WAAWP;QACb;QACA,OAAO;YACLjB,MAAMuB;YACNC,WAAWP;QACb;IACF,OAAO;QACL,wFAAwF;QACxFF,OAAO,CAACG,iBAAiB,GAAG;YAC1BlB,MAAMI;YACNoB,WAAWP;QACb;QACA,OAAO;YACLjB,MAAMI;YACNoB,WAAWP;QACb;IACF;AACF"}},
    {"offset": {"line": 882, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/bin/generateImportMap/utilities/getImportMapToBaseDirPath.ts"],"sourcesContent":["import path from 'path'\n\n/**\n * Returns the path that navigates from the import map file to the base directory.\n * This can then be prepended to relative paths in the import map to get the full, absolute path.\n */\nexport function getImportMapToBaseDirPath({\n  baseDir,\n  importMapPath,\n}: {\n  /**\n   * Absolute path to the base directory\n   */\n  baseDir: string\n  /**\n   * Absolute path to the import map file\n   */\n  importMapPath: string\n}): string {\n  const importMapDir = path.dirname(importMapPath)\n\n  // 1. Direct relative path from `importMapDir` -> `baseDir`\n  let relativePath = path.relative(importMapDir, baseDir).replace(/\\\\/g, '/')\n\n  // 2. If they're the same directory, path.relative will be \"\", so use \"./\"\n  if (!relativePath) {\n    relativePath = './'\n  } // Add ./ prefix for subdirectories of the current directory\n  else if (!relativePath.startsWith('.') && !relativePath.startsWith('/')) {\n    relativePath = `./${relativePath}`\n  }\n\n  // 3. For consistency ensure a trailing slash\n  if (!relativePath.endsWith('/')) {\n    relativePath += '/'\n  }\n\n  return relativePath\n}\n"],"names":["path","getImportMapToBaseDirPath","baseDir","importMapPath","importMapDir","dirname","relativePath","relative","replace","startsWith","endsWith"],"mappings":";;;;AAAA,OAAOA,UAAU,OAAM;;AAMhB,SAASC,0BAA0B,EACxCC,OAAO,EACPC,aAAa,EAUd;IACC,MAAMC,eAAeJ,4GAAAA,CAAKK,OAAO,CAACF;IAElC,2DAA2D;IAC3D,IAAIG,eAAeN,4GAAAA,CAAKO,QAAQ,CAACH,cAAcF,SAASM,OAAO,CAAC,OAAO;IAEvE,0EAA0E;IAC1E,IAAI,CAACF,cAAc;QACjBA,eAAe;IACjB,OACK,IAAI,CAACA,aAAaG,UAAU,CAAC,QAAQ,CAACH,aAAaG,UAAU,CAAC,MAAM;QACvEH,eAAe,CAAC,EAAE,EAAEA,cAAc;IACpC;IAEA,6CAA6C;IAC7C,IAAI,CAACA,aAAaI,QAAQ,CAAC,MAAM;QAC/BJ,gBAAgB;IAClB;IAEA,OAAOA;AACT"}},
    {"offset": {"line": 908, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/bin/generateImportMap/utilities/resolveImportMapFilePath.ts"],"sourcesContent":["import fs from 'fs/promises'\nimport path from 'path'\n\nasync function pathOrFileExists(path: string): Promise<boolean> {\n  try {\n    await fs.access(path)\n    return true\n  } catch {\n    return false\n  }\n}\n\n/**\n * Returns the path to the import map file. If the import map file is not found, it throws an error.\n */\nexport async function resolveImportMapFilePath({\n  adminRoute = '/admin',\n  importMapFile,\n  rootDir,\n}: {\n  adminRoute?: string\n  importMapFile?: string\n  rootDir: string\n}): Promise<Error | string> {\n  let importMapFilePath: string | undefined = undefined\n\n  if (importMapFile?.length) {\n    if (!(await pathOrFileExists(importMapFile))) {\n      try {\n        await fs.writeFile(importMapFile, '', { flag: 'wx' })\n      } catch (err) {\n        return new Error(\n          `Could not find the import map file at ${importMapFile}${err instanceof Error && err?.message ? `: ${err.message}` : ''}`,\n        )\n      }\n    }\n    importMapFilePath = importMapFile\n  } else {\n    const appLocation = path.resolve(rootDir, `app/(payload)${adminRoute}/`)\n    const srcAppLocation = path.resolve(rootDir, `src/app/(payload)${adminRoute}/`)\n\n    if (appLocation && (await pathOrFileExists(appLocation))) {\n      importMapFilePath = path.resolve(appLocation, 'importMap.js')\n      if (!(await pathOrFileExists(importMapFilePath))) {\n        await fs.writeFile(importMapFilePath, '', { flag: 'wx' })\n      }\n    } else if (srcAppLocation && (await pathOrFileExists(srcAppLocation))) {\n      importMapFilePath = path.resolve(srcAppLocation, 'importMap.js')\n      if (!(await pathOrFileExists(importMapFilePath))) {\n        await fs.writeFile(importMapFilePath, '', { flag: 'wx' })\n      }\n    } else {\n      return new Error(\n        `Could not find Payload import map folder. Looked in ${appLocation} and ${srcAppLocation}`,\n      )\n    }\n  }\n  return importMapFilePath\n}\n"],"names":["fs","path","pathOrFileExists","access","resolveImportMapFilePath","adminRoute","importMapFile","rootDir","importMapFilePath","undefined","length","writeFile","flag","err","Error","message","appLocation","resolve","srcAppLocation"],"mappings":";;;;AAAA,OAAOA,QAAQ,cAAa;AAC5B,OAAOC,UAAU,OAAM;;;AAEvB,eAAeC,iBAAiBD,IAAY;IAC1C,IAAI;QACF,MAAMD,gIAAAA,CAAGG,MAAM,CAACF;QAChB,OAAO;IACT,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAKO,eAAeG,yBAAyB,EAC7CC,aAAa,QAAQ,EACrBC,aAAa,EACbC,OAAO,EAKR;IACC,IAAIC,oBAAwCC;IAE5C,IAAIH,eAAeI,QAAQ;QACzB,IAAI,CAAE,MAAMR,iBAAiBI,gBAAiB;YAC5C,IAAI;gBACF,MAAMN,gIAAAA,CAAGW,SAAS,CAACL,eAAe,IAAI;oBAAEM,MAAM;gBAAK;YACrD,EAAE,OAAOC,KAAK;gBACZ,OAAO,IAAIC,MACT,CAAC,sCAAsC,EAAER,gBAAgBO,eAAeC,SAASD,KAAKE,UAAU,CAAC,EAAE,EAAEF,IAAIE,OAAO,EAAE,GAAG,IAAI;YAE7H;QACF;QACAP,oBAAoBF;IACtB,OAAO;QACL,MAAMU,cAAcf,4GAAAA,CAAKgB,OAAO,CAACV,SAAS,CAAC,aAAa,EAAEF,WAAW,CAAC,CAAC;QACvE,MAAMa,iBAAiBjB,4GAAAA,CAAKgB,OAAO,CAACV,SAAS,CAAC,iBAAiB,EAAEF,WAAW,CAAC,CAAC;QAE9E,IAAIW,eAAgB,MAAMd,iBAAiBc,cAAe;YACxDR,oBAAoBP,4GAAAA,CAAKgB,OAAO,CAACD,aAAa;YAC9C,IAAI,CAAE,MAAMd,iBAAiBM,oBAAqB;gBAChD,MAAMR,gIAAAA,CAAGW,SAAS,CAACH,mBAAmB,IAAI;oBAAEI,MAAM;gBAAK;YACzD;QACF,OAAO,IAAIM,kBAAmB,MAAMhB,iBAAiBgB,iBAAkB;YACrEV,oBAAoBP,4GAAAA,CAAKgB,OAAO,CAACC,gBAAgB;YACjD,IAAI,CAAE,MAAMhB,iBAAiBM,oBAAqB;gBAChD,MAAMR,gIAAAA,CAAGW,SAAS,CAACH,mBAAmB,IAAI;oBAAEI,MAAM;gBAAK;YACzD;QACF,OAAO;YACL,OAAO,IAAIE,MACT,CAAC,oDAAoD,EAAEE,YAAY,KAAK,EAAEE,gBAAgB;QAE9F;IACF;IACA,OAAOV;AACT"}},
    {"offset": {"line": 964, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/bin/generateImportMap/index.ts"],"sourcesContent":["/* eslint-disable no-console */\nimport fs from 'fs/promises'\nimport process from 'node:process'\n\nimport type { PayloadComponent, SanitizedConfig } from '../../config/types.js'\n\nimport { iterateConfig } from './iterateConfig.js'\nimport { addPayloadComponentToImportMap } from './utilities/addPayloadComponentToImportMap.js'\nimport { getImportMapToBaseDirPath } from './utilities/getImportMapToBaseDirPath.js'\nimport { resolveImportMapFilePath } from './utilities/resolveImportMapFilePath.js'\n\ntype ImportIdentifier = string\ntype ImportSpecifier = string\ntype ImportPath = string\ntype UserImportPath = string\n\n/**\n * Import Map before being written to the file. Only contains all paths\n */\nexport type InternalImportMap = {\n  [path: UserImportPath]: ImportIdentifier\n}\n\n/**\n * Imports of the import map.\n */\nexport type Imports = {\n  [identifier: ImportIdentifier]: {\n    path: ImportPath\n    specifier: ImportSpecifier\n  }\n}\n\n/**\n * Import Map after being imported from the actual import map. Contains all the actual imported components\n */\nexport type ImportMap = {\n  [path: UserImportPath]: any\n}\n\nexport type AddToImportMap = (payloadComponent?: PayloadComponent | PayloadComponent[]) => void\n\nexport async function generateImportMap(\n  config: SanitizedConfig,\n  options?: {\n    force?: boolean /**\n     * If true, will not throw an error if the import map file path cannot be resolved\n    Instead, it will return silently.\n     */\n    ignoreResolveError?: boolean\n    log: boolean\n  },\n): Promise<void> {\n  const shouldLog = options?.log ?? true\n\n  if (shouldLog) {\n    console.log('Generating import map')\n  }\n\n  const importMap: InternalImportMap = {}\n  const imports: Imports = {}\n\n  // Determine the root directory of the project - usually the directory where the src or app folder is located\n  const rootDir = process.env.ROOT_DIR ?? process.cwd()\n\n  const baseDir = config.admin.importMap.baseDir ?? process.cwd()\n\n  const importMapFilePath = await resolveImportMapFilePath({\n    adminRoute: config.routes.admin,\n    importMapFile: config?.admin?.importMap?.importMapFile,\n    rootDir,\n  })\n\n  if (importMapFilePath instanceof Error) {\n    if (options?.ignoreResolveError) {\n      return\n    } else {\n      throw importMapFilePath\n    }\n  }\n\n  const importMapToBaseDirPath = getImportMapToBaseDirPath({\n    baseDir,\n    importMapPath: importMapFilePath,\n  })\n\n  const addToImportMap: AddToImportMap = (payloadComponent) => {\n    if (!payloadComponent) {\n      return\n    }\n\n    if (typeof payloadComponent !== 'object' && typeof payloadComponent !== 'string') {\n      console.error(payloadComponent)\n      throw new Error('addToImportMap > Payload component must be an object or a string')\n    }\n\n    if (Array.isArray(payloadComponent)) {\n      for (const component of payloadComponent) {\n        addPayloadComponentToImportMap({\n          importMap,\n          importMapToBaseDirPath,\n          imports,\n          payloadComponent: component,\n        })\n      }\n    } else {\n      addPayloadComponentToImportMap({\n        importMap,\n        importMapToBaseDirPath,\n        imports,\n        payloadComponent,\n      })\n    }\n  }\n\n  iterateConfig({\n    addToImportMap,\n    baseDir: config.admin.importMap.baseDir,\n    config,\n    importMap,\n    imports,\n  })\n\n  await writeImportMap({\n    componentMap: importMap,\n    force: options?.force,\n    importMap: imports,\n    importMapFilePath,\n    log: shouldLog,\n  })\n}\n\nexport async function writeImportMap({\n  componentMap,\n  force,\n  importMap,\n  importMapFilePath,\n  log,\n}: {\n  componentMap: InternalImportMap\n  force?: boolean\n  importMap: Imports\n  importMapFilePath: string\n  log?: boolean\n}) {\n  const imports: string[] = []\n  for (const [identifier, { path, specifier }] of Object.entries(importMap)) {\n    imports.push(`import { ${specifier} as ${identifier} } from '${path}'`)\n  }\n\n  const mapKeys: string[] = []\n  for (const [userPath, identifier] of Object.entries(componentMap)) {\n    mapKeys.push(`  \"${userPath}\": ${identifier}`)\n  }\n\n  const importMapOutputFile = `${imports.join('\\n')}\n\nexport const importMap = {\n${mapKeys.join(',\\n')}\n}\n`\n\n  if (!force) {\n    // Read current import map and check in the IMPORTS if there are any new imports. If not, don't write the file.\n    const currentImportMap = await fs.readFile(importMapFilePath, 'utf-8')\n\n    if (currentImportMap?.trim() === importMapOutputFile?.trim()) {\n      if (log) {\n        console.log('No new imports found, skipping writing import map')\n      }\n      return\n    }\n  }\n\n  if (log) {\n    console.log('Writing import map to', importMapFilePath)\n  }\n\n  await fs.writeFile(importMapFilePath, importMapOutputFile)\n}\n"],"names":["fs","process","iterateConfig","addPayloadComponentToImportMap","getImportMapToBaseDirPath","resolveImportMapFilePath","generateImportMap","config","options","shouldLog","log","console","importMap","imports","rootDir","env","ROOT_DIR","cwd","baseDir","admin","importMapFilePath","adminRoute","routes","importMapFile","Error","ignoreResolveError","importMapToBaseDirPath","importMapPath","addToImportMap","payloadComponent","error","Array","isArray","component","writeImportMap","componentMap","force","identifier","path","specifier","Object","entries","push","mapKeys","userPath","importMapOutputFile","join","currentImportMap","readFile","trim","writeFile"],"mappings":"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"}},
    {"offset": {"line": 1083, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/database/combineQueries.ts"],"sourcesContent":["import type { Where } from '../types/index.js'\n\nimport { hasWhereAccessResult } from '../auth/index.js'\n\n/**\n * Combines two queries into a single query, using an AND operator\n */\nexport const combineQueries = (where: Where, access: boolean | Where): Where => {\n  if (!where && !access) {\n    return {}\n  }\n\n  const and: Where[] = where ? [where] : []\n\n  if (hasWhereAccessResult(access)) {\n    and.push(access)\n  }\n\n  return {\n    and,\n  }\n}\n"],"names":["hasWhereAccessResult","combineQueries","where","access","and","push"],"mappings":";;;;AAEA,SAASA,oBAAoB,QAAQ,mBAAkB;;AAKhD,MAAMC,iBAAiB,CAACC,OAAcC;IAC3C,IAAI,CAACD,SAAS,CAACC,QAAQ;QACrB,OAAO,CAAC;IACV;IAEA,MAAMC,MAAeF,QAAQ;QAACA;KAAM,GAAG,EAAE;IAEzC,QAAIF,gRAAAA,EAAqBG,SAAS;QAChCC,IAAIC,IAAI,CAACF;IACX;IAEA,OAAO;QACLC;IACF;AACF,EAAC"}},
    {"offset": {"line": 1107, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/database/getLocalizedPaths.ts"],"sourcesContent":["import type { PathToQuery } from './queryValidation/types.js'\n\nimport {\n  type Field,\n  fieldShouldBeLocalized,\n  type FlattenedBlock,\n  type FlattenedField,\n} from '../fields/config/types.js'\nimport { APIError, type Payload, type SanitizedCollectionConfig } from '../index.js'\n\nexport function getLocalizedPaths({\n  collectionSlug,\n  fields,\n  globalSlug,\n  incomingPath,\n  locale,\n  overrideAccess = false,\n  parentIsLocalized,\n  payload,\n}: {\n  collectionSlug?: string\n  fields: FlattenedField[]\n  globalSlug?: string\n  incomingPath: string\n  locale?: string\n  overrideAccess?: boolean\n  /**\n   * @todo make required in v4.0. Usually, you'd wanna pass this through\n   */\n  parentIsLocalized?: boolean\n  payload: Payload\n}): PathToQuery[] {\n  const pathSegments = incomingPath.split('.')\n  const localizationConfig = payload.config.localization\n\n  let paths: PathToQuery[] = [\n    {\n      collectionSlug,\n      complete: false,\n      // @ts-expect-error - vestiges of when tsconfig was not strict. Feel free to improve\n      field: undefined,\n      fields,\n      globalSlug,\n      invalid: false,\n      parentIsLocalized: parentIsLocalized!,\n      path: '',\n    },\n  ]\n\n  for (let i = 0; i < pathSegments.length; i += 1) {\n    const segment = pathSegments[i]\n\n    const lastIncompletePath = paths.find(({ complete }) => !complete)\n\n    if (lastIncompletePath) {\n      const { path } = lastIncompletePath\n      let currentPath = path ? `${path}.${segment}` : segment\n\n      let fieldsToSearch: FlattenedField[]\n      let _parentIsLocalized = parentIsLocalized\n\n      let matchedField!: FlattenedField\n\n      if (lastIncompletePath?.field?.type === 'blocks') {\n        if (segment === 'blockType') {\n          matchedField = {\n            name: 'blockType',\n            type: 'text',\n          }\n        } else {\n          for (const _block of lastIncompletePath.field.blockReferences ??\n            lastIncompletePath.field.blocks) {\n            let block: FlattenedBlock\n            if (typeof _block === 'string') {\n              block = payload.blocks[_block]!\n            } else {\n              block = _block\n            }\n\n            matchedField = block.flattenedFields.find((field) => field.name === segment)!\n            if (matchedField) {\n              break\n            }\n          }\n        }\n      } else {\n        if (lastIncompletePath?.field && 'flattenedFields' in lastIncompletePath.field) {\n          fieldsToSearch = lastIncompletePath.field.flattenedFields\n        } else {\n          fieldsToSearch = lastIncompletePath.fields!\n        }\n        _parentIsLocalized = parentIsLocalized || lastIncompletePath.field?.localized\n\n        matchedField = fieldsToSearch.find((field) => field.name === segment)!\n      }\n\n      lastIncompletePath.field = matchedField!\n\n      if (currentPath === 'globalType' && globalSlug) {\n        lastIncompletePath.path = currentPath\n        lastIncompletePath.complete = true\n        lastIncompletePath.field = {\n          name: 'globalType',\n          type: 'text',\n        }\n\n        return paths\n      }\n\n      if (currentPath === 'relationTo') {\n        lastIncompletePath.path = currentPath\n        lastIncompletePath.complete = true\n        lastIncompletePath.field = {\n          name: 'relationTo',\n          type: 'select',\n          options: Object.keys(payload.collections),\n        }\n\n        return paths\n      }\n\n      if (!matchedField && currentPath === 'id' && i === pathSegments.length - 1) {\n        lastIncompletePath.path = currentPath\n        const idField: Field = {\n          name: 'id',\n          type: payload.db.defaultIDType as 'text',\n        }\n        lastIncompletePath.field = idField\n        lastIncompletePath.complete = true\n        return paths\n      }\n\n      if (matchedField) {\n        if ('hidden' in matchedField && matchedField.hidden && !overrideAccess) {\n          lastIncompletePath.invalid = true\n        }\n\n        const nextSegment = pathSegments[i + 1]!\n        const nextSegmentIsLocale =\n          localizationConfig && localizationConfig.localeCodes.includes(nextSegment)\n\n        if (nextSegmentIsLocale) {\n          // Skip the next iteration, because it's a locale\n          i += 1\n          currentPath = `${currentPath}.${nextSegment}`\n        } else if (\n          localizationConfig &&\n          fieldShouldBeLocalized({ field: matchedField, parentIsLocalized: _parentIsLocalized! })\n        ) {\n          currentPath = `${currentPath}.${locale}`\n        }\n\n        switch (matchedField.type) {\n          case 'join':\n          case 'relationship':\n          case 'upload': {\n            // If this is a polymorphic relation,\n            // We only support querying directly (no nested querying)\n            if (matchedField.type !== 'join' && typeof matchedField.relationTo !== 'string') {\n              lastIncompletePath.path = pathSegments.join('.')\n              if (![matchedField.name, 'relationTo', 'value'].includes(pathSegments.at(-1)!)) {\n                lastIncompletePath.invalid = true\n              } else {\n                lastIncompletePath.complete = true\n              }\n            } else {\n              lastIncompletePath.complete = true\n              lastIncompletePath.path = currentPath!\n\n              const nestedPathToQuery = pathSegments\n                .slice(nextSegmentIsLocale ? i + 2 : i + 1)\n                .join('.')\n\n              if (nestedPathToQuery) {\n                let relatedCollection: SanitizedCollectionConfig\n                if (matchedField.type === 'join') {\n                  if (Array.isArray(matchedField.collection)) {\n                    throw new APIError('Not supported')\n                  }\n\n                  relatedCollection = payload.collections[matchedField.collection]!.config\n                } else {\n                  relatedCollection = payload.collections[matchedField.relationTo as string]!.config\n                }\n\n                const remainingPaths = getLocalizedPaths({\n                  collectionSlug: relatedCollection.slug,\n                  fields: relatedCollection.flattenedFields,\n                  globalSlug,\n                  incomingPath: nestedPathToQuery,\n                  locale,\n                  parentIsLocalized: false,\n                  payload,\n                })\n\n                paths = [...paths, ...remainingPaths]\n              }\n\n              return paths\n            }\n\n            break\n          }\n          case 'json':\n          case 'richText': {\n            const upcomingSegments = pathSegments.slice(i + 1).join('.')\n            pathSegments.forEach((path) => {\n              if (!/^\\w+(?:\\.\\w+)*$/.test(path)) {\n                lastIncompletePath.invalid = true\n              }\n            })\n            lastIncompletePath.complete = true\n            lastIncompletePath.path = upcomingSegments\n              ? `${currentPath}.${upcomingSegments}`\n              : currentPath!\n            return paths\n          }\n\n          default: {\n            if (i + 1 === pathSegments.length) {\n              lastIncompletePath.complete = true\n            }\n            lastIncompletePath.path = currentPath!\n          }\n        }\n      } else {\n        lastIncompletePath.invalid = true\n        lastIncompletePath.path = currentPath!\n        return paths\n      }\n    }\n  }\n\n  return paths\n}\n"],"names":["fieldShouldBeLocalized","APIError","getLocalizedPaths","collectionSlug","fields","globalSlug","incomingPath","locale","overrideAccess","parentIsLocalized","payload","pathSegments","split","localizationConfig","config","localization","paths","complete","field","undefined","invalid","path","i","length","segment","lastIncompletePath","find","currentPath","fieldsToSearch","_parentIsLocalized","matchedField","type","name","_block","blockReferences","blocks","block","flattenedFields","localized","options","Object","keys","collections","idField","db","defaultIDType","hidden","nextSegment","nextSegmentIsLocale","localeCodes","includes","relationTo","join","at","nestedPathToQuery","slice","relatedCollection","Array","isArray","collection","remainingPaths","slug","upcomingSegments","forEach","test"],"mappings":"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"}},
    {"offset": {"line": 1299, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/database/queryValidation/validateSearchParams.ts"],"sourcesContent":["import type { SanitizedCollectionConfig } from '../../collections/config/types.js'\nimport type { FlattenedField } from '../../fields/config/types.js'\nimport type { SanitizedGlobalConfig } from '../../globals/config/types.js'\nimport type { PayloadRequest, WhereField } from '../../types/index.js'\nimport type { EntityPolicies, PathToQuery } from './types.js'\n\nimport { fieldAffectsData } from '../../fields/config/types.js'\nimport { getEntityPolicies } from '../../utilities/getEntityPolicies.js'\nimport { isolateObjectProperty } from '../../utilities/isolateObjectProperty.js'\nimport { getLocalizedPaths } from '../getLocalizedPaths.js'\nimport { validateQueryPaths } from './validateQueryPaths.js'\n\ntype Args = {\n  collectionConfig?: SanitizedCollectionConfig\n  constraint: WhereField\n  errors: { path: string }[]\n  fields: FlattenedField[]\n  globalConfig?: SanitizedGlobalConfig\n  operator: string\n  overrideAccess: boolean\n  parentIsLocalized?: boolean\n  path: string\n  policies: EntityPolicies\n  polymorphicJoin?: boolean\n  req: PayloadRequest\n  val: unknown\n  versionFields?: FlattenedField[]\n}\n\n/**\n * Validate the Payload key / value / operator\n */\nexport async function validateSearchParam({\n  collectionConfig,\n  constraint,\n  errors,\n  fields,\n  globalConfig,\n  operator,\n  overrideAccess,\n  parentIsLocalized,\n  path: incomingPath,\n  policies,\n  polymorphicJoin,\n  req,\n  val,\n  versionFields,\n}: Args): Promise<void> {\n  // Replace GraphQL nested field double underscore formatting\n  let sanitizedPath\n  if (incomingPath === '_id') {\n    sanitizedPath = 'id'\n  } else {\n    sanitizedPath = incomingPath.replace(/__/g, '.')\n  }\n  let paths: PathToQuery[] = []\n  const { slug } = (collectionConfig || globalConfig)!\n\n  const blockPolicies = {}\n\n  if (globalConfig && !policies.globals![slug]) {\n    policies.globals![slug] = await getEntityPolicies({\n      type: 'global',\n      blockPolicies,\n      entity: globalConfig,\n      operations: ['read'],\n      req,\n    })\n  }\n\n  if (sanitizedPath !== 'id') {\n    paths = getLocalizedPaths({\n      collectionSlug: collectionConfig?.slug,\n      fields,\n      globalSlug: globalConfig?.slug,\n      incomingPath: sanitizedPath,\n      locale: req.locale!,\n      overrideAccess,\n      parentIsLocalized,\n      payload: req.payload,\n    })\n  }\n  const promises: Promise<void>[] = []\n\n  // Sanitize relation.otherRelation.id to relation.otherRelation\n  if (paths.at(-1)?.path === 'id') {\n    const previousField = paths.at(-2)?.field\n    if (\n      previousField &&\n      (previousField.type === 'relationship' || previousField.type === 'upload') &&\n      typeof previousField.relationTo === 'string'\n    ) {\n      paths.pop()\n    }\n  }\n\n  promises.push(\n    ...paths.map(async ({ collectionSlug, field, invalid, path }, i) => {\n      if (invalid) {\n        if (!polymorphicJoin) {\n          errors.push({ path })\n        }\n\n        return\n      }\n\n      // where: { relatedPosts: { equals: 1}} -> { 'relatedPosts.id': { equals: 1}}\n      if (field.type === 'join' && path === incomingPath) {\n        constraint[`${path}.id` as keyof WhereField] = constraint[path as keyof WhereField]\n        delete constraint[path as keyof WhereField]\n      }\n\n      if ('virtual' in field && field.virtual) {\n        if (field.virtual === true) {\n          errors.push({ path })\n        }\n      }\n\n      if (polymorphicJoin && path === 'relationTo') {\n        return\n      }\n\n      if (!overrideAccess && fieldAffectsData(field)) {\n        if (collectionSlug) {\n          if (!policies.collections![collectionSlug]) {\n            policies.collections![collectionSlug] = await getEntityPolicies({\n              type: 'collection',\n              blockPolicies,\n              entity: req.payload.collections[collectionSlug]!.config,\n              operations: ['read'],\n              req: isolateObjectProperty(req, 'transactionID'),\n            })\n          }\n\n          if (\n            ['hash', 'salt'].includes(incomingPath) &&\n            collectionConfig!.auth &&\n            !collectionConfig!.auth?.disableLocalStrategy\n          ) {\n            errors.push({ path: incomingPath })\n          }\n        }\n        let fieldPath = path\n        // remove locale from end of path\n        if (path.endsWith(`.${req.locale}`)) {\n          fieldPath = path.slice(0, -(req.locale!.length + 1))\n        }\n        // remove \".value\" from ends of polymorphic relationship paths\n        if (\n          (field.type === 'relationship' || field.type === 'upload') &&\n          Array.isArray(field.relationTo)\n        ) {\n          fieldPath = fieldPath.replace('.value', '')\n        }\n\n        const entityType: 'collections' | 'globals' = globalConfig ? 'globals' : 'collections'\n        const entitySlug = collectionSlug || globalConfig!.slug\n        const segments = fieldPath.split('.')\n\n        let fieldAccess: any\n\n        if (versionFields) {\n          fieldAccess = policies[entityType]![entitySlug]!.fields\n\n          if (\n            segments[0] === 'parent' ||\n            segments[0] === 'version' ||\n            segments[0] === 'snapshot' ||\n            segments[0] === 'latest'\n          ) {\n            segments.shift()\n          }\n        } else {\n          fieldAccess = policies[entityType]![entitySlug]!.fields\n        }\n\n        if (segments.length) {\n          segments.forEach((segment) => {\n            if (fieldAccess[segment]) {\n              if ('fields' in fieldAccess[segment]) {\n                fieldAccess = fieldAccess[segment].fields\n              } else {\n                fieldAccess = fieldAccess[segment]\n              }\n            }\n          })\n\n          if (!fieldAccess?.read?.permission) {\n            errors.push({ path: fieldPath })\n          }\n        }\n      }\n\n      if (i > 1) {\n        // Remove top collection and reverse array\n        // to work backwards from top\n        const pathsToQuery = paths.slice(1).reverse()\n\n        pathsToQuery.forEach(\n          ({ collectionSlug: pathCollectionSlug, path: subPath }, pathToQueryIndex) => {\n            // On the \"deepest\" collection,\n            // validate query of the relationship\n            if (pathToQueryIndex === 0) {\n              promises.push(\n                validateQueryPaths({\n                  collectionConfig: req.payload.collections[pathCollectionSlug!]!.config,\n                  errors,\n                  globalConfig: undefined,\n                  overrideAccess,\n                  policies,\n                  req,\n                  where: {\n                    [subPath]: {\n                      [operator]: val,\n                    },\n                  },\n                }),\n              )\n            }\n          },\n        )\n      }\n    }),\n  )\n  await Promise.all(promises)\n}\n"],"names":["fieldAffectsData","getEntityPolicies","isolateObjectProperty","getLocalizedPaths","validateQueryPaths","validateSearchParam","collectionConfig","constraint","errors","fields","globalConfig","operator","overrideAccess","parentIsLocalized","path","incomingPath","policies","polymorphicJoin","req","val","versionFields","sanitizedPath","replace","paths","slug","blockPolicies","globals","type","entity","operations","collectionSlug","globalSlug","locale","payload","promises","at","previousField","field","relationTo","pop","push","map","invalid","i","virtual","collections","config","includes","auth","disableLocalStrategy","fieldPath","endsWith","slice","length","Array","isArray","entityType","entitySlug","segments","split","fieldAccess","shift","forEach","segment","read","permission","pathsToQuery","reverse","pathCollectionSlug","subPath","pathToQueryIndex","undefined","where","Promise","all"],"mappings":"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"}},
    {"offset": {"line": 1470, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/database/queryValidation/validateQueryPaths.ts"],"sourcesContent":["import type { SanitizedCollectionConfig } from '../../collections/config/types.js'\nimport type { FlattenedField } from '../../fields/config/types.js'\nimport type { SanitizedGlobalConfig } from '../../globals/config/types.js'\nimport type { Operator, PayloadRequest, Where, WhereField } from '../../types/index.js'\nimport type { EntityPolicies } from './types.js'\n\nimport { QueryError } from '../../errors/QueryError.js'\nimport { validOperatorSet } from '../../types/constants.js'\nimport { validateSearchParam } from './validateSearchParams.js'\n\ntype Args = {\n  errors?: { path: string }[]\n  overrideAccess: boolean\n  policies?: EntityPolicies\n  polymorphicJoin?: boolean\n  req: PayloadRequest\n  versionFields?: FlattenedField[]\n  where: Where\n} & (\n  | {\n      collectionConfig: SanitizedCollectionConfig\n      globalConfig?: never | undefined\n    }\n  | {\n      collectionConfig?: never | undefined\n      globalConfig: SanitizedGlobalConfig\n    }\n)\n\nexport async function validateQueryPaths({\n  collectionConfig,\n  errors = [],\n  globalConfig,\n  overrideAccess,\n  policies = {\n    collections: {},\n    globals: {},\n  },\n  polymorphicJoin,\n  req,\n  versionFields,\n  where,\n}: Args): Promise<void> {\n  const fields = versionFields || (globalConfig || collectionConfig).flattenedFields\n\n  if (typeof where === 'object') {\n    // We need to determine if the whereKey is an AND, OR, or a schema path\n    const promises: Promise<void>[] = []\n    for (const path in where) {\n      const constraint = where[path]\n\n      if ((path === 'and' || path === 'or') && Array.isArray(constraint)) {\n        for (const item of constraint) {\n          if (collectionConfig) {\n            promises.push(\n              validateQueryPaths({\n                collectionConfig,\n                errors,\n                overrideAccess,\n                policies,\n                polymorphicJoin,\n                req,\n                versionFields,\n                where: item,\n              }),\n            )\n          } else {\n            promises.push(\n              validateQueryPaths({\n                errors,\n                globalConfig,\n                overrideAccess,\n                policies,\n                polymorphicJoin,\n                req,\n                versionFields,\n                where: item,\n              }),\n            )\n          }\n        }\n      } else if (!Array.isArray(constraint)) {\n        for (const operator in constraint) {\n          const val = constraint[operator as keyof typeof constraint]\n          if (validOperatorSet.has(operator as Operator)) {\n            promises.push(\n              validateSearchParam({\n                collectionConfig,\n                constraint: where as WhereField,\n                errors,\n                fields,\n                globalConfig,\n                operator,\n                overrideAccess,\n                path,\n                policies,\n                polymorphicJoin,\n                req,\n                val,\n                versionFields,\n              }),\n            )\n          }\n        }\n      }\n    }\n\n    await Promise.all(promises)\n    if (errors.length > 0) {\n      throw new QueryError(errors)\n    }\n  }\n}\n"],"names":["QueryError","validOperatorSet","validateSearchParam","validateQueryPaths","collectionConfig","errors","globalConfig","overrideAccess","policies","collections","globals","polymorphicJoin","req","versionFields","where","fields","flattenedFields","promises","path","constraint","Array","isArray","item","push","operator","val","has","Promise","all","length"],"mappings":";;;;AAMA,SAASA,UAAU,QAAQ,6BAA4B;AACvD,SAASC,gBAAgB,QAAQ,2BAA0B;AAC3D,SAASC,mBAAmB,QAAQ,4BAA2B;;;;AAqBxD,eAAeC,mBAAmB,EACvCC,gBAAgB,EAChBC,SAAS,EAAE,EACXC,YAAY,EACZC,cAAc,EACdC,WAAW;IACTC,aAAa,CAAC;IACdC,SAAS,CAAC;AACZ,CAAC,EACDC,eAAe,EACfC,GAAG,EACHC,aAAa,EACbC,KAAK,EACA;IACL,MAAMC,SAASF,iBAAkBP,CAAAA,gBAAgBF,gBAAe,EAAGY,eAAe;IAElF,IAAI,OAAOF,UAAU,UAAU;QAC7B,uEAAuE;QACvE,MAAMG,WAA4B,EAAE;QACpC,IAAK,MAAMC,QAAQJ,MAAO;YACxB,MAAMK,aAAaL,KAAK,CAACI,KAAK;YAE9B,IAAKA,CAAAA,SAAS,SAASA,SAAS,IAAG,KAAME,MAAMC,OAAO,CAACF,aAAa;gBAClE,KAAK,MAAMG,QAAQH,WAAY;oBAC7B,IAAIf,kBAAkB;wBACpBa,SAASM,IAAI,CACXpB,mBAAmB;4BACjBC;4BACAC;4BACAE;4BACAC;4BACAG;4BACAC;4BACAC;4BACAC,OAAOQ;wBACT;oBAEJ,OAAO;wBACLL,SAASM,IAAI,CACXpB,mBAAmB;4BACjBE;4BACAC;4BACAC;4BACAC;4BACAG;4BACAC;4BACAC;4BACAC,OAAOQ;wBACT;oBAEJ;gBACF;YACF,OAAO,IAAI,CAACF,MAAMC,OAAO,CAACF,aAAa;gBACrC,IAAK,MAAMK,YAAYL,WAAY;oBACjC,MAAMM,MAAMN,UAAU,CAACK,SAAoC;oBAC3D,IAAIvB,iRAAAA,CAAiByB,GAAG,CAACF,WAAuB;wBAC9CP,SAASM,IAAI,KACXrB,qTAAAA,EAAoB;4BAClBE;4BACAe,YAAYL;4BACZT;4BACAU;4BACAT;4BACAkB;4BACAjB;4BACAW;4BACAV;4BACAG;4BACAC;4BACAa;4BACAZ;wBACF;oBAEJ;gBACF;YACF;QACF;QAEA,MAAMc,QAAQC,GAAG,CAACX;QAClB,IAAIZ,OAAOwB,MAAM,GAAG,GAAG;YACrB,MAAM,IAAI7B,6QAAAA,CAAWK;QACvB;IACF;AACF"}},
    {"offset": {"line": 1549, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/database/sanitizeWhereQuery.ts"],"sourcesContent":["import type { FlattenedField } from '../fields/config/types.js'\nimport type { Payload, Where } from '../types/index.js'\n\n/**\n * Currently used only for virtual fields linked with relationships\n */\nexport const sanitizeWhereQuery = ({\n  fields,\n  payload,\n  where,\n}: {\n  fields: FlattenedField[]\n  payload: Payload\n  where: Where\n}) => {\n  for (const key in where) {\n    const value = where[key]\n\n    if (['and', 'or'].includes(key.toLowerCase()) && Array.isArray(value)) {\n      for (const where of value) {\n        sanitizeWhereQuery({ fields, payload, where })\n      }\n      continue\n    }\n\n    const paths = key.split('.')\n    let pathHasChanged = false\n\n    let currentFields = fields\n\n    for (let i = 0; i < paths.length; i++) {\n      const path = paths[i]!\n      const field = currentFields.find((each) => each.name === path)\n\n      if (!field) {\n        break\n      }\n\n      if ('virtual' in field && field.virtual && typeof field.virtual === 'string') {\n        paths[i] = field.virtual\n        pathHasChanged = true\n      }\n\n      if ('flattenedFields' in field) {\n        currentFields = field.flattenedFields\n      }\n\n      if (\n        (field.type === 'relationship' || field.type === 'upload') &&\n        typeof field.relationTo === 'string'\n      ) {\n        const relatedCollection = payload.collections[field.relationTo]\n        if (relatedCollection) {\n          currentFields = relatedCollection.config.flattenedFields\n        }\n      }\n    }\n\n    if (pathHasChanged) {\n      where[paths.join('.')] = where[key]!\n      delete where[key]\n    }\n  }\n}\n"],"names":["sanitizeWhereQuery","fields","payload","where","key","value","includes","toLowerCase","Array","isArray","paths","split","pathHasChanged","currentFields","i","length","path","field","find","each","name","virtual","flattenedFields","type","relationTo","relatedCollection","collections","config","join"],"mappings":"AAGA;;CAEC,GACD;;;;AAAO,MAAMA,qBAAqB,CAAC,EACjCC,MAAM,EACNC,OAAO,EACPC,KAAK,EAKN;IACC,IAAK,MAAMC,OAAOD,MAAO;QACvB,MAAME,QAAQF,KAAK,CAACC,IAAI;QAExB,IAAI;YAAC;YAAO;SAAK,CAACE,QAAQ,CAACF,IAAIG,WAAW,OAAOC,MAAMC,OAAO,CAACJ,QAAQ;YACrE,KAAK,MAAMF,SAASE,MAAO;gBACzBL,mBAAmB;oBAAEC;oBAAQC;oBAASC;gBAAM;YAC9C;YACA;QACF;QAEA,MAAMO,QAAQN,IAAIO,KAAK,CAAC;QACxB,IAAIC,iBAAiB;QAErB,IAAIC,gBAAgBZ;QAEpB,IAAK,IAAIa,IAAI,GAAGA,IAAIJ,MAAMK,MAAM,EAAED,IAAK;YACrC,MAAME,OAAON,KAAK,CAACI,EAAE;YACrB,MAAMG,QAAQJ,cAAcK,IAAI,CAAC,CAACC,OAASA,KAAKC,IAAI,KAAKJ;YAEzD,IAAI,CAACC,OAAO;gBACV;YACF;YAEA,IAAI,aAAaA,SAASA,MAAMI,OAAO,IAAI,OAAOJ,MAAMI,OAAO,KAAK,UAAU;gBAC5EX,KAAK,CAACI,EAAE,GAAGG,MAAMI,OAAO;gBACxBT,iBAAiB;YACnB;YAEA,IAAI,qBAAqBK,OAAO;gBAC9BJ,gBAAgBI,MAAMK,eAAe;YACvC;YAEA,IACGL,CAAAA,MAAMM,IAAI,KAAK,kBAAkBN,MAAMM,IAAI,KAAK,QAAO,KACxD,OAAON,MAAMO,UAAU,KAAK,UAC5B;gBACA,MAAMC,oBAAoBvB,QAAQwB,WAAW,CAACT,MAAMO,UAAU,CAAC;gBAC/D,IAAIC,mBAAmB;oBACrBZ,gBAAgBY,kBAAkBE,MAAM,CAACL,eAAe;gBAC1D;YACF;QACF;QAEA,IAAIV,gBAAgB;YAClBT,KAAK,CAACO,MAAMkB,IAAI,CAAC,KAAK,GAAGzB,KAAK,CAACC,IAAI;YACnC,OAAOD,KAAK,CAACC,IAAI;QACnB;IACF;AACF,EAAC"}},
    {"offset": {"line": 1604, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/database/sanitizeJoinQuery.ts"],"sourcesContent":["import type { SanitizedCollectionConfig, SanitizedJoin } from '../collections/config/types.js'\nimport type { JoinQuery, PayloadRequest } from '../types/index.js'\n\nimport { executeAccess } from '../auth/executeAccess.js'\nimport { QueryError } from '../errors/QueryError.js'\nimport { combineQueries } from './combineQueries.js'\nimport { validateQueryPaths } from './queryValidation/validateQueryPaths.js'\n\ntype Args = {\n  collectionConfig: SanitizedCollectionConfig\n  joins?: JoinQuery\n  overrideAccess: boolean\n  req: PayloadRequest\n}\n\nconst sanitizeJoinFieldQuery = async ({\n  collectionSlug,\n  errors,\n  join,\n  joinsQuery,\n  overrideAccess,\n  promises,\n  req,\n}: {\n  collectionSlug: string\n  errors: { path: string }[]\n  join: SanitizedJoin\n  joinsQuery: JoinQuery\n  overrideAccess: boolean\n  promises: Promise<void>[]\n  req: PayloadRequest\n}) => {\n  const { joinPath } = join\n\n  // TODO: fix any's in joinsQuery[joinPath]\n\n  if ((joinsQuery as any)[joinPath] === false) {\n    return\n  }\n\n  const joinCollectionConfig = req.payload.collections[collectionSlug]!.config\n\n  const accessResult = !overrideAccess\n    ? await executeAccess({ disableErrors: true, req }, joinCollectionConfig.access.read)\n    : true\n\n  if (accessResult === false) {\n    ;(joinsQuery as any)[joinPath] = false\n    return\n  }\n\n  if (!(joinsQuery as any)[joinPath]) {\n    ;(joinsQuery as any)[joinPath] = {}\n  }\n\n  const joinQuery = (joinsQuery as any)[joinPath]\n\n  if (!joinQuery.where) {\n    joinQuery.where = {}\n  }\n\n  if (join.field.where) {\n    joinQuery.where = combineQueries(joinQuery.where, join.field.where)\n  }\n\n  promises.push(\n    validateQueryPaths({\n      collectionConfig: joinCollectionConfig,\n      errors,\n      overrideAccess,\n      polymorphicJoin: Array.isArray(join.field.collection),\n      req,\n      // incoming where input, but we shouldn't validate generated from the access control.\n      where: joinQuery.where,\n    }),\n  )\n\n  if (typeof accessResult === 'object') {\n    joinQuery.where = combineQueries(joinQuery.where, accessResult)\n  }\n}\n\n/**\n * * Validates `where` for each join\n * * Combines the access result for joined collection\n * * Combines the default join's `where`\n */\nexport const sanitizeJoinQuery = async ({\n  collectionConfig,\n  joins: joinsQuery,\n  overrideAccess,\n  req,\n}: Args) => {\n  if (joinsQuery === false) {\n    return false\n  }\n\n  if (!joinsQuery) {\n    joinsQuery = {}\n  }\n\n  const errors: { path: string }[] = []\n  const promises: Promise<void>[] = []\n\n  for (const collectionSlug in collectionConfig.joins) {\n    for (const join of collectionConfig.joins[collectionSlug]!) {\n      await sanitizeJoinFieldQuery({\n        collectionSlug,\n        errors,\n        join,\n        joinsQuery,\n        overrideAccess,\n        promises,\n        req,\n      })\n    }\n  }\n\n  for (const join of collectionConfig.polymorphicJoins) {\n    for (const collectionSlug of join.field.collection) {\n      await sanitizeJoinFieldQuery({\n        collectionSlug,\n        errors,\n        join,\n        joinsQuery,\n        overrideAccess,\n        promises,\n        req,\n      })\n    }\n  }\n\n  await Promise.all(promises)\n\n  if (errors.length > 0) {\n    throw new QueryError(errors)\n  }\n\n  return joinsQuery\n}\n"],"names":["executeAccess","QueryError","combineQueries","validateQueryPaths","sanitizeJoinFieldQuery","collectionSlug","errors","join","joinsQuery","overrideAccess","promises","req","joinPath","joinCollectionConfig","payload","collections","config","accessResult","disableErrors","access","read","joinQuery","where","field","push","collectionConfig","polymorphicJoin","Array","isArray","collection","sanitizeJoinQuery","joins","polymorphicJoins","Promise","all","length"],"mappings":";;;;AAGA,SAASA,aAAa,QAAQ,2BAA0B;AACxD,SAASC,UAAU,QAAQ,0BAAyB;AACpD,SAASC,cAAc,QAAQ,sBAAqB;AACpD,SAASC,kBAAkB,QAAQ,0CAAyC;;;;;AAS5E,MAAMC,yBAAyB,OAAO,EACpCC,cAAc,EACdC,MAAM,EACNC,IAAI,EACJC,UAAU,EACVC,cAAc,EACdC,QAAQ,EACRC,GAAG,EASJ;IACC,MAAM,EAAEC,QAAQ,EAAE,GAAGL;IAErB,0CAA0C;IAE1C,IAAKC,UAAkB,CAACI,SAAS,KAAK,OAAO;QAC3C;IACF;IAEA,MAAMC,uBAAuBF,IAAIG,OAAO,CAACC,WAAW,CAACV,eAAe,CAAEW,MAAM;IAE5E,MAAMC,eAAe,CAACR,iBAClB,UAAMT,iRAAAA,EAAc;QAAEkB,eAAe;QAAMP;IAAI,GAAGE,qBAAqBM,MAAM,CAACC,IAAI,IAClF;IAEJ,IAAIH,iBAAiB,OAAO;;QACxBT,UAAkB,CAACI,SAAS,GAAG;QACjC;IACF;IAEA,IAAI,CAAEJ,UAAkB,CAACI,SAAS,EAAE;;QAChCJ,UAAkB,CAACI,SAAS,GAAG,CAAC;IACpC;IAEA,MAAMS,YAAab,UAAkB,CAACI,SAAS;IAE/C,IAAI,CAACS,UAAUC,KAAK,EAAE;QACpBD,UAAUC,KAAK,GAAG,CAAC;IACrB;IAEA,IAAIf,KAAKgB,KAAK,CAACD,KAAK,EAAE;QACpBD,UAAUC,KAAK,OAAGpB,uRAAAA,EAAemB,UAAUC,KAAK,EAAEf,KAAKgB,KAAK,CAACD,KAAK;IACpE;IAEAZ,SAASc,IAAI,KACXrB,kTAAAA,EAAmB;QACjBsB,kBAAkBZ;QAClBP;QACAG;QACAiB,iBAAiBC,MAAMC,OAAO,CAACrB,KAAKgB,KAAK,CAACM,UAAU;QACpDlB;QACA,qFAAqF;QACrFW,OAAOD,UAAUC,KAAK;IACxB;IAGF,IAAI,OAAOL,iBAAiB,UAAU;QACpCI,UAAUC,KAAK,OAAGpB,uRAAAA,EAAemB,UAAUC,KAAK,EAAEL;IACpD;AACF;AAOO,MAAMa,oBAAoB,OAAO,EACtCL,gBAAgB,EAChBM,OAAOvB,UAAU,EACjBC,cAAc,EACdE,GAAG,EACE;IACL,IAAIH,eAAe,OAAO;QACxB,OAAO;IACT;IAEA,IAAI,CAACA,YAAY;QACfA,aAAa,CAAC;IAChB;IAEA,MAAMF,SAA6B,EAAE;IACrC,MAAMI,WAA4B,EAAE;IAEpC,IAAK,MAAML,kBAAkBoB,iBAAiBM,KAAK,CAAE;QACnD,KAAK,MAAMxB,QAAQkB,iBAAiBM,KAAK,CAAC1B,eAAe,CAAG;YAC1D,MAAMD,uBAAuB;gBAC3BC;gBACAC;gBACAC;gBACAC;gBACAC;gBACAC;gBACAC;YACF;QACF;IACF;IAEA,KAAK,MAAMJ,QAAQkB,iBAAiBO,gBAAgB,CAAE;QACpD,KAAK,MAAM3B,kBAAkBE,KAAKgB,KAAK,CAACM,UAAU,CAAE;YAClD,MAAMzB,uBAAuB;gBAC3BC;gBACAC;gBACAC;gBACAC;gBACAC;gBACAC;gBACAC;YACF;QACF;IACF;IAEA,MAAMsB,QAAQC,GAAG,CAACxB;IAElB,IAAIJ,OAAO6B,MAAM,GAAG,GAAG;QACrB,MAAM,IAAIlC,6QAAAA,CAAWK;IACvB;IAEA,OAAOE;AACT,EAAC"}},
    {"offset": {"line": 1701, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/database/migrations/migrationsCollection.ts"],"sourcesContent":["import type { CollectionConfig } from '../../collections/config/types.js'\n\nexport const migrationsCollection: CollectionConfig = {\n  slug: 'payload-migrations',\n  admin: {\n    hidden: true,\n  },\n  endpoints: false,\n  fields: [\n    {\n      name: 'name',\n      type: 'text',\n    },\n    {\n      name: 'batch',\n      type: 'number',\n      // NOTE: This value is -1 if it is a \"dev push\"\n    },\n  ],\n  graphQL: false,\n  lockDocuments: false,\n}\n"],"names":["migrationsCollection","slug","admin","hidden","endpoints","fields","name","type","graphQL","lockDocuments"],"mappings":";;;;AAEO,MAAMA,uBAAyC;IACpDC,MAAM;IACNC,OAAO;QACLC,QAAQ;IACV;IACAC,WAAW;IACXC,QAAQ;QACN;YACEC,MAAM;YACNC,MAAM;QACR;QACA;YACED,MAAM;YACNC,MAAM;QAER;KACD;IACDC,SAAS;IACTC,eAAe;AACjB,EAAC"}},
    {"offset": {"line": 1728, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/versions/baseFields.ts"],"sourcesContent":["// @ts-strict-ignore\nimport type { CheckboxField, Field, Option } from '../fields/config/types.js'\n\nexport const statuses: Option[] = [\n  {\n    label: ({ t }) => t('version:draft'),\n    value: 'draft',\n  },\n  {\n    label: ({ t }) => t('version:published'),\n    value: 'published',\n  },\n]\n\nexport const baseVersionFields: Field[] = [\n  {\n    name: '_status',\n    type: 'select',\n    admin: {\n      components: {\n        Field: false,\n      },\n      disableBulkEdit: true,\n    },\n    defaultValue: 'draft',\n    index: true,\n    label: ({ t }) => t('version:status'),\n    options: statuses,\n  },\n]\n\n// When publishing a specific locale,\n// we need to create a new draft which acts as a\n// \"snapshot\" to retain all existing draft data.\n// This field will be used to exclude any snapshot versions\n// from the admin Versions list\nexport const versionSnapshotField: CheckboxField = {\n  name: 'snapshot',\n  type: 'checkbox',\n  admin: {\n    disableBulkEdit: true,\n    disabled: true,\n  },\n  index: true,\n}\n"],"names":["statuses","label","t","value","baseVersionFields","name","type","admin","components","Field","disableBulkEdit","defaultValue","index","options","versionSnapshotField","disabled"],"mappings":"AAAA,oBAAoB;;;;;;;;;AAGb,MAAMA,WAAqB;IAChC;QACEC,OAAO,CAAC,EAAEC,CAAC,EAAE,GAAKA,EAAE;QACpBC,OAAO;IACT;IACA;QACEF,OAAO,CAAC,EAAEC,CAAC,EAAE,GAAKA,EAAE;QACpBC,OAAO;IACT;CACD,CAAA;AAEM,MAAMC,oBAA6B;IACxC;QACEC,MAAM;QACNC,MAAM;QACNC,OAAO;YACLC,YAAY;gBACVC,OAAO;YACT;YACAC,iBAAiB;QACnB;QACAC,cAAc;QACdC,OAAO;QACPX,OAAO,CAAC,EAAEC,CAAC,EAAE,GAAKA,EAAE;QACpBW,SAASb;IACX;CACD,CAAA;AAOM,MAAMc,uBAAsC;IACjDT,MAAM;IACNC,MAAM;IACNC,OAAO;QACLG,iBAAiB;QACjBK,UAAU;IACZ;IACAH,OAAO;AACT,EAAC"}},
    {"offset": {"line": 1776, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/versions/defaults.ts"],"sourcesContent":["export const versionDefaults = {\n  autosaveInterval: 2000,\n}\n"],"names":["versionDefaults","autosaveInterval"],"mappings":";;;;AAAO,MAAMA,kBAAkB;IAC7BC,kBAAkB;AACpB,EAAC"}},
    {"offset": {"line": 1787, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/versions/drafts/appendVersionToQueryKey.ts"],"sourcesContent":["import type { Where } from '../../types/index.js'\n\nexport const appendVersionToQueryKey = (query: Where = {}): Where => {\n  return Object.entries(query).reduce((res, [key, val]) => {\n    if (['AND', 'and', 'OR', 'or'].includes(key) && Array.isArray(val)) {\n      return {\n        ...res,\n        [key.toLowerCase()]: val.map((subQuery) => appendVersionToQueryKey(subQuery)),\n      }\n    }\n\n    if (key !== 'id') {\n      return {\n        ...res,\n        [`version.${key}`]: val,\n      }\n    }\n\n    return {\n      ...res,\n      parent: val,\n    }\n  }, {})\n}\n"],"names":["appendVersionToQueryKey","query","Object","entries","reduce","res","key","val","includes","Array","isArray","toLowerCase","map","subQuery","parent"],"mappings":";;;;AAEO,MAAMA,0BAA0B,CAACC,QAAe,CAAC,CAAC;IACvD,OAAOC,OAAOC,OAAO,CAACF,OAAOG,MAAM,CAAC,CAACC,KAAK,CAACC,KAAKC,IAAI;QAClD,IAAI;YAAC;YAAO;YAAO;YAAM;SAAK,CAACC,QAAQ,CAACF,QAAQG,MAAMC,OAAO,CAACH,MAAM;YAClE,OAAO;gBACL,GAAGF,GAAG;gBACN,CAACC,IAAIK,WAAW,GAAG,EAAEJ,IAAIK,GAAG,CAAC,CAACC,WAAab,wBAAwBa;YACrE;QACF;QAEA,IAAIP,QAAQ,MAAM;YAChB,OAAO;gBACL,GAAGD,GAAG;gBACN,CAAC,CAAC,QAAQ,EAAEC,KAAK,CAAC,EAAEC;YACtB;QACF;QAEA,OAAO;YACL,GAAGF,GAAG;YACNS,QAAQP;QACV;IACF,GAAG,CAAC;AACN,EAAC"}},
    {"offset": {"line": 1820, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/versions/getLatestCollectionVersion.ts"],"sourcesContent":["import type { SanitizedCollectionConfig, TypeWithID } from '../collections/config/types.js'\nimport type { FindOneArgs } from '../database/types.js'\nimport type { Payload, PayloadRequest, Where } from '../types/index.js'\nimport type { TypeWithVersion } from './types.js'\n\nimport { combineQueries } from '../database/combineQueries.js'\nimport { appendVersionToQueryKey } from './drafts/appendVersionToQueryKey.js'\n\ntype Args = {\n  config: SanitizedCollectionConfig\n  id: number | string\n  payload: Payload\n  published?: boolean\n  query: FindOneArgs\n  req?: PayloadRequest\n}\n\nexport const getLatestCollectionVersion = async <T extends TypeWithID = any>({\n  id,\n  config,\n  payload,\n  published,\n  query,\n  req,\n}: Args): Promise<T | undefined> => {\n  let latestVersion!: TypeWithVersion<T>\n\n  const whereQuery = published\n    ? { and: [{ parent: { equals: id } }, { 'version._status': { equals: 'published' } }] }\n    : { and: [{ parent: { equals: id } }, { latest: { equals: true } }] }\n\n  if (config.versions?.drafts) {\n    const { docs } = await payload.db.findVersions<T>({\n      collection: config.slug,\n      limit: 1,\n      pagination: false,\n      req,\n      sort: '-updatedAt',\n      where: combineQueries(appendVersionToQueryKey(query.where), whereQuery as unknown as Where),\n    })\n    latestVersion = docs[0]!\n  }\n\n  if (!latestVersion) {\n    if (!published) {\n      const doc = await payload.db.findOne<T>({ ...query, req })\n\n      return doc ?? undefined\n    }\n\n    return undefined\n  }\n\n  latestVersion.version.id = id\n\n  return latestVersion.version\n}\n"],"names":["combineQueries","appendVersionToQueryKey","getLatestCollectionVersion","id","config","payload","published","query","req","latestVersion","whereQuery","and","parent","equals","latest","versions","drafts","docs","db","findVersions","collection","slug","limit","pagination","sort","where","doc","findOne","undefined","version"],"mappings":";;;;AAKA,SAASA,cAAc,QAAQ,gCAA+B;AAC9D,SAASC,uBAAuB,QAAQ,sCAAqC;;;AAWtE,MAAMC,6BAA6B,OAAmC,EAC3EC,EAAE,EACFC,MAAM,EACNC,OAAO,EACPC,SAAS,EACTC,KAAK,EACLC,GAAG,EACE;IACL,IAAIC;IAEJ,MAAMC,aAAaJ,YACf;QAAEK,KAAK;YAAC;gBAAEC,QAAQ;oBAAEC,QAAQV;gBAAG;YAAE;YAAG;gBAAE,mBAAmB;oBAAEU,QAAQ;gBAAY;YAAE;SAAE;IAAC,IACpF;QAAEF,KAAK;YAAC;gBAAEC,QAAQ;oBAAEC,QAAQV;gBAAG;YAAE;YAAG;gBAAEW,QAAQ;oBAAED,QAAQ;gBAAK;YAAE;SAAE;IAAC;IAEtE,IAAIT,OAAOW,QAAQ,EAAEC,QAAQ;QAC3B,MAAM,EAAEC,IAAI,EAAE,GAAG,MAAMZ,QAAQa,EAAE,CAACC,YAAY,CAAI;YAChDC,YAAYhB,OAAOiB,IAAI;YACvBC,OAAO;YACPC,YAAY;YACZf;YACAgB,MAAM;YACNC,WAAOzB,uRAAAA,MAAeC,mTAAAA,EAAwBM,MAAMkB,KAAK,GAAGf;QAC9D;QACAD,gBAAgBQ,IAAI,CAAC,EAAE;IACzB;IAEA,IAAI,CAACR,eAAe;QAClB,IAAI,CAACH,WAAW;YACd,MAAMoB,MAAM,MAAMrB,QAAQa,EAAE,CAACS,OAAO,CAAI;gBAAE,GAAGpB,KAAK;gBAAEC;YAAI;YAExD,OAAOkB,OAAOE;QAChB;QAEA,OAAOA;IACT;IAEAnB,cAAcoB,OAAO,CAAC1B,EAAE,GAAGA;IAE3B,OAAOM,cAAcoB,OAAO;AAC9B,EAAC"}},
    {"offset": {"line": 1885, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/versions/drafts/getQueryDraftsSelect.ts"],"sourcesContent":["import type { SelectType } from '../../types/index.js'\n\nimport { getSelectMode } from '../../utilities/getSelectMode.js'\n\nexport const getQueryDraftsSelect = ({\n  select,\n}: {\n  select?: SelectType\n}): SelectType | undefined => {\n  if (!select) {\n    return\n  }\n\n  const mode = getSelectMode(select)\n\n  if (mode === 'include') {\n    return {\n      parent: true,\n      version: select,\n    } as SelectType\n  }\n\n  return {\n    version: select,\n  } as SelectType\n}\n"],"names":["getSelectMode","getQueryDraftsSelect","select","mode","parent","version"],"mappings":";;;;AAEA,SAASA,aAAa,QAAQ,mCAAkC;;AAEzD,MAAMC,uBAAuB,CAAC,EACnCC,MAAM,EAGP;IACC,IAAI,CAACA,QAAQ;QACX;IACF;IAEA,MAAMC,WAAOH,sRAAAA,EAAcE;IAE3B,IAAIC,SAAS,WAAW;QACtB,OAAO;YACLC,QAAQ;YACRC,SAASH;QACX;IACF;IAEA,OAAO;QACLG,SAASH;IACX;AACF,EAAC"}},
    {"offset": {"line": 1910, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/versions/enforceMaxVersions.ts"],"sourcesContent":["import type { SanitizedCollectionConfig } from '../collections/config/types.js'\nimport type { DeleteVersionsArgs } from '../database/types.js'\nimport type { SanitizedGlobalConfig } from '../globals/config/types.js'\nimport type { Payload, PayloadRequest, Where } from '../types/index.js'\n\ntype Args = {\n  collection?: SanitizedCollectionConfig\n  global?: SanitizedGlobalConfig\n  id?: number | string\n  max: number\n  payload: Payload\n  req?: PayloadRequest\n}\n\nexport const enforceMaxVersions = async ({\n  id,\n  collection,\n  global: globalConfig,\n  max,\n  payload,\n  req,\n}: Args): Promise<void> => {\n  const entityType = collection ? 'collection' : 'global'\n  const slug = collection ? collection.slug : globalConfig?.slug\n\n  try {\n    const where: Where = {}\n    let oldestAllowedDoc\n\n    if (collection) {\n      where.parent = {\n        equals: id,\n      }\n\n      const query = await payload.db.findVersions({\n        collection: collection.slug,\n        limit: 1,\n        pagination: false,\n        req,\n        skip: max,\n        sort: '-updatedAt',\n        where,\n      })\n\n      ;[oldestAllowedDoc] = query.docs\n    } else if (globalConfig) {\n      const query = await payload.db.findGlobalVersions({\n        global: globalConfig.slug,\n        limit: 1,\n        pagination: false,\n        req,\n        skip: max,\n        sort: '-updatedAt',\n        where,\n      })\n\n      ;[oldestAllowedDoc] = query.docs\n    }\n\n    if (oldestAllowedDoc?.updatedAt) {\n      const deleteQuery: Where = {\n        updatedAt: {\n          less_than_equal: oldestAllowedDoc.updatedAt,\n        },\n      }\n\n      if (collection) {\n        deleteQuery.parent = {\n          equals: id,\n        }\n      }\n\n      const deleteVersionsArgs: DeleteVersionsArgs = { req, where: deleteQuery }\n\n      if (globalConfig) {\n        deleteVersionsArgs.globalSlug = slug\n      } else {\n        deleteVersionsArgs.collection = slug\n      }\n\n      await payload.db.deleteVersions(deleteVersionsArgs)\n    }\n  } catch (err) {\n    payload.logger.error(err)\n    payload.logger.error(\n      `There was an error cleaning up old versions for the ${entityType} ${slug}`,\n    )\n  }\n}\n"],"names":["enforceMaxVersions","id","collection","global","globalConfig","max","payload","req","entityType","slug","where","oldestAllowedDoc","parent","equals","query","db","findVersions","limit","pagination","skip","sort","docs","findGlobalVersions","updatedAt","deleteQuery","less_than_equal","deleteVersionsArgs","globalSlug","deleteVersions","err","logger","error"],"mappings":";;;;AAcO,MAAMA,qBAAqB,OAAO,EACvCC,EAAE,EACFC,UAAU,EACVC,QAAQC,YAAY,EACpBC,GAAG,EACHC,OAAO,EACPC,GAAG,EACE;IACL,MAAMC,aAAaN,aAAa,eAAe;IAC/C,MAAMO,OAAOP,aAAaA,WAAWO,IAAI,GAAGL,cAAcK;IAE1D,IAAI;QACF,MAAMC,QAAe,CAAC;QACtB,IAAIC;QAEJ,IAAIT,YAAY;YACdQ,MAAME,MAAM,GAAG;gBACbC,QAAQZ;YACV;YAEA,MAAMa,QAAQ,MAAMR,QAAQS,EAAE,CAACC,YAAY,CAAC;gBAC1Cd,YAAYA,WAAWO,IAAI;gBAC3BQ,OAAO;gBACPC,YAAY;gBACZX;gBACAY,MAAMd;gBACNe,MAAM;gBACNV;YACF;YAEC,CAACC,iBAAiB,GAAGG,MAAMO,IAAI;QAClC,OAAO,IAAIjB,cAAc;YACvB,MAAMU,QAAQ,MAAMR,QAAQS,EAAE,CAACO,kBAAkB,CAAC;gBAChDnB,QAAQC,aAAaK,IAAI;gBACzBQ,OAAO;gBACPC,YAAY;gBACZX;gBACAY,MAAMd;gBACNe,MAAM;gBACNV;YACF;YAEC,CAACC,iBAAiB,GAAGG,MAAMO,IAAI;QAClC;QAEA,IAAIV,kBAAkBY,WAAW;YAC/B,MAAMC,cAAqB;gBACzBD,WAAW;oBACTE,iBAAiBd,iBAAiBY,SAAS;gBAC7C;YACF;YAEA,IAAIrB,YAAY;gBACdsB,YAAYZ,MAAM,GAAG;oBACnBC,QAAQZ;gBACV;YACF;YAEA,MAAMyB,qBAAyC;gBAAEnB;gBAAKG,OAAOc;YAAY;YAEzE,IAAIpB,cAAc;gBAChBsB,mBAAmBC,UAAU,GAAGlB;YAClC,OAAO;gBACLiB,mBAAmBxB,UAAU,GAAGO;YAClC;YAEA,MAAMH,QAAQS,EAAE,CAACa,cAAc,CAACF;QAClC;IACF,EAAE,OAAOG,KAAK;QACZvB,QAAQwB,MAAM,CAACC,KAAK,CAACF;QACrBvB,QAAQwB,MAAM,CAACC,KAAK,CAClB,CAAC,oDAAoD,EAAEvB,WAAW,CAAC,EAAEC,MAAM;IAE/E;AACF,EAAC"}},
    {"offset": {"line": 1977, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/versions/saveSnapshot.ts"],"sourcesContent":["import type { SanitizedCollectionConfig } from '../collections/config/types.js'\nimport type { SanitizedGlobalConfig } from '../globals/config/types.js'\nimport type { Payload, TypeWithVersion } from '../index.js'\nimport type { JsonObject, PayloadRequest, SelectType } from '../types/index.js'\n\nimport { deepCopyObjectSimple } from '../index.js'\nimport { getQueryDraftsSelect } from './drafts/getQueryDraftsSelect.js'\n\ntype Args<T extends JsonObject = JsonObject> = {\n  autosave?: boolean\n  collection?: SanitizedCollectionConfig\n  data?: T\n  global?: SanitizedGlobalConfig\n  id?: number | string\n  payload: Payload\n  publishSpecificLocale?: string\n  req?: PayloadRequest\n  select?: SelectType\n}\n\nexport const saveSnapshot = async <T extends JsonObject = JsonObject>({\n  id,\n  autosave,\n  collection,\n  data,\n  global,\n  payload,\n  publishSpecificLocale,\n  req,\n  select,\n}: Args<T>): Promise<Omit<TypeWithVersion<T>, 'parent'> | TypeWithVersion<T> | undefined> => {\n  const docData: {\n    _status?: 'draft'\n  } & T = deepCopyObjectSimple<T>(data || ({} as T))\n  docData._status = 'draft'\n\n  if (docData._id) {\n    delete docData._id\n  }\n\n  const snapshotDate = new Date().toISOString()\n\n  const sharedCreateVersionArgs = {\n    autosave: Boolean(autosave),\n    createdAt: snapshotDate,\n    publishedLocale: publishSpecificLocale || undefined,\n    req,\n    returning: false,\n    select: getQueryDraftsSelect({ select }),\n    updatedAt: snapshotDate,\n    versionData: docData,\n  }\n\n  if (collection && id) {\n    return payload.db.createVersion<T>({\n      ...sharedCreateVersionArgs,\n      collectionSlug: collection.slug,\n      parent: id,\n      snapshot: true,\n    })\n  }\n  if (global) {\n    return payload.db.createGlobalVersion<T>({\n      ...sharedCreateVersionArgs,\n      globalSlug: global.slug,\n      snapshot: true,\n    })\n  }\n}\n"],"names":["deepCopyObjectSimple","getQueryDraftsSelect","saveSnapshot","id","autosave","collection","data","global","payload","publishSpecificLocale","req","select","docData","_status","_id","snapshotDate","Date","toISOString","sharedCreateVersionArgs","Boolean","createdAt","publishedLocale","undefined","returning","updatedAt","versionData","db","createVersion","collectionSlug","slug","parent","snapshot","createGlobalVersion","globalSlug"],"mappings":";;;;AAKA,SAASA,oBAAoB,QAAQ,cAAa;AAClD,SAASC,oBAAoB,QAAQ,mCAAkC;;;AAchE,MAAMC,eAAe,OAA0C,EACpEC,EAAE,EACFC,QAAQ,EACRC,UAAU,EACVC,IAAI,EACJC,MAAM,EACNC,OAAO,EACPC,qBAAqB,EACrBC,GAAG,EACHC,MAAM,EACE;IACR,MAAMC,cAEEZ,8RAAAA,EAAwBM,QAAS,CAAC;IAC1CM,QAAQC,OAAO,GAAG;IAElB,IAAID,QAAQE,GAAG,EAAE;QACf,OAAOF,QAAQE,GAAG;IACpB;IAEA,MAAMC,eAAe,IAAIC,OAAOC,WAAW;IAE3C,MAAMC,0BAA0B;QAC9Bd,UAAUe,QAAQf;QAClBgB,WAAWL;QACXM,iBAAiBZ,yBAAyBa;QAC1CZ;QACAa,WAAW;QACXZ,YAAQV,6SAAAA,EAAqB;YAAEU;QAAO;QACtCa,WAAWT;QACXU,aAAab;IACf;IAEA,IAAIP,cAAcF,IAAI;QACpB,OAAOK,QAAQkB,EAAE,CAACC,aAAa,CAAI;YACjC,GAAGT,uBAAuB;YAC1BU,gBAAgBvB,WAAWwB,IAAI;YAC/BC,QAAQ3B;YACR4B,UAAU;QACZ;IACF;IACA,IAAIxB,QAAQ;QACV,OAAOC,QAAQkB,EAAE,CAACM,mBAAmB,CAAI;YACvC,GAAGd,uBAAuB;YAC1Be,YAAY1B,OAAOsB,IAAI;YACvBE,UAAU;QACZ;IACF;AACF,EAAC"}},
    {"offset": {"line": 2024, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/versions/saveVersion.ts"],"sourcesContent":["import type { SanitizedCollectionConfig } from '../collections/config/types.js'\nimport type { SanitizedGlobalConfig } from '../globals/config/types.js'\nimport type { CreateGlobalVersionArgs, CreateVersionArgs, Payload } from '../index.js'\nimport type { JsonObject, PayloadRequest, SelectType } from '../types/index.js'\n\nimport { deepCopyObjectSimple } from '../index.js'\nimport { sanitizeInternalFields } from '../utilities/sanitizeInternalFields.js'\nimport { getQueryDraftsSelect } from './drafts/getQueryDraftsSelect.js'\nimport { enforceMaxVersions } from './enforceMaxVersions.js'\nimport { saveSnapshot } from './saveSnapshot.js'\n\ntype Args<T extends JsonObject = JsonObject> = {\n  autosave?: boolean\n  collection?: SanitizedCollectionConfig\n  docWithLocales: T\n  draft?: boolean\n  global?: SanitizedGlobalConfig\n  id?: number | string\n  operation?: 'create' | 'restoreVersion' | 'update'\n  payload: Payload\n  publishSpecificLocale?: string\n  req?: PayloadRequest\n  select?: SelectType\n  snapshot?: any\n}\n\nexport const saveVersion = async <TData extends JsonObject = JsonObject>({\n  id,\n  autosave,\n  collection,\n  docWithLocales,\n  draft,\n  global,\n  operation,\n  payload,\n  publishSpecificLocale,\n  req,\n  select,\n  snapshot,\n}: Args<TData>): Promise<JsonObject> => {\n  let result: JsonObject | undefined\n  let createNewVersion = true\n  const now = new Date().toISOString()\n  const versionData: {\n    _status?: 'draft'\n    updatedAt?: string\n  } & TData = deepCopyObjectSimple(docWithLocales)\n\n  if (draft) {\n    versionData._status = 'draft'\n  }\n\n  if (collection?.timestamps && draft) {\n    versionData.updatedAt = now\n  }\n\n  if (versionData._id) {\n    delete versionData._id\n  }\n\n  try {\n    if (autosave) {\n      let docs\n      const findVersionArgs = {\n        limit: 1,\n        pagination: false,\n        req,\n        sort: '-updatedAt',\n      }\n\n      if (collection) {\n        ;({ docs } = await payload.db.findVersions<TData>({\n          ...findVersionArgs,\n          collection: collection.slug,\n          limit: 1,\n          pagination: false,\n          req,\n          where: {\n            parent: {\n              equals: id,\n            },\n          },\n        }))\n      } else {\n        ;({ docs } = await payload.db.findGlobalVersions<TData>({\n          ...findVersionArgs,\n          global: global!.slug,\n          limit: 1,\n          pagination: false,\n          req,\n        }))\n      }\n      const [latestVersion] = docs\n\n      // overwrite the latest version if it's set to autosave\n      if (latestVersion && 'autosave' in latestVersion && latestVersion.autosave === true) {\n        createNewVersion = false\n\n        const updateVersionArgs = {\n          id: latestVersion.id,\n          req,\n          versionData: {\n            createdAt: new Date(latestVersion.createdAt).toISOString(),\n            latest: true,\n            parent: id,\n            updatedAt: now,\n            version: {\n              ...versionData,\n            },\n          },\n        }\n\n        if (collection) {\n          result = await payload.db.updateVersion<TData>({\n            ...updateVersionArgs,\n            collection: collection.slug,\n            req,\n          })\n        } else {\n          result = await payload.db.updateGlobalVersion<TData>({\n            ...updateVersionArgs,\n            global: global!.slug,\n            req,\n          })\n        }\n      }\n    }\n\n    if (createNewVersion) {\n      const createVersionArgs = {\n        autosave: Boolean(autosave),\n        collectionSlug: undefined as string | undefined,\n        createdAt: operation === 'restoreVersion' ? versionData.createdAt : now,\n        globalSlug: undefined as string | undefined,\n        parent: collection ? id : undefined,\n        publishedLocale: publishSpecificLocale || undefined,\n        req,\n        select: getQueryDraftsSelect({ select }),\n        updatedAt: now,\n        versionData,\n      }\n\n      if (collection) {\n        createVersionArgs.collectionSlug = collection.slug\n        result = await payload.db.createVersion(createVersionArgs as CreateVersionArgs)\n      }\n\n      if (global) {\n        createVersionArgs.globalSlug = global.slug\n        result = await payload.db.createGlobalVersion(createVersionArgs as CreateGlobalVersionArgs)\n      }\n\n      if (snapshot) {\n        await saveSnapshot<TData>({\n          id,\n          autosave,\n          collection,\n          data: snapshot,\n          global,\n          payload,\n          publishSpecificLocale,\n          req,\n          select,\n        })\n      }\n    }\n  } catch (err) {\n    let errorMessage: string | undefined\n\n    if (collection) {\n      errorMessage = `There was an error while saving a version for the ${typeof collection.labels.singular === 'string' ? collection.labels.singular : collection.slug} with ID ${id}.`\n    }\n    if (global) {\n      errorMessage = `There was an error while saving a version for the global ${typeof global.label === 'string' ? global.label : global.slug}.`\n    }\n    payload.logger.error({ err, msg: errorMessage })\n    return undefined!\n  }\n\n  const max = collection ? collection.versions.maxPerDoc : global!.versions.max\n\n  if (createNewVersion && max > 0) {\n    await enforceMaxVersions({\n      id,\n      collection,\n      global,\n      max,\n      payload,\n      req,\n    })\n  }\n\n  let createdVersion = (result as any).version\n\n  createdVersion = sanitizeInternalFields(createdVersion)\n  createdVersion.id = (result as any).parent\n\n  return createdVersion\n}\n"],"names":["deepCopyObjectSimple","sanitizeInternalFields","getQueryDraftsSelect","enforceMaxVersions","saveSnapshot","saveVersion","id","autosave","collection","docWithLocales","draft","global","operation","payload","publishSpecificLocale","req","select","snapshot","result","createNewVersion","now","Date","toISOString","versionData","_status","timestamps","updatedAt","_id","docs","findVersionArgs","limit","pagination","sort","db","findVersions","slug","where","parent","equals","findGlobalVersions","latestVersion","updateVersionArgs","createdAt","latest","version","updateVersion","updateGlobalVersion","createVersionArgs","Boolean","collectionSlug","undefined","globalSlug","publishedLocale","createVersion","createGlobalVersion","data","err","errorMessage","labels","singular","label","logger","error","msg","max","versions","maxPerDoc","createdVersion"],"mappings":"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"}},
    {"offset": {"line": 2188, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/versions/deleteCollectionVersions.ts"],"sourcesContent":["import type { PayloadRequest } from '../types/index.js'\n\nimport { type Payload } from '../index.js'\n\ntype Args = {\n  id?: number | string\n  payload: Payload\n  req?: PayloadRequest\n  slug: string\n}\n\nexport const deleteCollectionVersions = async ({ id, slug, payload, req }: Args): Promise<void> => {\n  try {\n    await payload.db.deleteVersions({\n      collection: slug,\n      req,\n      where: {\n        parent: {\n          equals: id,\n        },\n      },\n    })\n  } catch (err) {\n    payload.logger.error({\n      err,\n      msg: `There was an error removing versions for the deleted ${slug} document with ID ${id}.`,\n    })\n  }\n}\n"],"names":["deleteCollectionVersions","id","slug","payload","req","db","deleteVersions","collection","where","parent","equals","err","logger","error","msg"],"mappings":";;;;AAWO,MAAMA,2BAA2B,OAAO,EAAEC,EAAE,EAAEC,IAAI,EAAEC,OAAO,EAAEC,GAAG,EAAQ;IAC7E,IAAI;QACF,MAAMD,QAAQE,EAAE,CAACC,cAAc,CAAC;YAC9BC,YAAYL;YACZE;YACAI,OAAO;gBACLC,QAAQ;oBACNC,QAAQT;gBACV;YACF;QACF;IACF,EAAE,OAAOU,KAAK;QACZR,QAAQS,MAAM,CAACC,KAAK,CAAC;YACnBF;YACAG,KAAK,CAAC,qDAAqD,EAAEZ,KAAK,kBAAkB,EAAED,GAAG,CAAC,CAAC;QAC7F;IACF;AACF,EAAC"}},
    {"offset": {"line": 2214, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/versions/deleteScheduledPublishJobs.ts"],"sourcesContent":["import type { PayloadRequest } from '../types/index.js'\n\nimport { type Payload } from '../index.js'\nimport { jobsCollectionSlug } from '../queues/config/collection.js'\n\ntype Args = {\n  id?: number | string\n  payload: Payload\n  req?: PayloadRequest\n  slug: string\n}\n\nexport const deleteScheduledPublishJobs = async ({\n  id,\n  slug,\n  payload,\n  req,\n}: Args): Promise<void> => {\n  try {\n    await payload.db.deleteMany({\n      collection: jobsCollectionSlug,\n      req,\n      where: {\n        and: [\n          // only want to delete jobs have not run yet\n          {\n            completedAt: {\n              exists: false,\n            },\n          },\n          {\n            processing: {\n              equals: false,\n            },\n          },\n          {\n            'input.doc.value': {\n              equals: id,\n            },\n          },\n          {\n            'input.doc.relationTo': {\n              equals: slug,\n            },\n          },\n          // data.type narrows scheduled publish jobs in case of another job having input.doc.value\n          {\n            taskSlug: {\n              equals: 'schedulePublish',\n            },\n          },\n        ],\n      },\n    })\n  } catch (err) {\n    payload.logger.error({\n      err,\n      msg: `There was an error deleting scheduled publish jobs from the queue for ${slug} document with ID ${id}.`,\n    })\n  }\n}\n"],"names":["jobsCollectionSlug","deleteScheduledPublishJobs","id","slug","payload","req","db","deleteMany","collection","where","and","completedAt","exists","processing","equals","taskSlug","err","logger","error","msg"],"mappings":";;;;AAGA,SAASA,kBAAkB,QAAQ,iCAAgC;;AAS5D,MAAMC,6BAA6B,OAAO,EAC/CC,EAAE,EACFC,IAAI,EACJC,OAAO,EACPC,GAAG,EACE;IACL,IAAI;QACF,MAAMD,QAAQE,EAAE,CAACC,UAAU,CAAC;YAC1BC,YAAYR,+RAAAA;YACZK;YACAI,OAAO;gBACLC,KAAK;oBACH,4CAA4C;oBAC5C;wBACEC,aAAa;4BACXC,QAAQ;wBACV;oBACF;oBACA;wBACEC,YAAY;4BACVC,QAAQ;wBACV;oBACF;oBACA;wBACE,mBAAmB;4BACjBA,QAAQZ;wBACV;oBACF;oBACA;wBACE,wBAAwB;4BACtBY,QAAQX;wBACV;oBACF;oBACA,yFAAyF;oBACzF;wBACEY,UAAU;4BACRD,QAAQ;wBACV;oBACF;iBACD;YACH;QACF;IACF,EAAE,OAAOE,KAAK;QACZZ,QAAQa,MAAM,CAACC,KAAK,CAAC;YACnBF;YACAG,KAAK,CAAC,sEAAsE,EAAEhB,KAAK,kBAAkB,EAAED,GAAG,CAAC,CAAC;QAC9G;IACF;AACF,EAAC"}},
    {"offset": {"line": 2268, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/versions/buildCollectionFields.ts"],"sourcesContent":["import type { SanitizedCollectionConfig } from '../collections/config/types.js'\nimport type { SanitizedConfig } from '../config/types.js'\nimport type { Field, FlattenedField } from '../fields/config/types.js'\n\nimport { versionSnapshotField } from './baseFields.js'\n\nexport const buildVersionCollectionFields = <T extends boolean = false>(\n  config: SanitizedConfig,\n  collection: SanitizedCollectionConfig,\n  flatten?: T,\n): true extends T ? FlattenedField[] : Field[] => {\n  const fields: FlattenedField[] = [\n    {\n      name: 'parent',\n      type: 'relationship',\n      index: true,\n      relationTo: collection.slug,\n    },\n    {\n      name: 'version',\n      type: 'group',\n      fields: collection.fields.filter((field) => !('name' in field) || field.name !== 'id'),\n      ...(flatten && {\n        flattenedFields: collection.flattenedFields.filter((each) => each.name !== 'id'),\n      })!,\n    },\n    {\n      name: 'createdAt',\n      type: 'date',\n      admin: {\n        disabled: true,\n      },\n      index: true,\n    },\n    {\n      name: 'updatedAt',\n      type: 'date',\n      admin: {\n        disabled: true,\n      },\n      index: true,\n    },\n  ]\n\n  if (collection?.versions?.drafts) {\n    if (config.localization) {\n      fields.push(versionSnapshotField)\n\n      fields.push({\n        name: 'publishedLocale',\n        type: 'select',\n        admin: {\n          disableBulkEdit: true,\n          disabled: true,\n        },\n        index: true,\n        options: config.localization.locales.map((locale) => {\n          if (typeof locale === 'string') {\n            return locale\n          }\n\n          return locale.code\n        }),\n      })\n    }\n\n    fields.push({\n      name: 'latest',\n      type: 'checkbox',\n      admin: {\n        disabled: true,\n      },\n      index: true,\n    })\n\n    if (collection?.versions?.drafts?.autosave) {\n      fields.push({\n        name: 'autosave',\n        type: 'checkbox',\n        index: true,\n      })\n    }\n  }\n\n  return fields as true extends T ? FlattenedField[] : Field[]\n}\n"],"names":["versionSnapshotField","buildVersionCollectionFields","config","collection","flatten","fields","name","type","index","relationTo","slug","filter","field","flattenedFields","each","admin","disabled","versions","drafts","localization","push","disableBulkEdit","options","locales","map","locale","code","autosave"],"mappings":";;;;AAIA,SAASA,oBAAoB,QAAQ,kBAAiB;;AAE/C,MAAMC,+BAA+B,CAC1CC,QACAC,YACAC;IAEA,MAAMC,SAA2B;QAC/B;YACEC,MAAM;YACNC,MAAM;YACNC,OAAO;YACPC,YAAYN,WAAWO,IAAI;QAC7B;QACA;YACEJ,MAAM;YACNC,MAAM;YACNF,QAAQF,WAAWE,MAAM,CAACM,MAAM,CAAC,CAACC,QAAU,CAAE,CAAA,UAAUA,KAAI,KAAMA,MAAMN,IAAI,KAAK;YACjF,GAAIF,WAAW;gBACbS,iBAAiBV,WAAWU,eAAe,CAACF,MAAM,CAAC,CAACG,OAASA,KAAKR,IAAI,KAAK;YAC7E,CAAC;QACH;QACA;YACEA,MAAM;YACNC,MAAM;YACNQ,OAAO;gBACLC,UAAU;YACZ;YACAR,OAAO;QACT;QACA;YACEF,MAAM;YACNC,MAAM;YACNQ,OAAO;gBACLC,UAAU;YACZ;YACAR,OAAO;QACT;KACD;IAED,IAAIL,YAAYc,UAAUC,QAAQ;QAChC,IAAIhB,OAAOiB,YAAY,EAAE;YACvBd,OAAOe,IAAI,CAACpB,yRAAAA;YAEZK,OAAOe,IAAI,CAAC;gBACVd,MAAM;gBACNC,MAAM;gBACNQ,OAAO;oBACLM,iBAAiB;oBACjBL,UAAU;gBACZ;gBACAR,OAAO;gBACPc,SAASpB,OAAOiB,YAAY,CAACI,OAAO,CAACC,GAAG,CAAC,CAACC;oBACxC,IAAI,OAAOA,WAAW,UAAU;wBAC9B,OAAOA;oBACT;oBAEA,OAAOA,OAAOC,IAAI;gBACpB;YACF;QACF;QAEArB,OAAOe,IAAI,CAAC;YACVd,MAAM;YACNC,MAAM;YACNQ,OAAO;gBACLC,UAAU;YACZ;YACAR,OAAO;QACT;QAEA,IAAIL,YAAYc,UAAUC,QAAQS,UAAU;YAC1CtB,OAAOe,IAAI,CAAC;gBACVd,MAAM;gBACNC,MAAM;gBACNC,OAAO;YACT;QACF;IACF;IAEA,OAAOH;AACT,EAAC"}},
    {"offset": {"line": 2348, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/versions/drafts/getQueryDraftsSort.ts"],"sourcesContent":["import type { SanitizedCollectionConfig } from '../../collections/config/types.js'\nimport type { Sort } from '../../types/index.js'\n\n/**\n * Takes the incoming sort argument and prefixes it with `versions.` and preserves any `-` prefixes for descending order\n * @param sort\n */\nexport const getQueryDraftsSort = ({\n  collectionConfig,\n  sort,\n}: {\n  collectionConfig: SanitizedCollectionConfig\n  sort?: Sort\n}): Sort => {\n  if (!sort) {\n    if (collectionConfig.defaultSort) {\n      sort = collectionConfig.defaultSort\n    } else {\n      sort = '-createdAt'\n    }\n  }\n\n  if (typeof sort === 'string') {\n    sort = [sort]\n  }\n\n  return sort.map((field: string) => {\n    let orderBy: string\n    let direction = ''\n    if (field[0] === '-') {\n      orderBy = field.substring(1)\n      direction = '-'\n    } else {\n      orderBy = field\n    }\n\n    if (orderBy === 'id') {\n      return `${direction}parent`\n    }\n\n    return `${direction}version.${orderBy}`\n  })\n}\n"],"names":["getQueryDraftsSort","collectionConfig","sort","defaultSort","map","field","orderBy","direction","substring"],"mappings":"AAGA;;;CAGC,GACD;;;;AAAO,MAAMA,qBAAqB,CAAC,EACjCC,gBAAgB,EAChBC,IAAI,EAIL;IACC,IAAI,CAACA,MAAM;QACT,IAAID,iBAAiBE,WAAW,EAAE;YAChCD,OAAOD,iBAAiBE,WAAW;QACrC,OAAO;YACLD,OAAO;QACT;IACF;IAEA,IAAI,OAAOA,SAAS,UAAU;QAC5BA,OAAO;YAACA;SAAK;IACf;IAEA,OAAOA,KAAKE,GAAG,CAAC,CAACC;QACf,IAAIC;QACJ,IAAIC,YAAY;QAChB,IAAIF,KAAK,CAAC,EAAE,KAAK,KAAK;YACpBC,UAAUD,MAAMG,SAAS,CAAC;YAC1BD,YAAY;QACd,OAAO;YACLD,UAAUD;QACZ;QAEA,IAAIC,YAAY,MAAM;YACpB,OAAO,GAAGC,UAAU,MAAM,CAAC;QAC7B;QAEA,OAAO,GAAGA,UAAU,QAAQ,EAAED,SAAS;IACzC;AACF,EAAC"}},
    {"offset": {"line": 2387, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/versions/drafts/replaceWithDraftIfAvailable.ts"],"sourcesContent":["// @ts-strict-ignore\nimport type { SanitizedCollectionConfig, TypeWithID } from '../../collections/config/types.js'\nimport type { AccessResult } from '../../config/types.js'\nimport type { FindGlobalVersionsArgs, FindVersionsArgs } from '../../database/types.js'\nimport type { SanitizedGlobalConfig } from '../../globals/config/types.js'\nimport type { PayloadRequest, SelectType, Where } from '../../types/index.js'\n\nimport { hasWhereAccessResult } from '../../auth/index.js'\nimport { combineQueries } from '../../database/combineQueries.js'\nimport { docHasTimestamps } from '../../types/index.js'\nimport { sanitizeInternalFields } from '../../utilities/sanitizeInternalFields.js'\nimport { appendVersionToQueryKey } from './appendVersionToQueryKey.js'\nimport { getQueryDraftsSelect } from './getQueryDraftsSelect.js'\n\ntype Arguments<T> = {\n  accessResult: AccessResult\n  doc: T\n  entity: SanitizedCollectionConfig | SanitizedGlobalConfig\n  entityType: 'collection' | 'global'\n  overrideAccess: boolean\n  req: PayloadRequest\n  select?: SelectType\n}\n\nexport const replaceWithDraftIfAvailable = async <T extends TypeWithID>({\n  accessResult,\n  doc,\n  entity,\n  entityType,\n  req,\n  select,\n}: Arguments<T>): Promise<T> => {\n  const { locale } = req\n\n  const queryToBuild: Where = {\n    and: [\n      {\n        'version._status': {\n          equals: 'draft',\n        },\n      },\n    ],\n  }\n\n  if (entityType === 'collection') {\n    queryToBuild.and!.push({\n      parent: {\n        equals: doc.id,\n      },\n    })\n  }\n\n  if (docHasTimestamps(doc)) {\n    queryToBuild.and!.push({\n      or: [\n        {\n          updatedAt: {\n            greater_than: doc.updatedAt,\n          },\n        },\n        {\n          latest: {\n            equals: true,\n          },\n        },\n      ],\n    })\n  }\n\n  let versionAccessResult: undefined | Where\n\n  if (hasWhereAccessResult(accessResult)) {\n    versionAccessResult = appendVersionToQueryKey(accessResult)\n  }\n\n  const findVersionsArgs: FindGlobalVersionsArgs & FindVersionsArgs = {\n    collection: entity.slug,\n    global: entity.slug,\n    limit: 1,\n    locale: locale!,\n    pagination: false,\n    req,\n    select: getQueryDraftsSelect({ select }),\n    sort: '-updatedAt',\n    where: combineQueries(queryToBuild, versionAccessResult!),\n  }\n\n  let versionDocs\n  if (entityType === 'global') {\n    versionDocs = (await req.payload.db.findGlobalVersions<T>(findVersionsArgs)).docs\n  } else {\n    versionDocs = (await req.payload.db.findVersions<T>(findVersionsArgs)).docs\n  }\n\n  let draft = versionDocs[0]\n\n  if (!draft) {\n    return doc\n  }\n\n  draft = sanitizeInternalFields(draft)\n\n  // Patch globalType onto version doc\n  if (entityType === 'global' && 'globalType' in doc) {\n    // @ts-expect-error - vestiges of when tsconfig was not strict. Feel free to improve\n    draft.version.globalType = doc.globalType\n  }\n\n  // handle when .version wasn't selected due to projection\n  if (!draft.version) {\n    draft.version = {} as T\n  }\n\n  // Disregard all other draft content at this point,\n  // Only interested in the version itself.\n  // Operations will handle firing hooks, etc.\n\n  draft.version.id = doc.id\n\n  return draft.version\n}\n"],"names":["hasWhereAccessResult","combineQueries","docHasTimestamps","sanitizeInternalFields","appendVersionToQueryKey","getQueryDraftsSelect","replaceWithDraftIfAvailable","accessResult","doc","entity","entityType","req","select","locale","queryToBuild","and","equals","push","parent","id","or","updatedAt","greater_than","latest","versionAccessResult","findVersionsArgs","collection","slug","global","limit","pagination","sort","where","versionDocs","payload","db","findGlobalVersions","docs","findVersions","draft","version","globalType"],"mappings":";;;;AAAA,oBAAoB;AAOpB,SAASA,oBAAoB,QAAQ,sBAAqB;AAC1D,SAASC,cAAc,QAAQ,mCAAkC;AACjE,SAASC,gBAAgB,QAAQ,uBAAsB;AACvD,SAASC,sBAAsB,QAAQ,4CAA2C;AAClF,SAASC,uBAAuB,QAAQ,+BAA8B;AACtE,SAASC,oBAAoB,QAAQ,4BAA2B;;;;;;;AAYzD,MAAMC,8BAA8B,OAA6B,EACtEC,YAAY,EACZC,GAAG,EACHC,MAAM,EACNC,UAAU,EACVC,GAAG,EACHC,MAAM,EACO;IACb,MAAM,EAAEC,MAAM,EAAE,GAAGF;IAEnB,MAAMG,eAAsB;QAC1BC,KAAK;YACH;gBACE,mBAAmB;oBACjBC,QAAQ;gBACV;YACF;SACD;IACH;IAEA,IAAIN,eAAe,cAAc;QAC/BI,aAAaC,GAAG,CAAEE,IAAI,CAAC;YACrBC,QAAQ;gBACNF,QAAQR,IAAIW,EAAE;YAChB;QACF;IACF;IAEA,QAAIjB,6QAAAA,EAAiBM,MAAM;QACzBM,aAAaC,GAAG,CAAEE,IAAI,CAAC;YACrBG,IAAI;gBACF;oBACEC,WAAW;wBACTC,cAAcd,IAAIa,SAAS;oBAC7B;gBACF;gBACA;oBACEE,QAAQ;wBACNP,QAAQ;oBACV;gBACF;aACD;QACH;IACF;IAEA,IAAIQ;IAEJ,QAAIxB,gRAAAA,EAAqBO,eAAe;QACtCiB,0BAAsBpB,mTAAAA,EAAwBG;IAChD;IAEA,MAAMkB,mBAA8D;QAClEC,YAAYjB,OAAOkB,IAAI;QACvBC,QAAQnB,OAAOkB,IAAI;QACnBE,OAAO;QACPhB,QAAQA;QACRiB,YAAY;QACZnB;QACAC,YAAQP,6SAAAA,EAAqB;YAAEO;QAAO;QACtCmB,MAAM;QACNC,WAAO/B,uRAAAA,EAAea,cAAcU;IACtC;IAEA,IAAIS;IACJ,IAAIvB,eAAe,UAAU;QAC3BuB,cAAe,CAAA,MAAMtB,IAAIuB,OAAO,CAACC,EAAE,CAACC,kBAAkB,CAAIX,iBAAgB,EAAGY,IAAI;IACnF,OAAO;QACLJ,cAAe,CAAA,MAAMtB,IAAIuB,OAAO,CAACC,EAAE,CAACG,YAAY,CAAIb,iBAAgB,EAAGY,IAAI;IAC7E;IAEA,IAAIE,QAAQN,WAAW,CAAC,EAAE;IAE1B,IAAI,CAACM,OAAO;QACV,OAAO/B;IACT;IAEA+B,YAAQpC,wSAAAA,EAAuBoC;IAE/B,oCAAoC;IACpC,IAAI7B,eAAe,YAAY,gBAAgBF,KAAK;QAClD,oFAAoF;QACpF+B,MAAMC,OAAO,CAACC,UAAU,GAAGjC,IAAIiC,UAAU;IAC3C;IAEA,yDAAyD;IACzD,IAAI,CAACF,MAAMC,OAAO,EAAE;QAClBD,MAAMC,OAAO,GAAG,CAAC;IACnB;IAEA,mDAAmD;IACnD,yCAAyC;IACzC,4CAA4C;IAE5CD,MAAMC,OAAO,CAACrB,EAAE,GAAGX,IAAIW,EAAE;IAEzB,OAAOoB,MAAMC,OAAO;AACtB,EAAC"}},
    {"offset": {"line": 2485, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/versions/buildGlobalFields.ts"],"sourcesContent":["import type { SanitizedConfig } from '../config/types.js'\nimport type { Field, FlattenedField } from '../fields/config/types.js'\nimport type { SanitizedGlobalConfig } from '../globals/config/types.js'\n\nimport { versionSnapshotField } from './baseFields.js'\n\nexport const buildVersionGlobalFields = <T extends boolean = false>(\n  config: SanitizedConfig,\n  global: SanitizedGlobalConfig,\n  flatten?: T,\n): true extends T ? FlattenedField[] : Field[] => {\n  const fields: FlattenedField[] = [\n    {\n      name: 'version',\n      type: 'group',\n      fields: global.fields,\n      ...(flatten && {\n        flattenedFields: global.flattenedFields,\n      })!,\n    },\n    {\n      name: 'createdAt',\n      type: 'date',\n      admin: {\n        disabled: true,\n      },\n      index: true,\n    },\n    {\n      name: 'updatedAt',\n      type: 'date',\n      admin: {\n        disabled: true,\n      },\n      index: true,\n    },\n  ]\n\n  if (global?.versions?.drafts) {\n    if (config.localization) {\n      fields.push(versionSnapshotField)\n\n      fields.push({\n        name: 'publishedLocale',\n        type: 'select',\n        admin: {\n          disableBulkEdit: true,\n          disabled: true,\n        },\n        index: true,\n        options: config.localization.locales.map((locale) => {\n          if (typeof locale === 'string') {\n            return locale\n          }\n\n          return locale.code\n        }),\n      })\n    }\n\n    fields.push({\n      name: 'latest',\n      type: 'checkbox',\n      admin: {\n        disabled: true,\n      },\n      index: true,\n    })\n\n    if (global?.versions?.drafts?.autosave) {\n      fields.push({\n        name: 'autosave',\n        type: 'checkbox',\n        index: true,\n      })\n    }\n  }\n\n  return fields as true extends T ? FlattenedField[] : Field[]\n}\n"],"names":["versionSnapshotField","buildVersionGlobalFields","config","global","flatten","fields","name","type","flattenedFields","admin","disabled","index","versions","drafts","localization","push","disableBulkEdit","options","locales","map","locale","code","autosave"],"mappings":";;;;AAIA,SAASA,oBAAoB,QAAQ,kBAAiB;;AAE/C,MAAMC,2BAA2B,CACtCC,QACAC,QACAC;IAEA,MAAMC,SAA2B;QAC/B;YACEC,MAAM;YACNC,MAAM;YACNF,QAAQF,OAAOE,MAAM;YACrB,GAAID,WAAW;gBACbI,iBAAiBL,OAAOK,eAAe;YACzC,CAAC;QACH;QACA;YACEF,MAAM;YACNC,MAAM;YACNE,OAAO;gBACLC,UAAU;YACZ;YACAC,OAAO;QACT;QACA;YACEL,MAAM;YACNC,MAAM;YACNE,OAAO;gBACLC,UAAU;YACZ;YACAC,OAAO;QACT;KACD;IAED,IAAIR,QAAQS,UAAUC,QAAQ;QAC5B,IAAIX,OAAOY,YAAY,EAAE;YACvBT,OAAOU,IAAI,CAACf,yRAAAA;YAEZK,OAAOU,IAAI,CAAC;gBACVT,MAAM;gBACNC,MAAM;gBACNE,OAAO;oBACLO,iBAAiB;oBACjBN,UAAU;gBACZ;gBACAC,OAAO;gBACPM,SAASf,OAAOY,YAAY,CAACI,OAAO,CAACC,GAAG,CAAC,CAACC;oBACxC,IAAI,OAAOA,WAAW,UAAU;wBAC9B,OAAOA;oBACT;oBAEA,OAAOA,OAAOC,IAAI;gBACpB;YACF;QACF;QAEAhB,OAAOU,IAAI,CAAC;YACVT,MAAM;YACNC,MAAM;YACNE,OAAO;gBACLC,UAAU;YACZ;YACAC,OAAO;QACT;QAEA,IAAIR,QAAQS,UAAUC,QAAQS,UAAU;YACtCjB,OAAOU,IAAI,CAAC;gBACVT,MAAM;gBACNC,MAAM;gBACNI,OAAO;YACT;QACF;IACF;IAEA,OAAON;AACT,EAAC"}},
    {"offset": {"line": 2559, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/versions/getLatestGlobalVersion.ts"],"sourcesContent":["import type { SanitizedGlobalConfig } from '../globals/config/types.js'\nimport type { Document, Payload, PayloadRequest, Where } from '../types/index.js'\nimport type { TypeWithVersion } from './types.js'\n\ntype Args = {\n  config: SanitizedGlobalConfig\n  locale?: string\n  payload: Payload\n  published?: boolean\n  req?: PayloadRequest\n  slug: string\n  where: Where\n}\n\nexport const getLatestGlobalVersion = async ({\n  slug,\n  config,\n  locale,\n  payload,\n  published,\n  req,\n  where,\n}: Args): Promise<{ global: Document; globalExists: boolean }> => {\n  let latestVersion: TypeWithVersion<Document> | undefined\n\n  const whereQuery = published\n    ? { 'version._status': { equals: 'published' } }\n    : { latest: { equals: true } }\n\n  if (config.versions?.drafts) {\n    latestVersion = (\n      await payload.db.findGlobalVersions({\n        global: slug,\n        limit: 1,\n        locale,\n        pagination: false,\n        req,\n        where: whereQuery as unknown as Where,\n      })\n    ).docs[0]\n  }\n\n  const global = await payload.db.findGlobal({\n    slug,\n    locale,\n    req,\n    where,\n  })\n  const globalExists = Boolean(global)\n\n  if (!latestVersion) {\n    return {\n      global,\n      globalExists,\n    }\n  }\n\n  if (!latestVersion.version.createdAt) {\n    latestVersion.version.createdAt = latestVersion.createdAt\n  }\n\n  if (!latestVersion.version.updatedAt) {\n    latestVersion.version.updatedAt = latestVersion.updatedAt\n  }\n\n  return {\n    global: latestVersion.version,\n    globalExists,\n  }\n}\n"],"names":["getLatestGlobalVersion","slug","config","locale","payload","published","req","where","latestVersion","whereQuery","equals","latest","versions","drafts","db","findGlobalVersions","global","limit","pagination","docs","findGlobal","globalExists","Boolean","version","createdAt","updatedAt"],"mappings":";;;;AAcO,MAAMA,yBAAyB,OAAO,EAC3CC,IAAI,EACJC,MAAM,EACNC,MAAM,EACNC,OAAO,EACPC,SAAS,EACTC,GAAG,EACHC,KAAK,EACA;IACL,IAAIC;IAEJ,MAAMC,aAAaJ,YACf;QAAE,mBAAmB;YAAEK,QAAQ;QAAY;IAAE,IAC7C;QAAEC,QAAQ;YAAED,QAAQ;QAAK;IAAE;IAE/B,IAAIR,OAAOU,QAAQ,EAAEC,QAAQ;QAC3BL,gBACE,CAAA,MAAMJ,QAAQU,EAAE,CAACC,kBAAkB,CAAC;YAClCC,QAAQf;YACRgB,OAAO;YACPd;YACAe,YAAY;YACZZ;YACAC,OAAOE;QACT,EAAC,EACDU,IAAI,CAAC,EAAE;IACX;IAEA,MAAMH,SAAS,MAAMZ,QAAQU,EAAE,CAACM,UAAU,CAAC;QACzCnB;QACAE;QACAG;QACAC;IACF;IACA,MAAMc,eAAeC,QAAQN;IAE7B,IAAI,CAACR,eAAe;QAClB,OAAO;YACLQ;YACAK;QACF;IACF;IAEA,IAAI,CAACb,cAAce,OAAO,CAACC,SAAS,EAAE;QACpChB,cAAce,OAAO,CAACC,SAAS,GAAGhB,cAAcgB,SAAS;IAC3D;IAEA,IAAI,CAAChB,cAAce,OAAO,CAACE,SAAS,EAAE;QACpCjB,cAAce,OAAO,CAACE,SAAS,GAAGjB,cAAciB,SAAS;IAC3D;IAEA,OAAO;QACLT,QAAQR,cAAce,OAAO;QAC7BF;IACF;AACF,EAAC"}},
    {"offset": {"line": 2612, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/versions/schedule/job.ts"],"sourcesContent":["import type { Field } from '../../fields/config/types.js'\nimport type { TypedUser } from '../../index.js'\nimport type { TaskConfig } from '../../queues/config/types/taskTypes.js'\nimport type { SchedulePublishTaskInput } from './types.js'\n\ntype Args = {\n  adminUserSlug: string\n  collections: string[]\n  globals: string[]\n}\n\nexport const getSchedulePublishTask = ({\n  adminUserSlug,\n  collections,\n  globals,\n}: Args): TaskConfig<{ input: SchedulePublishTaskInput; output: object }> => {\n  return {\n    slug: 'schedulePublish',\n    handler: async ({ input, req }) => {\n      const _status = input?.type === 'publish' || !input?.type ? 'published' : 'draft'\n\n      const userID = input.user\n\n      let user: null | TypedUser = null\n\n      if (userID) {\n        user = (await req.payload.findByID({\n          id: userID,\n          collection: adminUserSlug,\n          depth: 0,\n        })) as TypedUser\n\n        user.collection = adminUserSlug\n      }\n\n      let publishSpecificLocale: string\n\n      if (input?.type === 'publish' && input.locale && req.payload.config.localization) {\n        const matchedLocale = req.payload.config.localization.locales.find(\n          ({ code }) => code === input.locale,\n        )\n\n        if (matchedLocale) {\n          publishSpecificLocale = input.locale\n        }\n      }\n\n      if (input.doc) {\n        await req.payload.update({\n          id: input.doc.value,\n          collection: input.doc.relationTo,\n          data: {\n            _status,\n          },\n          depth: 0,\n          overrideAccess: user === null,\n          publishSpecificLocale: publishSpecificLocale!,\n          user,\n        })\n      }\n\n      if (input.global) {\n        await req.payload.updateGlobal({\n          slug: input.global,\n          data: {\n            _status,\n          },\n          depth: 0,\n          overrideAccess: user === null,\n          publishSpecificLocale: publishSpecificLocale!,\n          user,\n        })\n      }\n\n      return {\n        output: {},\n      }\n    },\n    inputSchema: [\n      {\n        name: 'type',\n        type: 'radio',\n        defaultValue: 'publish',\n        options: ['publish', 'unpublish'],\n      },\n      {\n        name: 'locale',\n        type: 'text',\n      },\n      ...(collections.length > 0\n        ? [\n            {\n              name: 'doc',\n              type: 'relationship',\n              relationTo: collections,\n            } satisfies Field,\n          ]\n        : []),\n      {\n        name: 'global',\n        type: 'select',\n        options: globals,\n      },\n      {\n        name: 'user',\n        type: 'relationship',\n        relationTo: adminUserSlug,\n      },\n    ],\n  }\n}\n"],"names":["getSchedulePublishTask","adminUserSlug","collections","globals","slug","handler","input","req","_status","type","userID","user","payload","findByID","id","collection","depth","publishSpecificLocale","locale","config","localization","matchedLocale","locales","find","code","doc","update","value","relationTo","data","overrideAccess","global","updateGlobal","output","inputSchema","name","defaultValue","options","length"],"mappings":";;;;AAWO,MAAMA,yBAAyB,CAAC,EACrCC,aAAa,EACbC,WAAW,EACXC,OAAO,EACF;IACL,OAAO;QACLC,MAAM;QACNC,SAAS,OAAO,EAAEC,KAAK,EAAEC,GAAG,EAAE;YAC5B,MAAMC,UAAUF,OAAOG,SAAS,aAAa,CAACH,OAAOG,OAAO,cAAc;YAE1E,MAAMC,SAASJ,MAAMK,IAAI;YAEzB,IAAIA,OAAyB;YAE7B,IAAID,QAAQ;gBACVC,OAAQ,MAAMJ,IAAIK,OAAO,CAACC,QAAQ,CAAC;oBACjCC,IAAIJ;oBACJK,YAAYd;oBACZe,OAAO;gBACT;gBAEAL,KAAKI,UAAU,GAAGd;YACpB;YAEA,IAAIgB;YAEJ,IAAIX,OAAOG,SAAS,aAAaH,MAAMY,MAAM,IAAIX,IAAIK,OAAO,CAACO,MAAM,CAACC,YAAY,EAAE;gBAChF,MAAMC,gBAAgBd,IAAIK,OAAO,CAACO,MAAM,CAACC,YAAY,CAACE,OAAO,CAACC,IAAI,CAChE,CAAC,EAAEC,IAAI,EAAE,GAAKA,SAASlB,MAAMY,MAAM;gBAGrC,IAAIG,eAAe;oBACjBJ,wBAAwBX,MAAMY,MAAM;gBACtC;YACF;YAEA,IAAIZ,MAAMmB,GAAG,EAAE;gBACb,MAAMlB,IAAIK,OAAO,CAACc,MAAM,CAAC;oBACvBZ,IAAIR,MAAMmB,GAAG,CAACE,KAAK;oBACnBZ,YAAYT,MAAMmB,GAAG,CAACG,UAAU;oBAChCC,MAAM;wBACJrB;oBACF;oBACAQ,OAAO;oBACPc,gBAAgBnB,SAAS;oBACzBM,uBAAuBA;oBACvBN;gBACF;YACF;YAEA,IAAIL,MAAMyB,MAAM,EAAE;gBAChB,MAAMxB,IAAIK,OAAO,CAACoB,YAAY,CAAC;oBAC7B5B,MAAME,MAAMyB,MAAM;oBAClBF,MAAM;wBACJrB;oBACF;oBACAQ,OAAO;oBACPc,gBAAgBnB,SAAS;oBACzBM,uBAAuBA;oBACvBN;gBACF;YACF;YAEA,OAAO;gBACLsB,QAAQ,CAAC;YACX;QACF;QACAC,aAAa;YACX;gBACEC,MAAM;gBACN1B,MAAM;gBACN2B,cAAc;gBACdC,SAAS;oBAAC;oBAAW;iBAAY;YACnC;YACA;gBACEF,MAAM;gBACN1B,MAAM;YACR;eACIP,YAAYoC,MAAM,GAAG,IACrB;gBACE;oBACEH,MAAM;oBACN1B,MAAM;oBACNmB,YAAY1B;gBACd;aACD,GACD,EAAE;YACN;gBACEiC,MAAM;gBACN1B,MAAM;gBACN4B,SAASlC;YACX;YACA;gBACEgC,MAAM;gBACN1B,MAAM;gBACNmB,YAAY3B;YACd;SACD;IACH;AACF,EAAC"}},
    {"offset": {"line": 2705, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/versions/payloadPackageList.ts"],"sourcesContent":["export const PAYLOAD_PACKAGE_LIST = [\n  'payload',\n  '@payloadcms/bundler-vite',\n  '@payloadcms/bundler-webpack',\n  '@payloadcms/db-d1-sqlite',\n  '@payloadcms/db-mongodb',\n  '@payloadcms/db-postgres',\n  '@payloadcms/db-sqlite',\n  '@payloadcms/db-vercel-postgres',\n  '@payloadcms/drizzle',\n  '@payloadcms/ecommerce',\n  '@payloadcms/email-nodemailer',\n  '@payloadcms/email-resend',\n  '@payloadcms/graphql',\n  '@payloadcms/live-preview',\n  '@payloadcms/live-preview-react',\n  '@payloadcms/live-preview-vue',\n  '@payloadcms/kv-redis',\n  '@payloadcms/next/utilities',\n  '@payloadcms/payload-cloud',\n  '@payloadcms/plugin-cloud-storage',\n  '@payloadcms/plugin-form-builder',\n  '@payloadcms/plugin-import-export',\n  '@payloadcms/plugin-mcp',\n  '@payloadcms/plugin-multi-tenant',\n  '@payloadcms/plugin-nested-docs',\n  '@payloadcms/plugin-redirects',\n  '@payloadcms/plugin-search',\n  '@payloadcms/plugin-seo',\n  '@payloadcms/plugin-stripe',\n  '@payloadcms/plugin-zapier',\n  '@payloadcms/richtext-lexical',\n  '@payloadcms/richtext-slate',\n  '@payloadcms/sdk',\n  '@payloadcms/storage-azure',\n  '@payloadcms/storage-gcs',\n  '@payloadcms/storage-r2',\n  '@payloadcms/storage-s3',\n  '@payloadcms/storage-uploadthing',\n  '@payloadcms/storage-vercel-blob',\n  '@payloadcms/translations',\n  '@payloadcms/ui/shared',\n]\n"],"names":["PAYLOAD_PACKAGE_LIST"],"mappings":";;;;AAAO,MAAMA,uBAAuB;IAClC;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD,CAAA"}},
    {"offset": {"line": 2756, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/types/constants.ts"],"sourcesContent":["export const validOperators = [\n  'equals',\n  'contains',\n  'not_equals',\n  'in',\n  'all',\n  'not_in',\n  'exists',\n  'greater_than',\n  'greater_than_equal',\n  'less_than',\n  'less_than_equal',\n  'like',\n  'not_like',\n  'within',\n  'intersects',\n  'near',\n] as const\n\nexport type Operator = (typeof validOperators)[number]\n\nexport const validOperatorSet = new Set<Operator>(validOperators)\n"],"names":["validOperators","validOperatorSet","Set"],"mappings":";;;;;;AAAO,MAAMA,iBAAiB;IAC5B;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD,CAAS;AAIH,MAAMC,mBAAmB,IAAIC,IAAcF,gBAAe"}},
    {"offset": {"line": 2785, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/types/index.ts"],"sourcesContent":["import type { I18n, TFunction } from '@payloadcms/translations'\nimport type DataLoader from 'dataloader'\nimport type { OptionalKeys, RequiredKeys } from 'ts-essentials'\nimport type { URL } from 'url'\n\nimport type {\n  DataFromCollectionSlug,\n  TypeWithID,\n  TypeWithTimestamps,\n} from '../collections/config/types.js'\nimport type payload from '../index.js'\nimport type {\n  CollectionSlug,\n  DataFromGlobalSlug,\n  GlobalSlug,\n  Payload,\n  RequestContext,\n  TypedCollectionJoins,\n  TypedCollectionSelect,\n  TypedLocale,\n  TypedUser,\n} from '../index.js'\nimport type { Operator } from './constants.js'\nexport type { Payload } from '../index.js'\n\nexport type CustomPayloadRequestProperties = {\n  context: RequestContext\n  /** The locale that should be used for a field when it is not translated to the requested locale */\n  fallbackLocale?: string | string[]\n  i18n: I18n\n  /**\n   * The requested locale if specified\n   * Only available for localized collections\n   *\n   * Suppressing warning below as it is a valid use case - won't be an issue if generated types exist\n   */\n  // eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents\n  locale?: 'all' | TypedLocale\n  /**\n   * The payload object\n   */\n  payload: typeof payload\n  /**\n   * The context in which the request is being made\n   */\n  payloadAPI: 'GraphQL' | 'local' | 'REST'\n  /** Optimized document loader */\n  payloadDataLoader: {\n    /**\n     * Wraps `payload.find` with a cache to deduplicate requests\n     * @experimental This is may be replaced by a more robust cache strategy in future versions\n     * By calling this method with the same arguments many times in one request, it will only be handled one time\n     * const result = await req.payloadDataLoader.find({\n     *  collection,\n     *  req,\n     *  where: findWhere,\n     * })\n     */\n    find: Payload['find']\n  } & DataLoader<string, TypeWithID>\n  /** Resized versions of the image that was uploaded during this request */\n  payloadUploadSizes?: Record<string, Buffer>\n  /** Query params on the request */\n  query: Record<string, unknown>\n  /** Any response headers that are required to be set when a response is sent */\n  responseHeaders?: Headers\n  /** The route parameters\n   * @example\n   * /:collection/:id -> /posts/123\n   * { collection: 'posts', id: '123' }\n   */\n  routeParams?: Record<string, unknown>\n  /** Translate function - duplicate of i18n.t */\n  t: TFunction\n  /**\n   * Identifier for the database transaction for interactions in a single, all-or-nothing operation.\n   * Can also be used to ensure consistency when multiple operations try to create a transaction concurrently on the same request.\n   */\n  transactionID?: number | Promise<number | string> | string\n  /**\n   * Used to ensure consistency when multiple operations try to create a transaction concurrently on the same request\n   * @deprecated This is not used anywhere, instead `transactionID` is used for the above. Will be removed in next major version.\n   */\n  transactionIDPromise?: Promise<void>\n  /** The signed-in user */\n  user: null | TypedUser\n} & Pick<\n  URL,\n  'hash' | 'host' | 'href' | 'origin' | 'pathname' | 'port' | 'protocol' | 'search' | 'searchParams'\n>\ntype PayloadRequestData = {\n  /**\n   * Data from the request body\n   *\n   * Within Payload operations, i.e. hooks, data will be there\n   * BUT in custom endpoints it will not be, you will need to\n   * use either:\n   *  1. `const data = await req.json()`\n   *\n   *  2. import { addDataAndFileToRequest } from 'payload'\n   *    `await addDataAndFileToRequest(req)`\n   * */\n  data?: JsonObject\n  /** The file on the request, same rules apply as the `data` property */\n  file?: {\n    /**\n     * Context of the file when it was uploaded via client side.\n     */\n    clientUploadContext?: unknown\n    data: Buffer\n    mimetype: string\n    name: string\n    size: number\n    tempFilePath?: string\n  }\n}\nexport interface PayloadRequest\n  extends CustomPayloadRequestProperties,\n    Partial<Request>,\n    PayloadRequestData {\n  headers: Request['headers']\n}\n\nexport type { Operator }\n\n// Makes it so things like passing new Date() will error\nexport type JsonValue = JsonArray | JsonObject | unknown //Date | JsonArray | JsonObject | boolean | null | number | string // TODO: Evaluate proper, strong type for this\n\nexport type JsonArray = Array<JsonValue>\n\nexport interface JsonObject {\n  [key: string]: any\n}\n\nexport type WhereField = {\n  // any json-serializable value\n  [key in Operator]?: JsonValue\n}\n\nexport type Where = {\n  [key: string]: Where[] | WhereField\n  // @ts-expect-error - vestiges of when tsconfig was not strict. Feel free to improve\n  and?: Where[]\n  // @ts-expect-error - vestiges of when tsconfig was not strict. Feel free to improve\n  or?: Where[]\n}\n\nexport type Sort = Array<string> | string\n\ntype SerializableValue = boolean | number | object | string\nexport type DefaultValue =\n  | ((args: {\n      locale?: TypedLocale\n      req: PayloadRequest\n      user: PayloadRequest['user']\n    }) => SerializableValue)\n  | SerializableValue\n\n/**\n * Applies pagination for join fields for including collection relationships\n */\nexport type JoinQuery<TSlug extends CollectionSlug = string> =\n  TypedCollectionJoins[TSlug] extends Record<string, string>\n    ?\n        | false\n        | Partial<{\n            [K in keyof TypedCollectionJoins[TSlug]]:\n              | {\n                  count?: boolean\n                  limit?: number\n                  page?: number\n                  sort?: string\n                  where?: Where\n                }\n              | false\n          }>\n    : never\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport type Document = any\n\nexport type Operation = 'create' | 'delete' | 'read' | 'update'\nexport type VersionOperations = 'readVersions'\nexport type AuthOperations = 'unlock'\nexport type AllOperations = AuthOperations | Operation | VersionOperations\n\nexport function docHasTimestamps(doc: any): doc is TypeWithTimestamps {\n  return doc?.createdAt && doc?.updatedAt\n}\n\nexport type IfAny<T, Y, N> = 0 extends 1 & T ? Y : N // This is a commonly used trick to detect 'any'\nexport type IsAny<T> = IfAny<T, true, false>\nexport type ReplaceAny<T, DefaultType> = IsAny<T> extends true ? DefaultType : T\n\nexport type SelectIncludeType = {\n  [k: string]: SelectIncludeType | true\n}\n\nexport type SelectExcludeType = {\n  [k: string]: false | SelectExcludeType\n}\n\nexport type SelectMode = 'exclude' | 'include'\n\nexport type SelectType = SelectExcludeType | SelectIncludeType\n\nexport type ApplyDisableErrors<T, DisableErrors = false> = false extends DisableErrors\n  ? T\n  : null | T\n\nexport type TransformDataWithSelect<\n  Data extends Record<string, any>,\n  Select extends SelectType,\n> = Select extends never\n  ? Data\n  : string extends keyof Select\n    ? Data\n    : // START Handle types when they aren't generated\n      // For example in any package in this repository outside of tests / plugins\n      // This stil gives us autocomplete when using include select mode, i.e select: {title :true} returns type {title: any, id: string | number}\n      string extends keyof Omit<Data, 'id'>\n      ? Select extends SelectIncludeType\n        ? {\n            [K in Data extends TypeWithID ? 'id' | keyof Select : keyof Select]: K extends 'id'\n              ? number | string\n              : unknown\n          }\n        : Data\n      : // END Handle types when they aren't generated\n        // Handle include mode\n        Select extends SelectIncludeType\n        ? {\n            [K in keyof Data as K extends keyof Select\n              ? Select[K] extends object | true\n                ? K\n                : never\n              : // select 'id' always\n                K extends 'id'\n                ? K\n                : never]: Data[K]\n          }\n        : // Handle exclude mode\n          {\n            [K in keyof Data as K extends keyof Select\n              ? Select[K] extends object | undefined\n                ? K\n                : never\n              : K]: Data[K]\n          }\n\nexport type TransformCollectionWithSelect<\n  TSlug extends CollectionSlug,\n  TSelect extends SelectType,\n> = TSelect extends SelectType\n  ? TransformDataWithSelect<DataFromCollectionSlug<TSlug>, TSelect>\n  : DataFromCollectionSlug<TSlug>\n\nexport type TransformGlobalWithSelect<\n  TSlug extends GlobalSlug,\n  TSelect extends SelectType,\n> = TSelect extends SelectType\n  ? TransformDataWithSelect<DataFromGlobalSlug<TSlug>, TSelect>\n  : DataFromGlobalSlug<TSlug>\n\nexport type PopulateType = Partial<TypedCollectionSelect>\n\nexport type ResolvedFilterOptions = { [collection: string]: Where }\n\nexport type PickPreserveOptional<T, K extends keyof T> = Partial<\n  Pick<T, Extract<K, OptionalKeys<T>>>\n> &\n  Pick<T, Extract<K, RequiredKeys<T>>>\n"],"names":["docHasTimestamps","doc","createdAt","updatedAt"],"mappings":";;;;AA0LO,SAASA,iBAAiBC,GAAQ;IACvC,OAAOA,KAAKC,aAAaD,KAAKE;AAChC"}},
    {"offset": {"line": 2796, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/duplicateDocument/index.ts"],"sourcesContent":["import type { SanitizedCollectionConfig } from '../collections/config/types.js'\nimport type { FindOneArgs } from '../database/types.js'\nimport type { JsonObject, PayloadRequest } from '../types/index.js'\n\nimport { executeAccess } from '../auth/executeAccess.js'\nimport { hasWhereAccessResult } from '../auth/types.js'\nimport { combineQueries } from '../database/combineQueries.js'\nimport { Forbidden } from '../errors/Forbidden.js'\nimport { NotFound } from '../errors/NotFound.js'\nimport { afterRead } from '../fields/hooks/afterRead/index.js'\nimport { beforeDuplicate } from '../fields/hooks/beforeDuplicate/index.js'\nimport { deepCopyObjectSimple } from '../utilities/deepCopyObject.js'\nimport { filterDataToSelectedLocales } from '../utilities/filterDataToSelectedLocales.js'\nimport { getLatestCollectionVersion } from '../versions/getLatestCollectionVersion.js'\n\ntype GetDuplicateDocumentArgs = {\n  collectionConfig: SanitizedCollectionConfig\n  draftArg?: boolean\n  id: number | string\n  isSavingDraft?: boolean\n  overrideAccess?: boolean\n  req: PayloadRequest\n  selectedLocales?: string[]\n}\nexport const getDuplicateDocumentData = async ({\n  id,\n  collectionConfig,\n  draftArg,\n  isSavingDraft,\n  overrideAccess,\n  req,\n  selectedLocales,\n}: GetDuplicateDocumentArgs): Promise<{\n  duplicatedFromDoc: JsonObject\n  duplicatedFromDocWithLocales: JsonObject\n}> => {\n  const { payload } = req\n  // /////////////////////////////////////\n  // Read Access\n  // /////////////////////////////////////\n\n  const accessResults = !overrideAccess\n    ? await executeAccess({ id, req }, collectionConfig.access.read)\n    : true\n  const hasWherePolicy = hasWhereAccessResult(accessResults)\n\n  // /////////////////////////////////////\n  // Retrieve document\n  // /////////////////////////////////////\n  const findOneArgs: FindOneArgs = {\n    collection: collectionConfig.slug,\n    locale: req.locale!,\n    req,\n    where: combineQueries({ id: { equals: id } }, accessResults),\n  }\n\n  let duplicatedFromDocWithLocales = await getLatestCollectionVersion({\n    id,\n    config: collectionConfig,\n    payload,\n    query: findOneArgs,\n    req,\n  })\n\n  if (selectedLocales && selectedLocales.length > 0 && duplicatedFromDocWithLocales) {\n    duplicatedFromDocWithLocales = filterDataToSelectedLocales({\n      configBlockReferences: payload.config.blocks,\n      docWithLocales: duplicatedFromDocWithLocales,\n      fields: collectionConfig.fields,\n      selectedLocales,\n    })\n  }\n\n  if (!duplicatedFromDocWithLocales && !hasWherePolicy) {\n    throw new NotFound(req.t)\n  }\n  if (!duplicatedFromDocWithLocales && hasWherePolicy) {\n    throw new Forbidden(req.t)\n  }\n\n  // remove the createdAt timestamp and rely on the db to set it\n  if ('createdAt' in duplicatedFromDocWithLocales) {\n    delete duplicatedFromDocWithLocales.createdAt\n  }\n  // remove the id and rely on the db to set it\n  if ('id' in duplicatedFromDocWithLocales) {\n    delete duplicatedFromDocWithLocales.id\n  }\n\n  duplicatedFromDocWithLocales = await beforeDuplicate({\n    id,\n    collection: collectionConfig,\n    context: req.context,\n    doc: duplicatedFromDocWithLocales,\n    overrideAccess: overrideAccess!,\n    req,\n  })\n\n  // for version enabled collections, override the current status with draft, unless draft is explicitly set to false\n  if (isSavingDraft) {\n    duplicatedFromDocWithLocales._status = 'draft'\n  }\n\n  const duplicatedFromDoc = await afterRead({\n    collection: collectionConfig,\n    context: req.context,\n    depth: 0,\n    doc: deepCopyObjectSimple(duplicatedFromDocWithLocales),\n    draft: draftArg!,\n    fallbackLocale: null,\n    global: null,\n    locale: req.locale!,\n    overrideAccess: true,\n    req,\n    showHiddenFields: true,\n  })\n\n  return { duplicatedFromDoc, duplicatedFromDocWithLocales }\n}\n"],"names":["executeAccess","hasWhereAccessResult","combineQueries","Forbidden","NotFound","afterRead","beforeDuplicate","deepCopyObjectSimple","filterDataToSelectedLocales","getLatestCollectionVersion","getDuplicateDocumentData","id","collectionConfig","draftArg","isSavingDraft","overrideAccess","req","selectedLocales","payload","accessResults","access","read","hasWherePolicy","findOneArgs","collection","slug","locale","where","equals","duplicatedFromDocWithLocales","config","query","length","configBlockReferences","blocks","docWithLocales","fields","t","createdAt","context","doc","_status","duplicatedFromDoc","depth","draft","fallbackLocale","global","showHiddenFields"],"mappings":";;;;AAIA,SAASA,aAAa,QAAQ,2BAA0B;AACxD,SAASC,oBAAoB,QAAQ,mBAAkB;AACvD,SAASC,cAAc,QAAQ,gCAA+B;AAC9D,SAASC,SAAS,QAAQ,yBAAwB;AAClD,SAASC,QAAQ,QAAQ,wBAAuB;AAChD,SAASC,SAAS,QAAQ,qCAAoC;AAC9D,SAASC,eAAe,QAAQ,2CAA0C;AAC1E,SAASC,oBAAoB,QAAQ,iCAAgC;AACrE,SAASC,2BAA2B,QAAQ,8CAA6C;AACzF,SAASC,0BAA0B,QAAQ,4CAA2C;;;;;;;;;;;AAW/E,MAAMC,2BAA2B,OAAO,EAC7CC,EAAE,EACFC,gBAAgB,EAChBC,QAAQ,EACRC,aAAa,EACbC,cAAc,EACdC,GAAG,EACHC,eAAe,EACU;IAIzB,MAAM,EAAEC,OAAO,EAAE,GAAGF;IACpB,wCAAwC;IACxC,cAAc;IACd,wCAAwC;IAExC,MAAMG,gBAAgB,CAACJ,iBACnB,UAAMf,iRAAAA,EAAc;QAAEW;QAAIK;IAAI,GAAGJ,iBAAiBQ,MAAM,CAACC,IAAI,IAC7D;IACJ,MAAMC,qBAAiBrB,gRAAAA,EAAqBkB;IAE5C,wCAAwC;IACxC,oBAAoB;IACpB,wCAAwC;IACxC,MAAMI,cAA2B;QAC/BC,YAAYZ,iBAAiBa,IAAI;QACjCC,QAAQV,IAAIU,MAAM;QAClBV;QACAW,WAAOzB,uRAAAA,EAAe;YAAES,IAAI;gBAAEiB,QAAQjB;YAAG;QAAE,GAAGQ;IAChD;IAEA,IAAIU,+BAA+B,UAAMpB,+SAAAA,EAA2B;QAClEE;QACAmB,QAAQlB;QACRM;QACAa,OAAOR;QACPP;IACF;IAEA,IAAIC,mBAAmBA,gBAAgBe,MAAM,GAAG,KAAKH,8BAA8B;QACjFA,mCAA+BrB,kTAAAA,EAA4B;YACzDyB,uBAAuBf,QAAQY,MAAM,CAACI,MAAM;YAC5CC,gBAAgBN;YAChBO,QAAQxB,iBAAiBwB,MAAM;YAC/BnB;QACF;IACF;IAEA,IAAI,CAACY,gCAAgC,CAACP,gBAAgB;QACpD,MAAM,IAAIlB,yQAAAA,CAASY,IAAIqB,CAAC;IAC1B;IACA,IAAI,CAACR,gCAAgCP,gBAAgB;QACnD,MAAM,IAAInB,2QAAAA,CAAUa,IAAIqB,CAAC;IAC3B;IAEA,8DAA8D;IAC9D,IAAI,eAAeR,8BAA8B;QAC/C,OAAOA,6BAA6BS,SAAS;IAC/C;IACA,6CAA6C;IAC7C,IAAI,QAAQT,8BAA8B;QACxC,OAAOA,6BAA6BlB,EAAE;IACxC;IAEAkB,+BAA+B,UAAMvB,ySAAAA,EAAgB;QACnDK;QACAa,YAAYZ;QACZ2B,SAASvB,IAAIuB,OAAO;QACpBC,KAAKX;QACLd,gBAAgBA;QAChBC;IACF;IAEA,mHAAmH;IACnH,IAAIF,eAAe;QACjBe,6BAA6BY,OAAO,GAAG;IACzC;IAEA,MAAMC,oBAAoB,UAAMrC,6RAAAA,EAAU;QACxCmB,YAAYZ;QACZ2B,SAASvB,IAAIuB,OAAO;QACpBI,OAAO;QACPH,SAAKjC,8RAAAA,EAAqBsB;QAC1Be,OAAO/B;QACPgC,gBAAgB;QAChBC,QAAQ;QACRpB,QAAQV,IAAIU,MAAM;QAClBX,gBAAgB;QAChBC;QACA+B,kBAAkB;IACpB;IAEA,OAAO;QAAEL;QAAmBb;IAA6B;AAC3D,EAAC"}},
    {"offset": {"line": 2906, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/preferences/operations/delete.ts"],"sourcesContent":["import type { Document, Where } from '../../types/index.js'\nimport type { PreferenceRequest } from '../types.js'\n\nimport { NotFound } from '../../errors/NotFound.js'\nimport { UnauthorizedError } from '../../errors/UnauthorizedError.js'\nimport { preferencesCollectionSlug } from '../config.js'\n\nexport async function deleteOperation(args: PreferenceRequest): Promise<Document> {\n  const {\n    key,\n    req: { payload },\n    req,\n    user,\n  } = args\n\n  if (!user) {\n    throw new UnauthorizedError(req.t)\n  }\n\n  const where: Where = {\n    and: [\n      { key: { equals: key } },\n      { 'user.value': { equals: user.id } },\n      { 'user.relationTo': { equals: user.collection } },\n    ],\n  }\n\n  const result = await payload.db.deleteOne({\n    collection: preferencesCollectionSlug,\n    req,\n    where,\n  })\n\n  if (result) {\n    return result\n  }\n  throw new NotFound(req.t)\n}\n"],"names":["NotFound","UnauthorizedError","preferencesCollectionSlug","deleteOperation","args","key","req","payload","user","t","where","and","equals","id","collection","result","db","deleteOne"],"mappings":";;;;AAGA,SAASA,QAAQ,QAAQ,2BAA0B;AACnD,SAASC,iBAAiB,QAAQ,oCAAmC;AACrE,SAASC,yBAAyB,QAAQ,eAAc;;;;AAEjD,eAAeC,gBAAgBC,IAAuB;IAC3D,MAAM,EACJC,GAAG,EACHC,KAAK,EAAEC,OAAO,EAAE,EAChBD,GAAG,EACHE,IAAI,EACL,GAAGJ;IAEJ,IAAI,CAACI,MAAM;QACT,MAAM,IAAIP,2RAAAA,CAAkBK,IAAIG,CAAC;IACnC;IAEA,MAAMC,QAAe;QACnBC,KAAK;YACH;gBAAEN,KAAK;oBAAEO,QAAQP;gBAAI;YAAE;YACvB;gBAAE,cAAc;oBAAEO,QAAQJ,KAAKK,EAAE;gBAAC;YAAE;YACpC;gBAAE,mBAAmB;oBAAED,QAAQJ,KAAKM,UAAU;gBAAC;YAAE;SAClD;IACH;IAEA,MAAMC,SAAS,MAAMR,QAAQS,EAAE,CAACC,SAAS,CAAC;QACxCH,YAAYZ,6RAAAA;QACZI;QACAI;IACF;IAEA,IAAIK,QAAQ;QACV,OAAOA;IACT;IACA,MAAM,IAAIf,yQAAAA,CAASM,IAAIG,CAAC;AAC1B"}},
    {"offset": {"line": 2954, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/preferences/requestHandlers/delete.ts"],"sourcesContent":["import { status as httpStatus } from 'http-status'\n\nimport type { PayloadHandler } from '../../config/types.js'\nimport type { PayloadRequest } from '../../types/index.js'\n\nimport { deleteOperation } from '../operations/delete.js'\n\nexport const deleteHandler: PayloadHandler = async (incomingReq): Promise<Response> => {\n  // We cannot import the addDataAndFileToRequest utility here from the 'next' package because of dependency issues\n  // However that utility should be used where possible instead of manually appending the data\n  let data\n\n  try {\n    data = await incomingReq.json?.()\n  } catch (ignore) {\n    data = {}\n  }\n\n  const reqWithData: PayloadRequest = incomingReq\n\n  if (data) {\n    reqWithData.data = data\n    // @ts-expect-error\n    reqWithData.json = () => Promise.resolve(data)\n  }\n\n  const result = await deleteOperation({\n    key: reqWithData.routeParams?.key as string,\n    req: reqWithData,\n    user: reqWithData.user,\n  })\n\n  return Response.json(\n    {\n      ...result,\n      message: reqWithData.t('general:deletedSuccessfully'),\n    },\n    {\n      status: httpStatus.OK,\n    },\n  )\n}\n"],"names":["status","httpStatus","deleteOperation","deleteHandler","incomingReq","data","json","ignore","reqWithData","Promise","resolve","result","key","routeParams","req","user","Response","message","t","OK"],"mappings":";;;;;AAAA,SAASA,UAAUC,UAAU,QAAQ,cAAa;AAKlD,SAASC,eAAe,QAAQ,0BAAyB;;;AAElD,MAAMC,gBAAgC,OAAOC;IAClD,iHAAiH;IACjH,4FAA4F;IAC5F,IAAIC;IAEJ,IAAI;QACFA,OAAO,MAAMD,YAAYE,IAAI;IAC/B,EAAE,OAAOC,QAAQ;QACfF,OAAO,CAAC;IACV;IAEA,MAAMG,cAA8BJ;IAEpC,IAAIC,MAAM;QACRG,YAAYH,IAAI,GAAGA;QACnB,mBAAmB;QACnBG,YAAYF,IAAI,GAAG,IAAMG,QAAQC,OAAO,CAACL;IAC3C;IAEA,MAAMM,SAAS,UAAMT,iSAAAA,EAAgB;QACnCU,KAAKJ,YAAYK,WAAW,EAAED;QAC9BE,KAAKN;QACLO,MAAMP,YAAYO,IAAI;IACxB;IAEA,OAAOC,SAASV,IAAI,CAClB;QACE,GAAGK,MAAM;QACTM,SAAST,YAAYU,CAAC,CAAC;IACzB,GACA;QACElB,QAAQC,+PAAAA,CAAWkB,EAAE;IACvB;AAEJ,EAAC"}},
    {"offset": {"line": 2994, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/preferences/operations/findOne.ts"],"sourcesContent":["import type { TypedCollection } from '../../index.js'\nimport type { Where } from '../../types/index.js'\nimport type { PreferenceRequest } from '../types.js'\n\nimport { preferencesCollectionSlug } from '../config.js'\n\nexport async function findOne(args: PreferenceRequest): Promise<TypedCollection['_preference']> {\n  const {\n    key,\n    req: { payload },\n    req,\n    user,\n  } = args\n\n  if (!user) {\n    return null!\n  }\n\n  const where: Where = {\n    and: [\n      { key: { equals: key } },\n      { 'user.value': { equals: user.id } },\n      { 'user.relationTo': { equals: user.collection } },\n    ],\n  }\n\n  const { docs } = await payload.db.find({\n    collection: preferencesCollectionSlug,\n    limit: 1,\n    pagination: false,\n    req,\n    sort: '-updatedAt',\n    where,\n  })\n\n  return docs?.[0] || null!\n}\n"],"names":["preferencesCollectionSlug","findOne","args","key","req","payload","user","where","and","equals","id","collection","docs","db","find","limit","pagination","sort"],"mappings":";;;;AAIA,SAASA,yBAAyB,QAAQ,eAAc;;AAEjD,eAAeC,QAAQC,IAAuB;IACnD,MAAM,EACJC,GAAG,EACHC,KAAK,EAAEC,OAAO,EAAE,EAChBD,GAAG,EACHE,IAAI,EACL,GAAGJ;IAEJ,IAAI,CAACI,MAAM;QACT,OAAO;IACT;IAEA,MAAMC,QAAe;QACnBC,KAAK;YACH;gBAAEL,KAAK;oBAAEM,QAAQN;gBAAI;YAAE;YACvB;gBAAE,cAAc;oBAAEM,QAAQH,KAAKI,EAAE;gBAAC;YAAE;YACpC;gBAAE,mBAAmB;oBAAED,QAAQH,KAAKK,UAAU;gBAAC;YAAE;SAClD;IACH;IAEA,MAAM,EAAEC,IAAI,EAAE,GAAG,MAAMP,QAAQQ,EAAE,CAACC,IAAI,CAAC;QACrCH,YAAYX,6RAAAA;QACZe,OAAO;QACPC,YAAY;QACZZ;QACAa,MAAM;QACNV;IACF;IAEA,OAAOK,MAAM,CAAC,EAAE,IAAI;AACtB"}},
    {"offset": {"line": 3038, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/preferences/requestHandlers/findOne.ts"],"sourcesContent":["import { status as httpStatus } from 'http-status'\n\nimport type { PayloadHandler } from '../../config/types.js'\nimport type { PayloadRequest } from '../../types/index.js'\n\nimport { findOne } from '../operations/findOne.js'\n\nexport const findByIDHandler: PayloadHandler = async (incomingReq): Promise<Response> => {\n  // We cannot import the addDataAndFileToRequest utility here from the 'next' package because of dependency issues\n  // However that utility should be used where possible instead of manually appending the data\n  let data\n\n  try {\n    data = await incomingReq.json?.()\n  } catch (ignore) {\n    data = {}\n  }\n\n  const reqWithData: PayloadRequest = incomingReq\n\n  if (data) {\n    reqWithData.data = data\n    // @ts-expect-error\n    reqWithData.json = () => Promise.resolve(data)\n  }\n\n  const result = await findOne({\n    key: reqWithData.routeParams?.key as string,\n    req: reqWithData,\n    user: reqWithData.user,\n  })\n\n  return Response.json(\n    {\n      ...(result\n        ? result\n        : {\n            message: reqWithData.t('general:notFound'),\n            value: null,\n          }),\n    },\n    {\n      status: httpStatus.OK,\n    },\n  )\n}\n"],"names":["status","httpStatus","findOne","findByIDHandler","incomingReq","data","json","ignore","reqWithData","Promise","resolve","result","key","routeParams","req","user","Response","message","t","value","OK"],"mappings":";;;;;AAAA,SAASA,UAAUC,UAAU,QAAQ,cAAa;AAKlD,SAASC,OAAO,QAAQ,2BAA0B;;;AAE3C,MAAMC,kBAAkC,OAAOC;IACpD,iHAAiH;IACjH,4FAA4F;IAC5F,IAAIC;IAEJ,IAAI;QACFA,OAAO,MAAMD,YAAYE,IAAI;IAC/B,EAAE,OAAOC,QAAQ;QACfF,OAAO,CAAC;IACV;IAEA,MAAMG,cAA8BJ;IAEpC,IAAIC,MAAM;QACRG,YAAYH,IAAI,GAAGA;QACnB,mBAAmB;QACnBG,YAAYF,IAAI,GAAG,IAAMG,QAAQC,OAAO,CAACL;IAC3C;IAEA,MAAMM,SAAS,UAAMT,0RAAAA,EAAQ;QAC3BU,KAAKJ,YAAYK,WAAW,EAAED;QAC9BE,KAAKN;QACLO,MAAMP,YAAYO,IAAI;IACxB;IAEA,OAAOC,SAASV,IAAI,CAClB;QACE,GAAIK,SACAA,SACA;YACEM,SAAST,YAAYU,CAAC,CAAC;YACvBC,OAAO;QACT,CAAC;IACP,GACA;QACEnB,QAAQC,+PAAAA,CAAWmB,EAAE;IACvB;AAEJ,EAAC"}},
    {"offset": {"line": 3080, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/preferences/operations/update.ts"],"sourcesContent":["import type { Where } from '../../types/index.js'\nimport type { PreferenceUpdateRequest } from '../types.js'\n\nimport { UnauthorizedError } from '../../errors/UnauthorizedError.js'\nimport { preferencesCollectionSlug } from '../config.js'\n\nexport async function update(args: PreferenceUpdateRequest) {\n  const {\n    key,\n    req: { payload },\n    req,\n    user,\n    value,\n  } = args\n\n  if (!user) {\n    throw new UnauthorizedError(req.t)\n  }\n\n  const where: Where = {\n    and: [\n      { key: { equals: key } },\n      { 'user.value': { equals: user.id } },\n      { 'user.relationTo': { equals: user.collection } },\n    ],\n  }\n\n  const preference = {\n    key,\n    user: {\n      relationTo: user.collection,\n      value: user.id,\n    },\n    value,\n  }\n\n  return await payload.db.upsert({\n    collection: preferencesCollectionSlug,\n    data: preference,\n    req,\n    where,\n  })\n}\n"],"names":["UnauthorizedError","preferencesCollectionSlug","update","args","key","req","payload","user","value","t","where","and","equals","id","collection","preference","relationTo","db","upsert","data"],"mappings":";;;;AAGA,SAASA,iBAAiB,QAAQ,oCAAmC;AACrE,SAASC,yBAAyB,QAAQ,eAAc;;;AAEjD,eAAeC,OAAOC,IAA6B;IACxD,MAAM,EACJC,GAAG,EACHC,KAAK,EAAEC,OAAO,EAAE,EAChBD,GAAG,EACHE,IAAI,EACJC,KAAK,EACN,GAAGL;IAEJ,IAAI,CAACI,MAAM;QACT,MAAM,IAAIP,2RAAAA,CAAkBK,IAAII,CAAC;IACnC;IAEA,MAAMC,QAAe;QACnBC,KAAK;YACH;gBAAEP,KAAK;oBAAEQ,QAAQR;gBAAI;YAAE;YACvB;gBAAE,cAAc;oBAAEQ,QAAQL,KAAKM,EAAE;gBAAC;YAAE;YACpC;gBAAE,mBAAmB;oBAAED,QAAQL,KAAKO,UAAU;gBAAC;YAAE;SAClD;IACH;IAEA,MAAMC,aAAa;QACjBX;QACAG,MAAM;YACJS,YAAYT,KAAKO,UAAU;YAC3BN,OAAOD,KAAKM,EAAE;QAChB;QACAL;IACF;IAEA,OAAO,MAAMF,QAAQW,EAAE,CAACC,MAAM,CAAC;QAC7BJ,YAAYb,6RAAAA;QACZkB,MAAMJ;QACNV;QACAK;IACF;AACF"}},
    {"offset": {"line": 3131, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/preferences/requestHandlers/update.ts"],"sourcesContent":["import { status as httpStatus } from 'http-status'\n\nimport type { PayloadHandler } from '../../config/types.js'\nimport type { PayloadRequest } from '../../types/index.js'\n\nimport { update } from '../operations/update.js'\n\nexport const updateHandler: PayloadHandler = async (incomingReq) => {\n  // We cannot import the addDataAndFileToRequest utility here from the 'next' package because of dependency issues\n  // However that utility should be used where possible instead of manually appending the data\n  let data\n\n  try {\n    data = await incomingReq.json?.()\n  } catch (_err) {\n    data = {}\n  }\n\n  const reqWithData: PayloadRequest = incomingReq\n\n  if (data) {\n    reqWithData.data = data\n    // @ts-expect-error\n    reqWithData.json = () => Promise.resolve(data)\n  }\n\n  const doc = await update({\n    key: reqWithData.routeParams?.key as string,\n    req: reqWithData,\n    user: reqWithData?.user,\n    value: reqWithData.data?.value || reqWithData.data,\n  })\n\n  return Response.json(\n    {\n      doc,\n      message: reqWithData.t('general:updatedSuccessfully'),\n    },\n    {\n      status: httpStatus.OK,\n    },\n  )\n}\n"],"names":["status","httpStatus","update","updateHandler","incomingReq","data","json","_err","reqWithData","Promise","resolve","doc","key","routeParams","req","user","value","Response","message","t","OK"],"mappings":";;;;;AAAA,SAASA,UAAUC,UAAU,QAAQ,cAAa;AAKlD,SAASC,MAAM,QAAQ,0BAAyB;;;AAEzC,MAAMC,gBAAgC,OAAOC;IAClD,iHAAiH;IACjH,4FAA4F;IAC5F,IAAIC;IAEJ,IAAI;QACFA,OAAO,MAAMD,YAAYE,IAAI;IAC/B,EAAE,OAAOC,MAAM;QACbF,OAAO,CAAC;IACV;IAEA,MAAMG,cAA8BJ;IAEpC,IAAIC,MAAM;QACRG,YAAYH,IAAI,GAAGA;QACnB,mBAAmB;QACnBG,YAAYF,IAAI,GAAG,IAAMG,QAAQC,OAAO,CAACL;IAC3C;IAEA,MAAMM,MAAM,UAAMT,wRAAAA,EAAO;QACvBU,KAAKJ,YAAYK,WAAW,EAAED;QAC9BE,KAAKN;QACLO,MAAMP,aAAaO;QACnBC,OAAOR,YAAYH,IAAI,EAAEW,SAASR,YAAYH,IAAI;IACpD;IAEA,OAAOY,SAASX,IAAI,CAClB;QACEK;QACAO,SAASV,YAAYW,CAAC,CAAC;IACzB,GACA;QACEnB,QAAQC,+PAAAA,CAAWmB,EAAE;IACvB;AAEJ,EAAC"}},
    {"offset": {"line": 3172, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/preferences/config.ts"],"sourcesContent":["import type { CollectionConfig } from '../collections/config/types.js'\nimport type { Access, Config } from '../config/types.js'\n\nimport { deleteHandler } from './requestHandlers/delete.js'\nimport { findByIDHandler } from './requestHandlers/findOne.js'\nimport { updateHandler } from './requestHandlers/update.js'\n\nconst preferenceAccess: Access = ({ req }) => {\n  if (!req.user) {\n    return false\n  }\n\n  return {\n    'user.value': {\n      equals: req?.user?.id,\n    },\n  }\n}\n\nexport const preferencesCollectionSlug = 'payload-preferences'\n\nexport const getPreferencesCollection = (config: Config): CollectionConfig => ({\n  slug: preferencesCollectionSlug,\n  access: {\n    delete: preferenceAccess,\n    read: preferenceAccess,\n  },\n  admin: {\n    hidden: true,\n  },\n  endpoints: [\n    {\n      handler: findByIDHandler,\n      method: 'get',\n      path: '/:key',\n    },\n    {\n      handler: deleteHandler,\n      method: 'delete',\n      path: '/:key',\n    },\n    {\n      handler: updateHandler,\n      method: 'post',\n      path: '/:key',\n    },\n  ],\n  fields: [\n    {\n      name: 'user',\n      type: 'relationship',\n      hooks: {\n        beforeValidate: [\n          ({ req }) => {\n            if (!req?.user) {\n              return null\n            }\n\n            return {\n              relationTo: req?.user.collection,\n              value: req?.user.id,\n            }\n          },\n        ],\n      },\n      index: true,\n      relationTo: config\n        .collections!.filter((collectionConfig) => collectionConfig.auth)\n        .map((collectionConfig) => collectionConfig.slug),\n      required: true,\n    },\n    {\n      name: 'key',\n      type: 'text',\n      index: true,\n    },\n    {\n      name: 'value',\n      type: 'json',\n      validate: (value) => {\n        if (value) {\n          try {\n            JSON.parse(JSON.stringify(value))\n          } catch {\n            return 'Invalid JSON'\n          }\n        }\n\n        return true\n      },\n    },\n  ],\n  lockDocuments: false,\n})\n"],"names":["deleteHandler","findByIDHandler","updateHandler","preferenceAccess","req","user","equals","id","preferencesCollectionSlug","getPreferencesCollection","config","slug","access","delete","read","admin","hidden","endpoints","handler","method","path","fields","name","type","hooks","beforeValidate","relationTo","collection","value","index","collections","filter","collectionConfig","auth","map","required","validate","JSON","parse","stringify","lockDocuments"],"mappings":";;;;;;AAGA,SAASA,aAAa,QAAQ,8BAA6B;AAC3D,SAASC,eAAe,QAAQ,+BAA8B;AAC9D,SAASC,aAAa,QAAQ,8BAA6B;;;;AAE3D,MAAMC,mBAA2B,CAAC,EAAEC,GAAG,EAAE;IACvC,IAAI,CAACA,IAAIC,IAAI,EAAE;QACb,OAAO;IACT;IAEA,OAAO;QACL,cAAc;YACZC,QAAQF,KAAKC,MAAME;QACrB;IACF;AACF;AAEO,MAAMC,4BAA4B,sBAAqB;AAEvD,MAAMC,2BAA2B,CAACC,SAAsC,CAAA;QAC7EC,MAAMH;QACNI,QAAQ;YACNC,QAAQV;YACRW,MAAMX;QACR;QACAY,OAAO;YACLC,QAAQ;QACV;QACAC,WAAW;YACT;gBACEC,SAASjB,uSAAAA;gBACTkB,QAAQ;gBACRC,MAAM;YACR;YACA;gBACEF,SAASlB,oSAAAA;gBACTmB,QAAQ;gBACRC,MAAM;YACR;YACA;gBACEF,SAAShB,oSAAAA;gBACTiB,QAAQ;gBACRC,MAAM;YACR;SACD;QACDC,QAAQ;YACN;gBACEC,MAAM;gBACNC,MAAM;gBACNC,OAAO;oBACLC,gBAAgB;wBACd,CAAC,EAAErB,GAAG,EAAE;4BACN,IAAI,CAACA,KAAKC,MAAM;gCACd,OAAO;4BACT;4BAEA,OAAO;gCACLqB,YAAYtB,KAAKC,KAAKsB;gCACtBC,OAAOxB,KAAKC,KAAKE;4BACnB;wBACF;qBACD;gBACH;gBACAsB,OAAO;gBACPH,YAAYhB,OACToB,WAAW,CAAEC,MAAM,CAAC,CAACC,mBAAqBA,iBAAiBC,IAAI,EAC/DC,GAAG,CAAC,CAACF,mBAAqBA,iBAAiBrB,IAAI;gBAClDwB,UAAU;YACZ;YACA;gBACEb,MAAM;gBACNC,MAAM;gBACNM,OAAO;YACT;YACA;gBACEP,MAAM;gBACNC,MAAM;gBACNa,UAAU,CAACR;oBACT,IAAIA,OAAO;wBACT,IAAI;4BACFS,KAAKC,KAAK,CAACD,KAAKE,SAAS,CAACX;wBAC5B,EAAE,OAAM;4BACN,OAAO;wBACT;oBACF;oBAEA,OAAO;gBACT;YACF;SACD;QACDY,eAAe;IACjB,CAAA,EAAE"}},
    {"offset": {"line": 3268, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/preferences/deleteUserPreferences.ts"],"sourcesContent":["import type { SanitizedCollectionConfig } from '../collections/config/types.js'\nimport type { Payload } from '../index.js'\nimport type { PayloadRequest } from '../types/index.js'\n\nimport { preferencesCollectionSlug } from './config.js'\n\ntype Args = {\n  collectionConfig: SanitizedCollectionConfig\n  /**\n   * User IDs to delete\n   */\n  ids: (number | string)[]\n  payload: Payload\n  req: PayloadRequest\n}\nexport const deleteUserPreferences = async ({ collectionConfig, ids, payload, req }: Args) => {\n  if (collectionConfig.auth) {\n    await payload.db.deleteMany({\n      collection: preferencesCollectionSlug,\n      req,\n      where: {\n        or: [\n          {\n            and: [\n              {\n                'user.value': { in: ids },\n              },\n              {\n                'user.relationTo': { equals: collectionConfig.slug },\n              },\n            ],\n          },\n          {\n            key: { in: ids.map((id) => `collection-${collectionConfig.slug}-${id}`) },\n          },\n        ],\n      },\n    })\n  } else {\n    await payload.db.deleteMany({\n      collection: preferencesCollectionSlug,\n      req,\n      where: {\n        key: { in: ids.map((id) => `collection-${collectionConfig.slug}-${id}`) },\n      },\n    })\n  }\n}\n"],"names":["preferencesCollectionSlug","deleteUserPreferences","collectionConfig","ids","payload","req","auth","db","deleteMany","collection","where","or","and","in","equals","slug","key","map","id"],"mappings":";;;;AAIA,SAASA,yBAAyB,QAAQ,cAAa;;AAWhD,MAAMC,wBAAwB,OAAO,EAAEC,gBAAgB,EAAEC,GAAG,EAAEC,OAAO,EAAEC,GAAG,EAAQ;IACvF,IAAIH,iBAAiBI,IAAI,EAAE;QACzB,MAAMF,QAAQG,EAAE,CAACC,UAAU,CAAC;YAC1BC,YAAYT,6RAAAA;YACZK;YACAK,OAAO;gBACLC,IAAI;oBACF;wBACEC,KAAK;4BACH;gCACE,cAAc;oCAAEC,IAAIV;gCAAI;4BAC1B;4BACA;gCACE,mBAAmB;oCAAEW,QAAQZ,iBAAiBa,IAAI;gCAAC;4BACrD;yBACD;oBACH;oBACA;wBACEC,KAAK;4BAAEH,IAAIV,IAAIc,GAAG,CAAC,CAACC,KAAO,CAAC,WAAW,EAAEhB,iBAAiBa,IAAI,CAAC,CAAC,EAAEG,IAAI;wBAAE;oBAC1E;iBACD;YACH;QACF;IACF,OAAO;QACL,MAAMd,QAAQG,EAAE,CAACC,UAAU,CAAC;YAC1BC,YAAYT,6RAAAA;YACZK;YACAK,OAAO;gBACLM,KAAK;oBAAEH,IAAIV,IAAIc,GAAG,CAAC,CAACC,KAAO,CAAC,WAAW,EAAEhB,iBAAiBa,IAAI,CAAC,CAAC,EAAEG,IAAI;gBAAE;YAC1E;QACF;IACF;AACF,EAAC"}},
    {"offset": {"line": 3319, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/locked-documents/config.ts"],"sourcesContent":["import type { CollectionConfig } from '../collections/config/types.js'\nimport type { Config } from '../config/types.js'\n\nimport { defaultAccess } from '../auth/defaultAccess.js'\n\nexport const lockedDocumentsCollectionSlug = 'payload-locked-documents'\n\nexport const getLockedDocumentsCollection = (config: Config): CollectionConfig => ({\n  slug: lockedDocumentsCollectionSlug,\n  access: {\n    create: defaultAccess,\n    delete: defaultAccess,\n    read: defaultAccess,\n    update: defaultAccess,\n  },\n  admin: {\n    hidden: true,\n  },\n  fields: [\n    {\n      name: 'document',\n      type: 'relationship',\n      index: true,\n      maxDepth: 0,\n      relationTo: [\n        ...config\n          .collections!.filter((collectionConfig) => collectionConfig.lockDocuments !== false)\n          .map((collectionConfig) => collectionConfig.slug),\n      ],\n    },\n    {\n      name: 'globalSlug',\n      type: 'text',\n      index: true,\n    },\n    {\n      name: 'user',\n      type: 'relationship',\n      maxDepth: 1,\n      relationTo: config\n        .collections!.filter((collectionConfig) => collectionConfig.auth)\n        .map((collectionConfig) => collectionConfig.slug),\n      required: true,\n    },\n  ],\n  lockDocuments: false,\n})\n"],"names":["defaultAccess","lockedDocumentsCollectionSlug","getLockedDocumentsCollection","config","slug","access","create","delete","read","update","admin","hidden","fields","name","type","index","maxDepth","relationTo","collections","filter","collectionConfig","lockDocuments","map","auth","required"],"mappings":";;;;;;AAGA,SAASA,aAAa,QAAQ,2BAA0B;;AAEjD,MAAMC,gCAAgC,2BAA0B;AAEhE,MAAMC,+BAA+B,CAACC,SAAsC,CAAA;QACjFC,MAAMH;QACNI,QAAQ;YACNC,QAAQN,iRAAAA;YACRO,QAAQP,iRAAAA;YACRQ,MAAMR,iRAAAA;YACNS,QAAQT,iRAAAA;QACV;QACAU,OAAO;YACLC,QAAQ;QACV;QACAC,QAAQ;YACN;gBACEC,MAAM;gBACNC,MAAM;gBACNC,OAAO;gBACPC,UAAU;gBACVC,YAAY;uBACPd,OACAe,WAAW,CAAEC,MAAM,CAAC,CAACC,mBAAqBA,iBAAiBC,aAAa,KAAK,OAC7EC,GAAG,CAAC,CAACF,mBAAqBA,iBAAiBhB,IAAI;iBACnD;YACH;YACA;gBACES,MAAM;gBACNC,MAAM;gBACNC,OAAO;YACT;YACA;gBACEF,MAAM;gBACNC,MAAM;gBACNE,UAAU;gBACVC,YAAYd,OACTe,WAAW,CAAEC,MAAM,CAAC,CAACC,mBAAqBA,iBAAiBG,IAAI,EAC/DD,GAAG,CAAC,CAACF,mBAAqBA,iBAAiBhB,IAAI;gBAClDoB,UAAU;YACZ;SACD;QACDH,eAAe;IACjB,CAAA,EAAE"}},
    {"offset": {"line": 3368, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/folders/buildFolderField.ts"],"sourcesContent":["import type { SingleRelationshipField } from '../fields/config/types.js'\nimport type { Document } from '../types/index.js'\n\nimport { extractID } from '../utilities/extractID.js'\n\nexport const buildFolderField = ({\n  collectionSpecific,\n  folderFieldName,\n  folderSlug,\n  overrides = {},\n}: {\n  collectionSpecific: boolean\n  folderFieldName: string\n  folderSlug: string\n  overrides?: Partial<SingleRelationshipField>\n}): SingleRelationshipField => {\n  const field: SingleRelationshipField = {\n    name: folderFieldName,\n    type: 'relationship',\n    admin: {},\n    hasMany: false,\n    index: true,\n    label: 'Folder',\n    relationTo: folderSlug,\n    validate: async (value, { collectionSlug, data, overrideAccess, previousValue, req }) => {\n      if (!collectionSpecific) {\n        // if collection scoping is not enabled, no validation required since folders can contain any type of document\n        return true\n      }\n\n      if (!value) {\n        // no folder, no validation required\n        return true\n      }\n\n      const newID = extractID<Document>(value)\n      if (previousValue && extractID<Document>(previousValue) === newID) {\n        // value did not change, no validation required\n        return true\n      } else {\n        // need to validat the folder value allows this collection type\n        let parentFolder: Document = null\n        if (typeof value === 'string' || typeof value === 'number') {\n          // need to populate the value with the document\n          parentFolder = await req.payload.findByID({\n            id: newID,\n            collection: folderSlug,\n            depth: 0, // no need to populate nested folders\n            overrideAccess,\n            req,\n            select: {\n              folderType: true, // only need to check folderType\n            },\n            user: req.user,\n          })\n        }\n\n        if (parentFolder && collectionSlug) {\n          const parentFolderTypes: string[] = (parentFolder.folderType as string[]) || []\n\n          // if the parent folder has no folder types, it accepts all collections\n          if (parentFolderTypes.length === 0) {\n            return true\n          }\n\n          // validation for a folder document\n          if (collectionSlug === folderSlug) {\n            // ensure the parent accepts ALL folder types\n            const folderTypes: string[] = 'folderType' in data ? (data.folderType as string[]) : []\n            const invalidSlugs = folderTypes.filter((validCollectionSlug: string) => {\n              return !parentFolderTypes.includes(validCollectionSlug)\n            })\n            if (invalidSlugs.length === 0) {\n              return true\n            } else {\n              return `Folder with ID ${newID} does not allow documents of type ${invalidSlugs.join(', ')}`\n            }\n          }\n\n          // validation for a non-folder document\n          if (parentFolderTypes.includes(collectionSlug)) {\n            return true\n          } else {\n            return `Folder with ID ${newID} does not allow documents of type ${collectionSlug}`\n          }\n        } else {\n          return `Folder with ID ${newID} not found in collection ${folderSlug}`\n        }\n      }\n    },\n  }\n\n  if (overrides?.admin) {\n    field.admin = {\n      ...field.admin,\n      ...(overrides.admin || {}),\n    }\n\n    if (overrides.admin.components) {\n      field.admin.components = {\n        ...field.admin.components,\n        ...(overrides.admin.components || {}),\n      }\n    }\n  }\n\n  return field\n}\n"],"names":["extractID","buildFolderField","collectionSpecific","folderFieldName","folderSlug","overrides","field","name","type","admin","hasMany","index","label","relationTo","validate","value","collectionSlug","data","overrideAccess","previousValue","req","newID","parentFolder","payload","findByID","id","collection","depth","select","folderType","user","parentFolderTypes","length","folderTypes","invalidSlugs","filter","validCollectionSlug","includes","join","components"],"mappings":";;;;AAGA,SAASA,SAAS,QAAQ,4BAA2B;;AAE9C,MAAMC,mBAAmB,CAAC,EAC/BC,kBAAkB,EAClBC,eAAe,EACfC,UAAU,EACVC,YAAY,CAAC,CAAC,EAMf;IACC,MAAMC,QAAiC;QACrCC,MAAMJ;QACNK,MAAM;QACNC,OAAO,CAAC;QACRC,SAAS;QACTC,OAAO;QACPC,OAAO;QACPC,YAAYT;QACZU,UAAU,OAAOC,OAAO,EAAEC,cAAc,EAAEC,IAAI,EAAEC,cAAc,EAAEC,aAAa,EAAEC,GAAG,EAAE;YAClF,IAAI,CAAClB,oBAAoB;gBACvB,8GAA8G;gBAC9G,OAAO;YACT;YAEA,IAAI,CAACa,OAAO;gBACV,oCAAoC;gBACpC,OAAO;YACT;YAEA,MAAMM,YAAQrB,8QAAAA,EAAoBe;YAClC,IAAII,qBAAiBnB,8QAAAA,EAAoBmB,mBAAmBE,OAAO;gBACjE,+CAA+C;gBAC/C,OAAO;YACT,OAAO;gBACL,+DAA+D;gBAC/D,IAAIC,eAAyB;gBAC7B,IAAI,OAAOP,UAAU,YAAY,OAAOA,UAAU,UAAU;oBAC1D,+CAA+C;oBAC/CO,eAAe,MAAMF,IAAIG,OAAO,CAACC,QAAQ,CAAC;wBACxCC,IAAIJ;wBACJK,YAAYtB;wBACZuB,OAAO;wBACPT;wBACAE;wBACAQ,QAAQ;4BACNC,YAAY;wBACd;wBACAC,MAAMV,IAAIU,IAAI;oBAChB;gBACF;gBAEA,IAAIR,gBAAgBN,gBAAgB;oBAClC,MAAMe,oBAA+BT,aAAaO,UAAU,IAAiB,EAAE;oBAE/E,uEAAuE;oBACvE,IAAIE,kBAAkBC,MAAM,KAAK,GAAG;wBAClC,OAAO;oBACT;oBAEA,mCAAmC;oBACnC,IAAIhB,mBAAmBZ,YAAY;wBACjC,6CAA6C;wBAC7C,MAAM6B,cAAwB,gBAAgBhB,OAAQA,KAAKY,UAAU,GAAgB,EAAE;wBACvF,MAAMK,eAAeD,YAAYE,MAAM,CAAC,CAACC;4BACvC,OAAO,CAACL,kBAAkBM,QAAQ,CAACD;wBACrC;wBACA,IAAIF,aAAaF,MAAM,KAAK,GAAG;4BAC7B,OAAO;wBACT,OAAO;4BACL,OAAO,CAAC,eAAe,EAAEX,MAAM,kCAAkC,EAAEa,aAAaI,IAAI,CAAC,OAAO;wBAC9F;oBACF;oBAEA,uCAAuC;oBACvC,IAAIP,kBAAkBM,QAAQ,CAACrB,iBAAiB;wBAC9C,OAAO;oBACT,OAAO;wBACL,OAAO,CAAC,eAAe,EAAEK,MAAM,kCAAkC,EAAEL,gBAAgB;oBACrF;gBACF,OAAO;oBACL,OAAO,CAAC,eAAe,EAAEK,MAAM,yBAAyB,EAAEjB,YAAY;gBACxE;YACF;QACF;IACF;IAEA,IAAIC,WAAWI,OAAO;QACpBH,MAAMG,KAAK,GAAG;YACZ,GAAGH,MAAMG,KAAK;YACd,GAAIJ,UAAUI,KAAK,IAAI,CAAC,CAAC;QAC3B;QAEA,IAAIJ,UAAUI,KAAK,CAAC8B,UAAU,EAAE;YAC9BjC,MAAMG,KAAK,CAAC8B,UAAU,GAAG;gBACvB,GAAGjC,MAAMG,KAAK,CAAC8B,UAAU;gBACzB,GAAIlC,UAAUI,KAAK,CAAC8B,UAAU,IAAI,CAAC,CAAC;YACtC;QACF;IACF;IAEA,OAAOjC;AACT,EAAC"}},
    {"offset": {"line": 3462, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/folders/hooks/deleteSubfoldersAfterDelete.ts"],"sourcesContent":["import type { CollectionBeforeDeleteHook } from '../../index.js'\n\ntype Args = {\n  folderFieldName: string\n  folderSlug: string\n}\nexport const deleteSubfoldersBeforeDelete = ({\n  folderFieldName,\n  folderSlug,\n}: Args): CollectionBeforeDeleteHook => {\n  return async ({ id, req }) => {\n    await req.payload.delete({\n      collection: folderSlug,\n      req,\n      where: {\n        [folderFieldName]: {\n          equals: id,\n        },\n      },\n    })\n  }\n}\n"],"names":["deleteSubfoldersBeforeDelete","folderFieldName","folderSlug","id","req","payload","delete","collection","where","equals"],"mappings":";;;;AAMO,MAAMA,+BAA+B,CAAC,EAC3CC,eAAe,EACfC,UAAU,EACL;IACL,OAAO,OAAO,EAAEC,EAAE,EAAEC,GAAG,EAAE;QACvB,MAAMA,IAAIC,OAAO,CAACC,MAAM,CAAC;YACvBC,YAAYL;YACZE;YACAI,OAAO;gBACL,CAACP,gBAAgB,EAAE;oBACjBQ,QAAQN;gBACV;YACF;QACF;IACF;AACF,EAAC"}},
    {"offset": {"line": 3483, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/folders/hooks/dissasociateAfterDelete.ts"],"sourcesContent":["import type { CollectionAfterDeleteHook } from '../../index.js'\n\ntype Args = {\n  collectionSlugs: string[]\n  folderFieldName: string\n}\nexport const dissasociateAfterDelete = ({\n  collectionSlugs,\n  folderFieldName,\n}: Args): CollectionAfterDeleteHook => {\n  return async ({ id, req }) => {\n    for (const collectionSlug of collectionSlugs) {\n      await req.payload.update({\n        collection: collectionSlug,\n        data: {\n          [folderFieldName]: null,\n        },\n        req,\n        where: {\n          [folderFieldName]: {\n            equals: id,\n          },\n        },\n      })\n    }\n  }\n}\n"],"names":["dissasociateAfterDelete","collectionSlugs","folderFieldName","id","req","collectionSlug","payload","update","collection","data","where","equals"],"mappings":";;;;AAMO,MAAMA,0BAA0B,CAAC,EACtCC,eAAe,EACfC,eAAe,EACV;IACL,OAAO,OAAO,EAAEC,EAAE,EAAEC,GAAG,EAAE;QACvB,KAAK,MAAMC,kBAAkBJ,gBAAiB;YAC5C,MAAMG,IAAIE,OAAO,CAACC,MAAM,CAAC;gBACvBC,YAAYH;gBACZI,MAAM;oBACJ,CAACP,gBAAgB,EAAE;gBACrB;gBACAE;gBACAM,OAAO;oBACL,CAACR,gBAAgB,EAAE;wBACjBS,QAAQR;oBACV;gBACF;YACF;QACF;IACF;AACF,EAAC"}},
    {"offset": {"line": 3509, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/folders/hooks/ensureSafeCollectionsChange.ts"],"sourcesContent":["import { APIError, type CollectionBeforeValidateHook, type CollectionSlug } from '../../index.js'\nimport { extractID } from '../../utilities/extractID.js'\nimport { getTranslatedLabel } from '../../utilities/getTranslatedLabel.js'\n\nexport const ensureSafeCollectionsChange =\n  ({ foldersSlug }: { foldersSlug: CollectionSlug }): CollectionBeforeValidateHook =>\n  async ({ data, originalDoc, req }) => {\n    const currentFolderID = extractID(originalDoc || {})\n    const parentFolderID = extractID(data?.folder || originalDoc?.folder || {})\n    if (Array.isArray(data?.folderType) && data.folderType.length > 0) {\n      const folderType = data.folderType as string[]\n      const currentlyAssignedCollections: string[] | undefined =\n        Array.isArray(originalDoc?.folderType) && originalDoc.folderType.length > 0\n          ? originalDoc.folderType\n          : undefined\n      /**\n       * Check if the assigned collections have changed.\n       * example:\n       * - originalAssignedCollections: ['posts', 'pages']\n       * - folderType: ['posts']\n       *\n       * The user is narrowing the types of documents that can be associated with this folder.\n       * If the user is only expanding the types of documents that can be associated with this folder,\n       * we do not need to do anything.\n       */\n      const newCollections = currentlyAssignedCollections\n        ? // user is narrowing the current scope of the folder\n          currentlyAssignedCollections.filter((c) => !folderType.includes(c))\n        : // user is adding a scope to the folder\n          folderType\n\n      if (newCollections && newCollections.length > 0) {\n        let hasDependentDocuments = false\n        if (typeof currentFolderID === 'string' || typeof currentFolderID === 'number') {\n          const childDocumentsResult = await req.payload.findByID({\n            id: currentFolderID,\n            collection: foldersSlug,\n            joins: {\n              documentsAndFolders: {\n                limit: 100_000_000,\n                where: {\n                  or: [\n                    {\n                      relationTo: {\n                        in: newCollections,\n                      },\n                    },\n                  ],\n                },\n              },\n            },\n            overrideAccess: true,\n            req,\n          })\n\n          hasDependentDocuments = childDocumentsResult.documentsAndFolders.docs.length > 0\n        }\n\n        // matches folders that are directly related to the removed collections\n        let hasDependentFolders = false\n        if (\n          !hasDependentDocuments &&\n          (typeof currentFolderID === 'string' || typeof currentFolderID === 'number')\n        ) {\n          const childFoldersResult = await req.payload.find({\n            collection: foldersSlug,\n            limit: 1,\n            req,\n            where: {\n              and: [\n                {\n                  folderType: {\n                    in: newCollections,\n                  },\n                },\n                {\n                  folder: {\n                    equals: currentFolderID,\n                  },\n                },\n              ],\n            },\n          })\n          hasDependentFolders = childFoldersResult.totalDocs > 0\n        }\n\n        if (hasDependentDocuments || hasDependentFolders) {\n          const translatedLabels = newCollections.map((collectionSlug) => {\n            if (req.payload.collections[collectionSlug]?.config.labels.singular) {\n              return getTranslatedLabel(\n                req.payload.collections[collectionSlug]?.config.labels.plural,\n                req.i18n,\n              )\n            }\n            return collectionSlug\n          })\n\n          throw new APIError(\n            `The folder \"${data.name || originalDoc.name}\" contains ${hasDependentDocuments ? 'documents' : 'folders'} that still belong to the following collections: ${translatedLabels.join(', ')}`,\n            400,\n          )\n        }\n        return data\n      }\n    } else if (\n      (data?.folderType === null ||\n        (Array.isArray(data?.folderType) && data?.folderType.length === 0)) &&\n      parentFolderID\n    ) {\n      // attempting to set the folderType to catch-all, so we need to ensure that the parent allows this\n      let parentFolder\n      if (typeof parentFolderID === 'string' || typeof parentFolderID === 'number') {\n        try {\n          parentFolder = await req.payload.findByID({\n            id: parentFolderID,\n            collection: foldersSlug,\n            overrideAccess: true,\n            req,\n            select: {\n              name: true,\n              folderType: true,\n            },\n            user: req.user,\n          })\n        } catch (_) {\n          // parent folder does not exist\n        }\n      }\n\n      if (\n        parentFolder &&\n        parentFolder?.folderType &&\n        Array.isArray(parentFolder.folderType) &&\n        parentFolder.folderType.length > 0\n      ) {\n        throw new APIError(\n          `The folder \"${data?.name || originalDoc.name}\" must have folder-type set since its parent folder ${parentFolder?.name ? `\"${parentFolder?.name}\" ` : ''}has a folder-type set.`,\n          400,\n        )\n      }\n    }\n\n    return data\n  }\n"],"names":["APIError","extractID","getTranslatedLabel","ensureSafeCollectionsChange","foldersSlug","data","originalDoc","req","currentFolderID","parentFolderID","folder","Array","isArray","folderType","length","currentlyAssignedCollections","undefined","newCollections","filter","c","includes","hasDependentDocuments","childDocumentsResult","payload","findByID","id","collection","joins","documentsAndFolders","limit","where","or","relationTo","in","overrideAccess","docs","hasDependentFolders","childFoldersResult","find","and","equals","totalDocs","translatedLabels","map","collectionSlug","collections","config","labels","singular","plural","i18n","name","join","parentFolder","select","user","_"],"mappings":"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"}},
    {"offset": {"line": 3625, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/folders/hooks/reparentChildFolder.ts"],"sourcesContent":["import type { CollectionAfterChangeHook, Payload } from '../../index.js'\n\nimport { extractID } from '../../utilities/extractID.js'\n\ntype Args = {\n  folderCollectionSlug: string\n  folderFieldName: string\n  folderID: number | string\n  parentIDToFind: number | string\n  payload: Payload\n}\n\n/**\n * Determines if a child folder belongs to a parent folder by\n * recursively checking upwards through the folder hierarchy.\n */\nasync function isChildOfFolder({\n  folderCollectionSlug,\n  folderFieldName,\n  folderID,\n  parentIDToFind,\n  payload,\n}: Args): Promise<boolean> {\n  const parentFolder = await payload.findByID({\n    id: folderID,\n    collection: folderCollectionSlug,\n  })\n\n  const parentFolderID = parentFolder[folderFieldName]\n    ? extractID(parentFolder[folderFieldName])\n    : undefined\n\n  if (!parentFolderID) {\n    // made it to the root\n    return false\n  }\n\n  if (parentFolderID === parentIDToFind) {\n    // found match, would be cyclic\n    return true\n  }\n\n  return isChildOfFolder({\n    folderCollectionSlug,\n    folderFieldName,\n    folderID: parentFolderID,\n    parentIDToFind,\n    payload,\n  })\n}\n\n/**\n * If a parent is moved into a child folder, we need to re-parent the child\n * \n * @example\n * \n * ```ts\n     F1\n       F2\n         F2A\n       F3\n\n  Moving F1  F2A becomes:\n\n     F2A\n       F1\n         F2\n         F3\n  ```\n */\nexport const reparentChildFolder = ({\n  folderFieldName,\n}: {\n  folderFieldName: string\n}): CollectionAfterChangeHook => {\n  return async ({ doc, previousDoc, req }) => {\n    if (\n      previousDoc[folderFieldName] !== doc[folderFieldName] &&\n      doc[folderFieldName] &&\n      req.payload.config.folders\n    ) {\n      const newParentFolderID = extractID(doc[folderFieldName])\n      const isMovingToChild = newParentFolderID\n        ? await isChildOfFolder({\n            folderCollectionSlug: req.payload.config.folders.slug,\n            folderFieldName,\n            folderID: newParentFolderID,\n            parentIDToFind: doc.id,\n            payload: req.payload,\n          })\n        : false\n\n      if (isMovingToChild) {\n        // if the folder was moved into a child folder, the child folder needs\n        // to be re-parented with the parent of the folder that was moved\n        await req.payload.update({\n          id: newParentFolderID,\n          collection: req.payload.config.folders.slug,\n          data: {\n            [folderFieldName]: previousDoc[folderFieldName]\n              ? extractID(previousDoc[folderFieldName])\n              : null,\n          },\n          req,\n        })\n      }\n    }\n  }\n}\n"],"names":["extractID","isChildOfFolder","folderCollectionSlug","folderFieldName","folderID","parentIDToFind","payload","parentFolder","findByID","id","collection","parentFolderID","undefined","reparentChildFolder","doc","previousDoc","req","config","folders","newParentFolderID","isMovingToChild","slug","update","data"],"mappings":";;;;AAEA,SAASA,SAAS,QAAQ,+BAA8B;;AAUxD;;;CAGC,GACD,eAAeC,gBAAgB,EAC7BC,oBAAoB,EACpBC,eAAe,EACfC,QAAQ,EACRC,cAAc,EACdC,OAAO,EACF;IACL,MAAMC,eAAe,MAAMD,QAAQE,QAAQ,CAAC;QAC1CC,IAAIL;QACJM,YAAYR;IACd;IAEA,MAAMS,iBAAiBJ,YAAY,CAACJ,gBAAgB,OAChDH,8QAAAA,EAAUO,YAAY,CAACJ,gBAAgB,IACvCS;IAEJ,IAAI,CAACD,gBAAgB;QACnB,sBAAsB;QACtB,OAAO;IACT;IAEA,IAAIA,mBAAmBN,gBAAgB;QACrC,+BAA+B;QAC/B,OAAO;IACT;IAEA,OAAOJ,gBAAgB;QACrBC;QACAC;QACAC,UAAUO;QACVN;QACAC;IACF;AACF;AAqBO,MAAMO,sBAAsB,CAAC,EAClCV,eAAe,EAGhB;IACC,OAAO,OAAO,EAAEW,GAAG,EAAEC,WAAW,EAAEC,GAAG,EAAE;QACrC,IACED,WAAW,CAACZ,gBAAgB,KAAKW,GAAG,CAACX,gBAAgB,IACrDW,GAAG,CAACX,gBAAgB,IACpBa,IAAIV,OAAO,CAACW,MAAM,CAACC,OAAO,EAC1B;YACA,MAAMC,wBAAoBnB,8QAAAA,EAAUc,GAAG,CAACX,gBAAgB;YACxD,MAAMiB,kBAAkBD,oBACpB,MAAMlB,gBAAgB;gBACpBC,sBAAsBc,IAAIV,OAAO,CAACW,MAAM,CAACC,OAAO,CAACG,IAAI;gBACrDlB;gBACAC,UAAUe;gBACVd,gBAAgBS,IAAIL,EAAE;gBACtBH,SAASU,IAAIV,OAAO;YACtB,KACA;YAEJ,IAAIc,iBAAiB;gBACnB,sEAAsE;gBACtE,iEAAiE;gBACjE,MAAMJ,IAAIV,OAAO,CAACgB,MAAM,CAAC;oBACvBb,IAAIU;oBACJT,YAAYM,IAAIV,OAAO,CAACW,MAAM,CAACC,OAAO,CAACG,IAAI;oBAC3CE,MAAM;wBACJ,CAACpB,gBAAgB,EAAEY,WAAW,CAACZ,gBAAgB,OAC3CH,8QAAAA,EAAUe,WAAW,CAACZ,gBAAgB,IACtC;oBACN;oBACAa;gBACF;YACF;QACF;IACF;AACF,EAAC"}},
    {"offset": {"line": 3686, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/folders/createFolderCollection.ts"],"sourcesContent":["import type { CollectionConfig } from '../collections/config/types.js'\nimport type { Field, Option, SelectField } from '../fields/config/types.js'\n\nimport { defaultAccess } from '../auth/defaultAccess.js'\nimport { buildFolderField } from './buildFolderField.js'\nimport { deleteSubfoldersBeforeDelete } from './hooks/deleteSubfoldersAfterDelete.js'\nimport { dissasociateAfterDelete } from './hooks/dissasociateAfterDelete.js'\nimport { ensureSafeCollectionsChange } from './hooks/ensureSafeCollectionsChange.js'\nimport { reparentChildFolder } from './hooks/reparentChildFolder.js'\n\ntype CreateFolderCollectionArgs = {\n  collectionSpecific: boolean\n  debug?: boolean\n  folderEnabledCollections: CollectionConfig[]\n  folderFieldName: string\n  slug: string\n}\nexport const createFolderCollection = ({\n  slug,\n  collectionSpecific,\n  debug,\n  folderEnabledCollections,\n  folderFieldName,\n}: CreateFolderCollectionArgs): CollectionConfig => {\n  const { collectionOptions, collectionSlugs } = folderEnabledCollections.reduce(\n    (acc, collection: CollectionConfig) => {\n      acc.collectionSlugs.push(collection.slug)\n      acc.collectionOptions.push({\n        label: collection.labels?.plural || collection.slug,\n        value: collection.slug,\n      })\n\n      return acc\n    },\n    {\n      collectionOptions: [] as Option[],\n      collectionSlugs: [] as string[],\n    },\n  )\n\n  return {\n    slug,\n    access: {\n      create: defaultAccess,\n      delete: defaultAccess,\n      read: defaultAccess,\n      readVersions: defaultAccess,\n      update: defaultAccess,\n    },\n    admin: {\n      hidden: !debug,\n      useAsTitle: 'name',\n    },\n    fields: [\n      {\n        name: 'name',\n        type: 'text',\n        index: true,\n        required: true,\n      },\n      buildFolderField({\n        collectionSpecific,\n        folderFieldName,\n        folderSlug: slug,\n        overrides: {\n          admin: {\n            hidden: !debug,\n          },\n        },\n      }),\n      {\n        name: 'documentsAndFolders',\n        type: 'join',\n        admin: {\n          hidden: !debug,\n        },\n        collection: [slug, ...collectionSlugs],\n        hasMany: true,\n        on: folderFieldName,\n      },\n      ...(collectionSpecific\n        ? [\n            {\n              name: 'folderType',\n              type: 'select',\n              admin: {\n                components: {\n                  Field: {\n                    clientProps: {\n                      options: collectionOptions,\n                    },\n                    path: '@payloadcms/ui#FolderTypeField',\n                  },\n                },\n                position: 'sidebar',\n              },\n              hasMany: true,\n              options: collectionOptions,\n            } satisfies SelectField,\n          ]\n        : ([] as Field[])),\n    ],\n    hooks: {\n      afterChange: [\n        reparentChildFolder({\n          folderFieldName,\n        }),\n      ],\n      afterDelete: [\n        dissasociateAfterDelete({\n          collectionSlugs,\n          folderFieldName,\n        }),\n      ],\n      beforeDelete: [deleteSubfoldersBeforeDelete({ folderFieldName, folderSlug: slug })],\n      beforeValidate: [\n        ...(collectionSpecific ? [ensureSafeCollectionsChange({ foldersSlug: slug })] : []),\n      ],\n    },\n    labels: {\n      plural: 'Folders',\n      singular: 'Folder',\n    },\n    typescript: {\n      interface: 'FolderInterface',\n    },\n  }\n}\n"],"names":["defaultAccess","buildFolderField","deleteSubfoldersBeforeDelete","dissasociateAfterDelete","ensureSafeCollectionsChange","reparentChildFolder","createFolderCollection","slug","collectionSpecific","debug","folderEnabledCollections","folderFieldName","collectionOptions","collectionSlugs","reduce","acc","collection","push","label","labels","plural","value","access","create","delete","read","readVersions","update","admin","hidden","useAsTitle","fields","name","type","index","required","folderSlug","overrides","hasMany","on","components","Field","clientProps","options","path","position","hooks","afterChange","afterDelete","beforeDelete","beforeValidate","foldersSlug","singular","typescript","interface"],"mappings":";;;;AAGA,SAASA,aAAa,QAAQ,2BAA0B;AACxD,SAASC,gBAAgB,QAAQ,wBAAuB;AACxD,SAASC,4BAA4B,QAAQ,yCAAwC;AACrF,SAASC,uBAAuB,QAAQ,qCAAoC;AAC5E,SAASC,2BAA2B,QAAQ,yCAAwC;AACpF,SAASC,mBAAmB,QAAQ,iCAAgC;;;;;;;AAS7D,MAAMC,yBAAyB,CAAC,EACrCC,IAAI,EACJC,kBAAkB,EAClBC,KAAK,EACLC,wBAAwB,EACxBC,eAAe,EACY;IAC3B,MAAM,EAAEC,iBAAiB,EAAEC,eAAe,EAAE,GAAGH,yBAAyBI,MAAM,CAC5E,CAACC,KAAKC;QACJD,IAAIF,eAAe,CAACI,IAAI,CAACD,WAAWT,IAAI;QACxCQ,IAAIH,iBAAiB,CAACK,IAAI,CAAC;YACzBC,OAAOF,WAAWG,MAAM,EAAEC,UAAUJ,WAAWT,IAAI;YACnDc,OAAOL,WAAWT,IAAI;QACxB;QAEA,OAAOQ;IACT,GACA;QACEH,mBAAmB,EAAE;QACrBC,iBAAiB,EAAE;IACrB;IAGF,OAAO;QACLN;QACAe,QAAQ;YACNC,QAAQvB,iRAAAA;YACRwB,QAAQxB,iRAAAA;YACRyB,MAAMzB,iRAAAA;YACN0B,cAAc1B,iRAAAA;YACd2B,QAAQ3B,iRAAAA;QACV;QACA4B,OAAO;YACLC,QAAQ,CAACpB;YACTqB,YAAY;QACd;QACAC,QAAQ;YACN;gBACEC,MAAM;gBACNC,MAAM;gBACNC,OAAO;gBACPC,UAAU;YACZ;gBACAlC,0RAAAA,EAAiB;gBACfO;gBACAG;gBACAyB,YAAY7B;gBACZ8B,WAAW;oBACTT,OAAO;wBACLC,QAAQ,CAACpB;oBACX;gBACF;YACF;YACA;gBACEuB,MAAM;gBACNC,MAAM;gBACNL,OAAO;oBACLC,QAAQ,CAACpB;gBACX;gBACAO,YAAY;oBAACT;uBAASM;iBAAgB;gBACtCyB,SAAS;gBACTC,IAAI5B;YACN;eACIH,qBACA;gBACE;oBACEwB,MAAM;oBACNC,MAAM;oBACNL,OAAO;wBACLY,YAAY;4BACVC,OAAO;gCACLC,aAAa;oCACXC,SAAS/B;gCACX;gCACAgC,MAAM;4BACR;wBACF;wBACAC,UAAU;oBACZ;oBACAP,SAAS;oBACTK,SAAS/B;gBACX;aACD,GACA,EAAE;SACR;QACDkC,OAAO;YACLC,aAAa;oBACX1C,ySAAAA,EAAoB;oBAClBM;gBACF;aACD;YACDqC,aAAa;oBACX7C,iTAAAA,EAAwB;oBACtBU;oBACAF;gBACF;aACD;YACDsC,cAAc;oBAAC/C,0TAAAA,EAA6B;oBAAES;oBAAiByB,YAAY7B;gBAAK;aAAG;YACnF2C,gBAAgB;mBACV1C,qBAAqB;wBAACJ,yTAAAA,EAA4B;wBAAE+C,aAAa5C;oBAAK;iBAAG,GAAG,EAAE;aACnF;QACH;QACAY,QAAQ;YACNC,QAAQ;YACRgC,UAAU;QACZ;QACAC,YAAY;YACVC,WAAW;QACb;IACF;AACF,EAAC"}},
    {"offset": {"line": 3816, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/folders/addFolderCollection.ts"],"sourcesContent":["import type { Config, SanitizedConfig } from '../config/types.js'\nimport type { CollectionConfig } from '../index.js'\n\nimport { sanitizeCollection } from '../collections/config/sanitize.js'\nimport { createFolderCollection } from './createFolderCollection.js'\n\nexport async function addFolderCollection({\n  collectionSpecific,\n  config,\n  folderEnabledCollections,\n  richTextSanitizationPromises = [],\n  validRelationships = [],\n}: {\n  collectionSpecific: boolean\n  config: NonNullable<Config>\n  folderEnabledCollections: CollectionConfig[]\n  richTextSanitizationPromises?: Array<(config: SanitizedConfig) => Promise<void>>\n  validRelationships?: string[]\n}): Promise<void> {\n  if (config.folders === false) {\n    return\n  }\n\n  let folderCollectionConfig = createFolderCollection({\n    slug: config.folders!.slug as string,\n    collectionSpecific,\n    debug: config.folders!.debug,\n    folderEnabledCollections,\n    folderFieldName: config.folders!.fieldName as string,\n  })\n\n  const collectionIndex = config.collections!.push(folderCollectionConfig)\n\n  if (\n    Array.isArray(config.folders?.collectionOverrides) &&\n    config?.folders.collectionOverrides.length\n  ) {\n    for (const override of config.folders.collectionOverrides) {\n      folderCollectionConfig = await override({ collection: folderCollectionConfig })\n    }\n  }\n\n  const sanitizedCollectionWithOverrides = await sanitizeCollection(\n    config as unknown as Config,\n    folderCollectionConfig,\n    richTextSanitizationPromises,\n    validRelationships,\n  )\n\n  config.collections![collectionIndex - 1] = sanitizedCollectionWithOverrides\n}\n"],"names":["sanitizeCollection","createFolderCollection","addFolderCollection","collectionSpecific","config","folderEnabledCollections","richTextSanitizationPromises","validRelationships","folders","folderCollectionConfig","slug","debug","folderFieldName","fieldName","collectionIndex","collections","push","Array","isArray","collectionOverrides","length","override","collection","sanitizedCollectionWithOverrides"],"mappings":";;;;AAGA,SAASA,kBAAkB,QAAQ,oCAAmC;AACtE,SAASC,sBAAsB,QAAQ,8BAA6B;;;AAE7D,eAAeC,oBAAoB,EACxCC,kBAAkB,EAClBC,MAAM,EACNC,wBAAwB,EACxBC,+BAA+B,EAAE,EACjCC,qBAAqB,EAAE,EAOxB;IACC,IAAIH,OAAOI,OAAO,KAAK,OAAO;QAC5B;IACF;IAEA,IAAIC,6BAAyBR,sSAAAA,EAAuB;QAClDS,MAAMN,OAAOI,OAAO,CAAEE,IAAI;QAC1BP;QACAQ,OAAOP,OAAOI,OAAO,CAAEG,KAAK;QAC5BN;QACAO,iBAAiBR,OAAOI,OAAO,CAAEK,SAAS;IAC5C;IAEA,MAAMC,kBAAkBV,OAAOW,WAAW,CAAEC,IAAI,CAACP;IAEjD,IACEQ,MAAMC,OAAO,CAACd,OAAOI,OAAO,EAAEW,wBAC9Bf,QAAQI,QAAQW,oBAAoBC,QACpC;QACA,KAAK,MAAMC,YAAYjB,OAAOI,OAAO,CAACW,mBAAmB,CAAE;YACzDV,yBAAyB,MAAMY,SAAS;gBAAEC,YAAYb;YAAuB;QAC/E;IACF;IAEA,MAAMc,mCAAmC,UAAMvB,kSAAAA,EAC7CI,QACAK,wBACAH,8BACAC;IAGFH,OAAOW,WAAY,CAACD,kBAAkB,EAAE,GAAGS;AAC7C"}},
    {"offset": {"line": 3850, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/folders/addFolderFieldToCollection.ts"],"sourcesContent":["import type { SanitizedCollectionConfig } from '../index.js'\n\nimport { buildFolderField } from './buildFolderField.js'\n\nexport const addFolderFieldToCollection = ({\n  collection,\n  collectionSpecific,\n  folderFieldName,\n  folderSlug,\n}: {\n  collection: SanitizedCollectionConfig\n  collectionSpecific: boolean\n  folderFieldName: string\n  folderSlug: string\n}): void => {\n  collection.fields.push(\n    buildFolderField({\n      collectionSpecific,\n      folderFieldName,\n      folderSlug,\n      overrides: {\n        admin: {\n          allowCreate: false,\n          allowEdit: false,\n          components: {\n            Cell: '@payloadcms/ui/rsc#FolderTableCell',\n            Field: '@payloadcms/ui/rsc#FolderField',\n          },\n        },\n      },\n    }),\n  )\n}\n"],"names":["buildFolderField","addFolderFieldToCollection","collection","collectionSpecific","folderFieldName","folderSlug","fields","push","overrides","admin","allowCreate","allowEdit","components","Cell","Field"],"mappings":";;;;AAEA,SAASA,gBAAgB,QAAQ,wBAAuB;;AAEjD,MAAMC,6BAA6B,CAAC,EACzCC,UAAU,EACVC,kBAAkB,EAClBC,eAAe,EACfC,UAAU,EAMX;IACCH,WAAWI,MAAM,CAACC,IAAI,KACpBP,0RAAAA,EAAiB;QACfG;QACAC;QACAC;QACAG,WAAW;YACTC,OAAO;gBACLC,aAAa;gBACbC,WAAW;gBACXC,YAAY;oBACVC,MAAM;oBACNC,OAAO;gBACT;YACF;QACF;IACF;AAEJ,EAAC"}},
    {"offset": {"line": 3877, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/folders/constants.ts"],"sourcesContent":["export const foldersSlug = 'payload-folders'\nexport const parentFolderFieldName = 'folder'\n"],"names":["foldersSlug","parentFolderFieldName"],"mappings":";;;;;;AAAO,MAAMA,cAAc,kBAAiB;AACrC,MAAMC,wBAAwB,SAAQ"}},
    {"offset": {"line": 3889, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/query-presets/access.ts"],"sourcesContent":["import type { Access, Config } from '../config/types.js'\nimport type { Operation } from '../types/index.js'\n\nimport { defaultAccess } from '../auth/defaultAccess.js'\n\nconst operations: Operation[] = ['delete', 'read', 'update', 'create'] as const\n\nconst defaultCollectionAccess = {\n  create: defaultAccess,\n  delete: defaultAccess,\n  read: defaultAccess,\n  unlock: defaultAccess,\n  update: defaultAccess,\n}\n\nexport const getAccess = (config: Config): Record<Operation, Access> =>\n  operations.reduce(\n    (acc, operation) => {\n      acc[operation] = async (args) => {\n        const { req } = args\n\n        const collectionAccess = config?.queryPresets?.access?.[operation]\n          ? await config.queryPresets.access[operation](args)\n          : defaultCollectionAccess?.[operation]\n            ? defaultCollectionAccess[operation](args)\n            : true\n\n        // If collection-level access control is `false`, no need to continue to document-level access\n        if (collectionAccess === false) {\n          return false\n        }\n\n        // The `create` operation does not affect the document-level access control\n        if (operation === 'create') {\n          return collectionAccess\n        }\n\n        return {\n          and: [\n            {\n              or: [\n                // Default access control ensures a user exists, but custom access control may not\n                ...(req?.user\n                  ? [\n                      {\n                        and: [\n                          {\n                            [`access.${operation}.users`]: {\n                              in: [req.user.id],\n                            },\n                          },\n                          {\n                            [`access.${operation}.constraint`]: {\n                              in: ['onlyMe', 'specificUsers'],\n                            },\n                          },\n                        ],\n                      },\n                    ]\n                  : []),\n                {\n                  [`access.${operation}.constraint`]: {\n                    equals: 'everyone',\n                  },\n                },\n                ...(await Promise.all(\n                  (config?.queryPresets?.constraints?.[operation] || []).map(async (constraint) => {\n                    const constraintAccess = constraint.access\n                      ? await constraint.access(args)\n                      : undefined\n\n                    return {\n                      and: [\n                        ...(typeof constraintAccess === 'object'\n                          ? [constraintAccess]\n                          : constraintAccess === false\n                            ? [\n                                {\n                                  id: {\n                                    equals: null,\n                                  },\n                                },\n                              ]\n                            : []),\n                        {\n                          [`access.${operation}.constraint`]: {\n                            equals: constraint.value,\n                          },\n                        },\n                      ],\n                    }\n                  }),\n                )),\n              ],\n            },\n            ...(typeof collectionAccess === 'object' ? [collectionAccess] : []),\n          ],\n        }\n      }\n\n      return acc\n    },\n    {} as Record<Operation, Access>,\n  )\n"],"names":["defaultAccess","operations","defaultCollectionAccess","create","delete","read","unlock","update","getAccess","config","reduce","acc","operation","args","req","collectionAccess","queryPresets","access","and","or","user","in","id","equals","Promise","all","constraints","map","constraint","constraintAccess","undefined","value"],"mappings":";;;;AAGA,SAASA,aAAa,QAAQ,2BAA0B;;AAExD,MAAMC,aAA0B;IAAC;IAAU;IAAQ;IAAU;CAAS;AAEtE,MAAMC,0BAA0B;IAC9BC,QAAQH,iRAAAA;IACRI,QAAQJ,iRAAAA;IACRK,MAAML,iRAAAA;IACNM,QAAQN,iRAAAA;IACRO,QAAQP,iRAAAA;AACV;AAEO,MAAMQ,YAAY,CAACC,SACxBR,WAAWS,MAAM,CACf,CAACC,KAAKC;QACJD,GAAG,CAACC,UAAU,GAAG,OAAOC;YACtB,MAAM,EAAEC,GAAG,EAAE,GAAGD;YAEhB,MAAME,mBAAmBN,QAAQO,cAAcC,QAAQ,CAACL,UAAU,GAC9D,MAAMH,OAAOO,YAAY,CAACC,MAAM,CAACL,UAAU,CAACC,QAC5CX,yBAAyB,CAACU,UAAU,GAClCV,uBAAuB,CAACU,UAAU,CAACC,QACnC;YAEN,8FAA8F;YAC9F,IAAIE,qBAAqB,OAAO;gBAC9B,OAAO;YACT;YAEA,2EAA2E;YAC3E,IAAIH,cAAc,UAAU;gBAC1B,OAAOG;YACT;YAEA,OAAO;gBACLG,KAAK;oBACH;wBACEC,IAAI;4BACF,kFAAkF;+BAC9EL,KAAKM,OACL;gCACE;oCACEF,KAAK;wCACH;4CACE,CAAC,CAAC,OAAO,EAAEN,UAAU,MAAM,CAAC,CAAC,EAAE;gDAC7BS,IAAI;oDAACP,IAAIM,IAAI,CAACE,EAAE;iDAAC;4CACnB;wCACF;wCACA;4CACE,CAAC,CAAC,OAAO,EAAEV,UAAU,WAAW,CAAC,CAAC,EAAE;gDAClCS,IAAI;oDAAC;oDAAU;iDAAgB;4CACjC;wCACF;qCACD;gCACH;6BACD,GACD,EAAE;4BACN;gCACE,CAAC,CAAC,OAAO,EAAET,UAAU,WAAW,CAAC,CAAC,EAAE;oCAClCW,QAAQ;gCACV;4BACF;+BACI,MAAMC,QAAQC,GAAG,CAClBhB,CAAAA,QAAQO,cAAcU,aAAa,CAACd,UAAU,IAAI,EAAC,EAAGe,GAAG,CAAC,OAAOC;gCAChE,MAAMC,mBAAmBD,WAAWX,MAAM,GACtC,MAAMW,WAAWX,MAAM,CAACJ,QACxBiB;gCAEJ,OAAO;oCACLZ,KAAK;2CACC,OAAOW,qBAAqB,WAC5B;4CAACA;yCAAiB,GAClBA,qBAAqB,QACnB;4CACE;gDACEP,IAAI;oDACFC,QAAQ;gDACV;4CACF;yCACD,GACD,EAAE;wCACR;4CACE,CAAC,CAAC,OAAO,EAAEX,UAAU,WAAW,CAAC,CAAC,EAAE;gDAClCW,QAAQK,WAAWG,KAAK;4CAC1B;wCACF;qCACD;gCACH;4BACF;yBAEH;oBACH;uBACI,OAAOhB,qBAAqB,WAAW;wBAACA;qBAAiB,GAAG,EAAE;iBACnE;YACH;QACF;QAEA,OAAOJ;IACT,GACA,CAAC,GACF"}},
    {"offset": {"line": 3986, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/query-presets/preventLockout.ts"],"sourcesContent":["import type { Validate } from '../fields/config/types.js'\n\nimport { APIError } from '../errors/APIError.js'\nimport { createLocalReq } from '../utilities/createLocalReq.js'\nimport { initTransaction } from '../utilities/initTransaction.js'\nimport { killTransaction } from '../utilities/killTransaction.js'\nimport { queryPresetsCollectionSlug } from './config.js'\n\n/**\n * Prevents \"accidental lockouts\" where a user makes an update that removes their own access to the preset.\n * This is effectively an access control function proxied through a `validate` function.\n * How it works:\n *   1. Creates a temporary record with the incoming data\n *   2. Attempts to read and update that record with the incoming user\n *   3. If either of those fail, throws an error to the user\n *   4. Once finished, prevents the temp record from persisting to the database\n */\nexport const preventLockout: Validate = async (\n  value,\n  { data, overrideAccess, req: incomingReq },\n) => {\n  // Use context to ensure an infinite loop doesn't occur\n  if (!incomingReq.context._preventLockout && !overrideAccess) {\n    const req = await createLocalReq(\n      {\n        context: {\n          _preventLockout: true,\n        },\n        req: {\n          user: incomingReq.user,\n        },\n      },\n      incomingReq.payload,\n    )\n\n    // Might be `null` if no transactions are enabled\n    const transaction = await initTransaction(req)\n\n    // create a temp record to validate the constraints, using the req\n    const tempPreset = await req.payload.create({\n      collection: queryPresetsCollectionSlug,\n      data: {\n        ...data,\n        isTemp: true,\n      },\n      req,\n    })\n\n    let canUpdate = false\n    let canRead = false\n\n    try {\n      await req.payload.findByID({\n        id: tempPreset.id,\n        collection: queryPresetsCollectionSlug,\n        overrideAccess: false,\n        req,\n        user: req.user,\n      })\n\n      canRead = true\n\n      await req.payload.update({\n        id: tempPreset.id,\n        collection: queryPresetsCollectionSlug,\n        data: tempPreset,\n        overrideAccess: false,\n        req,\n        user: req.user,\n      })\n\n      canUpdate = true\n    } catch (_err) {\n      if (!canRead || !canUpdate) {\n        throw new APIError('This action will lock you out of this preset.', 403, {}, true)\n      }\n    } finally {\n      if (transaction) {\n        await killTransaction(req)\n      } else {\n        // delete the temp record\n        await req.payload.delete({\n          id: tempPreset.id,\n          collection: queryPresetsCollectionSlug,\n          req,\n        })\n      }\n    }\n  }\n\n  return true as unknown as true\n}\n"],"names":["APIError","createLocalReq","initTransaction","killTransaction","queryPresetsCollectionSlug","preventLockout","value","data","overrideAccess","req","incomingReq","context","_preventLockout","user","payload","transaction","tempPreset","create","collection","isTemp","canUpdate","canRead","findByID","id","update","_err","delete"],"mappings":";;;;AAEA,SAASA,QAAQ,QAAQ,wBAAuB;AAChD,SAASC,cAAc,QAAQ,iCAAgC;AAC/D,SAASC,eAAe,QAAQ,kCAAiC;AACjE,SAASC,eAAe,QAAQ,kCAAiC;AACjE,SAASC,0BAA0B,QAAQ,cAAa;;;;;;AAWjD,MAAMC,iBAA2B,OACtCC,OACA,EAAEC,IAAI,EAAEC,cAAc,EAAEC,KAAKC,WAAW,EAAE;IAE1C,uDAAuD;IACvD,IAAI,CAACA,YAAYC,OAAO,CAACC,eAAe,IAAI,CAACJ,gBAAgB;QAC3D,MAAMC,MAAM,UAAMR,wRAAAA,EAChB;YACEU,SAAS;gBACPC,iBAAiB;YACnB;YACAH,KAAK;gBACHI,MAAMH,YAAYG,IAAI;YACxB;QACF,GACAH,YAAYI,OAAO;QAGrB,iDAAiD;QACjD,MAAMC,cAAc,UAAMb,0RAAAA,EAAgBO;QAE1C,kEAAkE;QAClE,MAAMO,aAAa,MAAMP,IAAIK,OAAO,CAACG,MAAM,CAAC;YAC1CC,YAAYd,mSAAAA;YACZG,MAAM;gBACJ,GAAGA,IAAI;gBACPY,QAAQ;YACV;YACAV;QACF;QAEA,IAAIW,YAAY;QAChB,IAAIC,UAAU;QAEd,IAAI;YACF,MAAMZ,IAAIK,OAAO,CAACQ,QAAQ,CAAC;gBACzBC,IAAIP,WAAWO,EAAE;gBACjBL,YAAYd,mSAAAA;gBACZI,gBAAgB;gBAChBC;gBACAI,MAAMJ,IAAII,IAAI;YAChB;YAEAQ,UAAU;YAEV,MAAMZ,IAAIK,OAAO,CAACU,MAAM,CAAC;gBACvBD,IAAIP,WAAWO,EAAE;gBACjBL,YAAYd,mSAAAA;gBACZG,MAAMS;gBACNR,gBAAgB;gBAChBC;gBACAI,MAAMJ,IAAII,IAAI;YAChB;YAEAO,YAAY;QACd,EAAE,OAAOK,MAAM;YACb,IAAI,CAACJ,WAAW,CAACD,WAAW;gBAC1B,MAAM,IAAIpB,yQAAAA,CAAS,iDAAiD,KAAK,CAAC,GAAG;YAC/E;QACF,SAAU;YACR,IAAIe,aAAa;gBACf,UAAMZ,0RAAAA,EAAgBM;YACxB,OAAO;gBACL,yBAAyB;gBACzB,MAAMA,IAAIK,OAAO,CAACY,MAAM,CAAC;oBACvBH,IAAIP,WAAWO,EAAE;oBACjBL,YAAYd,mSAAAA;oBACZK;gBACF;YACF;QACF;IACF;IAEA,OAAO;AACT,EAAC"}},
    {"offset": {"line": 4065, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/query-presets/types.ts"],"sourcesContent":["import type { Field } from '../fields/config/types.js'\nimport type { Access, CollectionSlug } from '../index.js'\nimport type { CollectionPreferences } from '../preferences/types.js'\nimport type { Where } from '../types/index.js'\n\n// Note: order matters here as it will change the rendered order in the UI\nexport const operations = ['read', 'update', 'delete'] as const\n\nexport type ConstraintOperation = (typeof operations)[number]\n\nexport type DefaultConstraint = 'everyone' | 'onlyMe' | 'specificUsers'\n\nexport type Constraint = DefaultConstraint | string // TODO: type `string` as the custom constraints provided by the config\n\nexport type QueryPreset = {\n  access: {\n    [operation in ConstraintOperation]: {\n      constraint: DefaultConstraint\n      users?: string[]\n    }\n  }\n  columns: CollectionPreferences['columns']\n  id: number | string\n  isShared: boolean\n  relatedCollection: CollectionSlug\n  title: string\n  where: Where\n}\n\nexport type QueryPresetConstraint = {\n  access: Access<QueryPreset>\n  fields?: Field[]\n  label: string\n  value: string\n}\n\nexport type QueryPresetConstraints = QueryPresetConstraint[]\n"],"names":["operations"],"mappings":"AAKA,0EAA0E;;;;;AACnE,MAAMA,aAAa;IAAC;IAAQ;IAAU;CAAS,CAAS"}},
    {"offset": {"line": 4079, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/query-presets/constraints.ts"],"sourcesContent":["import { getTranslation } from '@payloadcms/translations'\n\nimport type { Config } from '../config/types.js'\nimport type { Field, Option } from '../fields/config/types.js'\nimport type { QueryPresetConstraint } from './types.js'\n\nimport { fieldAffectsData } from '../fields/config/types.js'\nimport { toWords } from '../utilities/formatLabels.js'\nimport { preventLockout } from './preventLockout.js'\nimport { operations } from './types.js'\n\nconst defaultConstraintOptions: Option[] = [\n  {\n    label: 'Everyone',\n    value: 'everyone',\n  },\n  {\n    label: 'Only Me',\n    value: 'onlyMe',\n  },\n  {\n    label: 'Specific Users',\n    value: 'specificUsers',\n  },\n]\n\nexport const getConstraints = (config: Config): Field => ({\n  name: 'access',\n  type: 'group',\n  admin: {\n    components: {\n      Cell: '@payloadcms/ui#QueryPresetsAccessCell',\n    },\n    condition: (data) => Boolean(data?.isShared),\n  },\n  fields: operations.map((constraintOperation) => ({\n    type: 'collapsible',\n    fields: [\n      {\n        name: constraintOperation,\n        type: 'group',\n        admin: {\n          hideGutter: true,\n        },\n        fields: [\n          {\n            name: 'constraint',\n            type: 'select',\n            defaultValue: 'onlyMe',\n            filterOptions: (args) =>\n              typeof config?.queryPresets?.filterConstraints === 'function'\n                ? config.queryPresets.filterConstraints(args)\n                : args.options,\n            label: ({ i18n }) =>\n              `Specify who can ${constraintOperation} this ${getTranslation(config.queryPresets?.labels?.singular || 'Preset', i18n)}`,\n            options: [\n              ...defaultConstraintOptions,\n              ...(config?.queryPresets?.constraints?.[constraintOperation]?.map(\n                (option: QueryPresetConstraint) => ({\n                  label: option.label,\n                  value: option.value,\n                }),\n              ) || []),\n            ],\n          },\n          {\n            name: 'users',\n            type: 'relationship',\n            admin: {\n              condition: (data) =>\n                Boolean(data?.access?.[constraintOperation]?.constraint === 'specificUsers'),\n            },\n            hasMany: true,\n            hooks: {\n              beforeChange: [\n                ({ data, req }) => {\n                  if (data?.access?.[constraintOperation]?.constraint === 'onlyMe' && req.user) {\n                    return [req.user.id]\n                  }\n\n                  if (\n                    data?.access?.[constraintOperation]?.constraint === 'specificUsers' &&\n                    req.user\n                  ) {\n                    return [...(data?.access?.[constraintOperation]?.users || []), req.user.id]\n                  }\n                },\n              ],\n            },\n            relationTo: config.admin?.user ?? 'users', // TODO: remove this fallback when the args are properly typed as `SanitizedConfig`\n          },\n          ...(config?.queryPresets?.constraints?.[constraintOperation]?.reduce(\n            (acc: Field[], option: QueryPresetConstraint) => {\n              option.fields?.forEach((field, index) => {\n                acc.push({ ...field })\n\n                if (fieldAffectsData(field)) {\n                  acc[index]!.admin = {\n                    ...(acc[index]?.admin || {}),\n                    condition: (data) =>\n                      Boolean(data?.access?.[constraintOperation]?.constraint === option.value),\n                  }\n                }\n              })\n\n              return acc\n            },\n            [] as Field[],\n          ) || []),\n        ],\n        label: false,\n      },\n    ],\n    label: () => toWords(constraintOperation),\n  })),\n  label: 'Sharing settings',\n  validate: preventLockout,\n})\n"],"names":["getTranslation","fieldAffectsData","toWords","preventLockout","operations","defaultConstraintOptions","label","value","getConstraints","config","name","type","admin","components","Cell","condition","data","Boolean","isShared","fields","map","constraintOperation","hideGutter","defaultValue","filterOptions","args","queryPresets","filterConstraints","options","i18n","labels","singular","constraints","option","access","constraint","hasMany","hooks","beforeChange","req","user","id","users","relationTo","reduce","acc","forEach","field","index","push","validate"],"mappings":";;;;AAAA,SAASA,cAAc,QAAQ,2BAA0B;AAMzD,SAASC,gBAAgB,QAAQ,4BAA2B;AAC5D,SAASC,OAAO,QAAQ,+BAA8B;AACtD,SAASC,cAAc,QAAQ,sBAAqB;AACpD,SAASC,UAAU,QAAQ,aAAY;;;;;;AAEvC,MAAMC,2BAAqC;IACzC;QACEC,OAAO;QACPC,OAAO;IACT;IACA;QACED,OAAO;QACPC,OAAO;IACT;IACA;QACED,OAAO;QACPC,OAAO;IACT;CACD;AAEM,MAAMC,iBAAiB,CAACC,SAA2B,CAAA;QACxDC,MAAM;QACNC,MAAM;QACNC,OAAO;YACLC,YAAY;gBACVC,MAAM;YACR;YACAC,WAAW,CAACC,OAASC,QAAQD,MAAME;QACrC;QACAC,QAAQf,kRAAAA,CAAWgB,GAAG,CAAC,CAACC,sBAAyB,CAAA;gBAC/CV,MAAM;gBACNQ,QAAQ;oBACN;wBACET,MAAMW;wBACNV,MAAM;wBACNC,OAAO;4BACLU,YAAY;wBACd;wBACAH,QAAQ;4BACN;gCACET,MAAM;gCACNC,MAAM;gCACNY,cAAc;gCACdC,eAAe,CAACC,OACd,OAAOhB,QAAQiB,cAAcC,sBAAsB,aAC/ClB,OAAOiB,YAAY,CAACC,iBAAiB,CAACF,QACtCA,KAAKG,OAAO;gCAClBtB,OAAO,CAAC,EAAEuB,IAAI,EAAE,GACd,CAAC,gBAAgB,EAAER,oBAAoB,MAAM,MAAErB,+QAAAA,EAAeS,OAAOiB,YAAY,EAAEI,QAAQC,YAAY,UAAUF,OAAO;gCAC1HD,SAAS;uCACJvB;uCACCI,QAAQiB,cAAcM,aAAa,CAACX,oBAAoB,EAAED,IAC5D,CAACa,SAAmC,CAAA;4CAClC3B,OAAO2B,OAAO3B,KAAK;4CACnBC,OAAO0B,OAAO1B,KAAK;wCACrB,CAAA,MACG,EAAE;iCACR;4BACH;4BACA;gCACEG,MAAM;gCACNC,MAAM;gCACNC,OAAO;oCACLG,WAAW,CAACC,OACVC,QAAQD,MAAMkB,QAAQ,CAACb,oBAAoB,EAAEc,eAAe;gCAChE;gCACAC,SAAS;gCACTC,OAAO;oCACLC,cAAc;wCACZ,CAAC,EAAEtB,IAAI,EAAEuB,GAAG,EAAE;4CACZ,IAAIvB,MAAMkB,QAAQ,CAACb,oBAAoB,EAAEc,eAAe,YAAYI,IAAIC,IAAI,EAAE;gDAC5E,OAAO;oDAACD,IAAIC,IAAI,CAACC,EAAE;iDAAC;4CACtB;4CAEA,IACEzB,MAAMkB,QAAQ,CAACb,oBAAoB,EAAEc,eAAe,mBACpDI,IAAIC,IAAI,EACR;gDACA,OAAO;uDAAKxB,MAAMkB,QAAQ,CAACb,oBAAoB,EAAEqB,SAAS,EAAE;oDAAGH,IAAIC,IAAI,CAACC,EAAE;iDAAC;4CAC7E;wCACF;qCACD;gCACH;gCACAE,YAAYlC,OAAOG,KAAK,EAAE4B,QAAQ;4BACpC;+BACI/B,QAAQiB,cAAcM,aAAa,CAACX,oBAAoB,EAAEuB,OAC5D,CAACC,KAAcZ;gCACbA,OAAOd,MAAM,EAAE2B,QAAQ,CAACC,OAAOC;oCAC7BH,IAAII,IAAI,CAAC;wCAAE,GAAGF,KAAK;oCAAC;oCAEpB,QAAI9C,wRAAAA,EAAiB8C,QAAQ;wCAC3BF,GAAG,CAACG,MAAM,CAAEpC,KAAK,GAAG;4CAClB,GAAIiC,GAAG,CAACG,MAAM,EAAEpC,SAAS,CAAC,CAAC;4CAC3BG,WAAW,CAACC,OACVC,QAAQD,MAAMkB,QAAQ,CAACb,oBAAoB,EAAEc,eAAeF,OAAO1B,KAAK;wCAC5E;oCACF;gCACF;gCAEA,OAAOsC;4BACT,GACA,EAAE,KACC,EAAE;yBACR;wBACDvC,OAAO;oBACT;iBACD;gBACDA,OAAO,QAAMJ,+QAAAA,EAAQmB;YACvB,CAAA;QACAf,OAAO;QACP4C,UAAU/C,+RAAAA;IACZ,CAAA,EAAE"}},
    {"offset": {"line": 4193, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/query-presets/config.ts"],"sourcesContent":["import type { CollectionConfig } from '../collections/config/types.js'\nimport type { Config } from '../config/types.js'\nimport type { Option } from '../fields/config/types.js'\n\nimport { transformWhereQuery } from '../utilities/transformWhereQuery.js'\nimport { validateWhereQuery } from '../utilities/validateWhereQuery.js'\nimport { getAccess } from './access.js'\nimport { getConstraints } from './constraints.js'\nimport { operations, type QueryPreset } from './types.js'\n\nexport const queryPresetsCollectionSlug = 'payload-query-presets'\n\nexport const getQueryPresetsConfig = (config: Config): CollectionConfig => ({\n  slug: queryPresetsCollectionSlug,\n  access: getAccess(config),\n  admin: {\n    defaultColumns: ['title', 'isShared', 'access', 'where', 'columns'],\n    hidden: true,\n    useAsTitle: 'title',\n  },\n  fields: [\n    {\n      name: 'title',\n      type: 'text',\n      required: true,\n    },\n    {\n      name: 'isShared',\n      type: 'checkbox',\n      defaultValue: false,\n      validate: (isShared, { data }) => {\n        const typedData = data as QueryPreset\n\n        // ensure the `isShared` is only true if all constraints are 'onlyMe'\n        if (typedData?.access) {\n          const someOperationsAreShared = Object.values(typedData.access).some(\n            (operation) => operation.constraint !== 'onlyMe',\n          )\n\n          if (!isShared && someOperationsAreShared) {\n            return 'If any constraint is not \"onlyMe\", the preset must be shared'\n          }\n        }\n\n        return true\n      },\n    },\n    getConstraints(config),\n    {\n      name: 'where',\n      type: 'json',\n      admin: {\n        components: {\n          Cell: '@payloadcms/ui#QueryPresetsWhereCell',\n          Field: '@payloadcms/ui#QueryPresetsWhereField',\n        },\n      },\n      hooks: {\n        beforeValidate: [\n          ({ data }) => {\n            // transform the \"where\" query here so that the client-side doesn't have to\n            if (data?.where) {\n              if (validateWhereQuery(data.where)) {\n                return data.where\n              } else {\n                return transformWhereQuery(data.where)\n              }\n            }\n\n            return data?.where\n          },\n        ],\n      },\n      label: 'Filters',\n    },\n    {\n      name: 'columns',\n      type: 'json',\n      admin: {\n        components: {\n          Cell: '@payloadcms/ui#QueryPresetsColumnsCell',\n          Field: '@payloadcms/ui#QueryPresetsColumnField',\n        },\n      },\n      validate: (value) => {\n        if (value) {\n          try {\n            JSON.parse(JSON.stringify(value))\n          } catch {\n            return 'Invalid JSON'\n          }\n        }\n\n        return true\n      },\n    },\n    {\n      name: 'relatedCollection',\n      type: 'select',\n      admin: {\n        hidden: true,\n      },\n      options: config.collections\n        ? config.collections.reduce((acc, collection) => {\n            if (collection.enableQueryPresets) {\n              acc.push({\n                label: collection.labels?.plural || collection.slug,\n                value: collection.slug,\n              })\n            }\n            return acc\n          }, [] as Option[])\n        : [],\n      required: true,\n    },\n    {\n      name: 'isTemp',\n      type: 'checkbox',\n      admin: {\n        description:\n          \"This is a temporary field used to determine if updating the preset would remove the user's access to it. When `true`, this record will be deleted after running the preset's `validate` function.\",\n        disabled: true,\n        hidden: true,\n      },\n    },\n  ],\n  hooks: {\n    beforeValidate: [\n      ({ data, operation }) => {\n        // TODO: type this\n        const typedData = data as any\n\n        if (operation === 'create' || operation === 'update') {\n          // Ensure all operations have a constraint\n          operations.forEach((operation) => {\n            if (!typedData.access) {\n              typedData.access = {}\n            }\n\n            if (!typedData.access?.[operation]) {\n              typedData[operation] = {}\n            }\n\n            // Ensure all operations have a constraint\n            if (!typedData.access[operation]?.constraint) {\n              typedData.access[operation] = {\n                ...typedData.access[operation],\n                constraint: 'onlyMe',\n              }\n            }\n          })\n\n          // If at least one constraint is not `onlyMe` then `isShared` must be true\n          if (typedData?.access) {\n            const someOperationsAreShared = Object.values(typedData.access).some(\n              // TODO: remove the `any` here\n              (operation: any) => operation.constraint !== 'onlyMe',\n            )\n\n            typedData.isShared = someOperationsAreShared\n          }\n        }\n\n        return typedData\n      },\n    ],\n  },\n  labels: {\n    plural: 'Presets',\n    singular: 'Preset',\n    ...(config.queryPresets?.labels || {}),\n  },\n  lockDocuments: false,\n})\n"],"names":["transformWhereQuery","validateWhereQuery","getAccess","getConstraints","operations","queryPresetsCollectionSlug","getQueryPresetsConfig","config","slug","access","admin","defaultColumns","hidden","useAsTitle","fields","name","type","required","defaultValue","validate","isShared","data","typedData","someOperationsAreShared","Object","values","some","operation","constraint","components","Cell","Field","hooks","beforeValidate","where","label","value","JSON","parse","stringify","options","collections","reduce","acc","collection","enableQueryPresets","push","labels","plural","description","disabled","forEach","singular","queryPresets","lockDocuments"],"mappings":"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"}},
    {"offset": {"line": 4363, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/kv/adapters/DatabaseKVAdapter.ts"],"sourcesContent":["import type { CollectionConfig } from '../../index.js'\nimport type { Payload, PayloadRequest } from '../../types/index.js'\nimport type { KVAdapter, KVAdapterResult, KVStoreValue } from '../index.js'\n\n/** Mocked `req`, we don't need to use transactions, neither we want `createLocalReq` overhead. */\nconst req = {} as PayloadRequest\n\nexport class DatabaseKVAdapter implements KVAdapter {\n  constructor(\n    readonly payload: Payload,\n    readonly collectionSlug: string,\n  ) {}\n\n  async clear(): Promise<void> {\n    await this.payload.db.deleteMany({\n      collection: this.collectionSlug,\n      req,\n      where: {},\n    })\n  }\n\n  async delete(key: string): Promise<void> {\n    await this.payload.db.deleteOne({\n      collection: this.collectionSlug,\n      req,\n      where: { key: { equals: key } },\n    })\n  }\n\n  async get<T extends KVStoreValue>(key: string): Promise<null | T> {\n    const doc = await this.payload.db.findOne<{\n      data: T\n      id: number | string\n    }>({\n      collection: this.collectionSlug,\n      joins: false,\n      req,\n      select: {\n        data: true,\n        key: true,\n      },\n      where: { key: { equals: key } },\n    })\n\n    if (doc === null) {\n      return null\n    }\n\n    return doc.data\n  }\n\n  async has(key: string): Promise<boolean> {\n    const { totalDocs } = await this.payload.db.count({\n      collection: this.collectionSlug,\n      req,\n      where: { key: { equals: key } },\n    })\n\n    return totalDocs > 0\n  }\n\n  async keys(): Promise<string[]> {\n    const result = await this.payload.db.find<{ key: string }>({\n      collection: this.collectionSlug,\n      limit: 0,\n      pagination: false,\n      req,\n      select: {\n        key: true,\n      },\n    })\n\n    return result.docs.map((each) => each.key)\n  }\n\n  async set(key: string, data: KVStoreValue): Promise<void> {\n    await this.payload.db.upsert({\n      collection: this.collectionSlug,\n      data: {\n        data,\n        key,\n      },\n      joins: false,\n      req,\n      select: {},\n      where: { key: { equals: key } },\n    })\n  }\n}\n\nexport type DatabaseKVAdapterOptions = {\n  /** Override options for the generated collection */\n  kvCollectionOverrides?: Partial<CollectionConfig>\n}\n\nexport const databaseKVAdapter = (options: DatabaseKVAdapterOptions = {}): KVAdapterResult => {\n  const collectionSlug = options.kvCollectionOverrides?.slug ?? 'payload-kv'\n  return {\n    init: ({ payload }) => new DatabaseKVAdapter(payload, collectionSlug),\n    kvCollection: {\n      slug: collectionSlug,\n      access: {\n        create: () => false,\n        delete: () => false,\n        read: () => false,\n        update: () => false,\n      },\n      admin: {\n        hidden: true,\n      },\n      fields: [\n        {\n          name: 'key',\n          type: 'text',\n          index: true,\n          required: true,\n          unique: true,\n        },\n        {\n          name: 'data',\n          type: 'json',\n          required: true,\n        },\n      ],\n      lockDocuments: false,\n      timestamps: false,\n      ...options.kvCollectionOverrides,\n    },\n  }\n}\n"],"names":["req","DatabaseKVAdapter","constructor","payload","collectionSlug","clear","db","deleteMany","collection","where","delete","key","deleteOne","equals","get","doc","findOne","joins","select","data","has","totalDocs","count","keys","result","find","limit","pagination","docs","map","each","set","upsert","databaseKVAdapter","options","kvCollectionOverrides","slug","init","kvCollection","access","create","read","update","admin","hidden","fields","name","type","index","required","unique","lockDocuments","timestamps"],"mappings":";;;;;;AAIA,gGAAgG,GAChG,MAAMA,MAAM,CAAC;AAEN,MAAMC;;;IACXC,YACWC,OAAgB,EAChBC,cAAsB,CAC/B;aAFSD,OAAAA,GAAAA;aACAC,cAAAA,GAAAA;IACR;IAEH,MAAMC,QAAuB;QAC3B,MAAM,IAAI,CAACF,OAAO,CAACG,EAAE,CAACC,UAAU,CAAC;YAC/BC,YAAY,IAAI,CAACJ,cAAc;YAC/BJ;YACAS,OAAO,CAAC;QACV;IACF;IAEA,MAAMC,OAAOC,GAAW,EAAiB;QACvC,MAAM,IAAI,CAACR,OAAO,CAACG,EAAE,CAACM,SAAS,CAAC;YAC9BJ,YAAY,IAAI,CAACJ,cAAc;YAC/BJ;YACAS,OAAO;gBAAEE,KAAK;oBAAEE,QAAQF;gBAAI;YAAE;QAChC;IACF;IAEA,MAAMG,IAA4BH,GAAW,EAAqB;QAChE,MAAMI,MAAM,MAAM,IAAI,CAACZ,OAAO,CAACG,EAAE,CAACU,OAAO,CAGtC;YACDR,YAAY,IAAI,CAACJ,cAAc;YAC/Ba,OAAO;YACPjB;YACAkB,QAAQ;gBACNC,MAAM;gBACNR,KAAK;YACP;YACAF,OAAO;gBAAEE,KAAK;oBAAEE,QAAQF;gBAAI;YAAE;QAChC;QAEA,IAAII,QAAQ,MAAM;YAChB,OAAO;QACT;QAEA,OAAOA,IAAII,IAAI;IACjB;IAEA,MAAMC,IAAIT,GAAW,EAAoB;QACvC,MAAM,EAAEU,SAAS,EAAE,GAAG,MAAM,IAAI,CAAClB,OAAO,CAACG,EAAE,CAACgB,KAAK,CAAC;YAChDd,YAAY,IAAI,CAACJ,cAAc;YAC/BJ;YACAS,OAAO;gBAAEE,KAAK;oBAAEE,QAAQF;gBAAI;YAAE;QAChC;QAEA,OAAOU,YAAY;IACrB;IAEA,MAAME,OAA0B;QAC9B,MAAMC,SAAS,MAAM,IAAI,CAACrB,OAAO,CAACG,EAAE,CAACmB,IAAI,CAAkB;YACzDjB,YAAY,IAAI,CAACJ,cAAc;YAC/BsB,OAAO;YACPC,YAAY;YACZ3B;YACAkB,QAAQ;gBACNP,KAAK;YACP;QACF;QAEA,OAAOa,OAAOI,IAAI,CAACC,GAAG,CAAC,CAACC,OAASA,KAAKnB,GAAG;IAC3C;IAEA,MAAMoB,IAAIpB,GAAW,EAAEQ,IAAkB,EAAiB;QACxD,MAAM,IAAI,CAAChB,OAAO,CAACG,EAAE,CAAC0B,MAAM,CAAC;YAC3BxB,YAAY,IAAI,CAACJ,cAAc;YAC/Be,MAAM;gBACJA;gBACAR;YACF;YACAM,OAAO;YACPjB;YACAkB,QAAQ,CAAC;YACTT,OAAO;gBAAEE,KAAK;oBAAEE,QAAQF;gBAAI;YAAE;QAChC;IACF;AACF;AAOO,MAAMsB,oBAAoB,CAACC,UAAoC,CAAC,CAAC;IACtE,MAAM9B,iBAAiB8B,QAAQC,qBAAqB,EAAEC,QAAQ;IAC9D,OAAO;QACLC,MAAM,CAAC,EAAElC,OAAO,EAAE,GAAK,IAAIF,kBAAkBE,SAASC;QACtDkC,cAAc;YACZF,MAAMhC;YACNmC,QAAQ;gBACNC,QAAQ,IAAM;gBACd9B,QAAQ,IAAM;gBACd+B,MAAM,IAAM;gBACZC,QAAQ,IAAM;YAChB;YACAC,OAAO;gBACLC,QAAQ;YACV;YACAC,QAAQ;gBACN;oBACEC,MAAM;oBACNC,MAAM;oBACNC,OAAO;oBACPC,UAAU;oBACVC,QAAQ;gBACV;gBACA;oBACEJ,MAAM;oBACNC,MAAM;oBACNE,UAAU;gBACZ;aACD;YACDE,eAAe;YACfC,YAAY;YACZ,GAAGlB,QAAQC,qBAAqB;QAClC;IACF;AACF,EAAC"}},
    {"offset": {"line": 4496, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/config/defaults.ts"],"sourcesContent":["import type { JobsConfig } from '../queues/config/types/index.js'\nimport type { Config } from './types.js'\n\nimport { defaultAccess } from '../auth/defaultAccess.js'\nimport { foldersSlug, parentFolderFieldName } from '../folders/constants.js'\nimport { databaseKVAdapter } from '../kv/adapters/DatabaseKVAdapter.js'\n\n/**\n * @deprecated - remove in 4.0. This is error-prone, as mutating this object will affect any objects that use the defaults as a base.\n */\nexport const defaults: Omit<Config, 'db' | 'editor' | 'secret'> = {\n  admin: {\n    avatar: 'gravatar',\n    components: {},\n    custom: {},\n    dateFormat: 'MMMM do yyyy, h:mm a',\n    dependencies: {},\n    importMap: {\n      baseDir: `${typeof process?.cwd === 'function' ? process.cwd() : ''}`,\n    },\n    meta: {\n      defaultOGImageType: 'dynamic',\n      robots: 'noindex, nofollow',\n      titleSuffix: '- Payload',\n    },\n    routes: {\n      account: '/account',\n      browseByFolder: '/browse-by-folder',\n      createFirstUser: '/create-first-user',\n      forgot: '/forgot',\n      inactivity: '/logout-inactivity',\n      login: '/login',\n      logout: '/logout',\n      reset: '/reset',\n      unauthorized: '/unauthorized',\n    },\n    theme: 'all',\n  },\n  auth: {\n    jwtOrder: ['JWT', 'Bearer', 'cookie'],\n  },\n  bin: [],\n  collections: [],\n  cookiePrefix: 'payload',\n  cors: [],\n  csrf: [],\n  custom: {},\n  defaultDepth: 2,\n  defaultMaxTextLength: 40000,\n  endpoints: [],\n  globals: [],\n  graphQL: {\n    disablePlaygroundInProduction: true,\n    maxComplexity: 1000,\n    schemaOutputFile: `${typeof process?.cwd === 'function' ? process.cwd() : ''}/schema.graphql`,\n  },\n  hooks: {},\n  i18n: {},\n  jobs: {\n    access: {\n      cancel: defaultAccess,\n      queue: defaultAccess,\n      run: defaultAccess,\n    },\n    deleteJobOnComplete: true,\n    depth: 0,\n  } as JobsConfig,\n\n  localization: false,\n  maxDepth: 10,\n  routes: {\n    admin: '/admin',\n    api: '/api',\n    graphQL: '/graphql',\n    graphQLPlayground: '/graphql-playground',\n  },\n  serverURL: '',\n  telemetry: true,\n  typescript: {\n    autoGenerate: true,\n    outputFile: `${typeof process?.cwd === 'function' ? process.cwd() : ''}/payload-types.ts`,\n  },\n  upload: {},\n}\n\nexport const addDefaultsToConfig = (config: Config): Config => {\n  config.admin = {\n    avatar: 'gravatar',\n    components: {},\n    custom: {},\n    dateFormat: 'MMMM do yyyy, h:mm a',\n    dependencies: {},\n    theme: 'all',\n    ...(config.admin || {}),\n    importMap: {\n      baseDir: `${typeof process?.cwd === 'function' ? process.cwd() : ''}`,\n      ...(config?.admin?.importMap || {}),\n    },\n    meta: {\n      defaultOGImageType: 'dynamic',\n      robots: 'noindex, nofollow',\n      titleSuffix: '- Payload',\n      ...(config?.admin?.meta || {}),\n    },\n    routes: {\n      account: '/account',\n      browseByFolder: '/browse-by-folder',\n      createFirstUser: '/create-first-user',\n      forgot: '/forgot',\n      inactivity: '/logout-inactivity',\n      login: '/login',\n      logout: '/logout',\n      reset: '/reset',\n      unauthorized: '/unauthorized',\n      ...(config?.admin?.routes || {}),\n    },\n  }\n\n  config.bin = config.bin ?? []\n  config.collections = config.collections ?? []\n  config.cookiePrefix = config.cookiePrefix ?? 'payload'\n  config.cors = config.cors ?? []\n  config.csrf = config.csrf ?? []\n  config.custom = config.custom ?? {}\n  config.defaultDepth = config.defaultDepth ?? 2\n  config.defaultMaxTextLength = config.defaultMaxTextLength ?? 40000\n  config.endpoints = config.endpoints ?? []\n  config.globals = config.globals ?? []\n  config.graphQL = {\n    disableIntrospectionInProduction: true,\n    disablePlaygroundInProduction: true,\n    maxComplexity: 1000,\n    schemaOutputFile: `${typeof process?.cwd === 'function' ? process.cwd() : ''}/schema.graphql`,\n    ...(config.graphQL || {}),\n  }\n  config.hooks = config.hooks ?? {}\n  config.i18n = config.i18n ?? {}\n  config.jobs = {\n    deleteJobOnComplete: true,\n    depth: 0,\n    ...(config.jobs || {}),\n    access: {\n      cancel: defaultAccess,\n      queue: defaultAccess,\n      run: defaultAccess,\n      ...(config.jobs?.access || {}),\n    },\n  } as JobsConfig\n  config.localization = config.localization ?? false\n  config.maxDepth = config.maxDepth ?? 10\n  config.routes = {\n    admin: '/admin',\n    api: (process.env.NEXT_BASE_PATH ?? '') + '/api',\n    graphQL: '/graphql',\n    graphQLPlayground: '/graphql-playground',\n    ...(config.routes || {}),\n  }\n  config.serverURL = config.serverURL ?? ''\n  config.telemetry = config.telemetry ?? true\n  config.typescript = {\n    autoGenerate: true,\n    outputFile: `${typeof process?.cwd === 'function' ? process.cwd() : ''}/payload-types.ts`,\n    ...(config.typescript || {}),\n  }\n  config.upload = config.upload ?? {}\n\n  config.auth = {\n    jwtOrder: ['JWT', 'Bearer', 'cookie'],\n    ...(config.auth || {}),\n  }\n\n  config.kv = config.kv ?? databaseKVAdapter()\n\n  if (config.kv?.kvCollection) {\n    config.collections.push(config.kv.kvCollection)\n  }\n\n  if (\n    config.folders !== false &&\n    config.collections.some((collection) => Boolean(collection.folders))\n  ) {\n    config.folders = {\n      slug: config.folders?.slug ?? foldersSlug,\n      browseByFolder: config.folders?.browseByFolder ?? true,\n      collectionOverrides: config.folders?.collectionOverrides || undefined,\n      collectionSpecific: config.folders?.collectionSpecific ?? true,\n      debug: config.folders?.debug ?? false,\n      fieldName: config.folders?.fieldName ?? parentFolderFieldName,\n    }\n  } else {\n    config.folders = false\n  }\n\n  return config\n}\n"],"names":["defaultAccess","foldersSlug","parentFolderFieldName","databaseKVAdapter","defaults","admin","avatar","components","custom","dateFormat","dependencies","importMap","baseDir","process","cwd","meta","defaultOGImageType","robots","titleSuffix","routes","account","browseByFolder","createFirstUser","forgot","inactivity","login","logout","reset","unauthorized","theme","auth","jwtOrder","bin","collections","cookiePrefix","cors","csrf","defaultDepth","defaultMaxTextLength","endpoints","globals","graphQL","disablePlaygroundInProduction","maxComplexity","schemaOutputFile","hooks","i18n","jobs","access","cancel","queue","run","deleteJobOnComplete","depth","localization","maxDepth","api","graphQLPlayground","serverURL","telemetry","typescript","autoGenerate","outputFile","upload","addDefaultsToConfig","config","disableIntrospectionInProduction","env","NEXT_BASE_PATH","kv","kvCollection","push","folders","some","collection","Boolean","slug","collectionOverrides","undefined","collectionSpecific","debug","fieldName"],"mappings":"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"}},
    {"offset": {"line": 4694, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/config/orderable/fractional-indexing.js"],"sourcesContent":["// @ts-no-check\n\n/**\n * THIS FILE IS COPIED FROM:\n * https://github.com/rocicorp/fractional-indexing/blob/main/src/index.js\n *\n * I AM NOT INSTALLING THAT LIBRARY BECAUSE JEST COMPLAINS ABOUT THE ESM MODULE AND THE TESTS FAIL.\n * DO NOT MODIFY IT\n * ALSO, I'M DISABLING TS WITH `@ts-no-check` BECAUSE THEY DON'T USE STRICT NULL CHECKS IN THAT REPOSITORY\n */\n\n// License: CC0 (no rights reserved).\n\n// This is based on https://observablehq.com/@dgreensp/implementing-fractional-indexing\n\nexport const BASE_36_DIGITS = '0123456789abcdefghijklmnopqrstuvwxyz'\n\n// `a` may be empty string, `b` is null or non-empty string.\n// `a < b` lexicographically if `b` is non-null.\n// no trailing zeros allowed.\n// digits is a string such as '0123456789' for base 10.  Digits must be in\n// ascending character code order!\n/**\n * @param {string} a\n * @param {string | null | undefined} b\n * @param {string} digits\n * @returns {string}\n */\nfunction midpoint(a, b, digits) {\n  const zero = digits[0]\n  if (b != null && a >= b) {\n    throw new Error(a + ' >= ' + b)\n  }\n  if (a.slice(-1) === zero || (b && b.slice(-1) === zero)) {\n    throw new Error('trailing zero')\n  }\n  if (b) {\n    // remove longest common prefix.  pad `a` with 0s as we\n    // go.  note that we don't need to pad `b`, because it can't\n    // end before `a` while traversing the common prefix.\n    let n = 0\n    while ((a[n] || zero) === b[n]) {\n      n++\n    }\n    if (n > 0) {\n      return b.slice(0, n) + midpoint(a.slice(n), b.slice(n), digits)\n    }\n  }\n  // first digits (or lack of digit) are different\n  const digitA = a ? digits.indexOf(a[0]) : 0\n  const digitB = b != null ? digits.indexOf(b[0]) : digits.length\n  if (digitB - digitA > 1) {\n    const midDigit = Math.round(0.5 * (digitA + digitB))\n    return digits[midDigit]\n  } else {\n    // first digits are consecutive\n    if (b && b.length > 1) {\n      return b.slice(0, 1)\n    } else {\n      // `b` is null or has length 1 (a single digit).\n      // the first digit of `a` is the previous digit to `b`,\n      // or 9 if `b` is null.\n      // given, for example, midpoint('49', '5'), return\n      // '4' + midpoint('9', null), which will become\n      // '4' + '9' + midpoint('', null), which is '495'\n      return digits[digitA] + midpoint(a.slice(1), null, digits)\n    }\n  }\n}\n\n/**\n * @param {string} int\n * @return {void}\n */\n\nfunction validateInteger(int) {\n  if (int.length !== getIntegerLength(int[0])) {\n    throw new Error('invalid integer part of order key: ' + int)\n  }\n}\n\n/**\n * @param {string} head\n * @return {number}\n */\n\nfunction getIntegerLength(head) {\n  if (head >= 'a' && head <= 'z') {\n    return head.charCodeAt(0) - 'a'.charCodeAt(0) + 2\n  } else if (head >= 'A' && head <= 'Z') {\n    return 'Z'.charCodeAt(0) - head.charCodeAt(0) + 2\n  } else {\n    throw new Error('invalid order key head: ' + head)\n  }\n}\n\n/**\n * @param {string} key\n * @return {string}\n */\n\nfunction getIntegerPart(key) {\n  const integerPartLength = getIntegerLength(key[0])\n  if (integerPartLength > key.length) {\n    throw new Error('invalid order key: ' + key)\n  }\n  return key.slice(0, integerPartLength)\n}\n\n/**\n * @param {string} key\n * @param {string} digits\n * @return {void}\n */\n\nfunction validateOrderKey(key, digits) {\n  if (key === 'A' + digits[0].repeat(26)) {\n    throw new Error('invalid order key: ' + key)\n  }\n  // getIntegerPart will throw if the first character is bad,\n  // or the key is too short.  we'd call it to check these things\n  // even if we didn't need the result\n  const i = getIntegerPart(key)\n  const f = key.slice(i.length)\n  if (f.slice(-1) === digits[0]) {\n    throw new Error('invalid order key: ' + key)\n  }\n}\n\n// note that this may return null, as there is a largest integer\n/**\n * @param {string} x\n * @param {string} digits\n * @return {string | null}\n */\nfunction incrementInteger(x, digits) {\n  validateInteger(x)\n  const [head, ...digs] = x.split('')\n  let carry = true\n  for (let i = digs.length - 1; carry && i >= 0; i--) {\n    const d = digits.indexOf(digs[i]) + 1\n    if (d === digits.length) {\n      digs[i] = digits[0]\n    } else {\n      digs[i] = digits[d]\n      carry = false\n    }\n  }\n  if (carry) {\n    if (head === 'Z') {\n      return 'a' + digits[0]\n    }\n    if (head === 'z') {\n      return null\n    }\n    const h = String.fromCharCode(head.charCodeAt(0) + 1)\n    if (h > 'a') {\n      digs.push(digits[0])\n    } else {\n      digs.pop()\n    }\n    return h + digs.join('')\n  } else {\n    return head + digs.join('')\n  }\n}\n\n// note that this may return null, as there is a smallest integer\n/**\n * @param {string} x\n * @param {string} digits\n * @return {string | null}\n */\n\nfunction decrementInteger(x, digits) {\n  validateInteger(x)\n  const [head, ...digs] = x.split('')\n  let borrow = true\n  for (let i = digs.length - 1; borrow && i >= 0; i--) {\n    const d = digits.indexOf(digs[i]) - 1\n    if (d === -1) {\n      digs[i] = digits.slice(-1)\n    } else {\n      digs[i] = digits[d]\n      borrow = false\n    }\n  }\n  if (borrow) {\n    if (head === 'a') {\n      return 'Z' + digits.slice(-1)\n    }\n    if (head === 'A') {\n      return null\n    }\n    const h = String.fromCharCode(head.charCodeAt(0) - 1)\n    if (h < 'Z') {\n      digs.push(digits.slice(-1))\n    } else {\n      digs.pop()\n    }\n    return h + digs.join('')\n  } else {\n    return head + digs.join('')\n  }\n}\n\n// `a` is an order key or null (START).\n// `b` is an order key or null (END).\n// `a < b` lexicographically if both are non-null.\n// digits is a string such as '0123456789' for base 10.  Digits must be in\n// ascending character code order!\n/**\n * @param {string | null | undefined} a\n * @param {string | null | undefined} b\n * @param {string=} digits\n * @return {string}\n */\nexport function generateKeyBetween(a, b, digits = BASE_36_DIGITS) {\n  if (a != null) {\n    validateOrderKey(a, digits)\n  }\n  if (b != null) {\n    validateOrderKey(b, digits)\n  }\n  if (a != null && b != null && a >= b) {\n    throw new Error(a + ' >= ' + b)\n  }\n  if (a == null) {\n    if (b == null) {\n      return 'a' + digits[0]\n    }\n\n    const ib = getIntegerPart(b)\n    const fb = b.slice(ib.length)\n    if (ib === 'A' + digits[0].repeat(26)) {\n      return ib + midpoint('', fb, digits)\n    }\n    if (ib < b) {\n      return ib\n    }\n    const res = decrementInteger(ib, digits)\n    if (res == null) {\n      throw new Error('cannot decrement any more')\n    }\n    return res\n  }\n\n  if (b == null) {\n    const ia = getIntegerPart(a)\n    const fa = a.slice(ia.length)\n    const i = incrementInteger(ia, digits)\n    return i == null ? ia + midpoint(fa, null, digits) : i\n  }\n\n  const ia = getIntegerPart(a)\n  const fa = a.slice(ia.length)\n  const ib = getIntegerPart(b)\n  const fb = b.slice(ib.length)\n  if (ia === ib) {\n    return ia + midpoint(fa, fb, digits)\n  }\n  const i = incrementInteger(ia, digits)\n  if (i == null) {\n    throw new Error('cannot increment any more')\n  }\n  if (i < b) {\n    return i\n  }\n  return ia + midpoint(fa, null, digits)\n}\n\n/**\n * same preconditions as generateKeysBetween.\n * n >= 0.\n * Returns an array of n distinct keys in sorted order.\n * If a and b are both null, returns [a0, a1, ...]\n * If one or the other is null, returns consecutive \"integer\"\n * keys.  Otherwise, returns relatively short keys between\n * a and b.\n * @param {string | null | undefined} a\n * @param {string | null | undefined} b\n * @param {number} n\n * @param {string} digits\n * @return {string[]}\n */\nexport function generateNKeysBetween(a, b, n, digits = BASE_36_DIGITS) {\n  if (n === 0) {\n    return []\n  }\n  if (n === 1) {\n    return [generateKeyBetween(a, b, digits)]\n  }\n  if (b == null) {\n    let c = generateKeyBetween(a, b, digits)\n    const result = [c]\n    for (let i = 0; i < n - 1; i++) {\n      c = generateKeyBetween(c, b, digits)\n      result.push(c)\n    }\n    return result\n  }\n  if (a == null) {\n    let c = generateKeyBetween(a, b, digits)\n    const result = [c]\n    for (let i = 0; i < n - 1; i++) {\n      c = generateKeyBetween(a, c, digits)\n      result.push(c)\n    }\n    result.reverse()\n    return result\n  }\n  const mid = Math.floor(n / 2)\n  const c = generateKeyBetween(a, b, digits)\n  return [\n    ...generateNKeysBetween(a, c, mid, digits),\n    c,\n    ...generateNKeysBetween(c, b, n - mid - 1, digits),\n  ]\n}\n"],"names":["BASE_36_DIGITS","midpoint","a","b","digits","zero","Error","slice","n","digitA","indexOf","digitB","length","midDigit","Math","round","validateInteger","int","getIntegerLength","head","charCodeAt","getIntegerPart","key","integerPartLength","validateOrderKey","repeat","i","f","incrementInteger","x","digs","split","carry","d","h","String","fromCharCode","push","pop","join","decrementInteger","borrow","generateKeyBetween","ib","fb","res","ia","fa","generateNKeysBetween","c","result","reverse","mid","floor"],"mappings":"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"}},
    {"offset": {"line": 4977, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/config/orderable/index.ts"],"sourcesContent":["import { status as httpStatus } from 'http-status'\n\nimport type { BeforeChangeHook, CollectionConfig } from '../../collections/config/types.js'\nimport type { Field } from '../../fields/config/types.js'\nimport type { Endpoint, PayloadHandler, SanitizedConfig } from '../types.js'\n\nimport { executeAccess } from '../../auth/executeAccess.js'\nimport { APIError } from '../../errors/index.js'\nimport { commitTransaction } from '../../utilities/commitTransaction.js'\nimport { initTransaction } from '../../utilities/initTransaction.js'\nimport { killTransaction } from '../../utilities/killTransaction.js'\nimport { traverseFields } from '../../utilities/traverseFields.js'\nimport { generateKeyBetween, generateNKeysBetween } from './fractional-indexing.js'\n\n/**\n * This function creates:\n * - N fields per collection, named `_order` or `_<collection>_<joinField>_order`\n * - 1 hook per collection\n * - 1 endpoint per app\n *\n * Also, if collection.defaultSort or joinField.defaultSort is not set, it will be set to the orderable field.\n */\nexport const setupOrderable = (config: SanitizedConfig) => {\n  const fieldsToAdd = new Map<CollectionConfig, string[]>()\n\n  config.collections.forEach((collection) => {\n    if (collection.orderable) {\n      const currentFields = fieldsToAdd.get(collection) || []\n      fieldsToAdd.set(collection, [...currentFields, '_order'])\n      collection.defaultSort = collection.defaultSort ?? '_order'\n    }\n\n    traverseFields({\n      callback: ({ field, parentRef, ref }) => {\n        if (field.type === 'array' || field.type === 'blocks') {\n          return false\n        }\n        if (field.type === 'group' || field.type === 'tab') {\n          // @ts-expect-error ref is untyped\n          const parentPrefix = parentRef?.prefix ? `${parentRef.prefix}_` : ''\n          // @ts-expect-error ref is untyped\n          ref.prefix = `${parentPrefix}${field.name}`\n        }\n        if (field.type === 'join' && field.orderable === true) {\n          if (Array.isArray(field.collection)) {\n            throw new APIError(\n              'Orderable joins must target a single collection',\n              httpStatus.BAD_REQUEST,\n              {},\n              true,\n            )\n          }\n          const relationshipCollection = config.collections.find((c) => c.slug === field.collection)\n          if (!relationshipCollection) {\n            return false\n          }\n          field.defaultSort = field.defaultSort ?? `_${field.collection}_${field.name}_order`\n          const currentFields = fieldsToAdd.get(relationshipCollection) || []\n          // @ts-expect-error ref is untyped\n          const prefix = parentRef?.prefix ? `${parentRef.prefix}_` : ''\n          fieldsToAdd.set(relationshipCollection, [\n            ...currentFields,\n            `_${field.collection}_${prefix}${field.name}_order`,\n          ])\n        }\n      },\n      fields: collection.fields,\n    })\n  })\n\n  Array.from(fieldsToAdd.entries()).forEach(([collection, orderableFields]) => {\n    addOrderableFieldsAndHook(collection, orderableFields)\n  })\n\n  if (fieldsToAdd.size > 0) {\n    addOrderableEndpoint(config)\n  }\n}\n\nexport const addOrderableFieldsAndHook = (\n  collection: CollectionConfig,\n  orderableFieldNames: string[],\n) => {\n  // 1. Add field\n  orderableFieldNames.forEach((orderableFieldName) => {\n    const orderField: Field = {\n      name: orderableFieldName,\n      type: 'text',\n      admin: {\n        disableBulkEdit: true,\n        disabled: true,\n        disableGroupBy: true,\n        disableListColumn: true,\n        disableListFilter: true,\n        hidden: true,\n        readOnly: true,\n      },\n      hooks: {\n        beforeDuplicate: [\n          ({ siblingData }) => {\n            delete siblingData[orderableFieldName]\n          },\n        ],\n      },\n      index: true,\n    }\n\n    collection.fields.unshift(orderField)\n  })\n\n  // 2. Add hook\n  if (!collection.hooks) {\n    collection.hooks = {}\n  }\n  if (!collection.hooks.beforeChange) {\n    collection.hooks.beforeChange = []\n  }\n\n  const orderBeforeChangeHook: BeforeChangeHook = async ({ data, originalDoc, req }) => {\n    for (const orderableFieldName of orderableFieldNames) {\n      if (!data[orderableFieldName] && !originalDoc?.[orderableFieldName]) {\n        const lastDoc = await req.payload.find({\n          collection: collection.slug,\n          depth: 0,\n          limit: 1,\n          pagination: false,\n          req,\n          select: { [orderableFieldName]: true },\n          sort: `-${orderableFieldName}`,\n          where: {\n            [orderableFieldName]: {\n              exists: true,\n            },\n          },\n        })\n\n        const lastOrderValue = lastDoc.docs[0]?.[orderableFieldName] || null\n        data[orderableFieldName] = generateKeyBetween(lastOrderValue, null)\n      }\n    }\n\n    return data\n  }\n\n  collection.hooks.beforeChange.push(orderBeforeChangeHook)\n}\n\n/**\n * The body of the reorder endpoint.\n * @internal\n */\nexport type OrderableEndpointBody = {\n  collectionSlug: string\n  docsToMove: string[]\n  newKeyWillBe: 'greater' | 'less'\n  orderableFieldName: string\n  target: {\n    id: string\n    key: string\n  }\n}\n\nexport const addOrderableEndpoint = (config: SanitizedConfig) => {\n  // 3. Add endpoint\n  const reorderHandler: PayloadHandler = async (req) => {\n    const body = (await req.json?.()) as OrderableEndpointBody\n\n    const { collectionSlug, docsToMove, newKeyWillBe, orderableFieldName, target } = body\n\n    if (!Array.isArray(docsToMove) || docsToMove.length === 0) {\n      return new Response(JSON.stringify({ error: 'docsToMove must be a non-empty array' }), {\n        headers: { 'Content-Type': 'application/json' },\n        status: 400,\n      })\n    }\n    if (newKeyWillBe !== 'greater' && newKeyWillBe !== 'less') {\n      return new Response(JSON.stringify({ error: 'newKeyWillBe must be \"greater\" or \"less\"' }), {\n        headers: { 'Content-Type': 'application/json' },\n        status: 400,\n      })\n    }\n    const collection = config.collections.find((c) => c.slug === collectionSlug)\n    if (!collection) {\n      return new Response(JSON.stringify({ error: `Collection ${collectionSlug} not found` }), {\n        headers: { 'Content-Type': 'application/json' },\n        status: 400,\n      })\n    }\n    if (typeof orderableFieldName !== 'string') {\n      return new Response(JSON.stringify({ error: 'orderableFieldName must be a string' }), {\n        headers: { 'Content-Type': 'application/json' },\n        status: 400,\n      })\n    }\n\n    // Prevent reordering if user doesn't have editing permissions\n    if (collection.access?.update) {\n      await executeAccess(\n        {\n          // Currently only one doc can be moved at a time. We should review this if we want to allow\n          // multiple docs to be moved at once in the future.\n          id: docsToMove[0],\n          data: {},\n          req,\n        },\n        collection.access.update,\n      )\n    }\n    /**\n     * If there is no target.key, we can assume the user enabled `orderable`\n     * on a collection with existing documents, and that this is the first\n     * time they tried to reorder them. Therefore, we perform a one-time\n     * migration by setting the key value for all documents. We do this\n     * instead of enforcing `required` and `unique` at the database schema\n     * level, so that users don't have to run a migration when they enable\n     * `orderable` on a collection with existing documents.\n     */\n    if (!target.key) {\n      const { docs } = await req.payload.find({\n        collection: collection.slug,\n        depth: 0,\n        limit: 0,\n        req,\n        select: { [orderableFieldName]: true },\n        where: {\n          [orderableFieldName]: {\n            exists: false,\n          },\n        },\n      })\n      await initTransaction(req)\n      // We cannot update all documents in a single operation with `payload.update`,\n      // because they would all end up with the same order key (`a0`).\n      try {\n        for (const doc of docs) {\n          await req.payload.update({\n            id: doc.id,\n            collection: collection.slug,\n            data: {\n              // no data needed since the order hooks will handle this\n            },\n            depth: 0,\n            req,\n          })\n          await commitTransaction(req)\n        }\n      } catch (e) {\n        await killTransaction(req)\n        if (e instanceof Error) {\n          throw new APIError(e.message, httpStatus.INTERNAL_SERVER_ERROR)\n        }\n      }\n\n      return new Response(JSON.stringify({ message: 'initial migration', success: true }), {\n        headers: { 'Content-Type': 'application/json' },\n        status: 200,\n      })\n    }\n\n    if (\n      typeof target !== 'object' ||\n      typeof target.id === 'undefined' ||\n      typeof target.key !== 'string'\n    ) {\n      return new Response(JSON.stringify({ error: 'target must be an object with id' }), {\n        headers: { 'Content-Type': 'application/json' },\n        status: 400,\n      })\n    }\n\n    const targetId = target.id\n    let targetKey = target.key\n\n    // If targetKey = pending, we need to find its current key.\n    // This can only happen if the user reorders rows quickly with a slow connection.\n    if (targetKey === 'pending') {\n      const beforeDoc = await req.payload.findByID({\n        id: targetId,\n        collection: collection.slug,\n        depth: 0,\n        select: { [orderableFieldName]: true },\n      })\n      targetKey = beforeDoc?.[orderableFieldName] || null\n    }\n\n    // The reason the endpoint does not receive this docId as an argument is that there\n    // are situations where the user may not see or know what the next or previous one is. For\n    // example, access control restrictions, if docBefore is the last one on the page, etc.\n    const adjacentDoc = await req.payload.find({\n      collection: collection.slug,\n      depth: 0,\n      limit: 1,\n      pagination: false,\n      select: { [orderableFieldName]: true },\n      sort: newKeyWillBe === 'greater' ? orderableFieldName : `-${orderableFieldName}`,\n      where: {\n        [orderableFieldName]: {\n          [newKeyWillBe === 'greater' ? 'greater_than' : 'less_than']: targetKey,\n        },\n      },\n    })\n    const adjacentDocKey = adjacentDoc.docs?.[0]?.[orderableFieldName] || null\n\n    // Currently N (= docsToMove.length) is always 1. Maybe in the future we will\n    // allow dragging and reordering multiple documents at once via the UI.\n    const orderValues =\n      newKeyWillBe === 'greater'\n        ? generateNKeysBetween(targetKey, adjacentDocKey, docsToMove.length)\n        : generateNKeysBetween(adjacentDocKey, targetKey, docsToMove.length)\n\n    // Update each document with its new order value\n    for (const [index, id] of docsToMove.entries()) {\n      await req.payload.update({\n        id,\n        collection: collection.slug,\n        data: {\n          [orderableFieldName]: orderValues[index],\n        },\n        depth: 0,\n        req,\n      })\n    }\n\n    return new Response(JSON.stringify({ orderValues, success: true }), {\n      headers: { 'Content-Type': 'application/json' },\n      status: 200,\n    })\n  }\n\n  const reorderEndpoint: Endpoint = {\n    handler: reorderHandler,\n    method: 'post',\n    path: '/reorder',\n  }\n\n  if (!config.endpoints) {\n    config.endpoints = []\n  }\n\n  config.endpoints.push(reorderEndpoint)\n}\n"],"names":["status","httpStatus","executeAccess","APIError","commitTransaction","initTransaction","killTransaction","traverseFields","generateKeyBetween","generateNKeysBetween","setupOrderable","config","fieldsToAdd","Map","collections","forEach","collection","orderable","currentFields","get","set","defaultSort","callback","field","parentRef","ref","type","parentPrefix","prefix","name","Array","isArray","BAD_REQUEST","relationshipCollection","find","c","slug","fields","from","entries","orderableFields","addOrderableFieldsAndHook","size","addOrderableEndpoint","orderableFieldNames","orderableFieldName","orderField","admin","disableBulkEdit","disabled","disableGroupBy","disableListColumn","disableListFilter","hidden","readOnly","hooks","beforeDuplicate","siblingData","index","unshift","beforeChange","orderBeforeChangeHook","data","originalDoc","req","lastDoc","payload","depth","limit","pagination","select","sort","where","exists","lastOrderValue","docs","push","reorderHandler","body","json","collectionSlug","docsToMove","newKeyWillBe","target","length","Response","JSON","stringify","error","headers","access","update","id","key","doc","e","Error","message","INTERNAL_SERVER_ERROR","success","targetId","targetKey","beforeDoc","findByID","adjacentDoc","adjacentDocKey","orderValues","reorderEndpoint","handler","method","path","endpoints"],"mappings":"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"}},
    {"offset": {"line": 5304, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/config/sanitize.ts"],"sourcesContent":["import type { AcceptedLanguages, Language } from '@payloadcms/translations'\n\nimport { en } from '@payloadcms/translations/languages/en'\nimport { deepMergeSimple } from '@payloadcms/translations/utilities'\n\nimport type { CollectionSlug, GlobalSlug, SanitizedCollectionConfig } from '../index.js'\nimport type { SanitizedJobsConfig } from '../queues/config/types/index.js'\nimport type {\n  Config,\n  LocalizationConfigWithLabels,\n  LocalizationConfigWithNoLabels,\n  SanitizedConfig,\n  Timezone,\n} from './types.js'\n\nimport { defaultUserCollection } from '../auth/defaultUser.js'\nimport { authRootEndpoints } from '../auth/endpoints/index.js'\nimport { sanitizeCollection } from '../collections/config/sanitize.js'\nimport { migrationsCollection } from '../database/migrations/migrationsCollection.js'\nimport { DuplicateCollection, InvalidConfiguration } from '../errors/index.js'\nimport { defaultTimezones } from '../fields/baseFields/timezone/defaultTimezones.js'\nimport { addFolderCollection } from '../folders/addFolderCollection.js'\nimport { addFolderFieldToCollection } from '../folders/addFolderFieldToCollection.js'\nimport { sanitizeGlobal } from '../globals/config/sanitize.js'\nimport { baseBlockFields, formatLabels, sanitizeFields } from '../index.js'\nimport {\n  getLockedDocumentsCollection,\n  lockedDocumentsCollectionSlug,\n} from '../locked-documents/config.js'\nimport { getPreferencesCollection, preferencesCollectionSlug } from '../preferences/config.js'\nimport { getQueryPresetsConfig, queryPresetsCollectionSlug } from '../query-presets/config.js'\nimport { getDefaultJobsCollection, jobsCollectionSlug } from '../queues/config/collection.js'\nimport { getJobStatsGlobal } from '../queues/config/global.js'\nimport { flattenBlock } from '../utilities/flattenAllFields.js'\nimport { getSchedulePublishTask } from '../versions/schedule/job.js'\nimport { addDefaultsToConfig } from './defaults.js'\nimport { setupOrderable } from './orderable/index.js'\n\nconst sanitizeAdminConfig = (configToSanitize: Config): Partial<SanitizedConfig> => {\n  const sanitizedConfig = { ...configToSanitize }\n\n  if (configToSanitize?.compatibility?.allowLocalizedWithinLocalized) {\n    process.env.NEXT_PUBLIC_PAYLOAD_COMPATIBILITY_allowLocalizedWithinLocalized = 'true'\n  }\n\n  // default logging level will be 'error' if not provided\n  sanitizedConfig.loggingLevels = {\n    Forbidden: 'info',\n    Locked: 'info',\n    MissingFile: 'info',\n    NotFound: 'info',\n    ValidationError: 'info',\n    ...(sanitizedConfig.loggingLevels || {}),\n  }\n\n  // add default user collection if none provided\n  if (!sanitizedConfig?.admin?.user) {\n    const firstCollectionWithAuth = sanitizedConfig.collections!.find(({ auth }) => Boolean(auth))\n\n    if (firstCollectionWithAuth) {\n      sanitizedConfig.admin!.user = firstCollectionWithAuth.slug\n    } else {\n      sanitizedConfig.admin!.user = defaultUserCollection.slug\n      sanitizedConfig.collections!.push(defaultUserCollection)\n    }\n  }\n\n  const userCollection = sanitizedConfig.collections!.find(\n    ({ slug }) => slug === sanitizedConfig.admin!.user,\n  )\n\n  if (!userCollection || !userCollection.auth) {\n    throw new InvalidConfiguration(\n      `${sanitizedConfig.admin!.user} is not a valid admin user collection`,\n    )\n  }\n\n  if (sanitizedConfig?.admin?.timezones) {\n    if (typeof sanitizedConfig?.admin?.timezones?.supportedTimezones === 'function') {\n      sanitizedConfig.admin.timezones.supportedTimezones =\n        sanitizedConfig.admin.timezones.supportedTimezones({ defaultTimezones })\n    }\n\n    if (!sanitizedConfig?.admin?.timezones?.supportedTimezones) {\n      sanitizedConfig.admin.timezones.supportedTimezones = defaultTimezones\n    }\n  } else {\n    sanitizedConfig.admin!.timezones = {\n      supportedTimezones: defaultTimezones,\n    }\n  }\n  // Timezones supported by the Intl API\n  const _internalSupportedTimezones = Intl.supportedValuesOf('timeZone')\n\n  // We're casting here because it's already been sanitised above but TS still thinks it could be a function\n  ;(sanitizedConfig.admin!.timezones.supportedTimezones as Timezone[]).forEach((timezone) => {\n    if (timezone.value !== 'UTC' && !_internalSupportedTimezones.includes(timezone.value)) {\n      throw new InvalidConfiguration(\n        `Timezone ${timezone.value} is not supported by the current runtime via the Intl API.`,\n      )\n    }\n  })\n\n  return sanitizedConfig as unknown as Partial<SanitizedConfig>\n}\n\nexport const sanitizeConfig = async (incomingConfig: Config): Promise<SanitizedConfig> => {\n  const configWithDefaults = addDefaultsToConfig(incomingConfig)\n\n  const config: Partial<SanitizedConfig> = sanitizeAdminConfig(configWithDefaults)\n\n  // Add orderable fields\n  setupOrderable(config as SanitizedConfig)\n\n  if (!config.endpoints) {\n    config.endpoints = []\n  }\n\n  for (const endpoint of authRootEndpoints) {\n    config.endpoints.push(endpoint)\n  }\n\n  if (config.localization && config.localization.locales?.length > 0) {\n    // clone localization config so to not break everything\n    const firstLocale = config.localization.locales[0]\n    if (typeof firstLocale === 'string') {\n      config.localization.localeCodes = [\n        ...(config.localization as unknown as LocalizationConfigWithNoLabels).locales,\n      ]\n\n      // is string[], so convert to Locale[]\n      config.localization.locales = (\n        config.localization as unknown as LocalizationConfigWithNoLabels\n      ).locales.map((locale) => ({\n        code: locale,\n        label: locale,\n        rtl: false,\n        toString: () => locale,\n      }))\n    } else {\n      // is Locale[], so convert to string[] for localeCodes\n      config.localization.localeCodes = config.localization.locales.map((locale) => locale.code)\n\n      config.localization.locales = (\n        config.localization as LocalizationConfigWithLabels\n      ).locales.map((locale) => ({\n        ...locale,\n        toString: () => locale.code,\n      }))\n    }\n\n    // Default fallback to true if not provided\n    config.localization.fallback = config.localization?.fallback ?? true\n  }\n\n  const i18nConfig: SanitizedConfig['i18n'] = {\n    fallbackLanguage: 'en',\n    supportedLanguages: {\n      en,\n    },\n    translations: {},\n  }\n\n  if (incomingConfig?.i18n) {\n    i18nConfig.supportedLanguages =\n      incomingConfig.i18n?.supportedLanguages || i18nConfig.supportedLanguages\n\n    const supportedLangKeys = <AcceptedLanguages[]>Object.keys(i18nConfig.supportedLanguages)\n    const fallbackLang = incomingConfig.i18n?.fallbackLanguage || i18nConfig.fallbackLanguage\n\n    i18nConfig.fallbackLanguage = supportedLangKeys.includes(fallbackLang)\n      ? fallbackLang\n      : supportedLangKeys[0]!\n    i18nConfig.translations =\n      (incomingConfig.i18n?.translations as SanitizedConfig['i18n']['translations']) ||\n      i18nConfig.translations\n  }\n\n  config.i18n = i18nConfig\n\n  const richTextSanitizationPromises: Array<(config: SanitizedConfig) => Promise<void>> = []\n\n  const schedulePublishCollections: CollectionSlug[] = []\n\n  const queryPresetsCollections: CollectionSlug[] = []\n\n  const schedulePublishGlobals: GlobalSlug[] = []\n\n  const collectionSlugs = new Set<CollectionSlug>()\n\n  const validRelationships = [\n    ...(config.collections?.map((c) => c.slug) ?? []),\n    jobsCollectionSlug,\n    lockedDocumentsCollectionSlug,\n    preferencesCollectionSlug,\n  ]\n\n  if (config.folders !== false) {\n    validRelationships.push(config.folders!.slug)\n  }\n\n  /**\n   * Blocks sanitization needs to happen before collections, as collection/global join field sanitization needs config.blocks\n   * to be populated with the sanitized blocks\n   */\n  config.blocks = []\n\n  if (incomingConfig.blocks?.length) {\n    for (const block of incomingConfig.blocks) {\n      const sanitizedBlock = block\n\n      if (sanitizedBlock._sanitized === true) {\n        continue\n      }\n      sanitizedBlock._sanitized = true\n\n      sanitizedBlock.fields = sanitizedBlock.fields.concat(baseBlockFields)\n\n      sanitizedBlock.labels = !sanitizedBlock.labels\n        ? formatLabels(sanitizedBlock.slug)\n        : sanitizedBlock.labels\n\n      sanitizedBlock.fields = await sanitizeFields({\n        config: config as unknown as Config,\n        existingFieldNames: new Set(),\n        fields: sanitizedBlock.fields,\n        parentIsLocalized: false,\n        richTextSanitizationPromises,\n        validRelationships,\n      })\n\n      const flattenedSanitizedBlock = flattenBlock({ block })\n\n      config.blocks.push(flattenedSanitizedBlock)\n    }\n  }\n\n  const folderEnabledCollections: SanitizedCollectionConfig[] = []\n\n  for (let i = 0; i < config.collections!.length; i++) {\n    if (collectionSlugs.has(config.collections![i]!.slug)) {\n      throw new DuplicateCollection('slug', config.collections![i]!.slug)\n    }\n\n    collectionSlugs.add(config.collections![i]!.slug)\n\n    const draftsConfig = config.collections![i]?.versions?.drafts\n\n    if (typeof draftsConfig === 'object' && draftsConfig.schedulePublish) {\n      schedulePublishCollections.push(config.collections![i]!.slug)\n    }\n\n    if (config.collections![i]!.enableQueryPresets) {\n      queryPresetsCollections.push(config.collections![i]!.slug)\n\n      if (!validRelationships.includes(queryPresetsCollectionSlug)) {\n        validRelationships.push(queryPresetsCollectionSlug)\n      }\n    }\n\n    if (config.folders !== false && config.collections![i]!.folders) {\n      addFolderFieldToCollection({\n        collection: config.collections![i]!,\n        collectionSpecific: config.folders!.collectionSpecific,\n        folderFieldName: config.folders!.fieldName,\n        folderSlug: config.folders!.slug,\n      })\n    }\n\n    config.collections![i] = await sanitizeCollection(\n      config as unknown as Config,\n      config.collections![i]!,\n      richTextSanitizationPromises,\n      validRelationships,\n    )\n\n    if (config.folders !== false && config.collections![i]!.folders) {\n      folderEnabledCollections.push(config.collections![i]!)\n    }\n  }\n\n  if (config.globals!.length > 0) {\n    for (let i = 0; i < config.globals!.length; i++) {\n      const draftsConfig = config.globals![i]?.versions?.drafts\n\n      if (typeof draftsConfig === 'object' && draftsConfig.schedulePublish) {\n        schedulePublishGlobals.push(config.globals![i]!.slug)\n      }\n\n      config.globals![i] = await sanitizeGlobal(\n        config as unknown as Config,\n        config.globals![i]!,\n        richTextSanitizationPromises,\n        validRelationships,\n      )\n    }\n  }\n\n  if (schedulePublishCollections.length || schedulePublishGlobals.length) {\n    ;((config.jobs ??= {} as SanitizedJobsConfig).tasks ??= []).push(\n      getSchedulePublishTask({\n        adminUserSlug: config.admin!.user,\n        collections: schedulePublishCollections,\n        globals: schedulePublishGlobals,\n      }),\n    )\n  }\n\n  ;(config.jobs ??= {} as SanitizedJobsConfig).enabled = Boolean(\n    (Array.isArray(configWithDefaults.jobs?.tasks) && configWithDefaults.jobs?.tasks?.length) ||\n      (Array.isArray(configWithDefaults.jobs?.workflows) &&\n        configWithDefaults.jobs?.workflows?.length),\n  )\n\n  // Need to add default jobs collection before locked documents collections\n  if (config.jobs.enabled) {\n    // Check for schedule property in both tasks and workflows\n    const hasScheduleProperty =\n      (config?.jobs?.tasks?.length && config.jobs.tasks.some((task) => task.schedule)) ||\n      (config?.jobs?.workflows?.length &&\n        config.jobs.workflows.some((workflow) => workflow.schedule))\n\n    if (hasScheduleProperty) {\n      config.jobs.scheduling = true\n      // Add payload-jobs-stats global for tracking when a job of a specific slug was last run\n      ;(config.globals ??= []).push(\n        await sanitizeGlobal(\n          config as unknown as Config,\n          getJobStatsGlobal(config as unknown as Config),\n          richTextSanitizationPromises,\n          validRelationships,\n        ),\n      )\n\n      config.jobs.stats = true\n    }\n\n    let defaultJobsCollection = getDefaultJobsCollection(config.jobs)\n\n    if (typeof config.jobs.jobsCollectionOverrides === 'function') {\n      defaultJobsCollection = config.jobs.jobsCollectionOverrides({\n        defaultJobsCollection,\n      })\n\n      const hooks = defaultJobsCollection?.hooks\n      // @todo - delete this check in 4.0\n      if (hooks && config?.jobs?.runHooks !== true) {\n        for (const [hookKey, hook] of Object.entries(hooks)) {\n          const defaultAmount = hookKey === 'afterRead' || hookKey === 'beforeChange' ? 1 : 0\n          if (hook.length > defaultAmount) {\n            // eslint-disable-next-line no-console\n            console.warn(\n              `The jobsCollectionOverrides function is returning a collection with an additional ${hookKey} hook defined. These hooks will not run unless the jobs.runHooks option is set to true. Setting this option to true will negatively impact performance.`,\n            )\n            break\n          }\n        }\n      }\n    }\n    const sanitizedJobsCollection = await sanitizeCollection(\n      config as unknown as Config,\n      defaultJobsCollection,\n      richTextSanitizationPromises,\n      validRelationships,\n    )\n\n    ;(config.collections ??= []).push(sanitizedJobsCollection)\n  }\n\n  if (config.folders !== false && folderEnabledCollections.length) {\n    await addFolderCollection({\n      collectionSpecific: config.folders!.collectionSpecific,\n      config: config as unknown as Config,\n      folderEnabledCollections,\n      richTextSanitizationPromises,\n      validRelationships,\n    })\n  }\n\n  configWithDefaults.collections!.push(\n    await sanitizeCollection(\n      config as unknown as Config,\n      getLockedDocumentsCollection(config as unknown as Config),\n      richTextSanitizationPromises,\n      validRelationships,\n    ),\n  )\n\n  configWithDefaults.collections!.push(\n    await sanitizeCollection(\n      config as unknown as Config,\n      getPreferencesCollection(config as unknown as Config),\n      richTextSanitizationPromises,\n      validRelationships,\n    ),\n  )\n\n  const migrations = await sanitizeCollection(\n    config as unknown as Config,\n    migrationsCollection,\n    richTextSanitizationPromises,\n    validRelationships,\n  )\n\n  // @ts-expect-error indexSortableFields is only valid for @payloadcms/db-mongodb\n  if (config?.db?.indexSortableFields) {\n    migrations.indexes = [\n      {\n        fields: ['batch', 'name'],\n        unique: false,\n      },\n    ]\n  }\n  configWithDefaults.collections!.push(migrations)\n\n  if (queryPresetsCollections.length > 0) {\n    configWithDefaults.collections!.push(\n      await sanitizeCollection(\n        config as unknown as Config,\n        getQueryPresetsConfig(config as unknown as Config),\n        richTextSanitizationPromises,\n        validRelationships,\n      ),\n    )\n  }\n\n  if (config.serverURL !== '') {\n    config.csrf!.push(config.serverURL!)\n  }\n\n  const uploadAdapters = new Set<string>()\n  // interact with all collections\n  for (const collection of config.collections!) {\n    // deduped upload adapters\n    if (collection.upload?.adapter) {\n      uploadAdapters.add(collection.upload.adapter)\n    }\n  }\n\n  if (!config.upload) {\n    config.upload = { adapters: [] }\n  }\n\n  config.upload.adapters = Array.from(\n    new Set(config.collections!.map((c) => c.upload?.adapter).filter(Boolean) as string[]),\n  )\n\n  // Pass through the email config as is so adapters don't break\n  if (incomingConfig.email) {\n    config.email = incomingConfig.email\n  }\n\n  /*\n    Execute richText sanitization\n   */\n  if (typeof incomingConfig.editor === 'function') {\n    config.editor = await incomingConfig.editor({\n      config: config as SanitizedConfig,\n      isRoot: true,\n      parentIsLocalized: false,\n    })\n    if (config.editor.i18n && Object.keys(config.editor.i18n).length >= 0) {\n      config.i18n.translations = deepMergeSimple(config.i18n.translations, config.editor.i18n)\n    }\n  }\n\n  const promises: Promise<void>[] = []\n\n  for (const sanitizeFunction of richTextSanitizationPromises) {\n    promises.push(sanitizeFunction(config as SanitizedConfig))\n  }\n\n  await Promise.all(promises)\n\n  return config as SanitizedConfig\n}\n"],"names":["en","deepMergeSimple","defaultUserCollection","authRootEndpoints","sanitizeCollection","migrationsCollection","DuplicateCollection","InvalidConfiguration","defaultTimezones","addFolderCollection","addFolderFieldToCollection","sanitizeGlobal","baseBlockFields","formatLabels","sanitizeFields","getLockedDocumentsCollection","lockedDocumentsCollectionSlug","getPreferencesCollection","preferencesCollectionSlug","getQueryPresetsConfig","queryPresetsCollectionSlug","getDefaultJobsCollection","jobsCollectionSlug","getJobStatsGlobal","flattenBlock","getSchedulePublishTask","addDefaultsToConfig","setupOrderable","sanitizeAdminConfig","configToSanitize","sanitizedConfig","compatibility","allowLocalizedWithinLocalized","process","env","NEXT_PUBLIC_PAYLOAD_COMPATIBILITY_allowLocalizedWithinLocalized","loggingLevels","Forbidden","Locked","MissingFile","NotFound","ValidationError","admin","user","firstCollectionWithAuth","collections","find","auth","Boolean","slug","push","userCollection","timezones","supportedTimezones","_internalSupportedTimezones","Intl","supportedValuesOf","forEach","timezone","value","includes","sanitizeConfig","incomingConfig","configWithDefaults","config","endpoints","endpoint","localization","locales","length","firstLocale","localeCodes","map","locale","code","label","rtl","toString","fallback","i18nConfig","fallbackLanguage","supportedLanguages","translations","i18n","supportedLangKeys","Object","keys","fallbackLang","richTextSanitizationPromises","schedulePublishCollections","queryPresetsCollections","schedulePublishGlobals","collectionSlugs","Set","validRelationships","c","folders","blocks","block","sanitizedBlock","_sanitized","fields","concat","labels","existingFieldNames","parentIsLocalized","flattenedSanitizedBlock","folderEnabledCollections","i","has","add","draftsConfig","versions","drafts","schedulePublish","enableQueryPresets","collection","collectionSpecific","folderFieldName","fieldName","folderSlug","globals","jobs","tasks","adminUserSlug","enabled","Array","isArray","workflows","hasScheduleProperty","some","task","schedule","workflow","scheduling","stats","defaultJobsCollection","jobsCollectionOverrides","hooks","runHooks","hookKey","hook","entries","defaultAmount","console","warn","sanitizedJobsCollection","migrations","db","indexSortableFields","indexes","unique","serverURL","csrf","uploadAdapters","upload","adapter","adapters","from","filter","email","editor","isRoot","promises","sanitizeFunction","Promise","all"],"mappings":"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"}},
    {"offset": {"line": 5648, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/config/build.ts"],"sourcesContent":["import type { Config, SanitizedConfig } from './types.js'\n\nimport { sanitizeConfig } from './sanitize.js'\n\n/**\n * @description Builds and validates Payload configuration\n * @param config Payload Config\n * @returns Built and sanitized Payload Config\n */\nexport async function buildConfig(config: Config): Promise<SanitizedConfig> {\n  if (Array.isArray(config.plugins)) {\n    let configAfterPlugins = config\n    for (const plugin of config.plugins) {\n      configAfterPlugins = await plugin(configAfterPlugins)\n    }\n    return await sanitizeConfig(configAfterPlugins)\n  }\n\n  return await sanitizeConfig(config)\n}\n"],"names":["sanitizeConfig","buildConfig","config","Array","isArray","plugins","configAfterPlugins","plugin"],"mappings":";;;;AAEA,SAASA,cAAc,QAAQ,gBAAe;;AAOvC,eAAeC,YAAYC,MAAc;IAC9C,IAAIC,MAAMC,OAAO,CAACF,OAAOG,OAAO,GAAG;QACjC,IAAIC,qBAAqBJ;QACzB,KAAK,MAAMK,UAAUL,OAAOG,OAAO,CAAE;YACnCC,qBAAqB,MAAMC,OAAOD;QACpC;QACA,OAAO,UAAMN,+QAAAA,EAAeM;IAC9B;IAEA,OAAO,UAAMN,+QAAAA,EAAeE;AAC9B"}},
    {"offset": {"line": 5668, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/checkPayloadDependencies.ts"],"sourcesContent":["import { checkDependencies } from './utilities/dependencies/dependencyChecker.js'\nimport { PAYLOAD_PACKAGE_LIST } from './versions/payloadPackageList.js'\n\nexport function checkPayloadDependencies() {\n  const dependencies = [...PAYLOAD_PACKAGE_LIST]\n\n  if (process.env.PAYLOAD_CI_DEPENDENCY_CHECKER !== 'true') {\n    dependencies.push('@payloadcms/plugin-sentry')\n  }\n\n  // First load. First check if there are mismatching dependency versions of payload packages\n  void checkDependencies({\n    dependencyGroups: [\n      {\n        name: 'payload',\n        dependencies,\n        targetVersionDependency: 'payload',\n      },\n    ],\n  })\n}\n"],"names":["checkDependencies","PAYLOAD_PACKAGE_LIST","checkPayloadDependencies","dependencies","process","env","PAYLOAD_CI_DEPENDENCY_CHECKER","push","dependencyGroups","name","targetVersionDependency"],"mappings":";;;;AAAA,SAASA,iBAAiB,QAAQ,gDAA+C;AACjF,SAASC,oBAAoB,QAAQ,mCAAkC;;;AAEhE,SAASC;IACd,MAAMC,eAAe;WAAIF,iSAAAA;KAAqB;IAE9C,IAAIG,QAAQC,GAAG,CAACC,6BAA6B,KAAK,QAAQ;QACxDH,aAAaI,IAAI,CAAC;IACpB;IAEA,2FAA2F;IAC3F,SAAKP,8SAAAA,EAAkB;QACrBQ,kBAAkB;YAChB;gBACEC,MAAM;gBACNN;gBACAO,yBAAyB;YAC3B;SACD;IACH;AACF"}},
    {"offset": {"line": 5698, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/email/defaults.ts"],"sourcesContent":["import type { InitializedEmailAdapter } from './types.js'\n\nexport const emailDefaults: Pick<\n  InitializedEmailAdapter,\n  'defaultFromAddress' | 'defaultFromName'\n> = {\n  defaultFromAddress: 'info@payloadcms.com',\n  defaultFromName: 'Payload',\n}\n"],"names":["emailDefaults","defaultFromAddress","defaultFromName"],"mappings":";;;;AAEO,MAAMA,gBAGT;IACFC,oBAAoB;IACpBC,iBAAiB;AACnB,EAAC"}},
    {"offset": {"line": 5710, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/email/getStringifiedToAddress.ts"],"sourcesContent":["import type { SendEmailOptions } from './types.js'\n\nexport const getStringifiedToAddress = (message: SendEmailOptions): string | undefined => {\n  let stringifiedTo: string | undefined\n\n  if (typeof message.to === 'string') {\n    stringifiedTo = message.to\n  } else if (Array.isArray(message.to)) {\n    stringifiedTo = message.to\n      .map((to) => {\n        if (typeof to === 'string') {\n          return to\n        } else if (to.address) {\n          return to.address\n        }\n        return ''\n      })\n      .join(', ')\n  } else if (message.to?.address) {\n    stringifiedTo = message.to.address\n  }\n  return stringifiedTo\n}\n"],"names":["getStringifiedToAddress","message","stringifiedTo","to","Array","isArray","map","address","join"],"mappings":";;;;AAEO,MAAMA,0BAA0B,CAACC;IACtC,IAAIC;IAEJ,IAAI,OAAOD,QAAQE,EAAE,KAAK,UAAU;QAClCD,gBAAgBD,QAAQE,EAAE;IAC5B,OAAO,IAAIC,MAAMC,OAAO,CAACJ,QAAQE,EAAE,GAAG;QACpCD,gBAAgBD,QAAQE,EAAE,CACvBG,GAAG,CAAC,CAACH;YACJ,IAAI,OAAOA,OAAO,UAAU;gBAC1B,OAAOA;YACT,OAAO,IAAIA,GAAGI,OAAO,EAAE;gBACrB,OAAOJ,GAAGI,OAAO;YACnB;YACA,OAAO;QACT,GACCC,IAAI,CAAC;IACV,OAAO,IAAIP,QAAQE,EAAE,EAAEI,SAAS;QAC9BL,gBAAgBD,QAAQE,EAAE,CAACI,OAAO;IACpC;IACA,OAAOL;AACT,EAAC"}},
    {"offset": {"line": 5736, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/email/consoleEmailAdapter.ts"],"sourcesContent":["import type { EmailAdapter } from './types.js'\n\nimport { emailDefaults } from './defaults.js'\nimport { getStringifiedToAddress } from './getStringifiedToAddress.js'\n\nexport const consoleEmailAdapter: EmailAdapter<void> = ({ payload }) => ({\n  name: 'console',\n  defaultFromAddress: emailDefaults.defaultFromAddress,\n  defaultFromName: emailDefaults.defaultFromName,\n  sendEmail: async (message) => {\n    const stringifiedTo = getStringifiedToAddress(message)\n    const res = `Email attempted without being configured. To: '${stringifiedTo}', Subject: '${message.subject}'`\n    payload.logger.info({ msg: res })\n    return Promise.resolve()\n  },\n})\n"],"names":["emailDefaults","getStringifiedToAddress","consoleEmailAdapter","payload","name","defaultFromAddress","defaultFromName","sendEmail","message","stringifiedTo","res","subject","logger","info","msg","Promise","resolve"],"mappings":";;;;AAEA,SAASA,aAAa,QAAQ,gBAAe;AAC7C,SAASC,uBAAuB,QAAQ,+BAA8B;;;AAE/D,MAAMC,sBAA0C,CAAC,EAAEC,OAAO,EAAE,GAAM,CAAA;QACvEC,MAAM;QACNC,oBAAoBL,6QAAAA,CAAcK,kBAAkB;QACpDC,iBAAiBN,6QAAAA,CAAcM,eAAe;QAC9CC,WAAW,OAAOC;YAChB,MAAMC,oBAAgBR,sSAAAA,EAAwBO;YAC9C,MAAME,MAAM,CAAC,+CAA+C,EAAED,cAAc,aAAa,EAAED,QAAQG,OAAO,CAAC,CAAC,CAAC;YAC7GR,QAAQS,MAAM,CAACC,IAAI,CAAC;gBAAEC,KAAKJ;YAAI;YAC/B,OAAOK,QAAQC,OAAO;QACxB;IACF,CAAA,EAAE"}},
    {"offset": {"line": 5761, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/node_modules/.pnpm/payload%403.64.0_graphql%4016.12.0_typescript%405.5.2/node_modules/payload/src/index.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable @typescript-eslint/ban-ts-comment */\nimport type { ExecutionResult, GraphQLSchema, ValidationRule } from 'graphql'\nimport type { Request as graphQLRequest, OperationArgs } from 'graphql-http'\nimport type { Logger } from 'pino'\nimport type { NonNever } from 'ts-essentials'\n\nimport { spawn } from 'child_process'\nimport crypto from 'crypto'\nimport { fileURLToPath } from 'node:url'\nimport path from 'path'\nimport WebSocket from 'ws'\n\nimport type { AuthArgs } from './auth/operations/auth.js'\nimport type { Result as ForgotPasswordResult } from './auth/operations/forgotPassword.js'\nimport type { Result as LoginResult } from './auth/operations/login.js'\nimport type { Result as ResetPasswordResult } from './auth/operations/resetPassword.js'\nimport type { AuthStrategy, UntypedUser } from './auth/types.js'\nimport type {\n  BulkOperationResult,\n  Collection,\n  DataFromCollectionSlug,\n  SelectFromCollectionSlug,\n  TypeWithID,\n} from './collections/config/types.js'\n\nimport {\n  forgotPasswordLocal,\n  type Options as ForgotPasswordOptions,\n} from './auth/operations/local/forgotPassword.js'\nimport { loginLocal, type Options as LoginOptions } from './auth/operations/local/login.js'\nimport {\n  resetPasswordLocal,\n  type Options as ResetPasswordOptions,\n} from './auth/operations/local/resetPassword.js'\nimport { unlockLocal, type Options as UnlockOptions } from './auth/operations/local/unlock.js'\nimport {\n  verifyEmailLocal,\n  type Options as VerifyEmailOptions,\n} from './auth/operations/local/verifyEmail.js'\nexport type { FieldState } from './admin/forms/Form.js'\nimport type { InitOptions, SanitizedConfig } from './config/types.js'\nimport type { BaseDatabaseAdapter, PaginatedDistinctDocs, PaginatedDocs } from './database/types.js'\nimport type { InitializedEmailAdapter } from './email/types.js'\nimport type { DataFromGlobalSlug, Globals, SelectFromGlobalSlug } from './globals/config/types.js'\nimport type {\n  ApplyDisableErrors,\n  JsonObject,\n  SelectType,\n  TransformCollectionWithSelect,\n  TransformGlobalWithSelect,\n} from './types/index.js'\nimport type { TraverseFieldsCallback } from './utilities/traverseFields.js'\n\nimport { countLocal, type Options as CountOptions } from './collections/operations/local/count.js'\nimport {\n  createLocal,\n  type Options as CreateOptions,\n} from './collections/operations/local/create.js'\nimport {\n  type ByIDOptions as DeleteByIDOptions,\n  deleteLocal,\n  type ManyOptions as DeleteManyOptions,\n  type Options as DeleteOptions,\n} from './collections/operations/local/delete.js'\nimport {\n  duplicateLocal,\n  type Options as DuplicateOptions,\n} from './collections/operations/local/duplicate.js'\nimport { findLocal, type Options as FindOptions } from './collections/operations/local/find.js'\nimport {\n  findByIDLocal,\n  type Options as FindByIDOptions,\n} from './collections/operations/local/findByID.js'\nimport {\n  findDistinct as findDistinctLocal,\n  type Options as FindDistinctOptions,\n} from './collections/operations/local/findDistinct.js'\nimport {\n  findVersionByIDLocal,\n  type Options as FindVersionByIDOptions,\n} from './collections/operations/local/findVersionByID.js'\nimport {\n  findVersionsLocal,\n  type Options as FindVersionsOptions,\n} from './collections/operations/local/findVersions.js'\nimport {\n  restoreVersionLocal,\n  type Options as RestoreVersionOptions,\n} from './collections/operations/local/restoreVersion.js'\nimport {\n  type ByIDOptions as UpdateByIDOptions,\n  updateLocal,\n  type ManyOptions as UpdateManyOptions,\n  type Options as UpdateOptions,\n} from './collections/operations/local/update.js'\nimport {\n  countGlobalVersionsLocal,\n  type CountGlobalVersionsOptions,\n} from './globals/operations/local/countVersions.js'\nimport {\n  type Options as FindGlobalOptions,\n  findOneGlobalLocal,\n} from './globals/operations/local/findOne.js'\nimport {\n  findGlobalVersionByIDLocal,\n  type Options as FindGlobalVersionByIDOptions,\n} from './globals/operations/local/findVersionByID.js'\nimport {\n  findGlobalVersionsLocal,\n  type Options as FindGlobalVersionsOptions,\n} from './globals/operations/local/findVersions.js'\nimport {\n  restoreGlobalVersionLocal,\n  type Options as RestoreGlobalVersionOptions,\n} from './globals/operations/local/restoreVersion.js'\nimport {\n  updateGlobalLocal,\n  type Options as UpdateGlobalOptions,\n} from './globals/operations/local/update.js'\nexport type * from './admin/types.js'\nimport type { SupportedLanguages } from '@payloadcms/translations'\n\nimport { Cron } from 'croner'\n\nimport type { ClientConfig } from './config/client.js'\nimport type { KVAdapter } from './kv/index.js'\nimport type { BaseJob } from './queues/config/types/workflowTypes.js'\nimport type { TypeWithVersion } from './versions/types.js'\n\nimport { decrypt, encrypt } from './auth/crypto.js'\nimport { authLocal } from './auth/operations/local/auth.js'\nimport { APIKeyAuthentication } from './auth/strategies/apiKey.js'\nimport { JWTAuthentication } from './auth/strategies/jwt.js'\nimport { generateImportMap, type ImportMap } from './bin/generateImportMap/index.js'\nimport { checkPayloadDependencies } from './checkPayloadDependencies.js'\nimport { countVersionsLocal } from './collections/operations/local/countVersions.js'\nimport { consoleEmailAdapter } from './email/consoleEmailAdapter.js'\nimport { fieldAffectsData, type FlattenedBlock } from './fields/config/types.js'\nimport { getJobsLocalAPI } from './queues/localAPI.js'\nimport { _internal_jobSystemGlobals } from './queues/utilities/getCurrentDate.js'\nimport { isNextBuild } from './utilities/isNextBuild.js'\nimport { getLogger } from './utilities/logger.js'\nimport { serverInit as serverInitTelemetry } from './utilities/telemetry/events/serverInit.js'\nimport { traverseFields } from './utilities/traverseFields.js'\n\n/**\n * Export of all base fields that could potentially be\n * useful as users wish to extend built-in fields with custom logic\n */\nexport { accountLockFields as baseAccountLockFields } from './auth/baseFields/accountLock.js'\nexport { apiKeyFields as baseAPIKeyFields } from './auth/baseFields/apiKey.js'\nexport { baseAuthFields } from './auth/baseFields/auth.js'\nexport { emailFieldConfig as baseEmailField } from './auth/baseFields/email.js'\nexport { sessionsFieldConfig as baseSessionsField } from './auth/baseFields/sessions.js'\nexport { usernameFieldConfig as baseUsernameField } from './auth/baseFields/username.js'\n\nexport { verificationFields as baseVerificationFields } from './auth/baseFields/verification.js'\nexport { executeAccess } from './auth/executeAccess.js'\nexport { executeAuthStrategies } from './auth/executeAuthStrategies.js'\nexport { extractAccessFromPermission } from './auth/extractAccessFromPermission.js'\nexport { getAccessResults } from './auth/getAccessResults.js'\nexport { getFieldsToSign } from './auth/getFieldsToSign.js'\nexport { getLoginOptions } from './auth/getLoginOptions.js'\nexport interface GeneratedTypes {\n  authUntyped: {\n    [slug: string]: {\n      forgotPassword: {\n        email: string\n      }\n      login: {\n        email: string\n        password: string\n      }\n      registerFirstUser: {\n        email: string\n        password: string\n      }\n      unlock: {\n        email: string\n      }\n    }\n  }\n\n  blocksUntyped: {\n    [slug: string]: JsonObject\n  }\n  collectionsJoinsUntyped: {\n    [slug: string]: {\n      [schemaPath: string]: CollectionSlug\n    }\n  }\n  collectionsSelectUntyped: {\n    [slug: string]: SelectType\n  }\n\n  collectionsUntyped: {\n    [slug: string]: JsonObject & TypeWithID\n  }\n  dbUntyped: {\n    defaultIDType: number | string\n  }\n  globalsSelectUntyped: {\n    [slug: string]: SelectType\n  }\n\n  globalsUntyped: {\n    [slug: string]: JsonObject\n  }\n  jobsUntyped: {\n    tasks: {\n      [slug: string]: {\n        input?: JsonObject\n        output?: JsonObject\n      }\n    }\n    workflows: {\n      [slug: string]: {\n        input: JsonObject\n      }\n    }\n  }\n  localeUntyped: null | string\n  userUntyped: UntypedUser\n}\n\n// Helper type to resolve the correct type using conditional types\ntype ResolveCollectionType<T> = 'collections' extends keyof T\n  ? T['collections']\n  : // @ts-expect-error\n    T['collectionsUntyped']\n\ntype ResolveBlockType<T> = 'blocks' extends keyof T\n  ? T['blocks']\n  : // @ts-expect-error\n    T['blocksUntyped']\n\ntype ResolveCollectionSelectType<T> = 'collectionsSelect' extends keyof T\n  ? T['collectionsSelect']\n  : // @ts-expect-error\n    T['collectionsSelectUntyped']\n\ntype ResolveCollectionJoinsType<T> = 'collectionsJoins' extends keyof T\n  ? T['collectionsJoins']\n  : // @ts-expect-error\n    T['collectionsJoinsUntyped']\n\ntype ResolveGlobalType<T> = 'globals' extends keyof T\n  ? T['globals']\n  : // @ts-expect-error\n    T['globalsUntyped']\n\ntype ResolveGlobalSelectType<T> = 'globalsSelect' extends keyof T\n  ? T['globalsSelect']\n  : // @ts-expect-error\n    T['globalsSelectUntyped']\n\n// Applying helper types to GeneratedTypes\nexport type TypedCollection = ResolveCollectionType<GeneratedTypes>\n\nexport type TypedBlock = ResolveBlockType<GeneratedTypes>\n\nexport type TypedUploadCollection = NonNever<{\n  [K in keyof TypedCollection]:\n    | 'filename'\n    | 'filesize'\n    | 'mimeType'\n    | 'url' extends keyof TypedCollection[K]\n    ? TypedCollection[K]\n    : never\n}>\n\nexport type TypedCollectionSelect = ResolveCollectionSelectType<GeneratedTypes>\n\nexport type TypedCollectionJoins = ResolveCollectionJoinsType<GeneratedTypes>\n\nexport type TypedGlobal = ResolveGlobalType<GeneratedTypes>\n\nexport type TypedGlobalSelect = ResolveGlobalSelectType<GeneratedTypes>\n\n// Extract string keys from the type\nexport type StringKeyOf<T> = Extract<keyof T, string>\n\n// Define the types for slugs using the appropriate collections and globals\nexport type CollectionSlug = StringKeyOf<TypedCollection>\n\nexport type BlockSlug = StringKeyOf<TypedBlock>\n\nexport type UploadCollectionSlug = StringKeyOf<TypedUploadCollection>\n\ntype ResolveDbType<T> = 'db' extends keyof T\n  ? T['db']\n  : // @ts-expect-error\n    T['dbUntyped']\n\nexport type DefaultDocumentIDType = ResolveDbType<GeneratedTypes>['defaultIDType']\nexport type GlobalSlug = StringKeyOf<TypedGlobal>\n\n// now for locale and user\n\n// @ts-expect-error\ntype ResolveLocaleType<T> = 'locale' extends keyof T ? T['locale'] : T['localeUntyped']\n// @ts-expect-error\ntype ResolveUserType<T> = 'user' extends keyof T ? T['user'] : T['userUntyped']\n\nexport type TypedLocale = ResolveLocaleType<GeneratedTypes>\n\n/**\n * @todo rename to `User` in 4.0\n */\nexport type TypedUser = ResolveUserType<GeneratedTypes>\n\n// @ts-expect-error\ntype ResolveAuthOperationsType<T> = 'auth' extends keyof T ? T['auth'] : T['authUntyped']\nexport type TypedAuthOperations = ResolveAuthOperationsType<GeneratedTypes>\n\n// @ts-expect-error\ntype ResolveJobOperationsType<T> = 'jobs' extends keyof T ? T['jobs'] : T['jobsUntyped']\nexport type TypedJobs = ResolveJobOperationsType<GeneratedTypes>\n\ntype HasPayloadJobsType = 'collections' extends keyof GeneratedTypes\n  ? 'payload-jobs' extends keyof TypedCollection\n    ? true\n    : false\n  : false\n\n/**\n * Represents a job in the `payload-jobs` collection, referencing a queued workflow or task (= Job).\n * If a generated type for the `payload-jobs` collection is not available, falls back to the BaseJob type.\n *\n * `input` and `taksStatus` are always present here, as the job afterRead hook will always populate them.\n */\nexport type Job<\n  TWorkflowSlugOrInput extends false | keyof TypedJobs['workflows'] | object = false,\n> = HasPayloadJobsType extends true\n  ? {\n      input: BaseJob<TWorkflowSlugOrInput>['input']\n      taskStatus: BaseJob<TWorkflowSlugOrInput>['taskStatus']\n    } & Omit<TypedCollection['payload-jobs'], 'input' | 'taskStatus'>\n  : BaseJob<TWorkflowSlugOrInput>\n\nconst filename = fileURLToPath(import.meta.url)\nconst dirname = path.dirname(filename)\n\nlet checkedDependencies = false\n\n/**\n * @description Payload\n */\nexport class BasePayload {\n  /**\n   * @description Authorization and Authentication using headers and cookies to run auth user strategies\n   * @returns permissions: Permissions\n   * @returns user: User\n   */\n  auth = async (options: AuthArgs) => {\n    return authLocal(this, options)\n  }\n\n  authStrategies!: AuthStrategy[]\n\n  blocks: Record<BlockSlug, FlattenedBlock> = {}\n\n  collections: Record<CollectionSlug, Collection> = {}\n\n  config!: SanitizedConfig\n  /**\n   * @description Performs count operation\n   * @param options\n   * @returns count of documents satisfying query\n   */\n  count = async <T extends CollectionSlug>(\n    options: CountOptions<T>,\n  ): Promise<{ totalDocs: number }> => {\n    return countLocal(this, options)\n  }\n\n  /**\n   * @description Performs countGlobalVersions operation\n   * @param options\n   * @returns count of global document versions satisfying query\n   */\n  countGlobalVersions = async <T extends GlobalSlug>(\n    options: CountGlobalVersionsOptions<T>,\n  ): Promise<{ totalDocs: number }> => {\n    return countGlobalVersionsLocal(this, options)\n  }\n\n  /**\n   * @description Performs countVersions operation\n   * @param options\n   * @returns count of document versions satisfying query\n   */\n  countVersions = async <T extends CollectionSlug>(\n    options: CountOptions<T>,\n  ): Promise<{ totalDocs: number }> => {\n    return countVersionsLocal(this, options)\n  }\n\n  /**\n   * @description Performs create operation\n   * @param options\n   * @returns created document\n   */\n  create = async <TSlug extends CollectionSlug, TSelect extends SelectFromCollectionSlug<TSlug>>(\n    options: CreateOptions<TSlug, TSelect>,\n  ): Promise<TransformCollectionWithSelect<TSlug, TSelect>> => {\n    return createLocal<TSlug, TSelect>(this, options)\n  }\n\n  crons: Cron[] = []\n  db!: DatabaseAdapter\n\n  decrypt = decrypt\n\n  destroy = async () => {\n    if (this.crons.length) {\n      // Remove all crons from the list before stopping them\n      const cronsToStop = this.crons.splice(0, this.crons.length)\n      await Promise.all(cronsToStop.map((cron) => cron.stop()))\n    }\n\n    if (this.db?.destroy && typeof this.db.destroy === 'function') {\n      await this.db.destroy()\n    }\n  }\n\n  duplicate = async <TSlug extends CollectionSlug, TSelect extends SelectFromCollectionSlug<TSlug>>(\n    options: DuplicateOptions<TSlug, TSelect>,\n  ): Promise<TransformCollectionWithSelect<TSlug, TSelect>> => {\n    return duplicateLocal<TSlug, TSelect>(this, options)\n  }\n\n  email!: InitializedEmailAdapter\n\n  // TODO: re-implement or remove?\n  // errorHandler: ErrorHandler\n\n  encrypt = encrypt\n\n  extensions!: (args: {\n    args: OperationArgs<any>\n    req: graphQLRequest<unknown, unknown>\n    result: ExecutionResult\n  }) => Promise<any>\n\n  /**\n   * @description Find documents with criteria\n   * @param options\n   * @returns documents satisfying query\n   */\n  find = async <TSlug extends CollectionSlug, TSelect extends SelectFromCollectionSlug<TSlug>>(\n    options: FindOptions<TSlug, TSelect>,\n  ): Promise<PaginatedDocs<TransformCollectionWithSelect<TSlug, TSelect>>> => {\n    return findLocal<TSlug, TSelect>(this, options)\n  }\n\n  /**\n   * @description Find document by ID\n   * @param options\n   * @returns document with specified ID\n   */\n  findByID = async <\n    TSlug extends CollectionSlug,\n    TDisableErrors extends boolean,\n    TSelect extends SelectFromCollectionSlug<TSlug>,\n  >(\n    options: FindByIDOptions<TSlug, TDisableErrors, TSelect>,\n  ): Promise<ApplyDisableErrors<TransformCollectionWithSelect<TSlug, TSelect>, TDisableErrors>> => {\n    return findByIDLocal<TSlug, TDisableErrors, TSelect>(this, options)\n  }\n\n  /**\n   * @description Find distinct field values\n   * @param options\n   * @returns result with distinct field values\n   */\n  findDistinct = async <\n    TSlug extends CollectionSlug,\n    TField extends keyof DataFromCollectionSlug<TSlug> & string,\n  >(\n    options: FindDistinctOptions<TSlug, TField>,\n  ): Promise<PaginatedDistinctDocs<Record<TField, DataFromCollectionSlug<TSlug>[TField]>>> => {\n    return findDistinctLocal(this, options)\n  }\n\n  findGlobal = async <TSlug extends GlobalSlug, TSelect extends SelectFromGlobalSlug<TSlug>>(\n    options: FindGlobalOptions<TSlug, TSelect>,\n  ): Promise<TransformGlobalWithSelect<TSlug, TSelect>> => {\n    return findOneGlobalLocal<TSlug, TSelect>(this, options)\n  }\n\n  /**\n   * @description Find global version by ID\n   * @param options\n   * @returns global version with specified ID\n   */\n  findGlobalVersionByID = async <TSlug extends GlobalSlug>(\n    options: FindGlobalVersionByIDOptions<TSlug>,\n  ): Promise<TypeWithVersion<DataFromGlobalSlug<TSlug>>> => {\n    return findGlobalVersionByIDLocal<TSlug>(this, options)\n  }\n\n  /**\n   * @description Find global versions with criteria\n   * @param options\n   * @returns versions satisfying query\n   */\n  findGlobalVersions = async <TSlug extends GlobalSlug>(\n    options: FindGlobalVersionsOptions<TSlug>,\n  ): Promise<PaginatedDocs<TypeWithVersion<DataFromGlobalSlug<TSlug>>>> => {\n    return findGlobalVersionsLocal<TSlug>(this, options)\n  }\n\n  /**\n   * @description Find version by ID\n   * @param options\n   * @returns version with specified ID\n   */\n  findVersionByID = async <TSlug extends CollectionSlug>(\n    options: FindVersionByIDOptions<TSlug>,\n  ): Promise<TypeWithVersion<DataFromCollectionSlug<TSlug>>> => {\n    return findVersionByIDLocal<TSlug>(this, options)\n  }\n\n  /**\n   * @description Find versions with criteria\n   * @param options\n   * @returns versions satisfying query\n   */\n  findVersions = async <TSlug extends CollectionSlug>(\n    options: FindVersionsOptions<TSlug>,\n  ): Promise<PaginatedDocs<TypeWithVersion<DataFromCollectionSlug<TSlug>>>> => {\n    return findVersionsLocal<TSlug>(this, options)\n  }\n\n  forgotPassword = async <TSlug extends CollectionSlug>(\n    options: ForgotPasswordOptions<TSlug>,\n  ): Promise<ForgotPasswordResult> => {\n    return forgotPasswordLocal<TSlug>(this, options)\n  }\n\n  getAdminURL = (): string => `${this.config.serverURL}${this.config.routes.admin}`\n\n  getAPIURL = (): string => `${this.config.serverURL}${this.config.routes.api}`\n\n  globals!: Globals\n\n  importMap!: ImportMap\n\n  jobs = getJobsLocalAPI(this)\n\n  /**\n   * Key Value storage\n   */\n  kv!: KVAdapter\n\n  logger!: Logger\n\n  login = async <TSlug extends CollectionSlug>(\n    options: LoginOptions<TSlug>,\n  ): Promise<{ user: DataFromCollectionSlug<TSlug> } & LoginResult> => {\n    return loginLocal<TSlug>(this, options)\n  }\n\n  resetPassword = async <TSlug extends CollectionSlug>(\n    options: ResetPasswordOptions<TSlug>,\n  ): Promise<ResetPasswordResult> => {\n    return resetPasswordLocal<TSlug>(this, options)\n  }\n\n  /**\n   * @description Restore global version by ID\n   * @param options\n   * @returns version with specified ID\n   */\n  restoreGlobalVersion = async <TSlug extends GlobalSlug>(\n    options: RestoreGlobalVersionOptions<TSlug>,\n  ): Promise<DataFromGlobalSlug<TSlug>> => {\n    return restoreGlobalVersionLocal<TSlug>(this, options)\n  }\n\n  /**\n   * @description Restore version by ID\n   * @param options\n   * @returns version with specified ID\n   */\n  restoreVersion = async <TSlug extends CollectionSlug>(\n    options: RestoreVersionOptions<TSlug>,\n  ): Promise<DataFromCollectionSlug<TSlug>> => {\n    return restoreVersionLocal<TSlug>(this, options)\n  }\n\n  schema!: GraphQLSchema\n\n  secret!: string\n\n  sendEmail!: InitializedEmailAdapter['sendEmail']\n\n  types!: {\n    arrayTypes: any\n    blockInputTypes: any\n    blockTypes: any\n    fallbackLocaleInputType?: any\n    groupTypes: any\n    localeInputType?: any\n    tabTypes: any\n  }\n\n  unlock = async <TSlug extends CollectionSlug>(\n    options: UnlockOptions<TSlug>,\n  ): Promise<boolean> => {\n    return unlockLocal<TSlug>(this, options)\n  }\n\n  updateGlobal = async <TSlug extends GlobalSlug, TSelect extends SelectFromGlobalSlug<TSlug>>(\n    options: UpdateGlobalOptions<TSlug, TSelect>,\n  ): Promise<TransformGlobalWithSelect<TSlug, TSelect>> => {\n    return updateGlobalLocal<TSlug, TSelect>(this, options)\n  }\n\n  validationRules!: (args: OperationArgs<any>) => ValidationRule[]\n\n  verifyEmail = async <TSlug extends CollectionSlug>(\n    options: VerifyEmailOptions<TSlug>,\n  ): Promise<boolean> => {\n    return verifyEmailLocal(this, options)\n  }\n\n  versions: {\n    [slug: string]: any // TODO: Type this\n  } = {}\n\n  async _initializeCrons() {\n    if (this.config.jobs.enabled && this.config.jobs.autoRun && !isNextBuild()) {\n      const DEFAULT_CRON = '* * * * *'\n      const DEFAULT_LIMIT = 10\n\n      const cronJobs =\n        typeof this.config.jobs.autoRun === 'function'\n          ? await this.config.jobs.autoRun(this)\n          : this.config.jobs.autoRun\n\n      await Promise.all(\n        cronJobs.map((cronConfig) => {\n          const jobAutorunCron = new Cron(\n            cronConfig.cron ?? DEFAULT_CRON,\n            async () => {\n              if (\n                _internal_jobSystemGlobals.shouldAutoSchedule &&\n                !cronConfig.disableScheduling &&\n                this.config.jobs.scheduling\n              ) {\n                await this.jobs.handleSchedules({\n                  allQueues: cronConfig.allQueues,\n                  queue: cronConfig.queue,\n                })\n              }\n\n              if (!_internal_jobSystemGlobals.shouldAutoRun) {\n                return\n              }\n\n              if (typeof this.config.jobs.shouldAutoRun === 'function') {\n                const shouldAutoRun = await this.config.jobs.shouldAutoRun(this)\n\n                if (!shouldAutoRun) {\n                  jobAutorunCron.stop()\n                  return\n                }\n              }\n\n              await this.jobs.run({\n                allQueues: cronConfig.allQueues,\n                limit: cronConfig.limit ?? DEFAULT_LIMIT,\n                queue: cronConfig.queue,\n                silent: cronConfig.silent,\n              })\n            },\n            {\n              // Do not run consecutive crons if previous crons still ongoing\n              protect: true,\n            },\n          )\n\n          this.crons.push(jobAutorunCron)\n        }),\n      )\n    }\n  }\n\n  async bin({\n    args,\n    cwd,\n    log,\n  }: {\n    args: string[]\n    cwd?: string\n    log?: boolean\n  }): Promise<{ code: number }> {\n    return new Promise((resolve, reject) => {\n      const spawned = spawn('node', [path.resolve(dirname, '../bin.js'), ...args], {\n        cwd,\n        stdio: log || log === undefined ? 'inherit' : 'ignore',\n      })\n\n      spawned.on('exit', (code) => {\n        resolve({ code: code! })\n      })\n\n      spawned.on('error', (error) => {\n        reject(error)\n      })\n    })\n  }\n\n  /**\n   * @description delete one or more documents\n   * @param options\n   * @returns Updated document(s)\n   */\n  delete<TSlug extends CollectionSlug, TSelect extends SelectFromCollectionSlug<TSlug>>(\n    options: DeleteByIDOptions<TSlug, TSelect>,\n  ): Promise<TransformCollectionWithSelect<TSlug, TSelect>>\n\n  delete<TSlug extends CollectionSlug, TSelect extends SelectFromCollectionSlug<TSlug>>(\n    options: DeleteManyOptions<TSlug, TSelect>,\n  ): Promise<BulkOperationResult<TSlug, TSelect>>\n\n  delete<TSlug extends CollectionSlug, TSelect extends SelectFromCollectionSlug<TSlug>>(\n    options: DeleteOptions<TSlug, TSelect>,\n  ): Promise<BulkOperationResult<TSlug, TSelect> | TransformCollectionWithSelect<TSlug, TSelect>> {\n    return deleteLocal<TSlug, TSelect>(this, options)\n  }\n\n  /**\n   * @description Initializes Payload\n   * @param options\n   */\n  async init(options: InitOptions): Promise<Payload> {\n    if (\n      process.env.NODE_ENV !== 'production' &&\n      process.env.PAYLOAD_DISABLE_DEPENDENCY_CHECKER !== 'true' &&\n      !checkedDependencies\n    ) {\n      checkedDependencies = true\n      void checkPayloadDependencies()\n    }\n\n    this.importMap = options.importMap!\n\n    if (!options?.config) {\n      throw new Error('Error: the payload config is required to initialize payload.')\n    }\n\n    this.config = await options.config\n    this.logger = getLogger('payload', this.config.logger)\n\n    if (!this.config.secret) {\n      throw new Error('Error: missing secret key. A secret key is needed to secure Payload.')\n    }\n\n    this.secret = crypto.createHash('sha256').update(this.config.secret).digest('hex').slice(0, 32)\n\n    this.globals = {\n      config: this.config.globals,\n    }\n\n    for (const collection of this.config.collections) {\n      let customIDType: string | undefined = undefined\n      const findCustomID: TraverseFieldsCallback = ({ field }) => {\n        if (\n          ['array', 'blocks', 'group'].includes(field.type) ||\n          (field.type === 'tab' && 'name' in field)\n        ) {\n          return true\n        }\n\n        if (!fieldAffectsData(field)) {\n          return\n        }\n\n        if (field.name === 'id') {\n          customIDType = field.type\n          return true\n        }\n      }\n\n      traverseFields({\n        callback: findCustomID,\n        config: this.config,\n        fields: collection.fields,\n        parentIsLocalized: false,\n      })\n\n      this.collections[collection.slug] = {\n        config: collection,\n        customIDType,\n      }\n    }\n\n    this.blocks = this.config.blocks!.reduce(\n      (blocks, block) => {\n        blocks[block.slug] = block\n        return blocks\n      },\n      {} as Record<string, FlattenedBlock>,\n    )\n\n    // Generate types on startup\n    if (process.env.NODE_ENV !== 'production' && this.config.typescript.autoGenerate !== false) {\n      // We cannot run it directly here, as generate-types imports json-schema-to-typescript, which breaks on turbopack.\n      // see: https://github.com/vercel/next.js/issues/66723\n      void this.bin({\n        args: ['generate:types'],\n        log: false,\n      })\n    }\n\n    this.db = this.config.db.init({ payload: this })\n    this.db.payload = this\n\n    this.kv = this.config.kv.init({ payload: this })\n\n    if (this.db?.init) {\n      await this.db.init()\n    }\n\n    if (!options.disableDBConnect && this.db.connect) {\n      await this.db.connect()\n    }\n\n    // Load email adapter\n    if (this.config.email instanceof Promise) {\n      const awaitedAdapter = await this.config.email\n      this.email = awaitedAdapter({ payload: this })\n    } else if (this.config.email) {\n      this.email = this.config.email({ payload: this })\n    } else {\n      if (process.env.NEXT_PHASE !== 'phase-production-build') {\n        this.logger.warn(\n          `No email adapter provided. Email will be written to console. More info at https://payloadcms.com/docs/email/overview.`,\n        )\n      }\n\n      this.email = consoleEmailAdapter({ payload: this })\n    }\n\n    // Warn if image resizing is enabled but sharp is not installed\n    if (\n      !this.config.sharp &&\n      this.config.collections.some((c) => c.upload.imageSizes || c.upload.formatOptions)\n    ) {\n      this.logger.warn(\n        `Image resizing is enabled for one or more collections, but sharp not installed. Please install 'sharp' and pass into the config.`,\n      )\n    }\n\n    // Warn if user is deploying to Vercel, and any upload collection is missing a storage adapter\n    if (process.env.VERCEL) {\n      const uploadCollWithoutAdapter = this.config.collections.filter(\n        (c) => c.upload && c.upload.adapter === undefined, // Uploads enabled, but no storage adapter provided\n      )\n\n      if (uploadCollWithoutAdapter.length) {\n        const slugs = uploadCollWithoutAdapter.map((c) => c.slug).join(', ')\n        this.logger.warn(\n          `Collections with uploads enabled require a storage adapter when deploying to Vercel. Collection(s) without storage adapters: ${slugs}. See https://payloadcms.com/docs/upload/storage-adapters for more info.`,\n        )\n      }\n    }\n\n    this.sendEmail = this.email['sendEmail']\n\n    serverInitTelemetry(this)\n\n    // 1. loop over collections, if collection has auth strategy, initialize and push to array\n    let jwtStrategyEnabled = false\n    this.authStrategies = this.config.collections.reduce((authStrategies, collection) => {\n      if (collection?.auth) {\n        if (collection.auth.strategies.length > 0) {\n          authStrategies.push(...collection.auth.strategies)\n        }\n\n        // 2. if api key enabled, push api key strategy into the array\n        if (collection.auth?.useAPIKey) {\n          authStrategies.push({\n            name: `${collection.slug}-api-key`,\n            authenticate: APIKeyAuthentication(collection),\n          })\n        }\n\n        // 3. if localStrategy flag is true\n        if (!collection.auth.disableLocalStrategy && !jwtStrategyEnabled) {\n          jwtStrategyEnabled = true\n        }\n      }\n\n      return authStrategies\n    }, [] as AuthStrategy[])\n\n    // 4. if enabled, push jwt strategy into authStrategies last\n    if (jwtStrategyEnabled) {\n      this.authStrategies.push({\n        name: 'local-jwt',\n        authenticate: JWTAuthentication,\n      })\n    }\n\n    try {\n      if (!options.disableOnInit) {\n        if (typeof options.onInit === 'function') {\n          await options.onInit(this)\n        }\n        if (typeof this.config.onInit === 'function') {\n          await this.config.onInit(this)\n        }\n      }\n    } catch (error) {\n      this.logger.error({ err: error }, 'Error running onInit function')\n      throw error\n    }\n\n    if (options.cron) {\n      await this._initializeCrons()\n    }\n\n    return this\n  }\n\n  update<TSlug extends CollectionSlug, TSelect extends SelectFromCollectionSlug<TSlug>>(\n    options: UpdateManyOptions<TSlug, TSelect>,\n  ): Promise<BulkOperationResult<TSlug, TSelect>>\n\n  /**\n   * @description Update one or more documents\n   * @param options\n   * @returns Updated document(s)\n   */\n  update<TSlug extends CollectionSlug, TSelect extends SelectFromCollectionSlug<TSlug>>(\n    options: UpdateByIDOptions<TSlug, TSelect>,\n  ): Promise<TransformCollectionWithSelect<TSlug, TSelect>>\n\n  update<TSlug extends CollectionSlug, TSelect extends SelectFromCollectionSlug<TSlug>>(\n    options: UpdateOptions<TSlug, TSelect>,\n  ): Promise<BulkOperationResult<TSlug, TSelect> | TransformCollectionWithSelect<TSlug, TSelect>> {\n    return updateLocal<TSlug, TSelect>(this, options)\n  }\n}\n\nconst initialized = new BasePayload()\n\n// eslint-disable-next-line no-restricted-exports\nexport default initialized\n\nexport const reload = async (\n  config: SanitizedConfig,\n  payload: Payload,\n  skipImportMapGeneration?: boolean,\n  options?: InitOptions,\n): Promise<void> => {\n  if (typeof payload.db.destroy === 'function') {\n    // Only destroy db, as we then later only call payload.db.init and not payload.init\n    await payload.db.destroy()\n  }\n  payload.config = config\n\n  payload.collections = config.collections.reduce(\n    (collections, collection) => {\n      collections[collection.slug] = {\n        config: collection,\n        customIDType: payload.collections[collection.slug]?.customIDType,\n      }\n      return collections\n    },\n    {} as Record<string, any>,\n  )\n\n  payload.blocks = config.blocks!.reduce(\n    (blocks, block) => {\n      blocks[block.slug] = block\n      return blocks\n    },\n    {} as Record<string, FlattenedBlock>,\n  )\n\n  payload.globals = {\n    config: config.globals,\n  }\n\n  // TODO: support HMR for other props in the future (see payload/src/index init()) that may change on Payload singleton\n\n  // Generate types\n  if (config.typescript.autoGenerate !== false) {\n    // We cannot run it directly here, as generate-types imports json-schema-to-typescript, which breaks on turbopack.\n    // see: https://github.com/vercel/next.js/issues/66723\n    void payload.bin({\n      args: ['generate:types'],\n      log: false,\n    })\n  }\n\n  // Generate import map\n  if (skipImportMapGeneration !== true && config.admin?.importMap?.autoGenerate !== false) {\n    // This may run outside of the admin panel, e.g. in the user's frontend, where we don't have an import map file.\n    // We don't want to throw an error in this case, as it would break the user's frontend.\n    // => just skip it => ignoreResolveError: true\n    await generateImportMap(config, {\n      ignoreResolveError: true,\n      log: true,\n    })\n  }\n\n  if (payload.db?.init) {\n    await payload.db.init()\n  }\n\n  if (!options?.disableDBConnect && payload.db.connect) {\n    await payload.db.connect({ hotReload: true })\n  }\n\n  ;(global as any)._payload_clientConfigs = {} as Record<keyof SupportedLanguages, ClientConfig>\n  ;(global as any)._payload_schemaMap = null\n  ;(global as any)._payload_clientSchemaMap = null\n  ;(global as any)._payload_doNotCacheClientConfig = true // This will help refreshing the client config cache more reliably. If you remove this, please test HMR + client config refreshing (do new fields appear in the document?)\n  ;(global as any)._payload_doNotCacheSchemaMap = true\n  ;(global as any)._payload_doNotCacheClientSchemaMap = true\n}\n\nlet _cached: Map<\n  string,\n  {\n    initializedCrons: boolean\n    payload: null | Payload\n    promise: null | Promise<Payload>\n    reload: boolean | Promise<void>\n    ws: null | WebSocket\n  }\n> = (global as any)._payload\n\nif (!_cached) {\n  _cached = (global as any)._payload = new Map()\n}\n\n/**\n * Get a payload instance.\n * This function is a wrapper around new BasePayload().init() that adds the following functionality on top of that:\n *\n * - smartly caches Payload instance on the module scope. That way, we prevent unnecessarily initializing Payload over and over again\n * when calling getPayload multiple times or from multiple locations.\n * - adds HMR support and reloads the payload instance when the config changes.\n */\nexport const getPayload = async (\n  options: {\n    /**\n     * A unique key to identify the payload instance. You can pass your own key if you want to cache this payload instance separately.\n     * This is useful if you pass a different payload config for each instance.\n     *\n     * @default 'default'\n     */\n    key?: string\n  } & InitOptions,\n): Promise<Payload> => {\n  if (!options?.config) {\n    throw new Error('Error: the payload config is required for getPayload to work.')\n  }\n\n  let alreadyCachedSameConfig = false\n\n  let cached = _cached.get(options.key ?? 'default')\n  if (!cached) {\n    cached = {\n      initializedCrons: Boolean(options.cron),\n      payload: null,\n      promise: null,\n      reload: false,\n      ws: null,\n    }\n    _cached.set(options.key ?? 'default', cached)\n  } else {\n    alreadyCachedSameConfig = true\n  }\n\n  if (alreadyCachedSameConfig) {\n    // alreadyCachedSameConfig => already called onInit once, but same config => no need to call onInit again.\n    // calling onInit again would only make sense if a different config was passed.\n    options.disableOnInit = true\n  }\n\n  if (cached.payload) {\n    if (options.cron && !cached.initializedCrons) {\n      // getPayload called with crons enabled, but existing cached version does not have crons initialized. => Initialize crons in existing cached version\n      cached.initializedCrons = true\n      await cached.payload._initializeCrons()\n    }\n\n    if (cached.reload === true) {\n      let resolve!: () => void\n\n      // getPayload is called multiple times, in parallel. However, we only want to run `await reload` once. By immediately setting cached.reload to a promise,\n      // we can ensure that all subsequent calls will wait for the first reload to finish. So if we set it here, the 2nd call of getPayload\n      // will reach `if (cached.reload instanceof Promise) {` which then waits for the first reload to finish.\n      cached.reload = new Promise((res) => (resolve = res))\n      const config = await options.config\n\n      // Reload the payload instance after a config change (triggered by HMR in development).\n      // The second parameter (false) forces import map regeneration rather than deciding based on options.importMap.\n      //\n      // Why we always regenerate import map: getPayload() may be called from multiple sources (admin panel, frontend, etc.)\n      // that share the same cache but may pass different importMap values. Since call order is unpredictable,\n      // we cannot rely on options.importMap to determine if regeneration is needed.\n      //\n      // Example scenario: If the frontend calls getPayload() without importMap first, followed by the admin\n      // panel calling it with importMap, we'd incorrectly skip generation for the admin panel's needs.\n      // By always regenerating on reload, we ensure the import map stays in sync with the updated config.\n      await reload(config, cached.payload, false, options)\n\n      resolve()\n    }\n\n    if (cached.reload instanceof Promise) {\n      await cached.reload\n    }\n    if (options?.importMap) {\n      cached.payload.importMap = options.importMap\n    }\n    return cached.payload\n  }\n\n  if (!cached.promise) {\n    // no need to await options.config here, as it's already awaited in the BasePayload.init\n    cached.promise = new BasePayload().init(options)\n  }\n\n  try {\n    cached.payload = await cached.promise\n\n    if (\n      !cached.ws &&\n      process.env.NODE_ENV !== 'production' &&\n      process.env.NODE_ENV !== 'test' &&\n      process.env.DISABLE_PAYLOAD_HMR !== 'true'\n    ) {\n      try {\n        const port = process.env.PORT || '3000'\n        const hasHTTPS =\n          process.env.USE_HTTPS === 'true' || process.argv.includes('--experimental-https')\n        const protocol = hasHTTPS ? 'wss' : 'ws'\n\n        const path = '/_next/webpack-hmr'\n        // The __NEXT_ASSET_PREFIX env variable is set for both assetPrefix and basePath (tested in Next.js 15.1.6)\n        const prefix = process.env.__NEXT_ASSET_PREFIX ?? ''\n\n        cached.ws = new WebSocket(\n          process.env.PAYLOAD_HMR_URL_OVERRIDE ?? `${protocol}://localhost:${port}${prefix}${path}`,\n        )\n\n        cached.ws.onmessage = (event) => {\n          if (typeof event.data === 'string') {\n            const data = JSON.parse(event.data)\n\n            if (\n              // On Next.js 15, we need to check for data.action. On Next.js 16, we need to check for data.type.\n              data.type === 'serverComponentChanges' ||\n              data.action === 'serverComponentChanges'\n            ) {\n              cached.reload = true\n            }\n          }\n        }\n\n        cached.ws.onerror = (_) => {\n          // swallow any websocket connection error\n        }\n      } catch (_) {\n        // swallow e\n      }\n    }\n  } catch (e) {\n    cached.promise = null\n    // add identifier to error object, so that our error logger in routeError.ts does not attempt to re-initialize getPayload\n    ;(e as { payloadInitError?: boolean }).payloadInitError = true\n    throw e\n  }\n\n  if (options?.importMap) {\n    cached.payload.importMap = options.importMap\n  }\n\n  return cached.payload\n}\n\ntype Payload = BasePayload\n\ninterface RequestContext {\n  [key: string]: unknown\n}\n\n// eslint-disable-next-line @typescript-eslint/no-empty-object-type\nexport interface DatabaseAdapter extends BaseDatabaseAdapter {}\nexport type { Payload, RequestContext }\nexport * from './auth/index.js'\nexport { jwtSign } from './auth/jwt.js'\nexport { accessOperation } from './auth/operations/access.js'\nexport { forgotPasswordOperation } from './auth/operations/forgotPassword.js'\nexport { initOperation } from './auth/operations/init.js'\nexport { checkLoginPermission } from './auth/operations/login.js'\nexport { loginOperation } from './auth/operations/login.js'\nexport { logoutOperation } from './auth/operations/logout.js'\nexport type { MeOperationResult } from './auth/operations/me.js'\nexport { meOperation } from './auth/operations/me.js'\nexport { refreshOperation } from './auth/operations/refresh.js'\nexport { registerFirstUserOperation } from './auth/operations/registerFirstUser.js'\nexport { resetPasswordOperation } from './auth/operations/resetPassword.js'\nexport { unlockOperation } from './auth/operations/unlock.js'\nexport { verifyEmailOperation } from './auth/operations/verifyEmail.js'\nexport { JWTAuthentication } from './auth/strategies/jwt.js'\nexport { incrementLoginAttempts } from './auth/strategies/local/incrementLoginAttempts.js'\nexport { resetLoginAttempts } from './auth/strategies/local/resetLoginAttempts.js'\nexport type {\n  AuthStrategyFunction,\n  AuthStrategyFunctionArgs,\n  AuthStrategyResult,\n  CollectionPermission,\n  DocumentPermissions,\n  FieldPermissions,\n  GlobalPermission,\n  IncomingAuthType,\n  Permission,\n  Permissions,\n  SanitizedCollectionPermission,\n  SanitizedDocumentPermissions,\n  SanitizedFieldPermissions,\n  SanitizedGlobalPermission,\n  SanitizedPermissions,\n  UntypedUser as User,\n  VerifyConfig,\n} from './auth/types.js'\nexport { generateImportMap } from './bin/generateImportMap/index.js'\n\nexport type { ImportMap } from './bin/generateImportMap/index.js'\nexport { genImportMapIterateFields } from './bin/generateImportMap/iterateFields.js'\nexport { migrate as migrateCLI } from './bin/migrate.js'\n\nexport {\n  type ClientCollectionConfig,\n  createClientCollectionConfig,\n  createClientCollectionConfigs,\n  type ServerOnlyCollectionAdminProperties,\n  type ServerOnlyCollectionProperties,\n  type ServerOnlyUploadProperties,\n} from './collections/config/client.js'\n\nexport type {\n  AfterChangeHook as CollectionAfterChangeHook,\n  AfterDeleteHook as CollectionAfterDeleteHook,\n  AfterErrorHook as CollectionAfterErrorHook,\n  AfterForgotPasswordHook as CollectionAfterForgotPasswordHook,\n  AfterLoginHook as CollectionAfterLoginHook,\n  AfterLogoutHook as CollectionAfterLogoutHook,\n  AfterMeHook as CollectionAfterMeHook,\n  AfterOperationHook as CollectionAfterOperationHook,\n  AfterReadHook as CollectionAfterReadHook,\n  AfterRefreshHook as CollectionAfterRefreshHook,\n  AuthCollection,\n  AuthOperationsFromCollectionSlug,\n  BaseFilter,\n  BaseListFilter,\n  BeforeChangeHook as CollectionBeforeChangeHook,\n  BeforeDeleteHook as CollectionBeforeDeleteHook,\n  BeforeLoginHook as CollectionBeforeLoginHook,\n  BeforeOperationHook as CollectionBeforeOperationHook,\n  BeforeReadHook as CollectionBeforeReadHook,\n  BeforeValidateHook as CollectionBeforeValidateHook,\n  BulkOperationResult,\n  Collection,\n  CollectionAdminOptions,\n  CollectionConfig,\n  DataFromCollectionSlug,\n  HookOperationType,\n  MeHook as CollectionMeHook,\n  RefreshHook as CollectionRefreshHook,\n  RequiredDataFromCollection,\n  RequiredDataFromCollectionSlug,\n  SanitizedCollectionConfig,\n  SanitizedJoins,\n  TypeWithID,\n  TypeWithTimestamps,\n} from './collections/config/types.js'\n\nexport type { CompoundIndex } from './collections/config/types.js'\nexport type { SanitizedCompoundIndex } from './collections/config/types.js'\n\nexport { createDataloaderCacheKey, getDataLoader } from './collections/dataloader.js'\nexport { countOperation } from './collections/operations/count.js'\nexport { createOperation } from './collections/operations/create.js'\nexport { deleteOperation } from './collections/operations/delete.js'\nexport { deleteByIDOperation } from './collections/operations/deleteByID.js'\nexport { docAccessOperation } from './collections/operations/docAccess.js'\nexport { duplicateOperation } from './collections/operations/duplicate.js'\nexport { findOperation } from './collections/operations/find.js'\nexport { findByIDOperation } from './collections/operations/findByID.js'\nexport { findVersionByIDOperation } from './collections/operations/findVersionByID.js'\nexport { findVersionsOperation } from './collections/operations/findVersions.js'\nexport { restoreVersionOperation } from './collections/operations/restoreVersion.js'\nexport { updateOperation } from './collections/operations/update.js'\nexport { updateByIDOperation } from './collections/operations/updateByID.js'\nexport { buildConfig } from './config/build.js'\nexport {\n  type ClientConfig,\n  createClientConfig,\n  type CreateClientConfigArgs,\n  createUnauthenticatedClientConfig,\n  serverOnlyAdminConfigProperties,\n  serverOnlyConfigProperties,\n  type UnauthenticatedClientConfig,\n} from './config/client.js'\nexport { defaults } from './config/defaults.js'\n\nexport { type OrderableEndpointBody } from './config/orderable/index.js'\nexport { sanitizeConfig } from './config/sanitize.js'\nexport type * from './config/types.js'\nexport { combineQueries } from './database/combineQueries.js'\nexport { createDatabaseAdapter } from './database/createDatabaseAdapter.js'\nexport { defaultBeginTransaction } from './database/defaultBeginTransaction.js'\nexport { flattenWhereToOperators } from './database/flattenWhereToOperators.js'\nexport { getLocalizedPaths } from './database/getLocalizedPaths.js'\nexport { createMigration } from './database/migrations/createMigration.js'\nexport { findMigrationDir } from './database/migrations/findMigrationDir.js'\nexport { getMigrations } from './database/migrations/getMigrations.js'\nexport { getPredefinedMigration } from './database/migrations/getPredefinedMigration.js'\nexport { migrate } from './database/migrations/migrate.js'\nexport { migrateDown } from './database/migrations/migrateDown.js'\nexport { migrateRefresh } from './database/migrations/migrateRefresh.js'\nexport { migrateReset } from './database/migrations/migrateReset.js'\nexport { migrateStatus } from './database/migrations/migrateStatus.js'\nexport { migrationsCollection } from './database/migrations/migrationsCollection.js'\nexport { migrationTemplate } from './database/migrations/migrationTemplate.js'\nexport { readMigrationFiles } from './database/migrations/readMigrationFiles.js'\nexport { writeMigrationIndex } from './database/migrations/writeMigrationIndex.js'\nexport type * from './database/queryValidation/types.js'\nexport type { EntityPolicies, PathToQuery } from './database/queryValidation/types.js'\nexport { validateQueryPaths } from './database/queryValidation/validateQueryPaths.js'\nexport { validateSearchParam } from './database/queryValidation/validateSearchParams.js'\nexport type {\n  BaseDatabaseAdapter,\n  BeginTransaction,\n  CommitTransaction,\n  Connect,\n  Count,\n  CountArgs,\n  CountGlobalVersionArgs,\n  CountGlobalVersions,\n  CountVersions,\n  Create,\n  CreateArgs,\n  CreateGlobal,\n  CreateGlobalArgs,\n  CreateGlobalVersion,\n  CreateGlobalVersionArgs,\n  CreateMigration,\n  CreateVersion,\n  CreateVersionArgs,\n  DatabaseAdapterResult as DatabaseAdapterObj,\n  DBIdentifierName,\n  DeleteMany,\n  DeleteManyArgs,\n  DeleteOne,\n  DeleteOneArgs,\n  DeleteVersions,\n  DeleteVersionsArgs,\n  Destroy,\n  Find,\n  FindArgs,\n  FindDistinct,\n  FindGlobal,\n  FindGlobalArgs,\n  FindGlobalVersions,\n  FindGlobalVersionsArgs,\n  FindOne,\n  FindOneArgs,\n  FindVersions,\n  FindVersionsArgs,\n  GenerateSchema,\n  Init,\n  Migration,\n  MigrationData,\n  MigrationTemplateArgs,\n  PaginatedDistinctDocs,\n  PaginatedDocs,\n  QueryDrafts,\n  QueryDraftsArgs,\n  RollbackTransaction,\n  Transaction,\n  UpdateGlobal,\n  UpdateGlobalArgs,\n  UpdateGlobalVersion,\n  UpdateGlobalVersionArgs,\n  UpdateJobs,\n  UpdateJobsArgs,\n  UpdateMany,\n  UpdateManyArgs,\n  UpdateOne,\n  UpdateOneArgs,\n  UpdateVersion,\n  UpdateVersionArgs,\n  Upsert,\n  UpsertArgs,\n} from './database/types.js'\nexport type { EmailAdapter as PayloadEmailAdapter, SendEmailOptions } from './email/types.js'\nexport {\n  APIError,\n  APIErrorName,\n  AuthenticationError,\n  DuplicateCollection,\n  DuplicateFieldName,\n  DuplicateGlobal,\n  ErrorDeletingFile,\n  FileRetrievalError,\n  FileUploadError,\n  Forbidden,\n  InvalidConfiguration,\n  InvalidFieldName,\n  InvalidFieldRelationship,\n  Locked,\n  LockedAuth,\n  MissingCollectionLabel,\n  MissingEditorProp,\n  MissingFieldInputOptions,\n  MissingFieldType,\n  MissingFile,\n  NotFound,\n  QueryError,\n  UnauthorizedError,\n  UnverifiedEmail,\n  ValidationError,\n  ValidationErrorName,\n} from './errors/index.js'\n\nexport type { ValidationFieldError } from './errors/index.js'\nexport { baseBlockFields } from './fields/baseFields/baseBlockFields.js'\n\nexport { baseIDField } from './fields/baseFields/baseIDField.js'\n\nexport { slugField, type SlugFieldProps } from './fields/baseFields/slug/index.js'\n\nexport {\n  createClientField,\n  createClientFields,\n  type ServerOnlyFieldAdminProperties,\n  type ServerOnlyFieldProperties,\n} from './fields/config/client.js'\n\nexport interface FieldCustom extends Record<string, any> {}\n\nexport { sanitizeFields } from './fields/config/sanitize.js'\n\nexport type {\n  AdminClient,\n  ArrayField,\n  ArrayFieldClient,\n  BaseValidateOptions,\n  Block,\n  BlockJSX,\n  BlocksField,\n  BlocksFieldClient,\n  CheckboxField,\n  CheckboxFieldClient,\n  ClientBlock,\n  ClientField,\n  ClientFieldProps,\n  CodeField,\n  CodeFieldClient,\n  CollapsibleField,\n  CollapsibleFieldClient,\n  Condition,\n  DateField,\n  DateFieldClient,\n  EmailField,\n  EmailFieldClient,\n  Field,\n  FieldAccess,\n  FieldAffectingData,\n  FieldAffectingDataClient,\n  FieldBase,\n  FieldBaseClient,\n  FieldHook,\n  FieldHookArgs,\n  FieldPresentationalOnly,\n  FieldPresentationalOnlyClient,\n  FieldTypes,\n  FieldWithMany,\n  FieldWithManyClient,\n  FieldWithMaxDepth,\n  FieldWithMaxDepthClient,\n  FieldWithPath,\n  FieldWithPathClient,\n  FieldWithSubFields,\n  FieldWithSubFieldsClient,\n  FilterOptions,\n  FilterOptionsProps,\n  FlattenedArrayField,\n  FlattenedBlock,\n  FlattenedBlocksField,\n  FlattenedField,\n  FlattenedGroupField,\n  FlattenedJoinField,\n  FlattenedTabAsField,\n  GroupField,\n  GroupFieldClient,\n  HookName,\n  JoinField,\n  JoinFieldClient,\n  JSONField,\n  JSONFieldClient,\n  Labels,\n  LabelsClient,\n  NamedGroupField,\n  NamedGroupFieldClient,\n  NamedTab,\n  NonPresentationalField,\n  NonPresentationalFieldClient,\n  NumberField,\n  NumberFieldClient,\n  Option,\n  OptionLabel,\n  OptionObject,\n  PointField,\n  PointFieldClient,\n  PolymorphicRelationshipField,\n  PolymorphicRelationshipFieldClient,\n  RadioField,\n  RadioFieldClient,\n  RelationshipField,\n  RelationshipFieldClient,\n  RelationshipValue,\n  RichTextField,\n  RichTextFieldClient,\n  RowField,\n  RowFieldClient,\n  SelectField,\n  SelectFieldClient,\n  SingleRelationshipField,\n  SingleRelationshipFieldClient,\n  Tab,\n  TabAsField,\n  TabAsFieldClient,\n  TabsField,\n  TabsFieldClient,\n  TextareaField,\n  TextareaFieldClient,\n  TextField,\n  TextFieldClient,\n  UIField,\n  UIFieldClient,\n  UnnamedGroupField,\n  UnnamedGroupFieldClient,\n  UnnamedTab,\n  UploadField,\n  UploadFieldClient,\n  Validate,\n  ValidateOptions,\n  ValueWithRelation,\n} from './fields/config/types.js'\n\nexport { getDefaultValue } from './fields/getDefaultValue.js'\nexport { traverseFields as afterChangeTraverseFields } from './fields/hooks/afterChange/traverseFields.js'\n\nexport { promise as afterReadPromise } from './fields/hooks/afterRead/promise.js'\nexport { traverseFields as afterReadTraverseFields } from './fields/hooks/afterRead/traverseFields.js'\nexport { traverseFields as beforeChangeTraverseFields } from './fields/hooks/beforeChange/traverseFields.js'\nexport { traverseFields as beforeValidateTraverseFields } from './fields/hooks/beforeValidate/traverseFields.js'\n\nexport { sortableFieldTypes } from './fields/sortableFieldTypes.js'\nexport { validateBlocksFilterOptions, validations } from './fields/validations.js'\n\nexport type {\n  ArrayFieldValidation,\n  BlocksFieldValidation,\n  CheckboxFieldValidation,\n  CodeFieldValidation,\n  ConfirmPasswordFieldValidation,\n  DateFieldValidation,\n  EmailFieldValidation,\n  JSONFieldValidation,\n  NumberFieldManyValidation,\n  NumberFieldSingleValidation,\n  NumberFieldValidation,\n  PasswordFieldValidation,\n  PointFieldValidation,\n  RadioFieldValidation,\n  RelationshipFieldManyValidation,\n  RelationshipFieldSingleValidation,\n  RelationshipFieldValidation,\n  RichTextFieldValidation,\n  SelectFieldManyValidation,\n  SelectFieldSingleValidation,\n  SelectFieldValidation,\n  TextareaFieldValidation,\n  TextFieldManyValidation,\n  TextFieldSingleValidation,\n  TextFieldValidation,\n  UploadFieldManyValidation,\n  UploadFieldSingleValidation,\n  UploadFieldValidation,\n  UsernameFieldValidation,\n} from './fields/validations.js'\nexport type { FolderSortKeys } from './folders/types.js'\nexport { getFolderData } from './folders/utils/getFolderData.js'\nexport {\n  type ClientGlobalConfig,\n  createClientGlobalConfig,\n  createClientGlobalConfigs,\n  type ServerOnlyGlobalAdminProperties,\n  type ServerOnlyGlobalProperties,\n} from './globals/config/client.js'\nexport type {\n  AfterChangeHook as GlobalAfterChangeHook,\n  AfterReadHook as GlobalAfterReadHook,\n  BeforeChangeHook as GlobalBeforeChangeHook,\n  BeforeOperationHook as GlobalBeforeOperationHook,\n  BeforeReadHook as GlobalBeforeReadHook,\n  BeforeValidateHook as GlobalBeforeValidateHook,\n  DataFromGlobalSlug,\n  GlobalAdminOptions,\n  GlobalConfig,\n  SanitizedGlobalConfig,\n} from './globals/config/types.js'\nexport { docAccessOperation as docAccessOperationGlobal } from './globals/operations/docAccess.js'\nexport { findOneOperation } from './globals/operations/findOne.js'\n\nexport { findVersionByIDOperation as findVersionByIDOperationGlobal } from './globals/operations/findVersionByID.js'\n\nexport { findVersionsOperation as findVersionsOperationGlobal } from './globals/operations/findVersions.js'\nexport { restoreVersionOperation as restoreVersionOperationGlobal } from './globals/operations/restoreVersion.js'\nexport { updateOperation as updateOperationGlobal } from './globals/operations/update.js'\nexport * from './kv/adapters/DatabaseKVAdapter.js'\nexport * from './kv/adapters/InMemoryKVAdapter.js'\nexport * from './kv/index.js'\nexport type {\n  CollapsedPreferences,\n  CollectionPreferences,\n  /**\n   * @deprecated Use `CollectionPreferences` instead.\n   */\n  CollectionPreferences as ListPreferences,\n  ColumnPreference,\n  DocumentPreferences,\n  FieldsPreferences,\n  InsideFieldsPreferences,\n  PreferenceRequest,\n  PreferenceUpdateRequest,\n  TabsPreferences,\n} from './preferences/types.js'\nexport type { QueryPreset } from './query-presets/types.js'\nexport { jobAfterRead } from './queues/config/collection.js'\nexport type { JobsConfig, RunJobAccess, RunJobAccessArgs } from './queues/config/types/index.js'\nexport type {\n  RunInlineTaskFunction,\n  RunTaskFunction,\n  RunTaskFunctions,\n  TaskConfig,\n  TaskHandler,\n  TaskHandlerArgs,\n  TaskHandlerResult,\n  TaskHandlerResults,\n  TaskInput,\n  TaskOutput,\n  TaskType,\n} from './queues/config/types/taskTypes.js'\n\nexport type {\n  BaseJob,\n  JobLog,\n  JobTaskStatus,\n  RunningJob,\n  SingleTaskStatus,\n  WorkflowConfig,\n  WorkflowHandler,\n  WorkflowTypes,\n} from './queues/config/types/workflowTypes.js'\nexport { countRunnableOrActiveJobsForQueue } from './queues/operations/handleSchedules/countRunnableOrActiveJobsForQueue.js'\nexport { importHandlerPath } from './queues/operations/runJobs/runJob/importHandlerPath.js'\n\nexport {\n  _internal_jobSystemGlobals,\n  _internal_resetJobSystemGlobals,\n  getCurrentDate,\n} from './queues/utilities/getCurrentDate.js'\nexport { getLocalI18n } from './translations/getLocalI18n.js'\nexport * from './types/index.js'\nexport { getFileByPath } from './uploads/getFileByPath.js'\nexport { _internal_safeFetchGlobal } from './uploads/safeFetch.js'\n\nexport type * from './uploads/types.js'\nexport { addDataAndFileToRequest } from './utilities/addDataAndFileToRequest.js'\nexport { addLocalesToRequestFromData, sanitizeLocales } from './utilities/addLocalesToRequest.js'\nexport { canAccessAdmin } from './utilities/canAccessAdmin.js'\nexport { commitTransaction } from './utilities/commitTransaction.js'\nexport {\n  configToJSONSchema,\n  entityToJSONSchema,\n  fieldsToJSONSchema,\n  withNullableJSONSchemaType,\n} from './utilities/configToJSONSchema.js'\nexport { createArrayFromCommaDelineated } from './utilities/createArrayFromCommaDelineated.js'\nexport { createLocalReq } from './utilities/createLocalReq.js'\nexport { createPayloadRequest } from './utilities/createPayloadRequest.js'\nexport {\n  deepCopyObject,\n  deepCopyObjectComplex,\n  deepCopyObjectSimple,\n} from './utilities/deepCopyObject.js'\nexport {\n  deepMerge,\n  deepMergeWithCombinedArrays,\n  deepMergeWithReactComponents,\n  deepMergeWithSourceArrays,\n} from './utilities/deepMerge.js'\nexport {\n  checkDependencies,\n  type CustomVersionParser,\n} from './utilities/dependencies/dependencyChecker.js'\nexport { getDependencies } from './utilities/dependencies/getDependencies.js'\nexport {\n  findUp,\n  findUpSync,\n  pathExistsAndIsAccessible,\n  pathExistsAndIsAccessibleSync,\n} from './utilities/findUp.js'\nexport { flattenAllFields } from './utilities/flattenAllFields.js'\nexport { flattenTopLevelFields } from './utilities/flattenTopLevelFields.js'\nexport { formatErrors } from './utilities/formatErrors.js'\nexport { formatLabels, formatNames, toWords } from './utilities/formatLabels.js'\nexport { getBlockSelect } from './utilities/getBlockSelect.js'\nexport { getCollectionIDFieldTypes } from './utilities/getCollectionIDFieldTypes.js'\nexport { getFieldByPath } from './utilities/getFieldByPath.js'\nexport { getObjectDotNotation } from './utilities/getObjectDotNotation.js'\nexport { getRequestLanguage } from './utilities/getRequestLanguage.js'\nexport { handleEndpoints } from './utilities/handleEndpoints.js'\nexport { headersWithCors } from './utilities/headersWithCors.js'\nexport { initTransaction } from './utilities/initTransaction.js'\nexport { isEntityHidden } from './utilities/isEntityHidden.js'\nexport { isolateObjectProperty } from './utilities/isolateObjectProperty.js'\nexport { isPlainObject } from './utilities/isPlainObject.js'\nexport { isValidID } from './utilities/isValidID.js'\nexport { killTransaction } from './utilities/killTransaction.js'\nexport { logError } from './utilities/logError.js'\nexport { defaultLoggerOptions } from './utilities/logger.js'\nexport { mapAsync } from './utilities/mapAsync.js'\nexport { mergeHeaders } from './utilities/mergeHeaders.js'\nexport { parseDocumentID } from './utilities/parseDocumentID.js'\nexport { sanitizeFallbackLocale } from './utilities/sanitizeFallbackLocale.js'\nexport { sanitizeJoinParams } from './utilities/sanitizeJoinParams.js'\nexport { sanitizePopulateParam } from './utilities/sanitizePopulateParam.js'\nexport { sanitizeSelectParam } from './utilities/sanitizeSelectParam.js'\nexport { stripUnselectedFields } from './utilities/stripUnselectedFields.js'\nexport { traverseFields } from './utilities/traverseFields.js'\nexport type { TraverseFieldsCallback } from './utilities/traverseFields.js'\nexport { buildVersionCollectionFields } from './versions/buildCollectionFields.js'\nexport { buildVersionGlobalFields } from './versions/buildGlobalFields.js'\nexport { buildVersionCompoundIndexes } from './versions/buildVersionCompoundIndexes.js'\nexport { versionDefaults } from './versions/defaults.js'\nexport { deleteCollectionVersions } from './versions/deleteCollectionVersions.js'\nexport { appendVersionToQueryKey } from './versions/drafts/appendVersionToQueryKey.js'\nexport { getQueryDraftsSort } from './versions/drafts/getQueryDraftsSort.js'\n\nexport { enforceMaxVersions } from './versions/enforceMaxVersions.js'\nexport { getLatestCollectionVersion } from './versions/getLatestCollectionVersion.js'\nexport { getLatestGlobalVersion } from './versions/getLatestGlobalVersion.js'\nexport { saveVersion } from './versions/saveVersion.js'\nexport type { SchedulePublishTaskInput } from './versions/schedule/types.js'\nexport type { SchedulePublish, TypeWithVersion } from './versions/types.js'\nexport { deepMergeSimple } from '@payloadcms/translations/utilities'\n"],"names":["spawn","crypto","fileURLToPath","path","WebSocket","forgotPasswordLocal","loginLocal","resetPasswordLocal","unlockLocal","verifyEmailLocal","countLocal","createLocal","deleteLocal","duplicateLocal","findLocal","findByIDLocal","findDistinct","findDistinctLocal","findVersionByIDLocal","findVersionsLocal","restoreVersionLocal","updateLocal","countGlobalVersionsLocal","findOneGlobalLocal","findGlobalVersionByIDLocal","findGlobalVersionsLocal","restoreGlobalVersionLocal","updateGlobalLocal","Cron","decrypt","encrypt","authLocal","APIKeyAuthentication","JWTAuthentication","generateImportMap","checkPayloadDependencies","countVersionsLocal","consoleEmailAdapter","fieldAffectsData","getJobsLocalAPI","_internal_jobSystemGlobals","isNextBuild","getLogger","serverInit","serverInitTelemetry","traverseFields","accountLockFields","baseAccountLockFields","apiKeyFields","baseAPIKeyFields","baseAuthFields","emailFieldConfig","baseEmailField","sessionsFieldConfig","baseSessionsField","usernameFieldConfig","baseUsernameField","verificationFields","baseVerificationFields","executeAccess","executeAuthStrategies","extractAccessFromPermission","getAccessResults","getFieldsToSign","getLoginOptions","filename","url","dirname","checkedDependencies","BasePayload","auth","options","authStrategies","blocks","collections","config","count","countGlobalVersions","countVersions","create","crons","db","destroy","length","cronsToStop","splice","Promise","all","map","cron","stop","duplicate","email","extensions","find","findByID","findGlobal","findGlobalVersionByID","findGlobalVersions","findVersionByID","findVersions","forgotPassword","getAdminURL","serverURL","routes","admin","getAPIURL","api","globals","importMap","jobs","kv","logger","login","resetPassword","restoreGlobalVersion","restoreVersion","schema","secret","sendEmail","types","unlock","updateGlobal","validationRules","verifyEmail","versions","_initializeCrons","enabled","autoRun","DEFAULT_CRON","DEFAULT_LIMIT","cronJobs","cronConfig","jobAutorunCron","shouldAutoSchedule","disableScheduling","scheduling","handleSchedules","allQueues","queue","shouldAutoRun","run","limit","silent","protect","push","bin","args","cwd","log","resolve","reject","spawned","stdio","undefined","on","code","error","delete","init","process","env","NODE_ENV","PAYLOAD_DISABLE_DEPENDENCY_CHECKER","Error","createHash","update","digest","slice","collection","customIDType","findCustomID","field","includes","type","name","callback","fields","parentIsLocalized","slug","reduce","block","typescript","autoGenerate","payload","disableDBConnect","connect","awaitedAdapter","NEXT_PHASE","warn","sharp","some","c","upload","imageSizes","formatOptions","VERCEL","uploadCollWithoutAdapter","filter","adapter","slugs","join","jwtStrategyEnabled","strategies","useAPIKey","authenticate","disableLocalStrategy","disableOnInit","onInit","err","initialized","reload","skipImportMapGeneration","ignoreResolveError","hotReload","global","_payload_clientConfigs","_payload_schemaMap","_payload_clientSchemaMap","_payload_doNotCacheClientConfig","_payload_doNotCacheSchemaMap","_payload_doNotCacheClientSchemaMap","_cached","_payload","Map","getPayload","alreadyCachedSameConfig","cached","get","key","initializedCrons","Boolean","promise","ws","set","res","DISABLE_PAYLOAD_HMR","port","PORT","hasHTTPS","USE_HTTPS","argv","protocol","prefix","__NEXT_ASSET_PREFIX","PAYLOAD_HMR_URL_OVERRIDE","onmessage","event","data","JSON","parse","action","onerror","_","e","payloadInitError","jwtSign","accessOperation","forgotPasswordOperation","initOperation","checkLoginPermission","loginOperation","logoutOperation","meOperation","refreshOperation","registerFirstUserOperation","resetPasswordOperation","unlockOperation","verifyEmailOperation","incrementLoginAttempts","resetLoginAttempts","genImportMapIterateFields","migrate","migrateCLI","createClientCollectionConfig","createClientCollectionConfigs","createDataloaderCacheKey","getDataLoader","countOperation","createOperation","deleteOperation","deleteByIDOperation","docAccessOperation","duplicateOperation","findOperation","findByIDOperation","findVersionByIDOperation","findVersionsOperation","restoreVersionOperation","updateOperation","updateByIDOperation","buildConfig","createClientConfig","createUnauthenticatedClientConfig","serverOnlyAdminConfigProperties","serverOnlyConfigProperties","defaults","sanitizeConfig","combineQueries","createDatabaseAdapter","defaultBeginTransaction","flattenWhereToOperators","getLocalizedPaths","createMigration","findMigrationDir","getMigrations","getPredefinedMigration","migrateDown","migrateRefresh","migrateReset","migrateStatus","migrationsCollection","migrationTemplate","readMigrationFiles","writeMigrationIndex","validateQueryPaths","validateSearchParam","APIError","APIErrorName","AuthenticationError","DuplicateCollection","DuplicateFieldName","DuplicateGlobal","ErrorDeletingFile","FileRetrievalError","FileUploadError","Forbidden","InvalidConfiguration","InvalidFieldName","InvalidFieldRelationship","Locked","LockedAuth","MissingCollectionLabel","MissingEditorProp","MissingFieldInputOptions","MissingFieldType","MissingFile","NotFound","QueryError","UnauthorizedError","UnverifiedEmail","ValidationError","ValidationErrorName","baseBlockFields","baseIDField","slugField","createClientField","createClientFields","sanitizeFields","getDefaultValue","afterChangeTraverseFields","afterReadPromise","afterReadTraverseFields","beforeChangeTraverseFields","beforeValidateTraverseFields","sortableFieldTypes","validateBlocksFilterOptions","validations","getFolderData","createClientGlobalConfig","createClientGlobalConfigs","docAccessOperationGlobal","findOneOperation","findVersionByIDOperationGlobal","findVersionsOperationGlobal","restoreVersionOperationGlobal","updateOperationGlobal","jobAfterRead","countRunnableOrActiveJobsForQueue","importHandlerPath","_internal_resetJobSystemGlobals","getCurrentDate","getLocalI18n","getFileByPath","_internal_safeFetchGlobal","addDataAndFileToRequest","addLocalesToRequestFromData","sanitizeLocales","canAccessAdmin","commitTransaction","configToJSONSchema","entityToJSONSchema","fieldsToJSONSchema","withNullableJSONSchemaType","createArrayFromCommaDelineated","createLocalReq","createPayloadRequest","deepCopyObject","deepCopyObjectComplex","deepCopyObjectSimple","deepMerge","deepMergeWithCombinedArrays","deepMergeWithReactComponents","deepMergeWithSourceArrays","checkDependencies","getDependencies","findUp","findUpSync","pathExistsAndIsAccessible","pathExistsAndIsAccessibleSync","flattenAllFields","flattenTopLevelFields","formatErrors","formatLabels","formatNames","toWords","getBlockSelect","getCollectionIDFieldTypes","getFieldByPath","getObjectDotNotation","getRequestLanguage","handleEndpoints","headersWithCors","initTransaction","isEntityHidden","isolateObjectProperty","isPlainObject","isValidID","killTransaction","logError","defaultLoggerOptions","mapAsync","mergeHeaders","parseDocumentID","sanitizeFallbackLocale","sanitizeJoinParams","sanitizePopulateParam","sanitizeSelectParam","stripUnselectedFields","buildVersionCollectionFields","buildVersionGlobalFields","buildVersionCompoundIndexes","versionDefaults","deleteCollectionVersions","appendVersionToQueryKey","getQueryDraftsSort","enforceMaxVersions","getLatestCollectionVersion","getLatestGlobalVersion","saveVersion","deepMergeSimple"],"mappings":";;;;;;;;;;AAAA,qDAAqD,GACrD,oDAAoD,GAMpD,SAASA,KAAK,QAAQ,gBAAe;AACrC,OAAOC,YAAY,SAAQ;AAC3B,SAASC,aAAa,QAAQ,WAAU;AACxC,OAAOC,UAAU,OAAM;AACvB,OAAOC,eAAe,KAAI;AAe1B,SACEC,mBAAmB,QAEd,4CAA2C;AAClD,SAASC,UAAU,QAAsC,mCAAkC;AAC3F,SACEC,kBAAkB,QAEb,2CAA0C;AACjD,SAASC,WAAW,QAAuC,oCAAmC;AAC9F,SACEC,gBAAgB,QAEX,yCAAwC;AAe/C,SAASC,UAAU,QAAsC,0CAAyC;AAClG,SACEC,WAAW,QAEN,2CAA0C;AACjD,SAEEC,WAAW,QAGN,2CAA0C;AACjD,SACEC,cAAc,QAET,8CAA6C;AACpD,SAASC,SAAS,QAAqC,yCAAwC;AAC/F,SACEC,aAAa,QAER,6CAA4C;AACnD,SACEC,gBAAgBC,iBAAiB,QAE5B,iDAAgD;AACvD,SACEC,oBAAoB,QAEf,oDAAmD;AAC1D,SACEC,iBAAiB,QAEZ,iDAAgD;AACvD,SACEC,mBAAmB,QAEd,mDAAkD;AACzD,SAEEC,WAAW,QAGN,2CAA0C;AACjD,SACEC,wBAAwB,QAEnB,8CAA6C;AACpD,SAEEC,kBAAkB,QACb,wCAAuC;AAC9C,SACEC,0BAA0B,QAErB,gDAA+C;AACtD,SACEC,uBAAuB,QAElB,6CAA4C;AACnD,SACEC,yBAAyB,QAEpB,+CAA8C;AACrD,SACEC,iBAAiB,QAEZ,uCAAsC;AAI7C,SAASC,IAAI,QAAQ,SAAQ;AAO7B,SAASC,OAAO,EAAEC,OAAO,QAAQ,mBAAkB;AACnD,SAASC,SAAS,QAAQ,kCAAiC;AAC3D,SAASC,oBAAoB,QAAQ,8BAA6B;AAClE,SAASC,iBAAiB,QAAQ,2BAA0B;AAC5D,SAASC,iBAAiB,QAAwB,mCAAkC;AACpF,SAASC,wBAAwB,QAAQ,gCAA+B;AACxE,SAASC,kBAAkB,QAAQ,kDAAiD;AACpF,SAASC,mBAAmB,QAAQ,iCAAgC;AACpE,SAASC,gBAAgB,QAA6B,2BAA0B;AAChF,SAASC,eAAe,QAAQ,uBAAsB;AACtD,SAASC,0BAA0B,QAAQ,uCAAsC;AACjF,SAASC,WAAW,QAAQ,6BAA4B;AACxD,SAASC,SAAS,QAAQ,wBAAuB;AACjD,SAASC,cAAcC,mBAAmB,QAAQ,6CAA4C;AAC9F,SAASC,cAAc,QAAQ,gCAA+B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqM9D,MAAMoB,eAAW/D,gIAAAA,EAAc,8BAAYgE,GAAG;AAC9C,MAAMC,UAAUhE,4GAAAA,CAAKgE,OAAO,CAACF;AAE7B,IAAIG,sBAAsB;AAKnB,MAAMC;IACX;;;;GAIC,GACDC,OAAO,OAAOC;QACZ,WAAOxC,2RAAAA,EAAU,IAAI,EAAEwC;IACzB,EAAC;IAEDC,eAA+B;IAE/BC,SAA4C,CAAC,EAAC;IAE9CC,cAAkD,CAAC,EAAC;IAEpDC,OAAwB;IACxB;;;;GAIC,GACDC,QAAQ,OACNL;QAEA,WAAO7D,oSAAAA,EAAW,IAAI,EAAE6D;IAC1B,EAAC;IAED;;;;GAIC,GACDM,sBAAsB,OACpBN;QAEA,WAAOjD,sTAAAA,EAAyB,IAAI,EAAEiD;IACxC,EAAC;IAED;;;;GAIC,GACDO,gBAAgB,OACdP;QAEA,WAAOnC,oTAAAA,EAAmB,IAAI,EAAEmC;IAClC,EAAC;IAED;;;;GAIC,GACDQ,SAAS,OACPR;QAEA,WAAO5D,sSAAAA,EAA4B,IAAI,EAAE4D;IAC3C,EAAC;IAEDS,QAAgB,EAAE,CAAA;IAClBC,GAAoB;IAEpBpD,UAAUA,oQAAAA,CAAO;IAEjBqD,UAAU;QACR,IAAI,IAAI,CAACF,KAAK,CAACG,MAAM,EAAE;YACrB,sDAAsD;YACtD,MAAMC,cAAc,IAAI,CAACJ,KAAK,CAACK,MAAM,CAAC,GAAG,IAAI,CAACL,KAAK,CAACG,MAAM;YAC1D,MAAMG,QAAQC,GAAG,CAACH,YAAYI,GAAG,CAAC,CAACC,OAASA,KAAKC,IAAI;QACvD;QAEA,IAAI,IAAI,CAACT,EAAE,EAAEC,WAAW,OAAO,IAAI,CAACD,EAAE,CAACC,OAAO,KAAK,YAAY;YAC7D,MAAM,IAAI,CAACD,EAAE,CAACC,OAAO;QACvB;IACF,EAAC;IAEDS,YAAY,OACVpB;QAEA,WAAO1D,4SAAAA,EAA+B,IAAI,EAAE0D;IAC9C,EAAC;IAEDqB,MAA+B;IAE/B,gCAAgC;IAChC,6BAA6B;IAE7B9D,UAAUA,oQAAAA,CAAO;IAEjB+D,WAIkB;IAElB;;;;GAIC,GACDC,OAAO,OACLvB;QAEA,WAAOzD,kSAAAA,EAA0B,IAAI,EAAEyD;IACzC,EAAC;IAED;;;;GAIC,GACDwB,WAAW,OAKTxB;QAEA,WAAOxD,0SAAAA,EAA8C,IAAI,EAAEwD;IAC7D,EAAC;IAED;;;;GAIC,GACDvD,eAAe,OAIbuD;QAEA,WAAOtD,6SAAAA,EAAkB,IAAI,EAAEsD;IACjC,EAAC;IAEDyB,aAAa,OACXzB;QAEA,WAAOhD,0SAAAA,EAAmC,IAAI,EAAEgD;IAClD,EAAC;IAED;;;;GAIC,GACD0B,wBAAwB,OACtB1B;QAEA,WAAO/C,0TAAAA,EAAkC,IAAI,EAAE+C;IACjD,EAAC;IAED;;;;GAIC,GACD2B,qBAAqB,OACnB3B;QAEA,WAAO9C,oTAAAA,EAA+B,IAAI,EAAE8C;IAC9C,EAAC;IAED;;;;GAIC,GACD4B,kBAAkB,OAChB5B;QAEA,WAAOrD,wTAAAA,EAA4B,IAAI,EAAEqD;IAC3C,EAAC;IAED;;;;GAIC,GACD6B,eAAe,OACb7B;QAEA,WAAOpD,kTAAAA,EAAyB,IAAI,EAAEoD;IACxC,EAAC;IAED8B,iBAAiB,OACf9B;QAEA,WAAOlE,+SAAAA,EAA2B,IAAI,EAAEkE;IAC1C,EAAC;IAED+B,cAAc,IAAc,GAAG,IAAI,CAAC3B,MAAM,CAAC4B,SAAS,GAAG,IAAI,CAAC5B,MAAM,CAAC6B,MAAM,CAACC,KAAK,EAAE,CAAA;IAEjFC,YAAY,IAAc,GAAG,IAAI,CAAC/B,MAAM,CAAC4B,SAAS,GAAG,IAAI,CAAC5B,MAAM,CAAC6B,MAAM,CAACG,GAAG,EAAE,CAAA;IAE7EC,QAAiB;IAEjBC,UAAqB;IAErBC,WAAOvE,gRAAAA,EAAgB,IAAI,EAAC;IAE5B;;GAEC,GACDwE,GAAc;IAEdC,OAAe;IAEfC,QAAQ,OACN1C;QAEA,WAAOjE,6RAAAA,EAAkB,IAAI,EAAEiE;IACjC,EAAC;IAED2C,gBAAgB,OACd3C;QAEA,WAAOhE,6SAAAA,EAA0B,IAAI,EAAEgE;IACzC,EAAC;IAED;;;;GAIC,GACD4C,uBAAuB,OACrB5C;QAEA,WAAO7C,wTAAAA,EAAiC,IAAI,EAAE6C;IAChD,EAAC;IAED;;;;GAIC,GACD6C,iBAAiB,OACf7C;QAEA,WAAOnD,sTAAAA,EAA2B,IAAI,EAAEmD;IAC1C,EAAC;IAED8C,OAAsB;IAEtBC,OAAe;IAEfC,UAAgD;IAEhDC,MAQC;IAEDC,SAAS,OACPlD;QAEA,WAAO/D,+RAAAA,EAAmB,IAAI,EAAE+D;IAClC,EAAC;IAEDmD,eAAe,OACbnD;QAEA,WAAO5C,wSAAAA,EAAkC,IAAI,EAAE4C;IACjD,EAAC;IAEDoD,gBAAgE;IAEhEC,cAAc,OACZrD;QAEA,WAAO9D,ySAAAA,EAAiB,IAAI,EAAE8D;IAChC,EAAC;IAEDsD,WAEI,CAAC,EAAC;IAEN,MAAMC,mBAAmB;QACvB,IAAI,IAAI,CAACnD,MAAM,CAACmC,IAAI,CAACiB,OAAO,IAAI,IAAI,CAACpD,MAAM,CAACmC,IAAI,CAACkB,OAAO,IAAI,KAACvF,kRAAAA,KAAe;YAC1E,MAAMwF,eAAe;YACrB,MAAMC,gBAAgB;YAEtB,MAAMC,WACJ,OAAO,IAAI,CAACxD,MAAM,CAACmC,IAAI,CAACkB,OAAO,KAAK,aAChC,MAAM,IAAI,CAACrD,MAAM,CAACmC,IAAI,CAACkB,OAAO,CAAC,IAAI,IACnC,IAAI,CAACrD,MAAM,CAACmC,IAAI,CAACkB,OAAO;YAE9B,MAAM1C,QAAQC,GAAG,CACf4C,SAAS3C,GAAG,CAAC,CAAC4C;gBACZ,MAAMC,iBAAiB,IAAIzG,mMAAAA,CACzBwG,WAAW3C,IAAI,IAAIwC,cACnB;oBACE,IACEzF,8SAAAA,CAA2B8F,kBAAkB,IAC7C,CAACF,WAAWG,iBAAiB,IAC7B,IAAI,CAAC5D,MAAM,CAACmC,IAAI,CAAC0B,UAAU,EAC3B;wBACA,MAAM,IAAI,CAAC1B,IAAI,CAAC2B,eAAe,CAAC;4BAC9BC,WAAWN,WAAWM,SAAS;4BAC/BC,OAAOP,WAAWO,KAAK;wBACzB;oBACF;oBAEA,IAAI,CAACnG,8SAAAA,CAA2BoG,aAAa,EAAE;wBAC7C;oBACF;oBAEA,IAAI,OAAO,IAAI,CAACjE,MAAM,CAACmC,IAAI,CAAC8B,aAAa,KAAK,YAAY;wBACxD,MAAMA,gBAAgB,MAAM,IAAI,CAACjE,MAAM,CAACmC,IAAI,CAAC8B,aAAa,CAAC,IAAI;wBAE/D,IAAI,CAACA,eAAe;4BAClBP,eAAe3C,IAAI;4BACnB;wBACF;oBACF;oBAEA,MAAM,IAAI,CAACoB,IAAI,CAAC+B,GAAG,CAAC;wBAClBH,WAAWN,WAAWM,SAAS;wBAC/BI,OAAOV,WAAWU,KAAK,IAAIZ;wBAC3BS,OAAOP,WAAWO,KAAK;wBACvBI,QAAQX,WAAWW,MAAM;oBAC3B;gBACF,GACA;oBACE,+DAA+D;oBAC/DC,SAAS;gBACX;gBAGF,IAAI,CAAChE,KAAK,CAACiE,IAAI,CAACZ;YAClB;QAEJ;IACF;IAEA,MAAMa,IAAI,EACRC,IAAI,EACJC,GAAG,EACHC,GAAG,EAKJ,EAA6B;QAC5B,OAAO,IAAI/D,QAAQ,CAACgE,SAASC;YAC3B,MAAMC,cAAUxJ,4HAAAA,EAAM,QAAQ;gBAACG,4GAAAA,CAAKmJ,OAAO,CAACnF,SAAS;mBAAiBgF;aAAK,EAAE;gBAC3EC;gBACAK,OAAOJ,OAAOA,QAAQK,YAAY,YAAY;YAChD;YAEAF,QAAQG,EAAE,CAAC,QAAQ,CAACC;gBAClBN,QAAQ;oBAAEM,MAAMA;gBAAM;YACxB;YAEAJ,QAAQG,EAAE,CAAC,SAAS,CAACE;gBACnBN,OAAOM;YACT;QACF;IACF;IAeAC,OACEvF,OAAsC,EACwD;QAC9F,WAAO3D,sSAAAA,EAA4B,IAAI,EAAE2D;IAC3C;IAEA;;;GAGC,GACD,MAAMwF,KAAKxF,OAAoB,EAAoB;QACjD,IACEyF,QAAQC,GAAG,CAACC,QAAQ,gCAAK,gBACzBF,QAAQC,GAAG,CAACE,kCAAkC,KAAK,UACnD,CAAC/F,qBACD;YACAA,sBAAsB;YACtB,SAAKjC,+RAAAA;QACP;QAEA,IAAI,CAAC0E,SAAS,GAAGtC,QAAQsC,SAAS;QAElC,IAAI,CAACtC,SAASI,QAAQ;YACpB,MAAM,IAAIyF,MAAM;QAClB;QAEA,IAAI,CAACzF,MAAM,GAAG,MAAMJ,QAAQI,MAAM;QAClC,IAAI,CAACqC,MAAM,OAAGtE,2QAAAA,EAAU,WAAW,IAAI,CAACiC,MAAM,CAACqC,MAAM;QAErD,IAAI,CAAC,IAAI,CAACrC,MAAM,CAAC2C,MAAM,EAAE;YACvB,MAAM,IAAI8C,MAAM;QAClB;QAEA,IAAI,CAAC9C,MAAM,GAAGrH,gHAAAA,CAAOoK,UAAU,CAAC,UAAUC,MAAM,CAAC,IAAI,CAAC3F,MAAM,CAAC2C,MAAM,EAAEiD,MAAM,CAAC,OAAOC,KAAK,CAAC,GAAG;QAE5F,IAAI,CAAC5D,OAAO,GAAG;YACbjC,QAAQ,IAAI,CAACA,MAAM,CAACiC,OAAO;QAC7B;QAEA,KAAK,MAAM6D,cAAc,IAAI,CAAC9F,MAAM,CAACD,WAAW,CAAE;YAChD,IAAIgG,eAAmChB;YACvC,MAAMiB,eAAuC,CAAC,EAAEC,KAAK,EAAE;gBACrD,IACE;oBAAC;oBAAS;oBAAU;iBAAQ,CAACC,QAAQ,CAACD,MAAME,IAAI,KAC/CF,MAAME,IAAI,KAAK,SAAS,UAAUF,OACnC;oBACA,OAAO;gBACT;gBAEA,IAAI,KAACtI,wRAAAA,EAAiBsI,QAAQ;oBAC5B;gBACF;gBAEA,IAAIA,MAAMG,IAAI,KAAK,MAAM;oBACvBL,eAAeE,MAAME,IAAI;oBACzB,OAAO;gBACT;YACF;gBAEAjI,wRAAAA,EAAe;gBACbmI,UAAUL;gBACVhG,QAAQ,IAAI,CAACA,MAAM;gBACnBsG,QAAQR,WAAWQ,MAAM;gBACzBC,mBAAmB;YACrB;YAEA,IAAI,CAACxG,WAAW,CAAC+F,WAAWU,IAAI,CAAC,GAAG;gBAClCxG,QAAQ8F;gBACRC;YACF;QACF;QAEA,IAAI,CAACjG,MAAM,GAAG,IAAI,CAACE,MAAM,CAACF,MAAM,CAAE2G,MAAM,CACtC,CAAC3G,QAAQ4G;YACP5G,MAAM,CAAC4G,MAAMF,IAAI,CAAC,GAAGE;YACrB,OAAO5G;QACT,GACA,CAAC;QAGH,4BAA4B;QAC5B,IAAIuF,QAAQC,GAAG,CAACC,QAAQ,gCAAK,gBAAgB,IAAI,CAACvF,MAAM,CAAC2G,UAAU,CAACC,YAAY,KAAK,OAAO;YAC1F,kHAAkH;YAClH,sDAAsD;YACtD,KAAK,IAAI,CAACrC,GAAG,CAAC;gBACZC,MAAM;oBAAC;iBAAiB;gBACxBE,KAAK;YACP;QACF;QAEA,IAAI,CAACpE,EAAE,GAAG,IAAI,CAACN,MAAM,CAACM,EAAE,CAAC8E,IAAI,CAAC;YAAEyB,SAAS,IAAI;QAAC;QAC9C,IAAI,CAACvG,EAAE,CAACuG,OAAO,GAAG,IAAI;QAEtB,IAAI,CAACzE,EAAE,GAAG,IAAI,CAACpC,MAAM,CAACoC,EAAE,CAACgD,IAAI,CAAC;YAAEyB,SAAS,IAAI;QAAC;QAE9C,IAAI,IAAI,CAACvG,EAAE,EAAE8E,MAAM;YACjB,MAAM,IAAI,CAAC9E,EAAE,CAAC8E,IAAI;QACpB;QAEA,IAAI,CAACxF,QAAQkH,gBAAgB,IAAI,IAAI,CAACxG,EAAE,CAACyG,OAAO,EAAE;YAChD,MAAM,IAAI,CAACzG,EAAE,CAACyG,OAAO;QACvB;QAEA,qBAAqB;QACrB,IAAI,IAAI,CAAC/G,MAAM,CAACiB,KAAK,YAAYN,SAAS;YACxC,MAAMqG,iBAAiB,MAAM,IAAI,CAAChH,MAAM,CAACiB,KAAK;YAC9C,IAAI,CAACA,KAAK,GAAG+F,eAAe;gBAAEH,SAAS,IAAI;YAAC;QAC9C,OAAO,IAAI,IAAI,CAAC7G,MAAM,CAACiB,KAAK,EAAE;YAC5B,IAAI,CAACA,KAAK,GAAG,IAAI,CAACjB,MAAM,CAACiB,KAAK,CAAC;gBAAE4F,SAAS,IAAI;YAAC;QACjD,OAAO;YACL,IAAIxB,QAAQC,GAAG,CAAC2B,UAAU,KAAK,0BAA0B;gBACvD,IAAI,CAAC5E,MAAM,CAAC6E,IAAI,CACd,CAAC,qHAAqH,CAAC;YAE3H;YAEA,IAAI,CAACjG,KAAK,OAAGvD,8RAAAA,EAAoB;gBAAEmJ,SAAS,IAAI;YAAC;QACnD;QAEA,+DAA+D;QAC/D,IACE,CAAC,IAAI,CAAC7G,MAAM,CAACmH,KAAK,IAClB,IAAI,CAACnH,MAAM,CAACD,WAAW,CAACqH,IAAI,CAAC,CAACC,IAAMA,EAAEC,MAAM,CAACC,UAAU,IAAIF,EAAEC,MAAM,CAACE,aAAa,GACjF;YACA,IAAI,CAACnF,MAAM,CAAC6E,IAAI,CACd,CAAC,gIAAgI,CAAC;QAEtI;QAEA,8FAA8F;QAC9F,IAAI7B,QAAQC,GAAG,CAACmC,MAAM,EAAE;YACtB,MAAMC,2BAA2B,IAAI,CAAC1H,MAAM,CAACD,WAAW,CAAC4H,MAAM,CAC7D,CAACN,IAAMA,EAAEC,MAAM,IAAID,EAAEC,MAAM,CAACM,OAAO,KAAK7C;YAG1C,IAAI2C,yBAAyBlH,MAAM,EAAE;gBACnC,MAAMqH,QAAQH,yBAAyB7G,GAAG,CAAC,CAACwG,IAAMA,EAAEb,IAAI,EAAEsB,IAAI,CAAC;gBAC/D,IAAI,CAACzF,MAAM,CAAC6E,IAAI,CACd,CAAC,6HAA6H,EAAEW,MAAM,wEAAwE,CAAC;YAEnN;QACF;QAEA,IAAI,CAACjF,SAAS,GAAG,IAAI,CAAC3B,KAAK,CAAC,YAAY;YAExChD,uSAAAA,EAAoB,IAAI;QAExB,0FAA0F;QAC1F,IAAI8J,qBAAqB;QACzB,IAAI,CAAClI,cAAc,GAAG,IAAI,CAACG,MAAM,CAACD,WAAW,CAAC0G,MAAM,CAAC,CAAC5G,gBAAgBiG;YACpE,IAAIA,YAAYnG,MAAM;gBACpB,IAAImG,WAAWnG,IAAI,CAACqI,UAAU,CAACxH,MAAM,GAAG,GAAG;oBACzCX,eAAeyE,IAAI,IAAIwB,WAAWnG,IAAI,CAACqI,UAAU;gBACnD;gBAEA,8DAA8D;gBAC9D,IAAIlC,WAAWnG,IAAI,EAAEsI,WAAW;oBAC9BpI,eAAeyE,IAAI,CAAC;wBAClB8B,MAAM,GAAGN,WAAWU,IAAI,CAAC,QAAQ,CAAC;wBAClC0B,kBAAc7K,+RAAAA,EAAqByI;oBACrC;gBACF;gBAEA,mCAAmC;gBACnC,IAAI,CAACA,WAAWnG,IAAI,CAACwI,oBAAoB,IAAI,CAACJ,oBAAoB;oBAChEA,qBAAqB;gBACvB;YACF;YAEA,OAAOlI;QACT,GAAG,EAAE;QAEL,4DAA4D;QAC5D,IAAIkI,oBAAoB;YACtB,IAAI,CAAClI,cAAc,CAACyE,IAAI,CAAC;gBACvB8B,MAAM;gBACN8B,cAAc5K,yRAAAA;YAChB;QACF;QAEA,IAAI;YACF,IAAI,CAACsC,QAAQwI,aAAa,EAAE;gBAC1B,IAAI,OAAOxI,QAAQyI,MAAM,KAAK,YAAY;oBACxC,MAAMzI,QAAQyI,MAAM,CAAC,IAAI;gBAC3B;gBACA,IAAI,OAAO,IAAI,CAACrI,MAAM,CAACqI,MAAM,KAAK,YAAY;oBAC5C,MAAM,IAAI,CAACrI,MAAM,CAACqI,MAAM,CAAC,IAAI;gBAC/B;YACF;QACF,EAAE,OAAOnD,OAAO;YACd,IAAI,CAAC7C,MAAM,CAAC6C,KAAK,CAAC;gBAAEoD,KAAKpD;YAAM,GAAG;YAClC,MAAMA;QACR;QAEA,IAAItF,QAAQkB,IAAI,EAAE;YAChB,MAAM,IAAI,CAACqC,gBAAgB;QAC7B;QAEA,OAAO,IAAI;IACb;IAeAwC,OACE/F,OAAsC,EACwD;QAC9F,WAAOlD,sSAAAA,EAA4B,IAAI,EAAEkD;IAC3C;AACF;AAEA,MAAM2I,cAAc,IAAI7I;uCAGT6I,YAAW;AAEnB,MAAMC,SAAS,OACpBxI,QACA6G,SACA4B,yBACA7I;IAEA,IAAI,OAAOiH,QAAQvG,EAAE,CAACC,OAAO,KAAK,YAAY;QAC5C,mFAAmF;QACnF,MAAMsG,QAAQvG,EAAE,CAACC,OAAO;IAC1B;IACAsG,QAAQ7G,MAAM,GAAGA;IAEjB6G,QAAQ9G,WAAW,GAAGC,OAAOD,WAAW,CAAC0G,MAAM,CAC7C,CAAC1G,aAAa+F;QACZ/F,WAAW,CAAC+F,WAAWU,IAAI,CAAC,GAAG;YAC7BxG,QAAQ8F;YACRC,cAAcc,QAAQ9G,WAAW,CAAC+F,WAAWU,IAAI,CAAC,EAAET;QACtD;QACA,OAAOhG;IACT,GACA,CAAC;IAGH8G,QAAQ/G,MAAM,GAAGE,OAAOF,MAAM,CAAE2G,MAAM,CACpC,CAAC3G,QAAQ4G;QACP5G,MAAM,CAAC4G,MAAMF,IAAI,CAAC,GAAGE;QACrB,OAAO5G;IACT,GACA,CAAC;IAGH+G,QAAQ5E,OAAO,GAAG;QAChBjC,QAAQA,OAAOiC,OAAO;IACxB;IAEA,sHAAsH;IAEtH,iBAAiB;IACjB,IAAIjC,OAAO2G,UAAU,CAACC,YAAY,KAAK,OAAO;QAC5C,kHAAkH;QAClH,sDAAsD;QACtD,KAAKC,QAAQtC,GAAG,CAAC;YACfC,MAAM;gBAAC;aAAiB;YACxBE,KAAK;QACP;IACF;IAEA,sBAAsB;IACtB,IAAI+D,4BAA4B,QAAQzI,OAAO8B,KAAK,EAAEI,WAAW0E,iBAAiB,OAAO;QACvF,gHAAgH;QAChH,uFAAuF;QACvF,8CAA8C;QAC9C,UAAMrJ,iSAAAA,EAAkByC,QAAQ;YAC9B0I,oBAAoB;YACpBhE,KAAK;QACP;IACF;IAEA,IAAImC,QAAQvG,EAAE,EAAE8E,MAAM;QACpB,MAAMyB,QAAQvG,EAAE,CAAC8E,IAAI;IACvB;IAEA,IAAI,CAACxF,SAASkH,oBAAoBD,QAAQvG,EAAE,CAACyG,OAAO,EAAE;QACpD,MAAMF,QAAQvG,EAAE,CAACyG,OAAO,CAAC;YAAE4B,WAAW;QAAK;IAC7C;;IAEEC,yDAAeC,sBAAsB,GAAG,CAAC;IACzCD,yDAAeE,kBAAkB,GAAG;IACpCF,yDAAeG,wBAAwB,GAAG;IAC1CH,yDAAeI,+BAA+B,GAAG,KAAK,0KAA0K;;IAChOJ,yDAAeK,4BAA4B,GAAG;IAC9CL,yDAAeM,kCAAkC,GAAG;AACxD,EAAC;AAED,IAAIC,UASCP,yDAAeQ,QAAQ;AAE5B,IAAI,CAACD,SAAS;IACZA,UAAWP,yDAAeQ,QAAQ,GAAG,IAAIC;AAC3C;AAUO,MAAMC,aAAa,OACxB1J;IAUA,IAAI,CAACA,SAASI,QAAQ;QACpB,MAAM,IAAIyF,MAAM;IAClB;IAEA,IAAI8D,0BAA0B;IAE9B,IAAIC,SAASL,QAAQM,GAAG,CAAC7J,QAAQ8J,GAAG,IAAI;IACxC,IAAI,CAACF,QAAQ;QACXA,SAAS;YACPG,kBAAkBC,QAAQhK,QAAQkB,IAAI;YACtC+F,SAAS;YACTgD,SAAS;YACTrB,QAAQ;YACRsB,IAAI;QACN;QACAX,QAAQY,GAAG,CAACnK,QAAQ8J,GAAG,IAAI,WAAWF;IACxC,OAAO;QACLD,0BAA0B;IAC5B;IAEA,IAAIA,yBAAyB;QAC3B,0GAA0G;QAC1G,+EAA+E;QAC/E3J,QAAQwI,aAAa,GAAG;IAC1B;IAEA,IAAIoB,OAAO3C,OAAO,EAAE;QAClB,IAAIjH,QAAQkB,IAAI,IAAI,CAAC0I,OAAOG,gBAAgB,EAAE;YAC5C,oJAAoJ;YACpJH,OAAOG,gBAAgB,GAAG;YAC1B,MAAMH,OAAO3C,OAAO,CAAC1D,gBAAgB;QACvC;QAEA,IAAIqG,OAAOhB,MAAM,KAAK,MAAM;YAC1B,IAAI7D;YAEJ,yJAAyJ;YACzJ,qIAAqI;YACrI,wGAAwG;YACxG6E,OAAOhB,MAAM,GAAG,IAAI7H,QAAQ,CAACqJ,MAASrF,UAAUqF;YAChD,MAAMhK,SAAS,MAAMJ,QAAQI,MAAM;YAEnC,uFAAuF;YACvF,+GAA+G;YAC/G,EAAE;YACF,sHAAsH;YACtH,wGAAwG;YACxG,8EAA8E;YAC9E,EAAE;YACF,sGAAsG;YACtG,iGAAiG;YACjG,oGAAoG;YACpG,MAAMwI,OAAOxI,QAAQwJ,OAAO3C,OAAO,EAAE,OAAOjH;YAE5C+E;QACF;QAEA,IAAI6E,OAAOhB,MAAM,YAAY7H,SAAS;YACpC,MAAM6I,OAAOhB,MAAM;QACrB;QACA,IAAI5I,SAASsC,WAAW;YACtBsH,OAAO3C,OAAO,CAAC3E,SAAS,GAAGtC,QAAQsC,SAAS;QAC9C;QACA,OAAOsH,OAAO3C,OAAO;IACvB;IAEA,IAAI,CAAC2C,OAAOK,OAAO,EAAE;QACnB,wFAAwF;QACxFL,OAAOK,OAAO,GAAG,IAAInK,cAAc0F,IAAI,CAACxF;IAC1C;IAEA,IAAI;QACF4J,OAAO3C,OAAO,GAAG,MAAM2C,OAAOK,OAAO;QAErC,IACE,CAACL,OAAOM,EAAE,IACVzE,QAAQC,GAAG,CAACC,QAAQ,gCAAK,gBACzBF,QAAQC,GAAG,CAACC,QAAQ,gCAAK,UACzBF,QAAQC,GAAG,CAAC2E,mBAAmB,KAAK,QACpC;YACA,IAAI;gBACF,MAAMC,OAAO7E,QAAQC,GAAG,CAAC6E,IAAI,IAAI;gBACjC,MAAMC,WACJ/E,QAAQC,GAAG,CAAC+E,SAAS,KAAK,UAAUhF,QAAQiF,IAAI,CAACpE,QAAQ,CAAC;gBAC5D,MAAMqE,WAAWH,WAAW,QAAQ;gBAEpC,MAAM5O,OAAO;gBACb,2GAA2G;gBAC3G,MAAMgP,SAASnF,QAAQC,GAAG,CAACmF,mBAAmB,SAAI;gBAElDjB,OAAOM,EAAE,GAAG,IAAIrO,yMAAAA,CACd4J,QAAQC,GAAG,CAACoF,wBAAwB,IAAI,GAAGH,SAAS,aAAa,EAAEL,OAAOM,SAAShP,MAAM;gBAG3FgO,OAAOM,EAAE,CAACa,SAAS,GAAG,CAACC;oBACrB,IAAI,OAAOA,MAAMC,IAAI,KAAK,UAAU;wBAClC,MAAMA,OAAOC,KAAKC,KAAK,CAACH,MAAMC,IAAI;wBAElC,IACE,AACAA,KAAK1E,IAAI,KAAK,4BACd0E,KAAKG,MAAM,KAAK,0BAChB,cAHkG;4BAIlGxB,OAAOhB,MAAM,GAAG;wBAClB;oBACF;gBACF;gBAEAgB,OAAOM,EAAE,CAACmB,OAAO,GAAG,CAACC;gBACnB,yCAAyC;gBAC3C;YACF,EAAE,OAAOA,GAAG;YACV,YAAY;YACd;QACF;IACF,EAAE,OAAOC,GAAG;QACV3B,OAAOK,OAAO,GAAG;QAEfsB,EAAqCC,gBAAgB,GAAG;QAC1D,MAAMD;IACR;IAEA,IAAIvL,SAASsC,WAAW;QACtBsH,OAAO3C,OAAO,CAAC3E,SAAS,GAAGtC,QAAQsC,SAAS;IAC9C;IAEA,OAAOsH,OAAO3C,OAAO;AACvB,EAAC"}}]
}