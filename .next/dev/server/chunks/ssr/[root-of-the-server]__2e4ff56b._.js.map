{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 212, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/src/utilities/extractID.ts"],"sourcesContent":["import { Config } from '@/payload-types'\nimport type { CollectionSlug } from 'payload'\n\nexport const extractID = <T extends Config['collections'][CollectionSlug]>(\n  objectOrID: T | T['id'],\n): T['id'] => {\n  if (objectOrID && typeof objectOrID === 'object') return objectOrID.id\n\n  return objectOrID\n}\n"],"names":[],"mappings":";;;;AAGO,MAAM,YAAY,CACvB;IAEA,IAAI,cAAc,OAAO,eAAe,UAAU,OAAO,WAAW,EAAE;IAEtE,OAAO;AACT"}},
    {"offset": {"line": 224, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/src/utilities/getUserTenantIDs.ts"],"sourcesContent":["import type { Tenant, User } from '../payload-types'\nimport { extractID } from './extractID'\n\n/**\n * Returns array of all tenant IDs assigned to a user\n *\n * @param user - User object with tenants field\n * @param role - Optional role to filter by\n */\nexport const getUserTenantIDs = (\n  user: null | User,\n  role?: NonNullable<User['tenants']>[number]['roles'][number],\n): Tenant['id'][] => {\n  if (!user) {\n    return []\n  }\n\n  return (\n    user?.tenants?.reduce<Tenant['id'][]>((acc, { roles, tenant }) => {\n      if (role && !roles.includes(role)) {\n        return acc\n      }\n\n      if (tenant) {\n        acc.push(extractID(tenant))\n      }\n\n      return acc\n    }, []) || []\n  )\n}\n"],"names":[],"mappings":";;;;AACA;;AAQO,MAAM,mBAAmB,CAC9B,MACA;IAEA,IAAI,CAAC,MAAM;QACT,OAAO,EAAE;IACX;IAEA,OACE,MAAM,SAAS,OAAuB,CAAC,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE;QAC3D,IAAI,QAAQ,CAAC,MAAM,QAAQ,CAAC,OAAO;YACjC,OAAO;QACT;QAEA,IAAI,QAAQ;YACV,IAAI,IAAI,CAAC,IAAA,0IAAS,EAAC;QACrB;QAEA,OAAO;IACT,GAAG,EAAE,KAAK,EAAE;AAEhB"}},
    {"offset": {"line": 248, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/src/collections/Pages/hooks/ensureUniqueSlug.ts"],"sourcesContent":["import type { FieldHook, Where } from 'payload'\n\nimport { ValidationError } from 'payload'\n\nimport { getUserTenantIDs } from '../../../utilities/getUserTenantIDs'\nimport { extractID } from '@/utilities/extractID'\n\nexport const ensureUniqueSlug: FieldHook = async ({ data, originalDoc, req, value }) => {\n  // if value is unchanged, skip validation\n  if (originalDoc.slug === value) {\n    return value\n  }\n\n  const constraints: Where[] = [\n    {\n      slug: {\n        equals: value,\n      },\n    },\n  ]\n\n  const incomingTenantID = extractID(data?.tenant)\n  const currentTenantID = extractID(originalDoc?.tenant)\n  const tenantIDToMatch = incomingTenantID || currentTenantID\n\n  if (tenantIDToMatch) {\n    constraints.push({\n      tenant: {\n        equals: tenantIDToMatch,\n      },\n    })\n  }\n\n  const findDuplicatePages = await req.payload.find({\n    collection: 'pages',\n    where: {\n      and: constraints,\n    },\n  })\n\n  if (findDuplicatePages.docs.length > 0 && req.user) {\n    const tenantIDs = getUserTenantIDs(req.user)\n    // if the user is an admin or has access to more than 1 tenant\n    // provide a more specific error message\n    if (req.user.roles?.includes('super-admin') || tenantIDs.length > 1) {\n      const attemptedTenantChange = await req.payload.findByID({\n        id: tenantIDToMatch,\n        collection: 'tenants',\n      })\n\n      throw new ValidationError({\n        errors: [\n          {\n            message: `The \"${attemptedTenantChange.name}\" tenant already has a page with the slug \"${value}\". Slugs must be unique per tenant.`,\n            path: 'slug',\n          },\n        ],\n      })\n    }\n\n    throw new ValidationError({\n      errors: [\n        {\n          message: `A page with the slug ${value} already exists. Slug must be unique per tenant.`,\n          path: 'slug',\n        },\n      ],\n    })\n  }\n\n  return value\n}\n"],"names":[],"mappings":";;;;AAEA;AAEA;AACA;;;;AAEO,MAAM,mBAA8B,OAAO,EAAE,IAAI,EAAE,WAAW,EAAE,GAAG,EAAE,KAAK,EAAE;IACjF,yCAAyC;IACzC,IAAI,YAAY,IAAI,KAAK,OAAO;QAC9B,OAAO;IACT;IAEA,MAAM,cAAuB;QAC3B;YACE,MAAM;gBACJ,QAAQ;YACV;QACF;KACD;IAED,MAAM,mBAAmB,IAAA,0IAAS,EAAC,MAAM;IACzC,MAAM,kBAAkB,IAAA,0IAAS,EAAC,aAAa;IAC/C,MAAM,kBAAkB,oBAAoB;IAE5C,IAAI,iBAAiB;QACnB,YAAY,IAAI,CAAC;YACf,QAAQ;gBACN,QAAQ;YACV;QACF;IACF;IAEA,MAAM,qBAAqB,MAAM,IAAI,OAAO,CAAC,IAAI,CAAC;QAChD,YAAY;QACZ,OAAO;YACL,KAAK;QACP;IACF;IAEA,IAAI,mBAAmB,IAAI,CAAC,MAAM,GAAG,KAAK,IAAI,IAAI,EAAE;QAClD,MAAM,YAAY,IAAA,wJAAgB,EAAC,IAAI,IAAI;QAC3C,8DAA8D;QAC9D,wCAAwC;QACxC,IAAI,IAAI,IAAI,CAAC,KAAK,EAAE,SAAS,kBAAkB,UAAU,MAAM,GAAG,GAAG;YACnE,MAAM,wBAAwB,MAAM,IAAI,OAAO,CAAC,QAAQ,CAAC;gBACvD,IAAI;gBACJ,YAAY;YACd;YAEA,MAAM,IAAI,uRAAe,CAAC;gBACxB,QAAQ;oBACN;wBACE,SAAS,CAAC,KAAK,EAAE,sBAAsB,IAAI,CAAC,2CAA2C,EAAE,MAAM,mCAAmC,CAAC;wBACnI,MAAM;oBACR;iBACD;YACH;QACF;QAEA,MAAM,IAAI,uRAAe,CAAC;YACxB,QAAQ;gBACN;oBACE,SAAS,CAAC,qBAAqB,EAAE,MAAM,gDAAgD,CAAC;oBACxF,MAAM;gBACR;aACD;QACH;IACF;IAEA,OAAO;AACT"}},
    {"offset": {"line": 319, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/src/access/isSuperAdmin.ts"],"sourcesContent":["import type { Access } from 'payload'\nimport { User } from '../payload-types'\n\nexport const hasSuperAdminAccess: Access = ({ req }): boolean => {\n  return isSuperAdmin(req.user)\n}\n\nexport const isSuperAdmin = (user: User | null): boolean => {\n  return Boolean(user?.roles?.includes('super-admin'))\n}\n"],"names":[],"mappings":";;;;;;AAGO,MAAM,sBAA8B,CAAC,EAAE,GAAG,EAAE;IACjD,OAAO,aAAa,IAAI,IAAI;AAC9B;AAEO,MAAM,eAAe,CAAC;IAC3B,OAAO,QAAQ,MAAM,OAAO,SAAS;AACvC"}},
    {"offset": {"line": 335, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/src/access/superAdminOrTenantAdmin.ts"],"sourcesContent":["import { getUserTenantIDs } from '@/utilities/getUserTenantIDs'\nimport { isSuperAdmin } from './isSuperAdmin'\nimport { Access } from 'payload'\nimport { User } from '../payload-types'\n\n/**\n * Tenant admins and super admins can will be allowed access\n */\nexport const hasSuperAdminOrAdminAccess: Access = ({ req }) => {\n  if (!req.user) {\n    return false\n  }\n\n  if (isSuperAdmin(req.user)) {\n    return true\n  }\n\n  const adminTenantAccessIDs = getUserTenantIDs(req.user, 'tenant-admin')\n  const requestedTenant = req?.data?.tenant\n\n  if (requestedTenant && adminTenantAccessIDs.includes(requestedTenant)) {\n    return true\n  }\n\n  return false\n}"],"names":[],"mappings":";;;;AAAA;AACA;;;AAOO,MAAM,6BAAqC,CAAC,EAAE,GAAG,EAAE;IACxD,IAAI,CAAC,IAAI,IAAI,EAAE;QACb,OAAO;IACT;IAEA,IAAI,IAAA,6IAAY,EAAC,IAAI,IAAI,GAAG;QAC1B,OAAO;IACT;IAEA,MAAM,uBAAuB,IAAA,wJAAgB,EAAC,IAAI,IAAI,EAAE;IACxD,MAAM,kBAAkB,KAAK,MAAM;IAEnC,IAAI,mBAAmB,qBAAqB,QAAQ,CAAC,kBAAkB;QACrE,OAAO;IACT;IAEA,OAAO;AACT"}},
    {"offset": {"line": 361, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/src/collections/Pages/index.ts"],"sourcesContent":["import type { CollectionConfig } from 'payload'\n\nimport { ensureUniqueSlug } from './hooks/ensureUniqueSlug'\nimport { hasSuperAdminOrAdminAccess } from '@/access/superAdminOrTenantAdmin'\n\nexport const Pages: CollectionConfig = {\n  slug: 'pages',\n  access: {\n    create: hasSuperAdminOrAdminAccess,\n    delete: hasSuperAdminOrAdminAccess,\n    read: () => true,\n    update: hasSuperAdminOrAdminAccess,\n  },\n  admin: {\n    useAsTitle: 'title',\n  },\n  fields: [\n    {\n      name: 'title',\n      type: 'text',\n    },\n    {\n      name: 'slug',\n      type: 'text',\n      defaultValue: 'home',\n      hooks: {\n        beforeValidate: [ensureUniqueSlug],\n      },\n      index: true,\n    },\n  ],\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;;;AAEO,MAAM,QAA0B;IACrC,MAAM;IACN,QAAQ;QACN,QAAQ,sKAA0B;QAClC,QAAQ,sKAA0B;QAClC,MAAM,IAAM;QACZ,QAAQ,sKAA0B;IACpC;IACA,OAAO;QACL,YAAY;IACd;IACA,QAAQ;QACN;YACE,MAAM;YACN,MAAM;QACR;QACA;YACE,MAAM;YACN,MAAM;YACN,cAAc;YACd,OAAO;gBACL,gBAAgB;oBAAC,4KAAgB;iBAAC;YACpC;YACA,OAAO;QACT;KACD;AACH"}},
    {"offset": {"line": 402, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/src/collections/Tenants/access/updateAndDelete.ts"],"sourcesContent":["import { isSuperAdmin } from '@/access/isSuperAdmin'\nimport { getUserTenantIDs } from '@/utilities/getUserTenantIDs'\nimport { Access } from 'payload'\n\nexport const updateAndDeleteAccess: Access = ({ req }) => {\n  if (!req.user) {\n    return false\n  }\n\n  if (isSuperAdmin(req.user)) {\n    return true\n  }\n\n  return {\n    id: {\n      in: getUserTenantIDs(req.user, 'tenant-admin'),\n    },\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAGO,MAAM,wBAAgC,CAAC,EAAE,GAAG,EAAE;IACnD,IAAI,CAAC,IAAI,IAAI,EAAE;QACb,OAAO;IACT;IAEA,IAAI,IAAA,6IAAY,EAAC,IAAI,IAAI,GAAG;QAC1B,OAAO;IACT;IAEA,OAAO;QACL,IAAI;YACF,IAAI,IAAA,wJAAgB,EAAC,IAAI,IAAI,EAAE;QACjC;IACF;AACF"}},
    {"offset": {"line": 427, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/src/collections/Tenants/index.ts"],"sourcesContent":["import type { CollectionConfig } from 'payload'\n\nimport { hasSuperAdminAccess } from '@/access/isSuperAdmin'\nimport { updateAndDeleteAccess } from './access/updateAndDelete'\n\nexport const Tenants: CollectionConfig = {\n  slug: 'tenants',\n  access: {\n    create: hasSuperAdminAccess,\n    delete: updateAndDeleteAccess,\n    read: ({ req }) => Boolean(req.user),\n    update: updateAndDeleteAccess,\n  },\n  admin: {\n    useAsTitle: 'name',\n  },\n  fields: [\n    {\n      name: 'name',\n      type: 'text',\n      required: true,\n    },\n    {\n      name: 'domain',\n      type: 'text',\n      admin: {\n        description: 'Used for domain-based tenant handling',\n      },\n    },\n    {\n      name: 'slug',\n      type: 'text',\n      admin: {\n        description: 'Used for url paths, example: /tenant-slug/page-slug',\n      },\n      index: true,\n      required: true,\n    },\n    {\n      name: 'allowPublicRead',\n      type: 'checkbox',\n      admin: {\n        description:\n          'If checked, logging in is not required to read. Useful for building public pages.',\n        position: 'sidebar',\n      },\n      defaultValue: false,\n      index: true,\n    },\n  ],\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;;;AAEO,MAAM,UAA4B;IACvC,MAAM;IACN,QAAQ;QACN,QAAQ,oJAAmB;QAC3B,QAAQ,mLAAqB;QAC7B,MAAM,CAAC,EAAE,GAAG,EAAE,GAAK,QAAQ,IAAI,IAAI;QACnC,QAAQ,mLAAqB;IAC/B;IACA,OAAO;QACL,YAAY;IACd;IACA,QAAQ;QACN;YACE,MAAM;YACN,MAAM;YACN,UAAU;QACZ;QACA;YACE,MAAM;YACN,MAAM;YACN,OAAO;gBACL,aAAa;YACf;QACF;QACA;YACE,MAAM;YACN,MAAM;YACN,OAAO;gBACL,aAAa;YACf;YACA,OAAO;YACP,UAAU;QACZ;QACA;YACE,MAAM;YACN,MAAM;YACN,OAAO;gBACL,aACE;gBACF,UAAU;YACZ;YACA,cAAc;YACd,OAAO;QACT;KACD;AACH"}},
    {"offset": {"line": 484, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/src/collections/Users/access/create.ts"],"sourcesContent":["import type { Access } from 'payload'\n\nimport type { Tenant, User } from '../../../payload-types'\n\nimport { isSuperAdmin } from '../../../access/isSuperAdmin'\nimport { getUserTenantIDs } from '../../../utilities/getUserTenantIDs'\n\nexport const createAccess: Access<User> = ({ req }) => {\n  if (!req.user) {\n    return false\n  }\n\n  if (isSuperAdmin(req.user)) {\n    return true\n  }\n\n  if (!isSuperAdmin(req.user) && req.data?.roles?.includes('super-admin')) {\n    return false\n  }\n\n  const adminTenantAccessIDs = getUserTenantIDs(req.user, 'tenant-admin')\n\n  const requestedTenants: Tenant['id'][] =\n    req.data?.tenants?.map((t: { tenant: Tenant['id'] }) => t.tenant) ?? []\n\n  const hasAccessToAllRequestedTenants = requestedTenants.every((tenantID) =>\n    adminTenantAccessIDs.includes(tenantID),\n  )\n\n  if (hasAccessToAllRequestedTenants) {\n    return true\n  }\n\n  return false\n}\n"],"names":[],"mappings":";;;;AAIA;AACA;;;AAEO,MAAM,eAA6B,CAAC,EAAE,GAAG,EAAE;IAChD,IAAI,CAAC,IAAI,IAAI,EAAE;QACb,OAAO;IACT;IAEA,IAAI,IAAA,6IAAY,EAAC,IAAI,IAAI,GAAG;QAC1B,OAAO;IACT;IAEA,IAAI,CAAC,IAAA,6IAAY,EAAC,IAAI,IAAI,KAAK,IAAI,IAAI,EAAE,OAAO,SAAS,gBAAgB;QACvE,OAAO;IACT;IAEA,MAAM,uBAAuB,IAAA,wJAAgB,EAAC,IAAI,IAAI,EAAE;IAExD,MAAM,mBACJ,IAAI,IAAI,EAAE,SAAS,IAAI,CAAC,IAAgC,EAAE,MAAM,KAAK,EAAE;IAEzE,MAAM,iCAAiC,iBAAiB,KAAK,CAAC,CAAC,WAC7D,qBAAqB,QAAQ,CAAC;IAGhC,IAAI,gCAAgC;QAClC,OAAO;IACT;IAEA,OAAO;AACT"}},
    {"offset": {"line": 514, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/src/collections/Users/access/isAccessingSelf.ts"],"sourcesContent":["import { User } from '@/payload-types'\n\nexport const isAccessingSelf = ({ id, user }: { user?: User; id?: string | number }): boolean => {\n  return user ? Boolean(user.id === id) : false\n}\n"],"names":[],"mappings":";;;;AAEO,MAAM,kBAAkB,CAAC,EAAE,EAAE,EAAE,IAAI,EAAyC;IACjF,OAAO,OAAO,QAAQ,KAAK,EAAE,KAAK,MAAM;AAC1C"}},
    {"offset": {"line": 525, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/src/utilities/getCollectionIDType.ts"],"sourcesContent":["import type { CollectionSlug, Payload } from 'payload'\n\ntype Args = {\n  collectionSlug: CollectionSlug\n  payload: Payload\n}\nexport const getCollectionIDType = ({ collectionSlug, payload }: Args): 'number' | 'text' => {\n  return payload.collections[collectionSlug]?.customIDType ?? payload.db.defaultIDType\n}\n"],"names":[],"mappings":";;;;AAMO,MAAM,sBAAsB,CAAC,EAAE,cAAc,EAAE,OAAO,EAAQ;IACnE,OAAO,QAAQ,WAAW,CAAC,eAAe,EAAE,gBAAgB,QAAQ,EAAE,CAAC,aAAa;AACtF"}},
    {"offset": {"line": 536, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/src/collections/Users/access/read.ts"],"sourcesContent":["import type { User } from '@/payload-types'\nimport type { Access, Where } from 'payload'\nimport { getTenantFromCookie } from '@payloadcms/plugin-multi-tenant/utilities'\n\nimport { isSuperAdmin } from '../../../access/isSuperAdmin'\nimport { getUserTenantIDs } from '../../../utilities/getUserTenantIDs'\nimport { isAccessingSelf } from './isAccessingSelf'\nimport { getCollectionIDType } from '@/utilities/getCollectionIDType'\n\nexport const readAccess: Access<User> = ({ req, id }) => {\n  if (!req?.user) {\n    return false\n  }\n\n  if (isAccessingSelf({ id, user: req.user })) {\n    return true\n  }\n\n  const superAdmin = isSuperAdmin(req.user)\n  const selectedTenant = getTenantFromCookie(\n    req.headers,\n    getCollectionIDType({ payload: req.payload, collectionSlug: 'tenants' }),\n  )\n  const adminTenantAccessIDs = getUserTenantIDs(req.user, 'tenant-admin')\n\n  if (selectedTenant) {\n    // If it's a super admin, or they have access to the tenant ID set in cookie\n    const hasTenantAccess = adminTenantAccessIDs.some((id) => id === selectedTenant)\n    if (superAdmin || hasTenantAccess) {\n      return {\n        'tenants.tenant': {\n          equals: selectedTenant,\n        },\n      }\n    }\n  }\n\n  if (superAdmin) {\n    return true\n  }\n\n  return {\n    or: [\n      {\n        id: {\n          equals: req.user.id,\n        },\n      },\n      {\n        'tenants.tenant': {\n          in: adminTenantAccessIDs,\n        },\n      },\n    ],\n  } as Where\n}\n"],"names":[],"mappings":";;;;AAEA;AAEA;AACA;AACA;AACA;;;;;;AAEO,MAAM,aAA2B,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE;IAClD,IAAI,CAAC,KAAK,MAAM;QACd,OAAO;IACT;IAEA,IAAI,IAAA,2KAAe,EAAC;QAAE;QAAI,MAAM,IAAI,IAAI;IAAC,IAAI;QAC3C,OAAO;IACT;IAEA,MAAM,aAAa,IAAA,6IAAY,EAAC,IAAI,IAAI;IACxC,MAAM,iBAAiB,IAAA,maAAmB,EACxC,IAAI,OAAO,EACX,IAAA,8JAAmB,EAAC;QAAE,SAAS,IAAI,OAAO;QAAE,gBAAgB;IAAU;IAExE,MAAM,uBAAuB,IAAA,wJAAgB,EAAC,IAAI,IAAI,EAAE;IAExD,IAAI,gBAAgB;QAClB,4EAA4E;QAC5E,MAAM,kBAAkB,qBAAqB,IAAI,CAAC,CAAC,KAAO,OAAO;QACjE,IAAI,cAAc,iBAAiB;YACjC,OAAO;gBACL,kBAAkB;oBAChB,QAAQ;gBACV;YACF;QACF;IACF;IAEA,IAAI,YAAY;QACd,OAAO;IACT;IAEA,OAAO;QACL,IAAI;YACF;gBACE,IAAI;oBACF,QAAQ,IAAI,IAAI,CAAC,EAAE;gBACrB;YACF;YACA;gBACE,kBAAkB;oBAChB,IAAI;gBACN;YACF;SACD;IACH;AACF"}},
    {"offset": {"line": 599, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/src/collections/Users/access/updateAndDelete.ts"],"sourcesContent":["import type { Access } from 'payload'\n\nimport { getUserTenantIDs } from '../../../utilities/getUserTenantIDs'\nimport { isSuperAdmin } from '@/access/isSuperAdmin'\nimport { isAccessingSelf } from './isAccessingSelf'\n\nexport const updateAndDeleteAccess: Access = ({ req, id }) => {\n  const { user } = req\n\n  if (!user) {\n    return false\n  }\n\n  if (isSuperAdmin(user) || isAccessingSelf({ user, id })) {\n    return true\n  }\n\n  /**\n   * Constrains update and delete access to users that belong\n   * to the same tenant as the tenant-admin making the request\n   *\n   * You may want to take this a step further with a beforeChange\n   * hook to ensure that the a tenant-admin can only remove users\n   * from their own tenant in the tenants array.\n   */\n  return {\n    'tenants.tenant': {\n      in: getUserTenantIDs(user, 'tenant-admin'),\n    },\n  }\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;;;;AAEO,MAAM,wBAAgC,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE;IACvD,MAAM,EAAE,IAAI,EAAE,GAAG;IAEjB,IAAI,CAAC,MAAM;QACT,OAAO;IACT;IAEA,IAAI,IAAA,6IAAY,EAAC,SAAS,IAAA,2KAAe,EAAC;QAAE;QAAM;IAAG,IAAI;QACvD,OAAO;IACT;IAEA;;;;;;;GAOC,GACD,OAAO;QACL,kBAAkB;YAChB,IAAI,IAAA,wJAAgB,EAAC,MAAM;QAC7B;IACF;AACF"}},
    {"offset": {"line": 703, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/src/collections/Users/endpoints/externalUsersLogin.ts"],"sourcesContent":["import type { Collection, Endpoint } from 'payload'\n\nimport { headersWithCors } from '@payloadcms/next/utilities'\nimport { APIError, generatePayloadCookie } from 'payload'\n\n// A custom endpoint that can be reached by POST request\n// at: /api/users/external-users/login\nexport const externalUsersLogin: Endpoint = {\n  handler: async (req) => {\n    let data: { [key: string]: string } = {}\n\n    try {\n      if (typeof req.json === 'function') {\n        data = await req.json()\n      }\n    } catch (error) {\n      // swallow error, data is already empty object\n    }\n    const { password, tenantSlug, tenantDomain, username } = data\n\n    if (!username || !password) {\n      throw new APIError('Username and Password are required for login.', 400, null, true)\n    }\n\n    const fullTenant = (\n      await req.payload.find({\n        collection: 'tenants',\n        where: tenantDomain\n          ? {\n              domain: {\n                equals: tenantDomain,\n              },\n            }\n          : {\n              slug: {\n                equals: tenantSlug,\n              },\n            },\n      })\n    ).docs[0]\n\n    const foundUser = await req.payload.find({\n      collection: 'users',\n      where: {\n        or: [\n          {\n            and: [\n              {\n                email: {\n                  equals: username,\n                },\n              },\n              {\n                'tenants.tenant': {\n                  equals: fullTenant.id,\n                },\n              },\n            ],\n          },\n          {\n            and: [\n              {\n                username: {\n                  equals: username,\n                },\n              },\n              {\n                'tenants.tenant': {\n                  equals: fullTenant.id,\n                },\n              },\n            ],\n          },\n        ],\n      },\n    })\n\n    if (foundUser.totalDocs > 0) {\n      try {\n        const loginAttempt = await req.payload.login({\n          collection: 'users',\n          data: {\n            email: foundUser.docs[0].email,\n            password,\n          },\n          req,\n        })\n\n        if (loginAttempt?.token) {\n          const collection: Collection = (req.payload.collections as { [key: string]: Collection })[\n            'users'\n          ]\n          const cookie = generatePayloadCookie({\n            collectionAuthConfig: collection.config.auth,\n            cookiePrefix: req.payload.config.cookiePrefix,\n            token: loginAttempt.token,\n          })\n\n          return Response.json(loginAttempt, {\n            headers: headersWithCors({\n              headers: new Headers({\n                'Set-Cookie': cookie,\n              }),\n              req,\n            }),\n            status: 200,\n          })\n        }\n\n        throw new APIError(\n          'Unable to login with the provided username and password.',\n          400,\n          null,\n          true,\n        )\n      } catch (e) {\n        throw new APIError(\n          'Unable to login with the provided username and password.',\n          400,\n          null,\n          true,\n        )\n      }\n    }\n\n    throw new APIError('Unable to login with the provided username and password.', 400, null, true)\n  },\n  method: 'post',\n  path: '/external-users/login',\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AAAA;;;AAIO,MAAM,qBAA+B;IAC1C,SAAS,OAAO;QACd,IAAI,OAAkC,CAAC;QAEvC,IAAI;YACF,IAAI,OAAO,IAAI,IAAI,KAAK,YAAY;gBAClC,OAAO,MAAM,IAAI,IAAI;YACvB;QACF,EAAE,OAAO,OAAO;QACd,8CAA8C;QAChD;QACA,MAAM,EAAE,QAAQ,EAAE,UAAU,EAAE,YAAY,EAAE,QAAQ,EAAE,GAAG;QAEzD,IAAI,CAAC,YAAY,CAAC,UAAU;YAC1B,MAAM,IAAI,yQAAQ,CAAC,iDAAiD,KAAK,MAAM;QACjF;QAEA,MAAM,aAAa,CACjB,MAAM,IAAI,OAAO,CAAC,IAAI,CAAC;YACrB,YAAY;YACZ,OAAO,eACH;gBACE,QAAQ;oBACN,QAAQ;gBACV;YACF,IACA;gBACE,MAAM;oBACJ,QAAQ;gBACV;YACF;QACN,EACF,EAAE,IAAI,CAAC,EAAE;QAET,MAAM,YAAY,MAAM,IAAI,OAAO,CAAC,IAAI,CAAC;YACvC,YAAY;YACZ,OAAO;gBACL,IAAI;oBACF;wBACE,KAAK;4BACH;gCACE,OAAO;oCACL,QAAQ;gCACV;4BACF;4BACA;gCACE,kBAAkB;oCAChB,QAAQ,WAAW,EAAE;gCACvB;4BACF;yBACD;oBACH;oBACA;wBACE,KAAK;4BACH;gCACE,UAAU;oCACR,QAAQ;gCACV;4BACF;4BACA;gCACE,kBAAkB;oCAChB,QAAQ,WAAW,EAAE;gCACvB;4BACF;yBACD;oBACH;iBACD;YACH;QACF;QAEA,IAAI,UAAU,SAAS,GAAG,GAAG;YAC3B,IAAI;gBACF,MAAM,eAAe,MAAM,IAAI,OAAO,CAAC,KAAK,CAAC;oBAC3C,YAAY;oBACZ,MAAM;wBACJ,OAAO,UAAU,IAAI,CAAC,EAAE,CAAC,KAAK;wBAC9B;oBACF;oBACA;gBACF;gBAEA,IAAI,cAAc,OAAO;oBACvB,MAAM,aAAyB,AAAC,IAAI,OAAO,CAAC,WAAW,AAAkC,CACvF,QACD;oBACD,MAAM,SAAS,IAAA,mRAAqB,EAAC;wBACnC,sBAAsB,WAAW,MAAM,CAAC,IAAI;wBAC5C,cAAc,IAAI,OAAO,CAAC,MAAM,CAAC,YAAY;wBAC7C,OAAO,aAAa,KAAK;oBAC3B;oBAEA,OAAO,SAAS,IAAI,CAAC,cAAc;wBACjC,SAAS,IAAA,iZAAe,EAAC;4BACvB,SAAS,IAAI,QAAQ;gCACnB,cAAc;4BAChB;4BACA;wBACF;wBACA,QAAQ;oBACV;gBACF;gBAEA,MAAM,IAAI,yQAAQ,CAChB,4DACA,KACA,MACA;YAEJ,EAAE,OAAO,GAAG;gBACV,MAAM,IAAI,yQAAQ,CAChB,4DACA,KACA,MACA;YAEJ;QACF;QAEA,MAAM,IAAI,yQAAQ,CAAC,4DAA4D,KAAK,MAAM;IAC5F;IACA,QAAQ;IACR,MAAM;AACR"}},
    {"offset": {"line": 814, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/src/collections/Users/hooks/ensureUniqueUsername.ts"],"sourcesContent":["import type { FieldHook, Where } from 'payload'\n\nimport { ValidationError } from 'payload'\n\nimport { getUserTenantIDs } from '../../../utilities/getUserTenantIDs'\nimport { extractID } from '@/utilities/extractID'\nimport { getTenantFromCookie } from '@payloadcms/plugin-multi-tenant/utilities'\nimport { getCollectionIDType } from '@/utilities/getCollectionIDType'\n\nexport const ensureUniqueUsername: FieldHook = async ({ data, originalDoc, req, value }) => {\n  // if value is unchanged, skip validation\n  if (originalDoc.username === value) {\n    return value\n  }\n\n  const constraints: Where[] = [\n    {\n      username: {\n        equals: value,\n      },\n    },\n  ]\n\n  const selectedTenant = getTenantFromCookie(\n    req.headers,\n    getCollectionIDType({ payload: req.payload, collectionSlug: 'tenants' }),\n  )\n\n  if (selectedTenant) {\n    constraints.push({\n      'tenants.tenant': {\n        equals: selectedTenant,\n      },\n    })\n  }\n\n  const findDuplicateUsers = await req.payload.find({\n    collection: 'users',\n    where: {\n      and: constraints,\n    },\n  })\n\n  if (findDuplicateUsers.docs.length > 0 && req.user) {\n    const tenantIDs = getUserTenantIDs(req.user)\n    // if the user is an admin or has access to more than 1 tenant\n    // provide a more specific error message\n    if (req.user.roles?.includes('super-admin') || tenantIDs.length > 1) {\n      const attemptedTenantChange = await req.payload.findByID({\n        // @ts-ignore - selectedTenant will match DB ID type\n        id: selectedTenant,\n        collection: 'tenants',\n      })\n\n      throw new ValidationError({\n        errors: [\n          {\n            message: `The \"${attemptedTenantChange.name}\" tenant already has a user with the username \"${value}\". Usernames must be unique per tenant.`,\n            path: 'username',\n          },\n        ],\n      })\n    }\n\n    throw new ValidationError({\n      errors: [\n        {\n          message: `A user with the username ${value} already exists. Usernames must be unique per tenant.`,\n          path: 'username',\n        },\n      ],\n    })\n  }\n\n  return value\n}\n"],"names":[],"mappings":";;;;AAEA;AAEA;AAEA;AACA;;;;;AAEO,MAAM,uBAAkC,OAAO,EAAE,IAAI,EAAE,WAAW,EAAE,GAAG,EAAE,KAAK,EAAE;IACrF,yCAAyC;IACzC,IAAI,YAAY,QAAQ,KAAK,OAAO;QAClC,OAAO;IACT;IAEA,MAAM,cAAuB;QAC3B;YACE,UAAU;gBACR,QAAQ;YACV;QACF;KACD;IAED,MAAM,iBAAiB,IAAA,maAAmB,EACxC,IAAI,OAAO,EACX,IAAA,8JAAmB,EAAC;QAAE,SAAS,IAAI,OAAO;QAAE,gBAAgB;IAAU;IAGxE,IAAI,gBAAgB;QAClB,YAAY,IAAI,CAAC;YACf,kBAAkB;gBAChB,QAAQ;YACV;QACF;IACF;IAEA,MAAM,qBAAqB,MAAM,IAAI,OAAO,CAAC,IAAI,CAAC;QAChD,YAAY;QACZ,OAAO;YACL,KAAK;QACP;IACF;IAEA,IAAI,mBAAmB,IAAI,CAAC,MAAM,GAAG,KAAK,IAAI,IAAI,EAAE;QAClD,MAAM,YAAY,IAAA,wJAAgB,EAAC,IAAI,IAAI;QAC3C,8DAA8D;QAC9D,wCAAwC;QACxC,IAAI,IAAI,IAAI,CAAC,KAAK,EAAE,SAAS,kBAAkB,UAAU,MAAM,GAAG,GAAG;YACnE,MAAM,wBAAwB,MAAM,IAAI,OAAO,CAAC,QAAQ,CAAC;gBACvD,oDAAoD;gBACpD,IAAI;gBACJ,YAAY;YACd;YAEA,MAAM,IAAI,uRAAe,CAAC;gBACxB,QAAQ;oBACN;wBACE,SAAS,CAAC,KAAK,EAAE,sBAAsB,IAAI,CAAC,+CAA+C,EAAE,MAAM,uCAAuC,CAAC;wBAC3I,MAAM;oBACR;iBACD;YACH;QACF;QAEA,MAAM,IAAI,uRAAe,CAAC;YACxB,QAAQ;gBACN;oBACE,SAAS,CAAC,yBAAyB,EAAE,MAAM,qDAAqD,CAAC;oBACjG,MAAM;gBACR;aACD;QACH;IACF;IAEA,OAAO;AACT"}},
    {"offset": {"line": 889, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/src/collections/Users/hooks/setCookieBasedOnDomain.ts"],"sourcesContent":["import type { CollectionAfterLoginHook } from 'payload'\n\nimport { mergeHeaders, generateCookie, getCookieExpiration } from 'payload'\n\nexport const setCookieBasedOnDomain: CollectionAfterLoginHook = async ({ req, user }) => {\n  const relatedOrg = await req.payload.find({\n    collection: 'tenants',\n    depth: 0,\n    limit: 1,\n    where: {\n      domain: {\n        equals: req.headers.get('host'),\n      },\n    },\n  })\n\n  // If a matching tenant is found, set the 'payload-tenant' cookie\n  if (relatedOrg && relatedOrg.docs.length > 0) {\n    const tenantCookie = generateCookie({\n      name: 'payload-tenant',\n      expires: getCookieExpiration({ seconds: 7200 }),\n      path: '/',\n      returnCookieAsObject: false,\n      value: String(relatedOrg.docs[0].id),\n    })\n\n    // Merge existing responseHeaders with the new Set-Cookie header\n    const newHeaders = new Headers({\n      'Set-Cookie': tenantCookie as string,\n    })\n\n    // Ensure you merge existing response headers if they already exist\n    req.responseHeaders = req.responseHeaders\n      ? mergeHeaders(req.responseHeaders, newHeaders)\n      : newHeaders\n  }\n\n  return user\n}\n"],"names":[],"mappings":";;;;AAEA;AAAA;;AAEO,MAAM,yBAAmD,OAAO,EAAE,GAAG,EAAE,IAAI,EAAE;IAClF,MAAM,aAAa,MAAM,IAAI,OAAO,CAAC,IAAI,CAAC;QACxC,YAAY;QACZ,OAAO;QACP,OAAO;QACP,OAAO;YACL,QAAQ;gBACN,QAAQ,IAAI,OAAO,CAAC,GAAG,CAAC;YAC1B;QACF;IACF;IAEA,iEAAiE;IACjE,IAAI,cAAc,WAAW,IAAI,CAAC,MAAM,GAAG,GAAG;QAC5C,MAAM,eAAe,IAAA,4QAAc,EAAC;YAClC,MAAM;YACN,SAAS,IAAA,iRAAmB,EAAC;gBAAE,SAAS;YAAK;YAC7C,MAAM;YACN,sBAAsB;YACtB,OAAO,OAAO,WAAW,IAAI,CAAC,EAAE,CAAC,EAAE;QACrC;QAEA,gEAAgE;QAChE,MAAM,aAAa,IAAI,QAAQ;YAC7B,cAAc;QAChB;QAEA,mEAAmE;QACnE,IAAI,eAAe,GAAG,IAAI,eAAe,GACrC,IAAA,oRAAY,EAAC,IAAI,eAAe,EAAE,cAClC;IACN;IAEA,OAAO;AACT"}},
    {"offset": {"line": 931, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/src/collections/Users/index.ts"],"sourcesContent":["import type { CollectionConfig } from 'payload'\n\nimport { createAccess } from './access/create'\nimport { readAccess } from './access/read'\nimport { updateAndDeleteAccess } from './access/updateAndDelete'\nimport { externalUsersLogin } from './endpoints/externalUsersLogin'\nimport { ensureUniqueUsername } from './hooks/ensureUniqueUsername'\nimport { isSuperAdmin } from '@/access/isSuperAdmin'\nimport { setCookieBasedOnDomain } from './hooks/setCookieBasedOnDomain'\nimport { tenantsArrayField } from '@payloadcms/plugin-multi-tenant/fields'\n\nconst defaultTenantArrayField = tenantsArrayField({\n  tenantsArrayFieldName: 'tenants',\n  tenantsArrayTenantFieldName: 'tenant',\n  tenantsCollectionSlug: 'tenants',\n  arrayFieldAccess: {},\n  tenantFieldAccess: {},\n  rowFields: [\n    {\n      name: 'roles',\n      type: 'select',\n      defaultValue: ['tenant-viewer'],\n      hasMany: true,\n      options: ['tenant-admin', 'tenant-viewer'],\n      required: true,\n      access: {\n        update: ({ req }) => {\n          const { user } = req\n          if (!user) {\n            return false\n          }\n\n          if (isSuperAdmin(user)) {\n            return true\n          }\n\n          return true\n        },\n      },\n    },\n  ],\n})\n\nconst Users: CollectionConfig = {\n  slug: 'users',\n  access: {\n    create: createAccess,\n    delete: updateAndDeleteAccess,\n    read: readAccess,\n    update: updateAndDeleteAccess,\n  },\n  admin: {\n    useAsTitle: 'email',\n  },\n  auth: true,\n  endpoints: [externalUsersLogin],\n  fields: [\n    {\n      type: 'text',\n      name: 'password',\n      hidden: true,\n      access: {\n        read: () => false, // Hide password field from read access\n        update: ({ req, id }) => {\n          const { user } = req\n          if (!user) {\n            return false\n          }\n\n          if (id === user.id) {\n            // Allow user to update their own password\n            return true\n          }\n\n          return isSuperAdmin(user)\n        },\n      },\n    },\n    {\n      admin: {\n        position: 'sidebar',\n      },\n      name: 'roles',\n      type: 'select',\n      defaultValue: ['user'],\n      hasMany: true,\n      options: ['super-admin', 'user'],\n      access: {\n        update: ({ req }) => {\n          return isSuperAdmin(req.user)\n        },\n      },\n    },\n    {\n      name: 'username',\n      type: 'text',\n      hooks: {\n        beforeValidate: [ensureUniqueUsername],\n      },\n      index: true,\n    },\n    {\n      ...defaultTenantArrayField,\n      admin: {\n        ...(defaultTenantArrayField?.admin || {}),\n        position: 'sidebar',\n      },\n    },\n  ],\n  // The following hook sets a cookie based on the domain a user logs in from.\n  // It checks the domain and matches it to a tenant in the system, then sets\n  // a 'payload-tenant' cookie for that tenant.\n\n  hooks: {\n    afterLogin: [setCookieBasedOnDomain],\n  },\n}\n\nexport default Users\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;AAEA,MAAM,0BAA0B,IAAA,qaAAiB,EAAC;IAChD,uBAAuB;IACvB,6BAA6B;IAC7B,uBAAuB;IACvB,kBAAkB,CAAC;IACnB,mBAAmB,CAAC;IACpB,WAAW;QACT;YACE,MAAM;YACN,MAAM;YACN,cAAc;gBAAC;aAAgB;YAC/B,SAAS;YACT,SAAS;gBAAC;gBAAgB;aAAgB;YAC1C,UAAU;YACV,QAAQ;gBACN,QAAQ,CAAC,EAAE,GAAG,EAAE;oBACd,MAAM,EAAE,IAAI,EAAE,GAAG;oBACjB,IAAI,CAAC,MAAM;wBACT,OAAO;oBACT;oBAEA,IAAI,IAAA,6IAAY,EAAC,OAAO;wBACtB,OAAO;oBACT;oBAEA,OAAO;gBACT;YACF;QACF;KACD;AACH;AAEA,MAAM,QAA0B;IAC9B,MAAM;IACN,QAAQ;QACN,QAAQ,+JAAY;QACpB,QAAQ,iLAAqB;QAC7B,MAAM,2JAAU;QAChB,QAAQ,iLAAqB;IAC/B;IACA,OAAO;QACL,YAAY;IACd;IACA,MAAM;IACN,WAAW;QAAC,oLAAkB;KAAC;IAC/B,QAAQ;QACN;YACE,MAAM;YACN,MAAM;YACN,QAAQ;YACR,QAAQ;gBACN,MAAM,IAAM;gBACZ,QAAQ,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE;oBAClB,MAAM,EAAE,IAAI,EAAE,GAAG;oBACjB,IAAI,CAAC,MAAM;wBACT,OAAO;oBACT;oBAEA,IAAI,OAAO,KAAK,EAAE,EAAE;wBAClB,0CAA0C;wBAC1C,OAAO;oBACT;oBAEA,OAAO,IAAA,6IAAY,EAAC;gBACtB;YACF;QACF;QACA;YACE,OAAO;gBACL,UAAU;YACZ;YACA,MAAM;YACN,MAAM;YACN,cAAc;gBAAC;aAAO;YACtB,SAAS;YACT,SAAS;gBAAC;gBAAe;aAAO;YAChC,QAAQ;gBACN,QAAQ,CAAC,EAAE,GAAG,EAAE;oBACd,OAAO,IAAA,6IAAY,EAAC,IAAI,IAAI;gBAC9B;YACF;QACF;QACA;YACE,MAAM;YACN,MAAM;YACN,OAAO;gBACL,gBAAgB;oBAAC,oLAAoB;iBAAC;YACxC;YACA,OAAO;QACT;QACA;YACE,GAAG,uBAAuB;YAC1B,OAAO;gBACL,GAAI,yBAAyB,SAAS,CAAC,CAAC;gBACxC,UAAU;YACZ;QACF;KACD;IACD,4EAA4E;IAC5E,2EAA2E;IAC3E,6CAA6C;IAE7C,OAAO;QACL,YAAY;YAAC,wLAAsB;SAAC;IACtC;AACF;uCAEe"}},
    {"offset": {"line": 1072, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/src/collections/Media/index.ts"],"sourcesContent":["import type { CollectionConfig } from 'payload'\n\nimport path from 'path'\nimport { fileURLToPath } from 'url'\n\nimport { hasSuperAdminOrAdminAccess } from '@/access/superAdminOrTenantAdmin'\n\nconst filename = fileURLToPath(import.meta.url)\nconst dirname = path.dirname(filename)\n\nexport const Media: CollectionConfig = {\n  slug: 'media',\n  folders: true,\n  access: {\n    create: hasSuperAdminOrAdminAccess,\n    delete: hasSuperAdminOrAdminAccess,\n    read: hasSuperAdminOrAdminAccess,\n    update: hasSuperAdminOrAdminAccess,\n  },\n  fields: [\n    {\n      name: 'alt',\n      type: 'text',\n      //required: true,\n    },\n    {\n      name: 'title',\n      type: 'text',\n      //required: true,\n    },\n    {\n      name: 'paths',\n      type: 'text'\n    },\n    {\n      name: 'type',\n      type: 'radio',\n      options: [\n        'Hauptausgabe',\n        'Regionalausgabe',\n        'Beilage',\n        'Magazin'\n      ],\n    }\n  ],\n  upload: {\n    // Upload to the public/media directory in Next.js making them publicly accessible even outside of Payload\n    staticDir: path.resolve(dirname, '../../public/media'),\n    adminThumbnail: 'thumbnail',\n    focalPoint: true,\n  },\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;;;;;;;;;AAEA,MAAM,WAAW,IAAA,gHAAa,EAAC,8BAAY,GAAG;AAC9C,MAAM,UAAU,4GAAI,CAAC,OAAO,CAAC;AAEtB,MAAM,QAA0B;IACrC,MAAM;IACN,SAAS;IACT,QAAQ;QACN,QAAQ,sKAA0B;QAClC,QAAQ,sKAA0B;QAClC,MAAM,sKAA0B;QAChC,QAAQ,sKAA0B;IACpC;IACA,QAAQ;QACN;YACE,MAAM;YACN,MAAM;QAER;QACA;YACE,MAAM;YACN,MAAM;QAER;QACA;YACE,MAAM;YACN,MAAM;QACR;QACA;YACE,MAAM;YACN,MAAM;YACN,SAAS;gBACP;gBACA;gBACA;gBACA;aACD;QACH;KACD;IACD,QAAQ;QACN,0GAA0G;QAC1G,WAAW,4GAAI,CAAC,OAAO,CAAC,SAAS;QACjC,gBAAgB;QAChB,YAAY;IACd;AACF"}},
    {"offset": {"line": 1133, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/src/utilities/deepMerge.ts"],"sourcesContent":["// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-nocheck\n\n/**\n * Simple object check.\n * @param item\n * @returns {boolean}\n */\nexport function isObject(item: unknown): item is object {\n  return typeof item === 'object' && !Array.isArray(item)\n}\n\n/**\n * Deep merge two objects.\n * @param target\n * @param ...sources\n */\nexport default function deepMerge<T, R>(target: T, source: R): T {\n  const output = { ...target }\n  if (isObject(target) && isObject(source)) {\n    Object.keys(source).forEach((key) => {\n      if (isObject(source[key])) {\n        if (!(key in target)) {\n          Object.assign(output, { [key]: source[key] })\n        } else {\n          output[key] = deepMerge(target[key], source[key])\n        }\n      } else {\n        Object.assign(output, { [key]: source[key] })\n      }\n    })\n  }\n\n  return output\n}\n"],"names":[],"mappings":"AAAA,6DAA6D;AAC7D,cAAc;AAEd;;;;CAIC;;;;;;AACM,SAAS,SAAS,IAAa;IACpC,OAAO,OAAO,SAAS,YAAY,CAAC,MAAM,OAAO,CAAC;AACpD;AAOe,SAAS,UAAgB,MAAS,EAAE,MAAS;IAC1D,MAAM,SAAS;QAAE,GAAG,MAAM;IAAC;IAC3B,IAAI,SAAS,WAAW,SAAS,SAAS;QACxC,OAAO,IAAI,CAAC,QAAQ,OAAO,CAAC,CAAC;YAC3B,IAAI,SAAS,MAAM,CAAC,IAAI,GAAG;gBACzB,IAAI,CAAC,CAAC,OAAO,MAAM,GAAG;oBACpB,OAAO,MAAM,CAAC,QAAQ;wBAAE,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI;oBAAC;gBAC7C,OAAO;oBACL,MAAM,CAAC,IAAI,GAAG,UAAU,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI;gBAClD;YACF,OAAO;gBACL,OAAO,MAAM,CAAC,QAAQ;oBAAE,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI;gBAAC;YAC7C;QACF;IACF;IAEA,OAAO;AACT"}},
    {"offset": {"line": 1175, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/src/fields/link.ts"],"sourcesContent":["import type { Field, GroupField } from 'payload'\n\nimport deepMerge from '@/utilities/deepMerge'\n\nexport type LinkAppearances = 'default' | 'outline'\n\nexport const appearanceOptions: Record<LinkAppearances, { label: string; value: string }> = {\n  default: {\n    label: 'Default',\n    value: 'default',\n  },\n  outline: {\n    label: 'Outline',\n    value: 'outline',\n  },\n}\n\ntype LinkType = (options?: {\n  appearances?: LinkAppearances[] | false\n  disableLabel?: boolean\n  overrides?: Partial<GroupField>\n}) => Field\n\nexport const link: LinkType = ({ appearances, disableLabel = false, overrides = {} } = {}) => {\n  const linkResult: GroupField = {\n    name: 'link',\n    type: 'group',\n    admin: {\n      hideGutter: true,\n    },\n    fields: [\n      {\n        type: 'row',\n        fields: [\n          {\n            name: 'type',\n            type: 'radio',\n            admin: {\n              layout: 'horizontal',\n              width: '50%',\n            },\n            defaultValue: 'reference',\n            options: [\n              {\n                label: 'Internal link',\n                value: 'reference',\n              },\n              {\n                label: 'Custom URL',\n                value: 'custom',\n              },\n            ],\n          },\n          {\n            name: 'newTab',\n            type: 'checkbox',\n            admin: {\n              style: {\n                alignSelf: 'flex-end',\n              },\n              width: '50%',\n            },\n            label: 'Open in new tab',\n          },\n        ],\n      },\n    ],\n  }\n\n  const linkTypes: Field[] = [\n    {\n      name: 'reference',\n      type: 'relationship',\n      admin: {\n        condition: (_, siblingData) => siblingData?.type === 'reference',\n      },\n      label: 'Document to link to',\n      relationTo: ['pages'],\n      required: true,\n    },\n    {\n      name: 'url',\n      type: 'text',\n      admin: {\n        condition: (_, siblingData) => siblingData?.type === 'custom',\n      },\n      label: 'Custom URL',\n      required: true,\n    },\n  ]\n\n  if (!disableLabel) {\n    linkTypes.map((linkType) => ({\n      ...linkType,\n      admin: {\n        ...linkType.admin,\n        width: '50%',\n      },\n    }))\n\n    linkResult.fields.push({\n      type: 'row',\n      fields: [\n        ...linkTypes,\n        {\n          name: 'label',\n          type: 'text',\n          admin: {\n            width: '50%',\n          },\n          label: 'Label',\n          required: true,\n        },\n      ],\n    })\n  } else {\n    linkResult.fields = [...linkResult.fields, ...linkTypes]\n  }\n\n  if (appearances !== false) {\n    let appearanceOptionsToUse = [appearanceOptions.default, appearanceOptions.outline]\n\n    if (appearances) {\n      appearanceOptionsToUse = appearances.map((appearance) => appearanceOptions[appearance])\n    }\n\n    linkResult.fields.push({\n      name: 'appearance',\n      type: 'select',\n      admin: {\n        description: 'Choose how the link should be rendered.',\n      },\n      defaultValue: 'default',\n      options: appearanceOptionsToUse,\n    })\n  }\n\n  return deepMerge(linkResult, overrides)\n}\n"],"names":[],"mappings":";;;;;;AAEA;;AAIO,MAAM,oBAA+E;IAC1F,SAAS;QACP,OAAO;QACP,OAAO;IACT;IACA,SAAS;QACP,OAAO;QACP,OAAO;IACT;AACF;AAQO,MAAM,OAAiB,CAAC,EAAE,WAAW,EAAE,eAAe,KAAK,EAAE,YAAY,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;IACvF,MAAM,aAAyB;QAC7B,MAAM;QACN,MAAM;QACN,OAAO;YACL,YAAY;QACd;QACA,QAAQ;YACN;gBACE,MAAM;gBACN,QAAQ;oBACN;wBACE,MAAM;wBACN,MAAM;wBACN,OAAO;4BACL,QAAQ;4BACR,OAAO;wBACT;wBACA,cAAc;wBACd,SAAS;4BACP;gCACE,OAAO;gCACP,OAAO;4BACT;4BACA;gCACE,OAAO;gCACP,OAAO;4BACT;yBACD;oBACH;oBACA;wBACE,MAAM;wBACN,MAAM;wBACN,OAAO;4BACL,OAAO;gCACL,WAAW;4BACb;4BACA,OAAO;wBACT;wBACA,OAAO;oBACT;iBACD;YACH;SACD;IACH;IAEA,MAAM,YAAqB;QACzB;YACE,MAAM;YACN,MAAM;YACN,OAAO;gBACL,WAAW,CAAC,GAAG,cAAgB,aAAa,SAAS;YACvD;YACA,OAAO;YACP,YAAY;gBAAC;aAAQ;YACrB,UAAU;QACZ;QACA;YACE,MAAM;YACN,MAAM;YACN,OAAO;gBACL,WAAW,CAAC,GAAG,cAAgB,aAAa,SAAS;YACvD;YACA,OAAO;YACP,UAAU;QACZ;KACD;IAED,IAAI,CAAC,cAAc;QACjB,UAAU,GAAG,CAAC,CAAC,WAAa,CAAC;gBAC3B,GAAG,QAAQ;gBACX,OAAO;oBACL,GAAG,SAAS,KAAK;oBACjB,OAAO;gBACT;YACF,CAAC;QAED,WAAW,MAAM,CAAC,IAAI,CAAC;YACrB,MAAM;YACN,QAAQ;mBACH;gBACH;oBACE,MAAM;oBACN,MAAM;oBACN,OAAO;wBACL,OAAO;oBACT;oBACA,OAAO;oBACP,UAAU;gBACZ;aACD;QACH;IACF,OAAO;QACL,WAAW,MAAM,GAAG;eAAI,WAAW,MAAM;eAAK;SAAU;IAC1D;IAEA,IAAI,gBAAgB,OAAO;QACzB,IAAI,yBAAyB;YAAC,kBAAkB,OAAO;YAAE,kBAAkB,OAAO;SAAC;QAEnF,IAAI,aAAa;YACf,yBAAyB,YAAY,GAAG,CAAC,CAAC,aAAe,iBAAiB,CAAC,WAAW;QACxF;QAEA,WAAW,MAAM,CAAC,IAAI,CAAC;YACrB,MAAM;YACN,MAAM;YACN,OAAO;gBACL,aAAa;YACf;YACA,cAAc;YACd,SAAS;QACX;IACF;IAEA,OAAO,IAAA,wIAAS,EAAC,YAAY;AAC/B"}},
    {"offset": {"line": 1314, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/src/Footer/hooks/revalidateFooter.ts"],"sourcesContent":["import type { GlobalAfterChangeHook } from 'payload'\n\nimport { revalidateTag } from 'next/cache'\n\nexport const revalidateFooter: GlobalAfterChangeHook = ({ doc, req: { payload, context } }) => {\n  if (!context.disableRevalidate) {\n    payload.logger.info(`Revalidating footer`)\n\n    revalidateTag('global_footer')\n  }\n\n  return doc\n}\n"],"names":[],"mappings":";;;;AAEA;;AAEO,MAAM,mBAA0C,CAAC,EAAE,GAAG,EAAE,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,EAAE;IACxF,IAAI,CAAC,QAAQ,iBAAiB,EAAE;QAC9B,QAAQ,MAAM,CAAC,IAAI,CAAC,CAAC,mBAAmB,CAAC;QAEzC,IAAA,iTAAa,EAAC;IAChB;IAEA,OAAO;AACT"}},
    {"offset": {"line": 1331, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/src/Footer/config.ts"],"sourcesContent":["import type { GlobalConfig } from 'payload'\n\nimport { link } from '@/fields/link'\nimport { revalidateFooter } from './hooks/revalidateFooter'\n\nexport const Footer: GlobalConfig = {\n  slug: 'footer',\n  access: {\n    read: () => true,\n  },\n  fields: [\n    {\n      name: 'navItems',\n      type: 'array',\n      fields: [\n        link({\n          appearances: false,\n        }),\n      ],\n      maxRows: 6,\n      admin: {\n        initCollapsed: true,\n        components: {\n          RowLabel: '@/Footer/RowLabel#RowLabel',\n        },\n      },\n    },\n  ],\n  hooks: {\n    afterChange: [revalidateFooter],\n  },\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;;;AAEO,MAAM,SAAuB;IAClC,MAAM;IACN,QAAQ;QACN,MAAM,IAAM;IACd;IACA,QAAQ;QACN;YACE,MAAM;YACN,MAAM;YACN,QAAQ;gBACN,IAAA,6HAAI,EAAC;oBACH,aAAa;gBACf;aACD;YACD,SAAS;YACT,OAAO;gBACL,eAAe;gBACf,YAAY;oBACV,UAAU;gBACZ;YACF;QACF;KACD;IACD,OAAO;QACL,aAAa;YAAC,8JAAgB;SAAC;IACjC;AACF"}},
    {"offset": {"line": 1372, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/src/Header/hooks/revalidateHeader.ts"],"sourcesContent":["import type { GlobalAfterChangeHook } from 'payload'\n\nimport { revalidateTag } from 'next/cache'\n\nexport const revalidateHeader: GlobalAfterChangeHook = ({ doc, req: { payload, context } }) => {\n  if (!context.disableRevalidate) {\n    payload.logger.info(`Revalidating header`)\n\n    revalidateTag('global_header')\n  }\n\n  return doc\n}\n"],"names":[],"mappings":";;;;AAEA;;AAEO,MAAM,mBAA0C,CAAC,EAAE,GAAG,EAAE,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,EAAE;IACxF,IAAI,CAAC,QAAQ,iBAAiB,EAAE;QAC9B,QAAQ,MAAM,CAAC,IAAI,CAAC,CAAC,mBAAmB,CAAC;QAEzC,IAAA,iTAAa,EAAC;IAChB;IAEA,OAAO;AACT"}},
    {"offset": {"line": 1389, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/src/Header/config.ts"],"sourcesContent":["import type { GlobalConfig } from 'payload'\n\nimport { link } from '@/fields/link'\nimport { revalidateHeader } from './hooks/revalidateHeader'\n\nexport const Header: GlobalConfig = {\n  slug: 'header',\n  access: {\n    read: () => true,\n  },\n  fields: [\n    {\n      name: 'navItems',\n      type: 'array',\n      fields: [\n        link({\n          appearances: false,\n        }),\n      ],\n      maxRows: 6,\n      admin: {\n        initCollapsed: true,\n        components: {\n          RowLabel: '@/Header/RowLabel#RowLabel',\n        },\n      },\n    },\n  ],\n  hooks: {\n    afterChange: [revalidateHeader],\n  },\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;;;AAEO,MAAM,SAAuB;IAClC,MAAM;IACN,QAAQ;QACN,MAAM,IAAM;IACd;IACA,QAAQ;QACN;YACE,MAAM;YACN,MAAM;YACN,QAAQ;gBACN,IAAA,6HAAI,EAAC;oBACH,aAAa;gBACf;aACD;YACD,SAAS;YACT,OAAO;gBACL,eAAe;gBACf,YAAY;oBACV,UAAU;gBACZ;YACF;QACF;KACD;IACD,OAAO;QACL,aAAa;YAAC,8JAAgB;SAAC;IACjC;AACF"}},
    {"offset": {"line": 1432, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/src/payload.config.ts"],"sourcesContent":["import { mongooseAdapter } from '@payloadcms/db-mongodb'\nimport { postgresAdapter } from '@payloadcms/db-postgres'\nimport { lexicalEditor } from '@payloadcms/richtext-lexical'\nimport path from 'path'\nimport { buildConfig } from 'payload'\nimport { fileURLToPath } from 'url'\n\nimport { Pages } from './collections/Pages'\nimport { Tenants } from './collections/Tenants'\nimport Users from './collections/Users'\nimport { Media } from './collections/Media'\nimport { Footer } from './Footer/config'\nimport { Header } from './Header/config'\nimport { multiTenantPlugin } from '@payloadcms/plugin-multi-tenant'\nimport { isSuperAdmin } from './access/isSuperAdmin'\nimport type { Config } from './payload-types'\nimport { getUserTenantIDs } from './utilities/getUserTenantIDs'\n// import { seed } from './seed'\n\nconst filename = fileURLToPath(import.meta.url)\nconst dirname = path.dirname(filename)\n\n// eslint-disable-next-line no-restricted-exports\nexport default buildConfig({\n  admin: {\n    user: 'users',\n  },\n  globals: [Header, Footer],\n  collections: [Pages, Users, Tenants, Media],\n  // db: mongooseAdapter({\n  //   url: process.env.DATABASE_URI as string,\n  // }),\n  db: postgresAdapter({\n    pool: {\n      connectionString: process.env.POSTGRES_URL,\n    },\n  }),\n  // onInit: async (args) => {\n  //   if (process.env.SEED_DB) {\n  //     await seed(args)\n  //   }\n  // },\n  editor: lexicalEditor({}),\n  graphQL: {\n    schemaOutputFile: path.resolve(dirname, 'generated-schema.graphql'),\n  },\n  secret: process.env.PAYLOAD_SECRET as string,\n  typescript: {\n    outputFile: path.resolve(dirname, 'payload-types.ts'),\n  },\n  plugins: [\n    multiTenantPlugin<Config>({\n      cleanupAfterTenantDelete: false,\n      collections: {\n        pages: {},\n        media: {},\n      },\n      tenantField: {\n        access: {\n          read: () => true,\n          update: ({ req }) => {\n            if (isSuperAdmin(req.user)) {\n              return true\n            }\n            return getUserTenantIDs(req.user).length > 0\n          },\n        },\n      },\n      tenantsArrayField: {\n        includeDefaultField: false,\n      },\n      userHasAccessToAllTenants: (user) => isSuperAdmin(user),\n    }),\n  ],\n})\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;;;;;;;;;;;;;;;;;;;;;AACA,gCAAgC;AAEhC,MAAM,WAAW,IAAA,gHAAa,EAAC,8BAAY,GAAG;AAC9C,MAAM,UAAU,4GAAI,CAAC,OAAO,CAAC;uCAGd,IAAA,yQAAW,EAAC;IACzB,OAAO;QACL,MAAM;IACR;IACA,SAAS;QAAC,iIAAM;QAAE,iIAAM;KAAC;IACzB,aAAa;QAAC,6IAAK;QAAE,+IAAK;QAAE,iJAAO;QAAE,6IAAK;KAAC;IAC3C,wBAAwB;IACxB,6CAA6C;IAC7C,MAAM;IACN,IAAI,IAAA,+KAAe,EAAC;QAClB,MAAM;YACJ,kBAAkB,QAAQ,GAAG,CAAC,YAAY;QAC5C;IACF;IACA,4BAA4B;IAC5B,+BAA+B;IAC/B,uBAAuB;IACvB,MAAM;IACN,KAAK;IACL,QAAQ,IAAA,+YAAa,EAAC,CAAC;IACvB,SAAS;QACP,kBAAkB,4GAAI,CAAC,OAAO,CAAC,SAAS;IAC1C;IACA,QAAQ,QAAQ,GAAG,CAAC,cAAc;IAClC,YAAY;QACV,YAAY,4GAAI,CAAC,OAAO,CAAC,SAAS;IACpC;IACA,SAAS;QACP,IAAA,sYAAiB,EAAS;YACxB,0BAA0B;YAC1B,aAAa;gBACX,OAAO,CAAC;gBACR,OAAO,CAAC;YACV;YACA,aAAa;gBACX,QAAQ;oBACN,MAAM,IAAM;oBACZ,QAAQ,CAAC,EAAE,GAAG,EAAE;wBACd,IAAI,IAAA,6IAAY,EAAC,IAAI,IAAI,GAAG;4BAC1B,OAAO;wBACT;wBACA,OAAO,IAAA,wJAAgB,EAAC,IAAI,IAAI,EAAE,MAAM,GAAG;oBAC7C;gBACF;YACF;YACA,mBAAmB;gBACjB,qBAAqB;YACvB;YACA,2BAA2B,CAAC,OAAS,IAAA,6IAAY,EAAC;QACpD;KACD;AACH"}},
    {"offset": {"line": 1543, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/src/utilities/getGlobals.ts"],"sourcesContent":["import type { Config } from 'src/payload-types'\n\nimport configPromise from '@payload-config'\nimport { getPayload } from 'payload'\nimport { unstable_cache } from 'next/cache'\n\ntype Global = keyof Config['globals']\n\nasync function getGlobal(slug: Global, depth = 0) {\n  const payload = await getPayload({ config: configPromise })\n\n  const global = await payload.findGlobal({\n    slug,\n    depth,\n  })\n\n  return global\n}\n\n/**\n * Returns a unstable_cache function mapped with the cache tag for the slug\n */\nexport const getCachedGlobal = (slug: Global, depth = 0) =>\n  unstable_cache(async () => getGlobal(slug, depth), [slug], {\n    tags: [`global_${slug}`],\n  })\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;;;;;;;;AAIA,eAAe,UAAU,IAAY,EAAE,QAAQ,CAAC;IAC9C,MAAM,UAAU,MAAM,IAAA,8QAAU,EAAC;QAAE,QAAQ,mIAAa;IAAC;IAEzD,MAAM,SAAS,MAAM,QAAQ,UAAU,CAAC;QACtC;QACA;IACF;IAEA,OAAO;AACT;AAKO,MAAM,kBAAkB,CAAC,MAAc,QAAQ,CAAC,GACrD,IAAA,kTAAc,EAAC,UAAY,UAAU,MAAM,QAAQ;QAAC;KAAK,EAAE;QACzD,MAAM;YAAC,CAAC,OAAO,EAAE,MAAM;SAAC;IAC1B"}},
    {"offset": {"line": 1579, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/src/utilities/ui.ts"],"sourcesContent":["/**\n * Utility functions for UI components automatically added by ShadCN and used in a few of our frontend components and blocks.\n *\n * Other functions may be exported from here in the future or by installing other shadcn components.\n */\n\nimport { type ClassValue, clsx } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;;;;CAIC,GAED;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,oOAAO,EAAC,IAAA,8LAAI,EAAC;AACtB"}},
    {"offset": {"line": 1598, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/src/components/ui/button.tsx"],"sourcesContent":["import { cn } from '@/utilities/ui'\nimport { Slot } from '@radix-ui/react-slot'\nimport { type VariantProps, cva } from 'class-variance-authority'\nimport * as React from 'react'\n\nconst buttonVariants = cva(\n  'inline-flex items-center justify-center whitespace-nowrap rounded text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50',\n  {\n    defaultVariants: {\n      size: 'default',\n      variant: 'default',\n    },\n    variants: {\n      size: {\n        clear: '',\n        default: 'h-10 px-4 py-2',\n        icon: 'h-10 w-10',\n        lg: 'h-11 rounded px-8',\n        sm: 'h-9 rounded px-3',\n      },\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive: 'bg-destructive text-destructive-foreground hover:bg-destructive/90',\n        ghost: 'hover:bg-card hover:text-accent-foreground',\n        link: 'text-primary items-start justify-start underline-offset-4 hover:underline',\n        outline: 'border border-border bg-background hover:bg-card hover:text-accent-foreground',\n        secondary: 'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n      },\n    },\n  },\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n  ref?: React.Ref<HTMLButtonElement>\n}\n\nconst Button: React.FC<ButtonProps> = ({\n  asChild = false,\n  className,\n  size,\n  variant,\n  ref,\n  ...props\n}) => {\n  const Comp = asChild ? Slot : 'button'\n  return <Comp className={cn(buttonVariants({ className, size, variant }))} ref={ref} {...props} />\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;;;;;AAGA,MAAM,iBAAiB,IAAA,kPAAG,EACxB,uRACA;IACE,iBAAiB;QACf,MAAM;QACN,SAAS;IACX;IACA,UAAU;QACR,MAAM;YACJ,OAAO;YACP,SAAS;YACT,MAAM;YACN,IAAI;YACJ,IAAI;QACN;QACA,SAAS;YACP,SAAS;YACT,aAAa;YACb,OAAO;YACP,MAAM;YACN,SAAS;YACT,WAAW;QACb;IACF;AACF;AAUF,MAAM,SAAgC,CAAC,EACrC,UAAU,KAAK,EACf,SAAS,EACT,IAAI,EACJ,OAAO,EACP,GAAG,EACH,GAAG,OACJ;IACC,MAAM,OAAO,UAAU,4SAAI,GAAG;IAC9B,qBAAO,iZAAC;QAAK,WAAW,IAAA,4HAAE,EAAC,eAAe;YAAE;YAAW;YAAM;QAAQ;QAAK,KAAK;QAAM,GAAG,KAAK;;;;;;AAC/F"}},
    {"offset": {"line": 1656, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/src/components/Link/index.tsx"],"sourcesContent":["import { Button, type ButtonProps } from '@/components/ui/button'\nimport { cn } from '@/utilities/ui'\nimport Link from 'next/link'\nimport React from 'react'\n\nimport type { Page } from '@/payload-types'\n\ntype CMSLinkType = {\n  appearance?: 'inline' | ButtonProps['variant']\n  children?: React.ReactNode\n  className?: string\n  label?: string | null\n  newTab?: boolean | null\n  reference?: {\n    relationTo: 'pages'\n    value: Page | string | number\n  } | null\n  size?: ButtonProps['size'] | null\n  type?: 'custom' | 'reference' | null\n  url?: string | null\n}\n\nexport const CMSLink: React.FC<CMSLinkType> = (props) => {\n  const {\n    type,\n    appearance = 'inline',\n    children,\n    className,\n    label,\n    newTab,\n    reference,\n    size: sizeFromProps,\n    url,\n  } = props\n\n  const href =\n    type === 'reference' && typeof reference?.value === 'object' && reference.value.slug\n      ? `${reference?.relationTo !== 'pages' ? `/${reference?.relationTo}` : ''}/${\n          reference.value.slug\n        }`\n      : url\n\n  if (!href) return null\n\n  const size = appearance === 'link' ? 'clear' : sizeFromProps\n  const newTabProps = newTab ? { rel: 'noopener noreferrer', target: '_blank' } : {}\n\n  /* Ensure we don't break any styles set by richText */\n  if (appearance === 'inline') {\n    return (\n      <Link className={cn(className)} href={href || url || ''} {...newTabProps}>\n        {label && label}\n        {children && children}\n      </Link>\n    )\n  }\n\n  return (\n    <Button asChild className={className} size={size} variant={appearance}>\n      <Link className={cn(className)} href={href || url || ''} {...newTabProps}>\n        {label && label}\n        {children && children}\n      </Link>\n    </Button>\n  )\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;AAoBO,MAAM,UAAiC,CAAC;IAC7C,MAAM,EACJ,IAAI,EACJ,aAAa,QAAQ,EACrB,QAAQ,EACR,SAAS,EACT,KAAK,EACL,MAAM,EACN,SAAS,EACT,MAAM,aAAa,EACnB,GAAG,EACJ,GAAG;IAEJ,MAAM,OACJ,SAAS,eAAe,OAAO,WAAW,UAAU,YAAY,UAAU,KAAK,CAAC,IAAI,GAChF,GAAG,WAAW,eAAe,UAAU,CAAC,CAAC,EAAE,WAAW,YAAY,GAAG,GAAG,CAAC,EACvE,UAAU,KAAK,CAAC,IAAI,EACpB,GACF;IAEN,IAAI,CAAC,MAAM,OAAO;IAElB,MAAM,OAAO,eAAe,SAAS,UAAU;IAC/C,MAAM,cAAc,SAAS;QAAE,KAAK;QAAuB,QAAQ;IAAS,IAAI,CAAC;IAEjF,oDAAoD,GACpD,IAAI,eAAe,UAAU;QAC3B,qBACE,iZAAC,6VAAI;YAAC,WAAW,IAAA,4HAAE,EAAC;YAAY,MAAM,QAAQ,OAAO;YAAK,GAAG,WAAW;;gBACrE,SAAS;gBACT,YAAY;;;;;;;IAGnB;IAEA,qBACE,iZAAC,4IAAM;QAAC,OAAO;QAAC,WAAW;QAAW,MAAM;QAAM,SAAS;kBACzD,cAAA,iZAAC,6VAAI;YAAC,WAAW,IAAA,4HAAE,EAAC;YAAY,MAAM,QAAQ,OAAO;YAAK,GAAG,WAAW;;gBACrE,SAAS;gBACT,YAAY;;;;;;;;;;;;AAIrB"}},
    {"offset": {"line": 1720, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/src/components/Logo/Logo.tsx"],"sourcesContent":["import clsx from 'clsx'\nimport React from 'react'\n\ninterface Props {\n  className?: string\n  loading?: 'lazy' | 'eager'\n  priority?: 'auto' | 'high' | 'low'\n}\n\nexport const Logo = (props: Props) => {\n  const { loading: loadingFromProps, priority: priorityFromProps, className } = props\n\n  const loading = loadingFromProps || 'lazy'\n  const priority = priorityFromProps || 'low'\n\n  return (\n    /* eslint-disable @next/next/no-img-element */\n    <img\n      alt=\"Payload Logo\"\n      width={193}\n      height={34}\n      loading={loading}\n      fetchPriority={priority}\n      decoding=\"async\"\n      className={clsx('max-w-[9.375rem] w-full h-[34px]', className)}\n      src=\"https://raw.githubusercontent.com/payloadcms/payload/main/packages/ui/src/assets/payload-logo-light.svg\"\n    />\n  )\n}\n"],"names":[],"mappings":";;;;;AAAA;;;AASO,MAAM,OAAO,CAAC;IACnB,MAAM,EAAE,SAAS,gBAAgB,EAAE,UAAU,iBAAiB,EAAE,SAAS,EAAE,GAAG;IAE9E,MAAM,UAAU,oBAAoB;IACpC,MAAM,WAAW,qBAAqB;IAEtC,OACE,4CAA4C,iBAC5C,iZAAC;QACC,KAAI;QACJ,OAAO;QACP,QAAQ;QACR,SAAS;QACT,eAAe;QACf,UAAS;QACT,WAAW,IAAA,iMAAI,EAAC,oCAAoC;QACpD,KAAI;;;;;;AAGV"}},
    {"offset": {"line": 1753, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/src/Footer/Component.tsx"],"sourcesContent":["import { getCachedGlobal } from '@/utilities/getGlobals'\nimport Link from 'next/link'\nimport React from 'react'\n\nimport type { Footer } from '@/payload-types'\n\nimport { CMSLink } from '@/components/Link'\nimport { Logo } from '@/components/Logo/Logo'\n\nexport async function Footer() {\n  const footerData: Footer = await getCachedGlobal('footer', 1)()\n\n  const navItems = footerData?.navItems || []\n\n  return (\n    <footer className=\"mt-auto border-t border-border bg-black dark:bg-card text-white\">\n      <div className=\"container py-8 gap-8 flex flex-col md:flex-row md:justify-between\">\n        <Link className=\"flex items-center\" href=\"/\">\n          <Logo />\n        </Link>\n\n        <div className=\"flex flex-col-reverse items-start md:flex-row gap-4 md:items-center\">\n          <nav className=\"flex flex-col md:flex-row gap-4\">\n            {navItems.map(({ link }, i) => {\n              return <CMSLink className=\"text-white\" key={i} {...link} />\n            })}\n          </nav>\n        </div>\n      </div>\n    </footer>\n  )\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAKA;AACA;;;;;;;;;;AAEO,eAAe;IACpB,MAAM,aAAqB,MAAM,IAAA,iJAAe,EAAC,UAAU;IAE3D,MAAM,WAAW,YAAY,YAAY,EAAE;IAE3C,qBACE,iZAAC;QAAO,WAAU;kBAChB,cAAA,iZAAC;YAAI,WAAU;;8BACb,iZAAC,6VAAI;oBAAC,WAAU;oBAAoB,MAAK;8BACvC,cAAA,iZAAC,0IAAI;;;;;;;;;;8BAGP,iZAAC;oBAAI,WAAU;8BACb,cAAA,iZAAC;wBAAI,WAAU;kCACZ,SAAS,GAAG,CAAC,CAAC,EAAE,IAAI,EAAE,EAAE;4BACvB,qBAAO,iZAAC,8IAAO;gCAAC,WAAU;gCAAsB,GAAG,IAAI;+BAAX;;;;;wBAC9C;;;;;;;;;;;;;;;;;;;;;;AAMZ"}},
    {"offset": {"line": 1833, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/src/Header/Component.client.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const HeaderClient = registerClientReference(\n    function() { throw new Error(\"Attempted to call HeaderClient() from the server but HeaderClient is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/Header/Component.client.tsx <module evaluation>\",\n    \"HeaderClient\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,eAAe,IAAA,2aAAuB,EAC/C;IAAa,MAAM,IAAI,MAAM;AAAwO,GACrQ,iEACA","ignoreList":[0]}},
    {"offset": {"line": 1847, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/src/Header/Component.client.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const HeaderClient = registerClientReference(\n    function() { throw new Error(\"Attempted to call HeaderClient() from the server but HeaderClient is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/Header/Component.client.tsx\",\n    \"HeaderClient\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,eAAe,IAAA,2aAAuB,EAC/C;IAAa,MAAM,IAAI,MAAM;AAAwO,GACrQ,6CACA","ignoreList":[0]}},
    {"offset": {"line": 1861, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 1871, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/src/Header/Component.tsx"],"sourcesContent":["import { HeaderClient } from './Component.client'\nimport { getCachedGlobal } from '@/utilities/getGlobals'\nimport React from 'react'\n\nimport type { Header } from '@/payload-types'\n\nexport async function Header() {\n  const headerData: Header = await getCachedGlobal('header', 1)()\n\n  return <HeaderClient data={headerData} />\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;;;;;AAKO,eAAe;IACpB,MAAM,aAAqB,MAAM,IAAA,iJAAe,EAAC,UAAU;IAE3D,qBAAO,iZAAC,qJAAY;QAAC,MAAM;;;;;;AAC7B"}},
    {"offset": {"line": 1902, "column": 0}, "map": {"version":3,"sources":["file:///Users/stefaniedoll/websites/prepublic/epaper-backend/src/app/%28app%29/layout.tsx"],"sourcesContent":["import React from 'react'\n\nimport { Footer } from '@/Footer/Component'\nimport { Header } from '@/Header/Component'\n\nimport './index.scss'\n\nconst baseClass = 'multi-tenant'\n\nexport const metadata = {\n  description: 'Generated by Next.js',\n  title: 'Next.js',\n}\n\n// eslint-disable-next-line no-restricted-exports\nexport default function RootLayout({ children }: { children: React.ReactNode }) {\n  return (\n    <html className={baseClass} lang=\"en\">  \n      <body>\n        <Header />\n        {children}\n        <Footer />\n      </body>\n    </html>\n  )\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;;;;;;;;;;AAIA,MAAM,YAAY;AAEX,MAAM,WAAW;IACtB,aAAa;IACb,OAAO;AACT;AAGe,SAAS,WAAW,EAAE,QAAQ,EAAiC;IAC5E,qBACE,iZAAC;QAAK,WAAW;QAAW,MAAK;kBAC/B,cAAA,iZAAC;;8BACC,iZAAC,qIAAM;;;;;gBACN;8BACD,iZAAC,qIAAM;;;;;;;;;;;;;;;;AAIf"}}]
}